/*!
 * jQuery JavaScript Library v1.11.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-17T15:27Z
 */

/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */

//     (c) 2010-2011 Jeremy Ashkenas, DocumentCloud Inc.
//     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/**
 * @preserve console-shim 1.0.2
 * https://github.com/kayahr/console-shim
 * Copyright (C) 2011 Klaus Reimer <k@ailis.de>
 * Licensed under the MIT license
 * (See http://www.opensource.org/licenses/mit-license)
 */

/*!
* PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2010 gskinner.com, inc.
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/

/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */

/*!
 * @license EaselJS
 * Visit http://createjs.com/ for documentation, updates and examples.
 *
 * Copyright (c) 2011-2013 gskinner.com, inc.
 *
 * Distributed under the terms of the MIT license.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of the Software.
 */

/*!
* @license TweenJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

/*!
* @license EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

/*!
* @license SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/

/**
 * @license
 * pixi.js - v2.2.8
 * Copyright (c) 2012-2014, Mat Groves
 * http://goodboydigital.com/
 *
 * Compiled: 2015-03-15
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */

// MIT license

/*
    PolyK library
    url: http://polyk.ivank.net
    Released under MIT licence.

    Copyright (c) 2012 Ivan Kuckir

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.

    This is an amazing lib!

    Slightly modified by Mat Groves (matgroves.com);
*/

/**
 * @author Mat Groves http://matgroves.com/ @Doormat23
 * @copyright Mat Groves, Rovanion Luckey
 */

/******************************************************************************
 * Spine Runtimes Software License
 * Version 2.1
 *
 * Copyright (c) 2013, Esoteric Software
 * All rights reserved.
 *
 * You are granted a perpetual, non-exclusive, non-sublicensable and
 * non-transferable license to install, execute and perform the Spine Runtimes
 * Software (the "Software") solely for internal use. Without the written
 * permission of Esoteric Software (typically granted by licensing Spine), you
 * may not (a) modify, translate, adapt or otherwise create derivative works,
 * improvements of the Software or develop new applications using the Software
 * or (b) remove, delete, alter or obscure any trademarks or any copyright,
 * trademark, patent or other intellectual property or proprietary rights
 * notices on or in the Software, including any copy thereof. Redistributions
 * in binary or source form must include this license and terms.
 *
 * THIS SOFTWARE IS PROVIDED BY ESOTERIC SOFTWARE "AS IS" AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
 * EVENT SHALL ESOTERIC SOFTARE BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *****************************************************************************/

// Based on code by Ryan Juckett with permission: Copyright (c) 2008-2009 Ryan Juckett, http://www.ryanjuckett.com/

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*!
 * VERSION: 1.13.1
 * DATE: 2014-07-19
 * UPDATES AND DOCS AT: http://www.greensock.com
 * 
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2014, GreenSock. All rights reserved.
 * This work is subject to the terms at http://www.greensock.com/terms_of_use.html or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/

/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */

/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

/**
 * @version 1.0.11
 * @link https://github.com/gajus/brim for the canonical source repository
 * @license https://github.com/gajus/brim/blob/master/LICENSE BSD 3-Clause
 */

/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/

/**
 * @version 2.0.9
 * @link https://github.com/gajus/scream for the canonical source repository
 * @license https://github.com/gajus/scream/blob/master/LICENSE BSD 3-Clause
 */

!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=nt.type(e);return"function"===i||nt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function s(e,t,i){if(nt.isFunction(t))return nt.grep(e,function(e,s){return!!t.call(e,s,e)!==i});if(t.nodeType)return nt.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ut.test(t))return nt.filter(t,e,i);t=nt.filter(t,e)}return nt.grep(e,function(e){return nt.inArray(e,t)>=0!==i})}function n(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=yt[e]={};return nt.each(e.match(Et)||[],function(e,i){t[i]=!0}),t}function r(){pt.addEventListener?(pt.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1)):(pt.detachEvent("onreadystatechange",a),e.detachEvent("onload",a))}function a(){(pt.addEventListener||"load"===event.type||"complete"===pt.readyState)&&(r(),nt.ready())}function h(e,t,i){if(void 0===i&&1===e.nodeType){var s="data-"+t.replace(bt,"-$1").toLowerCase();if(i=e.getAttribute(s),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:wt.test(i)?nt.parseJSON(i):i}catch(n){}nt.data(e,t,i)}else i=void 0}return i}function l(e){var t;for(t in e)if(("data"!==t||!nt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,i,s){if(nt.acceptData(e)){var n,o,r=nt.expando,a=e.nodeType,h=a?nt.cache:e,l=a?e[r]:e[r]&&r;if(l&&h[l]&&(s||h[l].data)||void 0!==i||"string"!=typeof t)return l||(l=a?e[r]=K.pop()||nt.guid++:r),h[l]||(h[l]=a?{}:{toJSON:nt.noop}),("object"==typeof t||"function"==typeof t)&&(s?h[l]=nt.extend(h[l],t):h[l].data=nt.extend(h[l].data,t)),o=h[l],s||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[nt.camelCase(t)]=i),"string"==typeof t?(n=o[t],null==n&&(n=o[nt.camelCase(t)])):n=o,n}}function d(e,t,i){if(nt.acceptData(e)){var s,n,o=e.nodeType,r=o?nt.cache:e,a=o?e[nt.expando]:nt.expando;if(r[a]){if(t&&(s=i?r[a]:r[a].data)){nt.isArray(t)?t=t.concat(nt.map(t,nt.camelCase)):t in s?t=[t]:(t=nt.camelCase(t),t=t in s?[t]:t.split(" ")),n=t.length;for(;n--;)delete s[t[n]];if(i?!l(s):!nt.isEmptyObject(s))return}(i||(delete r[a].data,l(r[a])))&&(o?nt.cleanData([e],!0):it.deleteExpando||r!=r.window?delete r[a]:r[a]=null)}}}function u(){return!0}function g(){return!1}function p(){try{return pt.activeElement}catch(e){}}function m(e){var t=kt.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function _(e,t){var i,s,n=0,o=typeof e.getElementsByTagName!==Ct?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ct?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],i=e.childNodes||e;null!=(s=i[n]);n++)!t||nt.nodeName(s,t)?o.push(s):nt.merge(o,_(s,t));return void 0===t||t&&nt.nodeName(e,t)?nt.merge([e],o):o}function f(e){It.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t){return nt.nodeName(e,"table")&&nt.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function E(e){return e.type=(null!==nt.find.attr(e,"type"))+"/"+e.type,e}function y(e){var t=qt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){for(var i,s=0;null!=(i=e[s]);s++)nt._data(i,"globalEval",!t||nt._data(t[s],"globalEval"))}function S(e,t){if(1===t.nodeType&&nt.hasData(e)){var i,s,n,o=nt._data(e),r=nt._data(t,o),a=o.events;if(a){delete r.handle,r.events={};for(i in a)for(s=0,n=a[i].length;n>s;s++)nt.event.add(t,i,a[i][s])}r.data&&(r.data=nt.extend({},r.data))}}function C(e,t){var i,s,n;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!it.noCloneEvent&&t[nt.expando]){n=nt._data(t);for(s in n.events)nt.removeEvent(t,s,n.handle);t.removeAttribute(nt.expando)}"script"===i&&t.text!==e.text?(E(t).text=e.text,y(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),it.html5Clone&&e.innerHTML&&!nt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&It.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function w(t,i){var s,n=nt(i.createElement(t)).appendTo(i.body),o=e.getDefaultComputedStyle&&(s=e.getDefaultComputedStyle(n[0]))?s.display:nt.css(n[0],"display");return n.detach(),o}function b(e){var t=pt,i=$t[e];return i||(i=w(e,t),"none"!==i&&i||(Zt=(Zt||nt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Zt[0].contentWindow||Zt[0].contentDocument).document,t.write(),t.close(),i=w(e,t),Zt.detach()),$t[e]=i),i}function A(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}function L(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),s=t,n=ui.length;n--;)if(t=ui[n]+i,t in e)return t;return s}function x(e,t){for(var i,s,n,o=[],r=0,a=e.length;a>r;r++)s=e[r],s.style&&(o[r]=nt._data(s,"olddisplay"),i=s.style.display,t?(o[r]||"none"!==i||(s.style.display=""),""===s.style.display&&xt(s)&&(o[r]=nt._data(s,"olddisplay",b(s.nodeName)))):(n=xt(s),(i&&"none"!==i||!n)&&nt._data(s,"olddisplay",n?i:nt.css(s,"display"))));for(r=0;a>r;r++)s=e[r],s.style&&(t&&"none"!==s.style.display&&""!==s.style.display||(s.style.display=t?o[r]||"":"none"));return e}function M(e,t,i){var s=hi.exec(t);return s?Math.max(0,s[1]-(i||0))+(s[2]||"px"):t}function I(e,t,i,s,n){for(var o=i===(s?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=nt.css(e,i+Lt[o],!0,n)),s?("content"===i&&(r-=nt.css(e,"padding"+Lt[o],!0,n)),"margin"!==i&&(r-=nt.css(e,"border"+Lt[o]+"Width",!0,n))):(r+=nt.css(e,"padding"+Lt[o],!0,n),"padding"!==i&&(r+=nt.css(e,"border"+Lt[o]+"Width",!0,n)));return r}function O(e,t,i){var s=!0,n="width"===t?e.offsetWidth:e.offsetHeight,o=ei(e),r=it.boxSizing&&"border-box"===nt.css(e,"boxSizing",!1,o);if(0>=n||null==n){if(n=ti(e,t,o),(0>n||null==n)&&(n=e.style[t]),si.test(n))return n;s=r&&(it.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+I(e,t,i||(r?"border":"content"),s,o)+"px"}function R(e,t,i,s,n){return new R.prototype.init(e,t,i,s,n)}function N(){return setTimeout(function(){gi=void 0}),gi=nt.now()}function P(e,t){var i,s={height:e},n=0;for(t=t?1:0;4>n;n+=2-t)i=Lt[n],s["margin"+i]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function D(e,t,i){for(var s,n=(Ei[t]||[]).concat(Ei["*"]),o=0,r=n.length;r>o;o++)if(s=n[o].call(i,t,e))return s}function k(e,t,i){var s,n,o,r,a,h,l,c,d=this,u={},g=e.style,p=e.nodeType&&xt(e),m=nt._data(e,"fxshow");i.queue||(a=nt._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,h=a.empty.fire,a.empty.fire=function(){a.unqueued||h()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,nt.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[g.overflow,g.overflowX,g.overflowY],l=nt.css(e,"display"),c="none"===l?nt._data(e,"olddisplay")||b(e.nodeName):l,"inline"===c&&"none"===nt.css(e,"float")&&(it.inlineBlockNeedsLayout&&"inline"!==b(e.nodeName)?g.zoom=1:g.display="inline-block")),i.overflow&&(g.overflow="hidden",it.shrinkWrapBlocks()||d.always(function(){g.overflow=i.overflow[0],g.overflowX=i.overflow[1],g.overflowY=i.overflow[2]}));for(s in t)if(n=t[s],mi.exec(n)){if(delete t[s],o=o||"toggle"===n,n===(p?"hide":"show")){if("show"!==n||!m||void 0===m[s])continue;p=!0}u[s]=m&&m[s]||nt.style(e,s)}else l=void 0;if(nt.isEmptyObject(u))"inline"===("none"===l?b(e.nodeName):l)&&(g.display=l);else{m?"hidden"in m&&(p=m.hidden):m=nt._data(e,"fxshow",{}),o&&(m.hidden=!p),p?nt(e).show():d.done(function(){nt(e).hide()}),d.done(function(){var t;nt._removeData(e,"fxshow");for(t in u)nt.style(e,t,u[t])});for(s in u)r=D(p?m[s]:0,s,d),s in m||(m[s]=r.start,p&&(r.end=r.start,r.start="width"===s||"height"===s?1:0))}}function B(e,t){var i,s,n,o,r;for(i in e)if(s=nt.camelCase(i),n=t[s],o=e[i],nt.isArray(o)&&(n=o[1],o=e[i]=o[0]),i!==s&&(e[s]=o,delete e[i]),r=nt.cssHooks[s],r&&"expand"in r){o=r.expand(o),delete e[s];for(i in o)i in e||(e[i]=o[i],t[i]=n)}else t[s]=n}function U(e,t,i){var s,n,o=0,r=vi.length,a=nt.Deferred().always(function(){delete h.elem}),h=function(){if(n)return!1;for(var t=gi||N(),i=Math.max(0,l.startTime+l.duration-t),s=i/l.duration||0,o=1-s,r=0,h=l.tweens.length;h>r;r++)l.tweens[r].run(o);return a.notifyWith(e,[l,o,i]),1>o&&h?i:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:nt.extend({},t),opts:nt.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:gi||N(),duration:i.duration,tweens:[],createTween:function(t,i){var s=nt.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(s),s},stop:function(t){var i=0,s=t?l.tweens.length:0;if(n)return this;for(n=!0;s>i;i++)l.tweens[i].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(B(c,l.opts.specialEasing);r>o;o++)if(s=vi[o].call(l,e,c,l.opts))return s;return nt.map(c,D,l),nt.isFunction(l.opts.start)&&l.opts.start.call(e,l),nt.fx.timer(nt.extend(h,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function H(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var s,n=0,o=t.toLowerCase().match(Et)||[];if(nt.isFunction(i))for(;s=o[n++];)"+"===s.charAt(0)?(s=s.slice(1)||"*",(e[s]=e[s]||[]).unshift(i)):(e[s]=e[s]||[]).push(i)}}function G(e,t,i,s){function n(a){var h;return o[a]=!0,nt.each(e[a]||[],function(e,a){var l=a(t,i,s);return"string"!=typeof l||r||o[l]?r?!(h=l):void 0:(t.dataTypes.unshift(l),n(l),!1)}),h}var o={},r=e===Wi;return n(t.dataTypes[0])||!o["*"]&&n("*")}function V(e,t){var i,s,n=nt.ajaxSettings.flatOptions||{};for(s in t)void 0!==t[s]&&((n[s]?e:i||(i={}))[s]=t[s]);return i&&nt.extend(!0,e,i),e}function F(e,t,i){for(var s,n,o,r,a=e.contents,h=e.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in a)if(a[r]&&a[r].test(n)){h.unshift(r);break}if(h[0]in i)o=h[0];else{for(r in i){if(!h[0]||e.converters[r+" "+h[0]]){o=r;break}s||(s=r)}o=o||s}return o?(o!==h[0]&&h.unshift(o),i[o]):void 0}function W(e,t,i,s){var n,o,r,a,h,l={},c=e.dataTypes.slice();if(c[1])for(r in e.converters)l[r.toLowerCase()]=e.converters[r];for(o=c.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!h&&s&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),h=o,o=c.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(r=l[h+" "+o]||l["* "+o],!r)for(n in l)if(a=n.split(" "),a[1]===o&&(r=l[h+" "+a[0]]||l["* "+a[0]])){r===!0?r=l[n]:l[n]!==!0&&(o=a[0],c.unshift(a[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+h+" to "+o}}}return{state:"success",data:t}}function j(e,t,i,s){var n;if(nt.isArray(t))nt.each(t,function(t,n){i||qi.test(e)?s(e,n):j(e+"["+("object"==typeof n?t:"")+"]",n,i,s)});else if(i||"object"!==nt.type(t))s(e,t);else for(n in t)j(e+"["+n+"]",t[n],i,s)}function Y(){try{return new e.XMLHttpRequest}catch(t){}}function X(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function q(e){return nt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var K=[],z=K.slice,Q=K.concat,J=K.push,Z=K.indexOf,$={},et=$.toString,tt=$.hasOwnProperty,it={},st="1.11.2",nt=function(e,t){return new nt.fn.init(e,t)},ot=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rt=/^-ms-/,at=/-([\da-z])/gi,ht=function(e,t){return t.toUpperCase()};nt.fn=nt.prototype={jquery:st,constructor:nt,selector:"",length:0,toArray:function(){return z.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:z.call(this)},pushStack:function(e){var t=nt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return nt.each(this,e,t)},map:function(e){return this.pushStack(nt.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:K.sort,splice:K.splice},nt.extend=nt.fn.extend=function(){var e,t,i,s,n,o,r=arguments[0]||{},a=1,h=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==typeof r||nt.isFunction(r)||(r={}),a===h&&(r=this,a--);h>a;a++)if(null!=(n=arguments[a]))for(s in n)e=r[s],i=n[s],r!==i&&(l&&i&&(nt.isPlainObject(i)||(t=nt.isArray(i)))?(t?(t=!1,o=e&&nt.isArray(e)?e:[]):o=e&&nt.isPlainObject(e)?e:{},r[s]=nt.extend(l,o,i)):void 0!==i&&(r[s]=i));return r},nt.extend({expando:"jQuery"+(st+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===nt.type(e)},isArray:Array.isArray||function(e){return"array"===nt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!nt.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==nt.type(e)||e.nodeType||nt.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,"constructor")&&!tt.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(it.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?$[et.call(e)]||"object":typeof e},globalEval:function(t){t&&nt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(rt,"ms-").replace(at,ht)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,s){var n,o=0,r=e.length,a=i(e);if(s){if(a)for(;r>o&&(n=t.apply(e[o],s),n!==!1);o++);else for(o in e)if(n=t.apply(e[o],s),n===!1)break}else if(a)for(;r>o&&(n=t.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(n=t.call(e[o],o,e[o]),n===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ot,"")},makeArray:function(e,t){var s=t||[];return null!=e&&(i(Object(e))?nt.merge(s,"string"==typeof e?[e]:e):J.call(s,e)),s},inArray:function(e,t,i){var s;if(t){if(Z)return Z.call(t,e,i);for(s=t.length,i=i?0>i?Math.max(0,s+i):i:0;s>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,s=0,n=e.length;i>s;)e[n++]=t[s++];if(i!==i)for(;void 0!==t[s];)e[n++]=t[s++];return e.length=n,e},grep:function(e,t,i){for(var s,n=[],o=0,r=e.length,a=!i;r>o;o++)s=!t(e[o],o),s!==a&&n.push(e[o]);return n},map:function(e,t,s){var n,o=0,r=e.length,a=i(e),h=[];if(a)for(;r>o;o++)n=t(e[o],o,s),null!=n&&h.push(n);else for(o in e)n=t(e[o],o,s),null!=n&&h.push(n);return Q.apply([],h)},guid:1,proxy:function(e,t){var i,s,n;return"string"==typeof t&&(n=e[t],t=e,e=n),nt.isFunction(e)?(i=z.call(arguments,2),s=function(){return e.apply(t||this,i.concat(z.call(arguments)))},s.guid=e.guid=e.guid||nt.guid++,s):void 0},now:function(){return+new Date},support:it}),nt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){$["[object "+t+"]"]=t.toLowerCase()});var lt=function(e){function t(e,t,i,s){var n,o,r,a,h,l,d,g,p,m;if((t?t.ownerDocument||t:G)!==R&&O(t),t=t||R,i=i||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return i;if(!s&&P){if(11!==a&&(n=vt.exec(e)))if(r=n[1]){if(9===a){if(o=t.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(r))&&U(t,o)&&o.id===r)return i.push(o),i}else{if(n[2])return Z.apply(i,t.getElementsByTagName(e)),i;if((r=n[3])&&T.getElementsByClassName)return Z.apply(i,t.getElementsByClassName(r)),i}if(T.qsa&&(!D||!D.test(e))){if(g=d=H,p=t,m=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=b(e),(d=t.getAttribute("id"))?g=d.replace(yt,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",h=l.length;h--;)l[h]=g+u(l[h]);p=Et.test(e)&&c(t.parentNode)||t,m=l.join(",")}if(m)try{return Z.apply(i,p.querySelectorAll(m)),i}catch(_){}finally{d||t.removeAttribute("id")}}}return L(e.replace(ht,"$1"),t,i,s)}function i(){function e(i,s){return t.push(i+" ")>S.cacheLength&&delete e[t.shift()],e[i+" "]=s}var t=[];return e}function s(e){return e[H]=!0,e}function n(e){var t=R.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),s=e.length;s--;)S.attrHandle[i[s]]=t}function r(e,t){var i=t&&e,s=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(s)return s;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function a(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function h(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function l(e){return s(function(t){return t=+t,s(function(i,s){for(var n,o=e([],i.length,t),r=o.length;r--;)i[n=o[r]]&&(i[n]=!(s[n]=i[n]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function u(e){for(var t=0,i=e.length,s="";i>t;t++)s+=e[t].value;return s}function g(e,t,i){var s=t.dir,n=i&&"parentNode"===s,o=F++;return t.first?function(t,i,o){for(;t=t[s];)if(1===t.nodeType||n)return e(t,i,o)}:function(t,i,r){var a,h,l=[V,o];if(r){for(;t=t[s];)if((1===t.nodeType||n)&&e(t,i,r))return!0}else for(;t=t[s];)if(1===t.nodeType||n){if(h=t[H]||(t[H]={}),(a=h[s])&&a[0]===V&&a[1]===o)return l[2]=a[2];if(h[s]=l,l[2]=e(t,i,r))return!0}}}function p(e){return e.length>1?function(t,i,s){for(var n=e.length;n--;)if(!e[n](t,i,s))return!1;return!0}:e[0]}function m(e,i,s){for(var n=0,o=i.length;o>n;n++)t(e,i[n],s);return s}function _(e,t,i,s,n){for(var o,r=[],a=0,h=e.length,l=null!=t;h>a;a++)(o=e[a])&&(!i||i(o,s,n))&&(r.push(o),l&&t.push(a));return r}function f(e,t,i,n,o,r){return n&&!n[H]&&(n=f(n)),o&&!o[H]&&(o=f(o,r)),s(function(s,r,a,h){var l,c,d,u=[],g=[],p=r.length,f=s||m(t||"*",a.nodeType?[a]:a,[]),v=!e||!s&&t?f:_(f,u,e,a,h),E=i?o||(s?e:p||n)?[]:r:v;if(i&&i(v,E,a,h),n)for(l=_(E,g),n(l,[],a,h),c=l.length;c--;)(d=l[c])&&(E[g[c]]=!(v[g[c]]=d));if(s){if(o||e){if(o){for(l=[],c=E.length;c--;)(d=E[c])&&l.push(v[c]=d);o(null,E=[],l,h)}for(c=E.length;c--;)(d=E[c])&&(l=o?et(s,d):u[c])>-1&&(s[l]=!(r[l]=d))}}else E=_(E===r?E.splice(p,E.length):E),o?o(null,r,E,h):Z.apply(r,E)})}function v(e){for(var t,i,s,n=e.length,o=S.relative[e[0].type],r=o||S.relative[" "],a=o?1:0,h=g(function(e){return e===t},r,!0),l=g(function(e){return et(t,e)>-1},r,!0),c=[function(e,i,s){var n=!o&&(s||i!==x)||((t=i).nodeType?h(e,i,s):l(e,i,s));return t=null,n}];n>a;a++)if(i=S.relative[e[a].type])c=[g(p(c),i)];else{if(i=S.filter[e[a].type].apply(null,e[a].matches),i[H]){for(s=++a;n>s&&!S.relative[e[s].type];s++);return f(a>1&&p(c),a>1&&u(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ht,"$1"),i,s>a&&v(e.slice(a,s)),n>s&&v(e=e.slice(s)),n>s&&u(e))}c.push(i)}return p(c)}function E(e,i){var n=i.length>0,o=e.length>0,r=function(s,r,a,h,l){var c,d,u,g=0,p="0",m=s&&[],f=[],v=x,E=s||o&&S.find.TAG("*",l),y=V+=null==v?1:Math.random()||.1,T=E.length;for(l&&(x=r!==R&&r);p!==T&&null!=(c=E[p]);p++){if(o&&c){for(d=0;u=e[d++];)if(u(c,r,a)){h.push(c);break}l&&(V=y)}n&&((c=!u&&c)&&g--,s&&m.push(c))}if(g+=p,n&&p!==g){for(d=0;u=i[d++];)u(m,f,r,a);if(s){if(g>0)for(;p--;)m[p]||f[p]||(f[p]=Q.call(h));f=_(f)}Z.apply(h,f),l&&!s&&f.length>0&&g+i.length>1&&t.uniqueSort(h)}return l&&(V=y,x=v),m};return n?s(r):r}var y,T,S,C,w,b,A,L,x,M,I,O,R,N,P,D,k,B,U,H="sizzle"+1*new Date,G=e.document,V=0,F=0,W=i(),j=i(),Y=i(),X=function(e,t){return e===t&&(I=!0),0},q=1<<31,K={}.hasOwnProperty,z=[],Q=z.pop,J=z.push,Z=z.push,$=z.slice,et=function(e,t){for(var i=0,s=e.length;s>i;i++)if(e[i]===t)return i;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=st.replace("w","w#"),ot="\\["+it+"*("+st+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nt+"))|)"+it+"*\\]",rt=":("+st+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",at=new RegExp(it+"+","g"),ht=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),lt=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),dt=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ut=new RegExp(rt),gt=new RegExp("^"+nt+"$"),pt={ID:new RegExp("^#("+st+")"),CLASS:new RegExp("^\\.("+st+")"),TAG:new RegExp("^("+st.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,_t=/^h\d$/i,ft=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Et=/[+~]/,yt=/'|\\/g,Tt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),St=function(e,t,i){var s="0x"+t-65536;return s!==s||i?t:0>s?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,1023&s|56320)},Ct=function(){O()};try{Z.apply(z=$.call(G.childNodes),G.childNodes),z[G.childNodes.length].nodeType}catch(wt){Z={apply:z.length?function(e,t){J.apply(e,$.call(t))}:function(e,t){for(var i=e.length,s=0;e[i++]=t[s++];);e.length=i-1}}}T=t.support={},w=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},O=t.setDocument=function(e){var t,i,s=e?e.ownerDocument||e:G;return s!==R&&9===s.nodeType&&s.documentElement?(R=s,N=s.documentElement,i=s.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",Ct,!1):i.attachEvent&&i.attachEvent("onunload",Ct)),P=!w(s),T.attributes=n(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=n(function(e){return e.appendChild(s.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=ft.test(s.getElementsByClassName),T.getById=n(function(e){return N.appendChild(e).id=H,!s.getElementsByName||!s.getElementsByName(H).length}),T.getById?(S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},S.filter.ID=function(e){var t=e.replace(Tt,St);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var t=e.replace(Tt,St);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),S.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,s=[],n=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[n++];)1===i.nodeType&&s.push(i);return s}return o},S.find.CLASS=T.getElementsByClassName&&function(e,t){return P?t.getElementsByClassName(e):void 0},k=[],D=[],(T.qsa=ft.test(s.querySelectorAll))&&(n(function(e){N.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+it+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+H+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||D.push(".#.+[+~]")}),n(function(e){var t=s.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(T.matchesSelector=ft.test(B=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&n(function(e){T.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),k.push("!=",rt)}),D=D.length&&new RegExp(D.join("|")),k=k.length&&new RegExp(k.join("|")),t=ft.test(N.compareDocumentPosition),U=t||ft.test(N.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,s=t&&t.parentNode;return e===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):e.compareDocumentPosition&&16&e.compareDocumentPosition(s)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},X=t?function(e,t){if(e===t)return I=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!T.sortDetached&&t.compareDocumentPosition(e)===i?e===s||e.ownerDocument===G&&U(G,e)?-1:t===s||t.ownerDocument===G&&U(G,t)?1:M?et(M,e)-et(M,t):0:4&i?-1:1)}:function(e,t){if(e===t)return I=!0,0;var i,n=0,o=e.parentNode,a=t.parentNode,h=[e],l=[t];if(!o||!a)return e===s?-1:t===s?1:o?-1:a?1:M?et(M,e)-et(M,t):0;if(o===a)return r(e,t);for(i=e;i=i.parentNode;)h.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;h[n]===l[n];)n++;return n?r(h[n],l[n]):h[n]===G?-1:l[n]===G?1:0},s):R},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==R&&O(e),i=i.replace(dt,"='$1']"),!(!T.matchesSelector||!P||k&&k.test(i)||D&&D.test(i)))try{var s=B.call(e,i);if(s||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return s}catch(n){}return t(i,R,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==R&&O(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==R&&O(e);var i=S.attrHandle[t.toLowerCase()],s=i&&K.call(S.attrHandle,t.toLowerCase())?i(e,t,!P):void 0;return void 0!==s?s:T.attributes||!P?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],s=0,n=0;if(I=!T.detectDuplicates,M=!T.sortStable&&e.slice(0),e.sort(X),I){for(;t=e[n++];)t===e[n]&&(s=i.push(n));for(;s--;)e.splice(i[s],1)}return M=null,e},C=t.getText=function(e){var t,i="",s=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=C(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[s++];)i+=C(t);return i},S=t.selectors={cacheLength:50,createPseudo:s,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Tt,St),e[3]=(e[3]||e[4]||e[5]||"").replace(Tt,St),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ut.test(i)&&(t=b(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Tt,St).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,s){return function(n){var o=t.attr(n,e);return null==o?"!="===i:i?(o+="","="===i?o===s:"!="===i?o!==s:"^="===i?s&&0===o.indexOf(s):"*="===i?s&&o.indexOf(s)>-1:"$="===i?s&&o.slice(-s.length)===s:"~="===i?(" "+o.replace(at," ")+" ").indexOf(s)>-1:"|="===i?o===s||o.slice(0,s.length+1)===s+"-":!1):!0}},CHILD:function(e,t,i,s,n){var o="nth"!==e.slice(0,3),r="last"!==e.slice(-4),a="of-type"===t;return 1===s&&0===n?function(e){return!!e.parentNode}:function(t,i,h){var l,c,d,u,g,p,m=o!==r?"nextSibling":"previousSibling",_=t.parentNode,f=a&&t.nodeName.toLowerCase(),v=!h&&!a;if(_){if(o){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===f:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[r?_.firstChild:_.lastChild],r&&v){for(c=_[H]||(_[H]={}),l=c[e]||[],g=l[0]===V&&l[1],u=l[0]===V&&l[2],d=g&&_.childNodes[g];d=++g&&d&&d[m]||(u=g=0)||p.pop();)if(1===d.nodeType&&++u&&d===t){c[e]=[V,g,u];break}}else if(v&&(l=(t[H]||(t[H]={}))[e])&&l[0]===V)u=l[1];else for(;(d=++g&&d&&d[m]||(u=g=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==f:1!==d.nodeType)||!++u||(v&&((d[H]||(d[H]={}))[e]=[V,u]),d!==t)););return u-=n,u===s||u%s===0&&u/s>=0}}},PSEUDO:function(e,i){var n,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[H]?o(i):o.length>1?(n=[e,e,"",i],S.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,t){for(var s,n=o(e,i),r=n.length;r--;)s=et(e,n[r]),e[s]=!(t[s]=n[r])}):function(e){return o(e,0,n)}):o}},pseudos:{not:s(function(e){var t=[],i=[],n=A(e.replace(ht,"$1"));return n[H]?s(function(e,t,i,s){for(var o,r=n(e,null,s,[]),a=e.length;a--;)(o=r[a])&&(e[a]=!(t[a]=o))}):function(e,s,o){return t[0]=e,n(t,null,o,i),t[0]=null,!i.pop()}}),has:s(function(e){return function(i){return t(e,i).length>0}}),contains:s(function(e){return e=e.replace(Tt,St),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:s(function(e){return gt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Tt,St).toLowerCase(),function(t){var i;do if(i=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===R.activeElement&&(!R.hasFocus||R.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return _t.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,i){return[0>i?i+t:i]}),even:l(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:l(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:l(function(e,t,i){for(var s=0>i?i+t:i;--s>=0;)e.push(s);return e}),gt:l(function(e,t,i){for(var s=0>i?i+t:i;++s<t;)e.push(s);return e})}},S.pseudos.nth=S.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[y]=a(y);for(y in{submit:!0,reset:!0})S.pseudos[y]=h(y);return d.prototype=S.filters=S.pseudos,S.setFilters=new d,b=t.tokenize=function(e,i){var s,n,o,r,a,h,l,c=j[e+" "];if(c)return i?0:c.slice(0);for(a=e,h=[],l=S.preFilter;a;){(!s||(n=lt.exec(a)))&&(n&&(a=a.slice(n[0].length)||a),h.push(o=[])),s=!1,(n=ct.exec(a))&&(s=n.shift(),o.push({value:s,type:n[0].replace(ht," ")}),a=a.slice(s.length));for(r in S.filter)!(n=pt[r].exec(a))||l[r]&&!(n=l[r](n))||(s=n.shift(),o.push({value:s,type:r,matches:n}),a=a.slice(s.length));
if(!s)break}return i?a.length:a?t.error(e):j(e,h).slice(0)},A=t.compile=function(e,t){var i,s=[],n=[],o=Y[e+" "];if(!o){for(t||(t=b(e)),i=t.length;i--;)o=v(t[i]),o[H]?s.push(o):n.push(o);o=Y(e,E(n,s)),o.selector=e}return o},L=t.select=function(e,t,i,s){var n,o,r,a,h,l="function"==typeof e&&e,d=!s&&b(e=l.selector||e);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&T.getById&&9===t.nodeType&&P&&S.relative[o[1].type]){if(t=(S.find.ID(r.matches[0].replace(Tt,St),t)||[])[0],!t)return i;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(n=pt.needsContext.test(e)?0:o.length;n--&&(r=o[n],!S.relative[a=r.type]);)if((h=S.find[a])&&(s=h(r.matches[0].replace(Tt,St),Et.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(n,1),e=s.length&&u(o),!e)return Z.apply(i,s),i;break}}return(l||A(e,d))(s,t,!P,i,Et.test(e)&&c(t.parentNode)||t),i},T.sortStable=H.split("").sort(X).join("")===H,T.detectDuplicates=!!I,O(),T.sortDetached=n(function(e){return 1&e.compareDocumentPosition(R.createElement("div"))}),n(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&n(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),n(function(e){return null==e.getAttribute("disabled")})||o(tt,function(e,t,i){var s;return i?void 0:e[t]===!0?t.toLowerCase():(s=e.getAttributeNode(t))&&s.specified?s.value:null}),t}(e);nt.find=lt,nt.expr=lt.selectors,nt.expr[":"]=nt.expr.pseudos,nt.unique=lt.uniqueSort,nt.text=lt.getText,nt.isXMLDoc=lt.isXML,nt.contains=lt.contains;var ct=nt.expr.match.needsContext,dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ut=/^.[^:#\[\.,]*$/;nt.filter=function(e,t,i){var s=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===s.nodeType?nt.find.matchesSelector(s,e)?[s]:[]:nt.find.matches(e,nt.grep(t,function(e){return 1===e.nodeType}))},nt.fn.extend({find:function(e){var t,i=[],s=this,n=s.length;if("string"!=typeof e)return this.pushStack(nt(e).filter(function(){for(t=0;n>t;t++)if(nt.contains(s[t],this))return!0}));for(t=0;n>t;t++)nt.find(e,s[t],i);return i=this.pushStack(n>1?nt.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&ct.test(e)?nt(e):e||[],!1).length}});var gt,pt=e.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,_t=nt.fn.init=function(e,t){var i,s;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:mt.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||gt).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof nt?t[0]:t,nt.merge(this,nt.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:pt,!0)),dt.test(i[1])&&nt.isPlainObject(t))for(i in t)nt.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(s=pt.getElementById(i[2]),s&&s.parentNode){if(s.id!==i[2])return gt.find(e);this.length=1,this[0]=s}return this.context=pt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):nt.isFunction(e)?"undefined"!=typeof gt.ready?gt.ready(e):e(nt):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),nt.makeArray(e,this))};_t.prototype=nt.fn,gt=nt(pt);var ft=/^(?:parents|prev(?:Until|All))/,vt={children:!0,contents:!0,next:!0,prev:!0};nt.extend({dir:function(e,t,i){for(var s=[],n=e[t];n&&9!==n.nodeType&&(void 0===i||1!==n.nodeType||!nt(n).is(i));)1===n.nodeType&&s.push(n),n=n[t];return s},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),nt.fn.extend({has:function(e){var t,i=nt(e,this),s=i.length;return this.filter(function(){for(t=0;s>t;t++)if(nt.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,s=0,n=this.length,o=[],r=ct.test(e)||"string"!=typeof e?nt(e,t||this.context):0;n>s;s++)for(i=this[s];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&nt.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?nt.unique(o):o)},index:function(e){return e?"string"==typeof e?nt.inArray(this[0],nt(e)):nt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(nt.unique(nt.merge(this.get(),nt(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),nt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return nt.dir(e,"parentNode")},parentsUntil:function(e,t,i){return nt.dir(e,"parentNode",i)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return nt.dir(e,"nextSibling")},prevAll:function(e){return nt.dir(e,"previousSibling")},nextUntil:function(e,t,i){return nt.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return nt.dir(e,"previousSibling",i)},siblings:function(e){return nt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return nt.sibling(e.firstChild)},contents:function(e){return nt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:nt.merge([],e.childNodes)}},function(e,t){nt.fn[e]=function(i,s){var n=nt.map(this,t,i);return"Until"!==e.slice(-5)&&(s=i),s&&"string"==typeof s&&(n=nt.filter(s,n)),this.length>1&&(vt[e]||(n=nt.unique(n)),ft.test(e)&&(n=n.reverse())),this.pushStack(n)}});var Et=/\S+/g,yt={};nt.Callbacks=function(e){e="string"==typeof e?yt[e]||o(e):nt.extend({},e);var t,i,s,n,r,a,h=[],l=!e.once&&[],c=function(o){for(i=e.memory&&o,s=!0,r=a||0,a=0,n=h.length,t=!0;h&&n>r;r++)if(h[r].apply(o[0],o[1])===!1&&e.stopOnFalse){i=!1;break}t=!1,h&&(l?l.length&&c(l.shift()):i?h=[]:d.disable())},d={add:function(){if(h){var s=h.length;!function o(t){nt.each(t,function(t,i){var s=nt.type(i);"function"===s?e.unique&&d.has(i)||h.push(i):i&&i.length&&"string"!==s&&o(i)})}(arguments),t?n=h.length:i&&(a=s,c(i))}return this},remove:function(){return h&&nt.each(arguments,function(e,i){for(var s;(s=nt.inArray(i,h,s))>-1;)h.splice(s,1),t&&(n>=s&&n--,r>=s&&r--)}),this},has:function(e){return e?nt.inArray(e,h)>-1:!(!h||!h.length)},empty:function(){return h=[],n=0,this},disable:function(){return h=l=i=void 0,this},disabled:function(){return!h},lock:function(){return l=void 0,i||d.disable(),this},locked:function(){return!l},fireWith:function(e,i){return!h||s&&!l||(i=i||[],i=[e,i.slice?i.slice():i],t?l.push(i):c(i)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!s}};return d},nt.extend({Deferred:function(e){var t=[["resolve","done",nt.Callbacks("once memory"),"resolved"],["reject","fail",nt.Callbacks("once memory"),"rejected"],["notify","progress",nt.Callbacks("memory")]],i="pending",s={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return nt.Deferred(function(i){nt.each(t,function(t,o){var r=nt.isFunction(e[t])&&e[t];n[o[1]](function(){var e=r&&r.apply(this,arguments);e&&nt.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===s?i.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?nt.extend(e,s):s}},n={};return s.pipe=s.then,nt.each(t,function(e,o){var r=o[2],a=o[3];s[o[1]]=r.add,a&&r.add(function(){i=a},t[1^e][2].disable,t[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?s:this,arguments),this},n[o[0]+"With"]=r.fireWith}),s.promise(n),e&&e.call(n,n),n},when:function(e){var t,i,s,n=0,o=z.call(arguments),r=o.length,a=1!==r||e&&nt.isFunction(e.promise)?r:0,h=1===a?e:nt.Deferred(),l=function(e,i,s){return function(n){i[e]=this,s[e]=arguments.length>1?z.call(arguments):n,s===t?h.notifyWith(i,s):--a||h.resolveWith(i,s)}};if(r>1)for(t=new Array(r),i=new Array(r),s=new Array(r);r>n;n++)o[n]&&nt.isFunction(o[n].promise)?o[n].promise().done(l(n,s,o)).fail(h.reject).progress(l(n,i,t)):--a;return a||h.resolveWith(s,o),h.promise()}});var Tt;nt.fn.ready=function(e){return nt.ready.promise().done(e),this},nt.extend({isReady:!1,readyWait:1,holdReady:function(e){e?nt.readyWait++:nt.ready(!0)},ready:function(e){if(e===!0?!--nt.readyWait:!nt.isReady){if(!pt.body)return setTimeout(nt.ready);nt.isReady=!0,e!==!0&&--nt.readyWait>0||(Tt.resolveWith(pt,[nt]),nt.fn.triggerHandler&&(nt(pt).triggerHandler("ready"),nt(pt).off("ready")))}}}),nt.ready.promise=function(t){if(!Tt)if(Tt=nt.Deferred(),"complete"===pt.readyState)setTimeout(nt.ready);else if(pt.addEventListener)pt.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1);else{pt.attachEvent("onreadystatechange",a),e.attachEvent("onload",a);var i=!1;try{i=null==e.frameElement&&pt.documentElement}catch(s){}i&&i.doScroll&&!function n(){if(!nt.isReady){try{i.doScroll("left")}catch(e){return setTimeout(n,50)}r(),nt.ready()}}()}return Tt.promise(t)};var St,Ct="undefined";for(St in nt(it))break;it.ownLast="0"!==St,it.inlineBlockNeedsLayout=!1,nt(function(){var e,t,i,s;i=pt.getElementsByTagName("body")[0],i&&i.style&&(t=pt.createElement("div"),s=pt.createElement("div"),s.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(s).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",it.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(s))}),function(){var e=pt.createElement("div");if(null==it.deleteExpando){it.deleteExpando=!0;try{delete e.test}catch(t){it.deleteExpando=!1}}e=null}(),nt.acceptData=function(e){var t=nt.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return 1!==i&&9!==i?!1:!t||t!==!0&&e.getAttribute("classid")===t};var wt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/([A-Z])/g;nt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?nt.cache[e[nt.expando]]:e[nt.expando],!!e&&!l(e)},data:function(e,t,i){return c(e,t,i)},removeData:function(e,t){return d(e,t)},_data:function(e,t,i){return c(e,t,i,!0)},_removeData:function(e,t){return d(e,t,!0)}}),nt.fn.extend({data:function(e,t){var i,s,n,o=this[0],r=o&&o.attributes;if(void 0===e){if(this.length&&(n=nt.data(o),1===o.nodeType&&!nt._data(o,"parsedAttrs"))){for(i=r.length;i--;)r[i]&&(s=r[i].name,0===s.indexOf("data-")&&(s=nt.camelCase(s.slice(5)),h(o,s,n[s])));nt._data(o,"parsedAttrs",!0)}return n}return"object"==typeof e?this.each(function(){nt.data(this,e)}):arguments.length>1?this.each(function(){nt.data(this,e,t)}):o?h(o,e,nt.data(o,e)):void 0},removeData:function(e){return this.each(function(){nt.removeData(this,e)})}}),nt.extend({queue:function(e,t,i){var s;return e?(t=(t||"fx")+"queue",s=nt._data(e,t),i&&(!s||nt.isArray(i)?s=nt._data(e,t,nt.makeArray(i)):s.push(i)),s||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=nt.queue(e,t),s=i.length,n=i.shift(),o=nt._queueHooks(e,t),r=function(){nt.dequeue(e,t)};"inprogress"===n&&(n=i.shift(),s--),n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,r,o)),!s&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return nt._data(e,i)||nt._data(e,i,{empty:nt.Callbacks("once memory").add(function(){nt._removeData(e,t+"queue"),nt._removeData(e,i)})})}}),nt.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?nt.queue(this[0],e):void 0===t?this:this.each(function(){var i=nt.queue(this,e,t);nt._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&nt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){nt.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,s=1,n=nt.Deferred(),o=this,r=this.length,a=function(){--s||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)i=nt._data(o[r],e+"queueHooks"),i&&i.empty&&(s++,i.empty.add(a));return a(),n.promise(t)}});var At=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Lt=["Top","Right","Bottom","Left"],xt=function(e,t){return e=t||e,"none"===nt.css(e,"display")||!nt.contains(e.ownerDocument,e)},Mt=nt.access=function(e,t,i,s,n,o,r){var a=0,h=e.length,l=null==i;if("object"===nt.type(i)){n=!0;for(a in i)nt.access(e,t,a,i[a],!0,o,r)}else if(void 0!==s&&(n=!0,nt.isFunction(s)||(r=!0),l&&(r?(t.call(e,s),t=null):(l=t,t=function(e,t,i){return l.call(nt(e),i)})),t))for(;h>a;a++)t(e[a],i,r?s:s.call(e[a],a,t(e[a],i)));return n?e:l?t.call(e):h?t(e[0],i):o},It=/^(?:checkbox|radio)$/i;!function(){var e=pt.createElement("input"),t=pt.createElement("div"),i=pt.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",it.leadingWhitespace=3===t.firstChild.nodeType,it.tbody=!t.getElementsByTagName("tbody").length,it.htmlSerialize=!!t.getElementsByTagName("link").length,it.html5Clone="<:nav></:nav>"!==pt.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),it.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",it.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,it.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){it.noCloneEvent=!1}),t.cloneNode(!0).click()),null==it.deleteExpando){it.deleteExpando=!0;try{delete t.test}catch(s){it.deleteExpando=!1}}}(),function(){var t,i,s=pt.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(it[t+"Bubbles"]=i in e)||(s.setAttribute(i,"t"),it[t+"Bubbles"]=s.attributes[i].expando===!1);s=null}();var Ot=/^(?:input|select|textarea)$/i,Rt=/^key/,Nt=/^(?:mouse|pointer|contextmenu)|click/,Pt=/^(?:focusinfocus|focusoutblur)$/,Dt=/^([^.]*)(?:\.(.+)|)$/;nt.event={global:{},add:function(e,t,i,s,n){var o,r,a,h,l,c,d,u,g,p,m,_=nt._data(e);if(_){for(i.handler&&(h=i,i=h.handler,n=h.selector),i.guid||(i.guid=nt.guid++),(r=_.events)||(r=_.events={}),(c=_.handle)||(c=_.handle=function(e){return typeof nt===Ct||e&&nt.event.triggered===e.type?void 0:nt.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(Et)||[""],a=t.length;a--;)o=Dt.exec(t[a])||[],g=m=o[1],p=(o[2]||"").split(".").sort(),g&&(l=nt.event.special[g]||{},g=(n?l.delegateType:l.bindType)||g,l=nt.event.special[g]||{},d=nt.extend({type:g,origType:m,data:s,handler:i,guid:i.guid,selector:n,needsContext:n&&nt.expr.match.needsContext.test(n),namespace:p.join(".")},h),(u=r[g])||(u=r[g]=[],u.delegateCount=0,l.setup&&l.setup.call(e,s,p,c)!==!1||(e.addEventListener?e.addEventListener(g,c,!1):e.attachEvent&&e.attachEvent("on"+g,c))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),n?u.splice(u.delegateCount++,0,d):u.push(d),nt.event.global[g]=!0);e=null}},remove:function(e,t,i,s,n){var o,r,a,h,l,c,d,u,g,p,m,_=nt.hasData(e)&&nt._data(e);if(_&&(c=_.events)){for(t=(t||"").match(Et)||[""],l=t.length;l--;)if(a=Dt.exec(t[l])||[],g=m=a[1],p=(a[2]||"").split(".").sort(),g){for(d=nt.event.special[g]||{},g=(s?d.delegateType:d.bindType)||g,u=c[g]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),h=o=u.length;o--;)r=u[o],!n&&m!==r.origType||i&&i.guid!==r.guid||a&&!a.test(r.namespace)||s&&s!==r.selector&&("**"!==s||!r.selector)||(u.splice(o,1),r.selector&&u.delegateCount--,d.remove&&d.remove.call(e,r));h&&!u.length&&(d.teardown&&d.teardown.call(e,p,_.handle)!==!1||nt.removeEvent(e,g,_.handle),delete c[g])}else for(g in c)nt.event.remove(e,g+t[l],i,s,!0);nt.isEmptyObject(c)&&(delete _.handle,nt._removeData(e,"events"))}},trigger:function(t,i,s,n){var o,r,a,h,l,c,d,u=[s||pt],g=tt.call(t,"type")?t.type:t,p=tt.call(t,"namespace")?t.namespace.split("."):[];if(a=c=s=s||pt,3!==s.nodeType&&8!==s.nodeType&&!Pt.test(g+nt.event.triggered)&&(g.indexOf(".")>=0&&(p=g.split("."),g=p.shift(),p.sort()),r=g.indexOf(":")<0&&"on"+g,t=t[nt.expando]?t:new nt.Event(g,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),i=null==i?[t]:nt.makeArray(i,[t]),l=nt.event.special[g]||{},n||!l.trigger||l.trigger.apply(s,i)!==!1)){if(!n&&!l.noBubble&&!nt.isWindow(s)){for(h=l.delegateType||g,Pt.test(h+g)||(a=a.parentNode);a;a=a.parentNode)u.push(a),c=a;c===(s.ownerDocument||pt)&&u.push(c.defaultView||c.parentWindow||e)}for(d=0;(a=u[d++])&&!t.isPropagationStopped();)t.type=d>1?h:l.bindType||g,o=(nt._data(a,"events")||{})[t.type]&&nt._data(a,"handle"),o&&o.apply(a,i),o=r&&a[r],o&&o.apply&&nt.acceptData(a)&&(t.result=o.apply(a,i),t.result===!1&&t.preventDefault());if(t.type=g,!n&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(u.pop(),i)===!1)&&nt.acceptData(s)&&r&&s[g]&&!nt.isWindow(s)){c=s[r],c&&(s[r]=null),nt.event.triggered=g;try{s[g]()}catch(m){}nt.event.triggered=void 0,c&&(s[r]=c)}return t.result}},dispatch:function(e){e=nt.event.fix(e);var t,i,s,n,o,r=[],a=z.call(arguments),h=(nt._data(this,"events")||{})[e.type]||[],l=nt.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(r=nt.event.handlers.call(this,e,h),t=0;(n=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,o=0;(s=n.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((nt.event.special[s.origType]||{}).handle||s.handler).apply(n.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,s,n,o,r=[],a=t.delegateCount,h=e.target;if(a&&h.nodeType&&(!e.button||"click"!==e.type))for(;h!=this;h=h.parentNode||this)if(1===h.nodeType&&(h.disabled!==!0||"click"!==e.type)){for(n=[],o=0;a>o;o++)s=t[o],i=s.selector+" ",void 0===n[i]&&(n[i]=s.needsContext?nt(i,this).index(h)>=0:nt.find(i,this,null,[h]).length),n[i]&&n.push(s);n.length&&r.push({elem:h,handlers:n})}return a<t.length&&r.push({elem:this,handlers:t.slice(a)}),r},fix:function(e){if(e[nt.expando])return e;var t,i,s,n=e.type,o=e,r=this.fixHooks[n];for(r||(this.fixHooks[n]=r=Nt.test(n)?this.mouseHooks:Rt.test(n)?this.keyHooks:{}),s=r.props?this.props.concat(r.props):this.props,e=new nt.Event(o),t=s.length;t--;)i=s[t],e[i]=o[i];return e.target||(e.target=o.srcElement||pt),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,s,n,o=t.button,r=t.fromElement;return null==e.pageX&&null!=t.clientX&&(s=e.target.ownerDocument||pt,n=s.documentElement,i=s.body,e.pageX=t.clientX+(n&&n.scrollLeft||i&&i.scrollLeft||0)-(n&&n.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||i&&i.scrollTop||0)-(n&&n.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&r&&(e.relatedTarget=r===e.target?t.toElement:r),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===p()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return nt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return nt.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,s){var n=nt.extend(new nt.Event,i,{type:e,isSimulated:!0,originalEvent:{}});s?nt.event.trigger(n,null,t):nt.event.dispatch.call(t,n),n.isDefaultPrevented()&&i.preventDefault()}},nt.removeEvent=pt.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var s="on"+t;e.detachEvent&&(typeof e[s]===Ct&&(e[s]=null),e.detachEvent(s,i))},nt.Event=function(e,t){return this instanceof nt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:g):this.type=e,t&&nt.extend(this,t),this.timeStamp=e&&e.timeStamp||nt.now(),void(this[nt.expando]=!0)):new nt.Event(e,t)},nt.Event.prototype={isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},nt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){nt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,s=this,n=e.relatedTarget,o=e.handleObj;return(!n||n!==s&&!nt.contains(s,n))&&(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),it.submitBubbles||(nt.event.special.submit={setup:function(){return nt.nodeName(this,"form")?!1:void nt.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=nt.nodeName(t,"input")||nt.nodeName(t,"button")?t.form:void 0;i&&!nt._data(i,"submitBubbles")&&(nt.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),nt._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&nt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return nt.nodeName(this,"form")?!1:void nt.event.remove(this,"._submit")}}),it.changeBubbles||(nt.event.special.change={setup:function(){return Ot.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(nt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),nt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),nt.event.simulate("change",this,e,!0)})),!1):void nt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ot.test(t.nodeName)&&!nt._data(t,"changeBubbles")&&(nt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||nt.event.simulate("change",this.parentNode,e,!0)}),nt._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return nt.event.remove(this,"._change"),!Ot.test(this.nodeName)}}),it.focusinBubbles||nt.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){nt.event.simulate(t,e.target,nt.event.fix(e),!0)};nt.event.special[t]={setup:function(){var s=this.ownerDocument||this,n=nt._data(s,t);n||s.addEventListener(e,i,!0),nt._data(s,t,(n||0)+1)},teardown:function(){var s=this.ownerDocument||this,n=nt._data(s,t)-1;n?nt._data(s,t,n):(s.removeEventListener(e,i,!0),nt._removeData(s,t))}}}),nt.fn.extend({on:function(e,t,i,s,n){var o,r;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(o in e)this.on(o,t,i,e[o],n);return this}if(null==i&&null==s?(s=t,i=t=void 0):null==s&&("string"==typeof t?(s=i,i=void 0):(s=i,i=t,t=void 0)),s===!1)s=g;else if(!s)return this;return 1===n&&(r=s,s=function(e){return nt().off(e),r.apply(this,arguments)},s.guid=r.guid||(r.guid=nt.guid++)),this.each(function(){nt.event.add(this,e,s,i,t)})},one:function(e,t,i,s){return this.on(e,t,i,s,1)},off:function(e,t,i){var s,n;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,nt(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=g),this.each(function(){nt.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){nt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?nt.event.trigger(e,t,i,!0):void 0}});var kt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Bt=/ jQuery\d+="(?:null|\d+)"/g,Ut=new RegExp("<(?:"+kt+")[\\s/>]","i"),Ht=/^\s+/,Gt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Vt=/<([\w:]+)/,Ft=/<tbody/i,Wt=/<|&#?\w+;/,jt=/<(?:script|style|link)/i,Yt=/checked\s*(?:[^=]|=\s*.checked.)/i,Xt=/^$|\/(?:java|ecma)script/i,qt=/^true\/(.*)/,Kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:it.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qt=m(pt),Jt=Qt.appendChild(pt.createElement("div"));zt.optgroup=zt.option,zt.tbody=zt.tfoot=zt.colgroup=zt.caption=zt.thead,zt.th=zt.td,nt.extend({clone:function(e,t,i){var s,n,o,r,a,h=nt.contains(e.ownerDocument,e);if(it.html5Clone||nt.isXMLDoc(e)||!Ut.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Jt.innerHTML=e.outerHTML,Jt.removeChild(o=Jt.firstChild)),!(it.noCloneEvent&&it.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||nt.isXMLDoc(e)))for(s=_(o),a=_(e),r=0;null!=(n=a[r]);++r)s[r]&&C(n,s[r]);if(t)if(i)for(a=a||_(e),s=s||_(o),r=0;null!=(n=a[r]);r++)S(n,s[r]);else S(e,o);return s=_(o,"script"),s.length>0&&T(s,!h&&_(e,"script")),s=a=n=null,o},buildFragment:function(e,t,i,s){for(var n,o,r,a,h,l,c,d=e.length,u=m(t),g=[],p=0;d>p;p++)if(o=e[p],o||0===o)if("object"===nt.type(o))nt.merge(g,o.nodeType?[o]:o);else if(Wt.test(o)){for(a=a||u.appendChild(t.createElement("div")),h=(Vt.exec(o)||["",""])[1].toLowerCase(),c=zt[h]||zt._default,a.innerHTML=c[1]+o.replace(Gt,"<$1></$2>")+c[2],n=c[0];n--;)a=a.lastChild;if(!it.leadingWhitespace&&Ht.test(o)&&g.push(t.createTextNode(Ht.exec(o)[0])),!it.tbody)for(o="table"!==h||Ft.test(o)?"<table>"!==c[1]||Ft.test(o)?0:a:a.firstChild,n=o&&o.childNodes.length;n--;)nt.nodeName(l=o.childNodes[n],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(nt.merge(g,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=u.lastChild}else g.push(t.createTextNode(o));for(a&&u.removeChild(a),it.appendChecked||nt.grep(_(g,"input"),f),p=0;o=g[p++];)if((!s||-1===nt.inArray(o,s))&&(r=nt.contains(o.ownerDocument,o),a=_(u.appendChild(o),"script"),r&&T(a),i))for(n=0;o=a[n++];)Xt.test(o.type||"")&&i.push(o);return a=null,u},cleanData:function(e,t){for(var i,s,n,o,r=0,a=nt.expando,h=nt.cache,l=it.deleteExpando,c=nt.event.special;null!=(i=e[r]);r++)if((t||nt.acceptData(i))&&(n=i[a],o=n&&h[n])){if(o.events)for(s in o.events)c[s]?nt.event.remove(i,s):nt.removeEvent(i,s,o.handle);h[n]&&(delete h[n],l?delete i[a]:typeof i.removeAttribute!==Ct?i.removeAttribute(a):i[a]=null,K.push(n))}}}),nt.fn.extend({text:function(e){return Mt(this,function(e){return void 0===e?nt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||pt).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,s=e?nt.filter(e,this):this,n=0;null!=(i=s[n]);n++)t||1!==i.nodeType||nt.cleanData(_(i)),i.parentNode&&(t&&nt.contains(i.ownerDocument,i)&&T(_(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&nt.cleanData(_(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&nt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return nt.clone(this,e,t)})},html:function(e){return Mt(this,function(e){var t=this[0]||{},i=0,s=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Bt,""):void 0;if(!("string"!=typeof e||jt.test(e)||!it.htmlSerialize&&Ut.test(e)||!it.leadingWhitespace&&Ht.test(e)||zt[(Vt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Gt,"<$1></$2>");try{for(;s>i;i++)t=this[i]||{},1===t.nodeType&&(nt.cleanData(_(t,!1)),t.innerHTML=e);t=0}catch(n){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,nt.cleanData(_(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Q.apply([],e);var i,s,n,o,r,a,h=0,l=this.length,c=this,d=l-1,u=e[0],g=nt.isFunction(u);if(g||l>1&&"string"==typeof u&&!it.checkClone&&Yt.test(u))return this.each(function(i){var s=c.eq(i);g&&(e[0]=u.call(this,i,s.html())),s.domManip(e,t)});if(l&&(a=nt.buildFragment(e,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(o=nt.map(_(a,"script"),E),n=o.length;l>h;h++)s=a,h!==d&&(s=nt.clone(s,!0,!0),n&&nt.merge(o,_(s,"script"))),t.call(this[h],s,h);if(n)for(r=o[o.length-1].ownerDocument,nt.map(o,y),h=0;n>h;h++)s=o[h],Xt.test(s.type||"")&&!nt._data(s,"globalEval")&&nt.contains(r,s)&&(s.src?nt._evalUrl&&nt._evalUrl(s.src):nt.globalEval((s.text||s.textContent||s.innerHTML||"").replace(Kt,"")));a=i=null}return this}}),nt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){nt.fn[e]=function(e){for(var i,s=0,n=[],o=nt(e),r=o.length-1;r>=s;s++)i=s===r?this:this.clone(!0),nt(o[s])[t](i),J.apply(n,i.get());return this.pushStack(n)}});var Zt,$t={};!function(){var e;it.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,i,s;return i=pt.getElementsByTagName("body")[0],i&&i.style?(t=pt.createElement("div"),s=pt.createElement("div"),s.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(s).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(pt.createElement("div")).style.width="5px",e=3!==t.offsetWidth),i.removeChild(s),e):void 0}}();var ei,ti,ii=/^margin/,si=new RegExp("^("+At+")(?!px)[a-z%]+$","i"),ni=/^(top|right|bottom|left)$/;e.getComputedStyle?(ei=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},ti=function(e,t,i){var s,n,o,r,a=e.style;return i=i||ei(e),r=i?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==r||nt.contains(e.ownerDocument,e)||(r=nt.style(e,t)),si.test(r)&&ii.test(t)&&(s=a.width,n=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=s,a.minWidth=n,a.maxWidth=o)),void 0===r?r:r+""
}):pt.documentElement.currentStyle&&(ei=function(e){return e.currentStyle},ti=function(e,t,i){var s,n,o,r,a=e.style;return i=i||ei(e),r=i?i[t]:void 0,null==r&&a&&a[t]&&(r=a[t]),si.test(r)&&!ni.test(t)&&(s=a.left,n=e.runtimeStyle,o=n&&n.left,o&&(n.left=e.currentStyle.left),a.left="fontSize"===t?"1em":r,r=a.pixelLeft+"px",a.left=s,o&&(n.left=o)),void 0===r?r:r+""||"auto"}),function(){function t(){var t,i,s,n;i=pt.getElementsByTagName("body")[0],i&&i.style&&(t=pt.createElement("div"),s=pt.createElement("div"),s.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(s).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=r=!1,h=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,r="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,n=t.appendChild(pt.createElement("div")),n.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",t.style.width="1px",h=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight),t.removeChild(n)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",n=t.getElementsByTagName("td"),n[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===n[0].offsetHeight,a&&(n[0].style.display="",n[1].style.display="none",a=0===n[0].offsetHeight),i.removeChild(s))}var i,s,n,o,r,a,h;i=pt.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=i.getElementsByTagName("a")[0],s=n&&n.style,s&&(s.cssText="float:left;opacity:.5",it.opacity="0.5"===s.opacity,it.cssFloat=!!s.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===i.style.backgroundClip,it.boxSizing=""===s.boxSizing||""===s.MozBoxSizing||""===s.WebkitBoxSizing,nt.extend(it,{reliableHiddenOffsets:function(){return null==a&&t(),a},boxSizingReliable:function(){return null==r&&t(),r},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==h&&t(),h}}))}(),nt.swap=function(e,t,i,s){var n,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];n=i.apply(e,s||[]);for(o in t)e.style[o]=r[o];return n};var oi=/alpha\([^)]*\)/i,ri=/opacity\s*=\s*([^)]*)/,ai=/^(none|table(?!-c[ea]).+)/,hi=new RegExp("^("+At+")(.*)$","i"),li=new RegExp("^([+-])=("+At+")","i"),ci={position:"absolute",visibility:"hidden",display:"block"},di={letterSpacing:"0",fontWeight:"400"},ui=["Webkit","O","Moz","ms"];nt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ti(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":it.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,r,a=nt.camelCase(t),h=e.style;if(t=nt.cssProps[a]||(nt.cssProps[a]=L(h,a)),r=nt.cssHooks[t]||nt.cssHooks[a],void 0===i)return r&&"get"in r&&void 0!==(n=r.get(e,!1,s))?n:h[t];if(o=typeof i,"string"===o&&(n=li.exec(i))&&(i=(n[1]+1)*n[2]+parseFloat(nt.css(e,t)),o="number"),null!=i&&i===i&&("number"!==o||nt.cssNumber[a]||(i+="px"),it.clearCloneStyle||""!==i||0!==t.indexOf("background")||(h[t]="inherit"),!(r&&"set"in r&&void 0===(i=r.set(e,i,s)))))try{h[t]=i}catch(l){}}},css:function(e,t,i,s){var n,o,r,a=nt.camelCase(t);return t=nt.cssProps[a]||(nt.cssProps[a]=L(e.style,a)),r=nt.cssHooks[t]||nt.cssHooks[a],r&&"get"in r&&(o=r.get(e,!0,i)),void 0===o&&(o=ti(e,t,s)),"normal"===o&&t in di&&(o=di[t]),""===i||i?(n=parseFloat(o),i===!0||nt.isNumeric(n)?n||0:o):o}}),nt.each(["height","width"],function(e,t){nt.cssHooks[t]={get:function(e,i,s){return i?ai.test(nt.css(e,"display"))&&0===e.offsetWidth?nt.swap(e,ci,function(){return O(e,t,s)}):O(e,t,s):void 0},set:function(e,i,s){var n=s&&ei(e);return M(e,i,s?I(e,t,s,it.boxSizing&&"border-box"===nt.css(e,"boxSizing",!1,n),n):0)}}}),it.opacity||(nt.cssHooks.opacity={get:function(e,t){return ri.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,s=e.currentStyle,n=nt.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=s&&s.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===nt.trim(o.replace(oi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||s&&!s.filter)||(i.filter=oi.test(o)?o.replace(oi,n):o+" "+n)}}),nt.cssHooks.marginRight=A(it.reliableMarginRight,function(e,t){return t?nt.swap(e,{display:"inline-block"},ti,[e,"marginRight"]):void 0}),nt.each({margin:"",padding:"",border:"Width"},function(e,t){nt.cssHooks[e+t]={expand:function(i){for(var s=0,n={},o="string"==typeof i?i.split(" "):[i];4>s;s++)n[e+Lt[s]+t]=o[s]||o[s-2]||o[0];return n}},ii.test(e)||(nt.cssHooks[e+t].set=M)}),nt.fn.extend({css:function(e,t){return Mt(this,function(e,t,i){var s,n,o={},r=0;if(nt.isArray(t)){for(s=ei(e),n=t.length;n>r;r++)o[t[r]]=nt.css(e,t[r],!1,s);return o}return void 0!==i?nt.style(e,t,i):nt.css(e,t)},e,t,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){xt(this)?nt(this).show():nt(this).hide()})}}),nt.Tween=R,R.prototype={constructor:R,init:function(e,t,i,s,n,o){this.elem=e,this.prop=i,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=s,this.unit=o||(nt.cssNumber[i]?"":"px")},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,i=R.propHooks[this.prop];return this.pos=t=this.options.duration?nt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=nt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){nt.fx.step[e.prop]?nt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[nt.cssProps[e.prop]]||nt.cssHooks[e.prop])?nt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},nt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},nt.fx=R.prototype.init,nt.fx.step={};var gi,pi,mi=/^(?:toggle|show|hide)$/,_i=new RegExp("^(?:([+-])=|)("+At+")([a-z%]*)$","i"),fi=/queueHooks$/,vi=[k],Ei={"*":[function(e,t){var i=this.createTween(e,t),s=i.cur(),n=_i.exec(t),o=n&&n[3]||(nt.cssNumber[e]?"":"px"),r=(nt.cssNumber[e]||"px"!==o&&+s)&&_i.exec(nt.css(i.elem,e)),a=1,h=20;if(r&&r[3]!==o){o=o||r[3],n=n||[],r=+s||1;do a=a||".5",r/=a,nt.style(i.elem,e,r+o);while(a!==(a=i.cur()/s)&&1!==a&&--h)}return n&&(r=i.start=+r||+s||0,i.unit=o,i.end=n[1]?r+(n[1]+1)*n[2]:+n[2]),i}]};nt.Animation=nt.extend(U,{tweener:function(e,t){nt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,s=0,n=e.length;n>s;s++)i=e[s],Ei[i]=Ei[i]||[],Ei[i].unshift(t)},prefilter:function(e,t){t?vi.unshift(e):vi.push(e)}}),nt.speed=function(e,t,i){var s=e&&"object"==typeof e?nt.extend({},e):{complete:i||!i&&t||nt.isFunction(e)&&e,duration:e,easing:i&&t||t&&!nt.isFunction(t)&&t};return s.duration=nt.fx.off?0:"number"==typeof s.duration?s.duration:s.duration in nt.fx.speeds?nt.fx.speeds[s.duration]:nt.fx.speeds._default,(null==s.queue||s.queue===!0)&&(s.queue="fx"),s.old=s.complete,s.complete=function(){nt.isFunction(s.old)&&s.old.call(this),s.queue&&nt.dequeue(this,s.queue)},s},nt.fn.extend({fadeTo:function(e,t,i,s){return this.filter(xt).css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(e,t,i,s){var n=nt.isEmptyObject(e),o=nt.speed(t,i,s),r=function(){var t=U(this,nt.extend({},e),o);(n||nt._data(this,"finish"))&&t.stop(!0)};return r.finish=r,n||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(e,t,i){var s=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=nt.timers,r=nt._data(this);if(n)r[n]&&r[n].stop&&s(r[n]);else for(n in r)r[n]&&r[n].stop&&fi.test(n)&&s(r[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(i),t=!1,o.splice(n,1));(t||!i)&&nt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=nt._data(this),s=i[e+"queue"],n=i[e+"queueHooks"],o=nt.timers,r=s?s.length:0;for(i.finish=!0,nt.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;r>t;t++)s[t]&&s[t].finish&&s[t].finish.call(this);delete i.finish})}}),nt.each(["toggle","show","hide"],function(e,t){var i=nt.fn[t];nt.fn[t]=function(e,s,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(P(t,!0),e,s,n)}}),nt.each({slideDown:P("show"),slideUp:P("hide"),slideToggle:P("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){nt.fn[e]=function(e,i,s){return this.animate(t,e,i,s)}}),nt.timers=[],nt.fx.tick=function(){var e,t=nt.timers,i=0;for(gi=nt.now();i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||nt.fx.stop(),gi=void 0},nt.fx.timer=function(e){nt.timers.push(e),e()?nt.fx.start():nt.timers.pop()},nt.fx.interval=13,nt.fx.start=function(){pi||(pi=setInterval(nt.fx.tick,nt.fx.interval))},nt.fx.stop=function(){clearInterval(pi),pi=null},nt.fx.speeds={slow:600,fast:200,_default:400},nt.fn.delay=function(e,t){return e=nt.fx?nt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var s=setTimeout(t,e);i.stop=function(){clearTimeout(s)}})},function(){var e,t,i,s,n;t=pt.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",s=t.getElementsByTagName("a")[0],i=pt.createElement("select"),n=i.appendChild(pt.createElement("option")),e=t.getElementsByTagName("input")[0],s.style.cssText="top:1px",it.getSetAttribute="t"!==t.className,it.style=/top/.test(s.getAttribute("style")),it.hrefNormalized="/a"===s.getAttribute("href"),it.checkOn=!!e.value,it.optSelected=n.selected,it.enctype=!!pt.createElement("form").enctype,i.disabled=!0,it.optDisabled=!n.disabled,e=pt.createElement("input"),e.setAttribute("value",""),it.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),it.radioValue="t"===e.value}();var yi=/\r/g;nt.fn.extend({val:function(e){var t,i,s,n=this[0];{if(arguments.length)return s=nt.isFunction(e),this.each(function(i){var n;1===this.nodeType&&(n=s?e.call(this,i,nt(this).val()):e,null==n?n="":"number"==typeof n?n+="":nt.isArray(n)&&(n=nt.map(n,function(e){return null==e?"":e+""})),t=nt.valHooks[this.type]||nt.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))});if(n)return t=nt.valHooks[n.type]||nt.valHooks[n.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(n,"value"))?i:(i=n.value,"string"==typeof i?i.replace(yi,""):null==i?"":i)}}}),nt.extend({valHooks:{option:{get:function(e){var t=nt.find.attr(e,"value");return null!=t?t:nt.trim(nt.text(e))}},select:{get:function(e){for(var t,i,s=e.options,n=e.selectedIndex,o="select-one"===e.type||0>n,r=o?null:[],a=o?n+1:s.length,h=0>n?a:o?n:0;a>h;h++)if(i=s[h],!(!i.selected&&h!==n||(it.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&nt.nodeName(i.parentNode,"optgroup"))){if(t=nt(i).val(),o)return t;r.push(t)}return r},set:function(e,t){for(var i,s,n=e.options,o=nt.makeArray(t),r=n.length;r--;)if(s=n[r],nt.inArray(nt.valHooks.option.get(s),o)>=0)try{s.selected=i=!0}catch(a){s.scrollHeight}else s.selected=!1;return i||(e.selectedIndex=-1),n}}}}),nt.each(["radio","checkbox"],function(){nt.valHooks[this]={set:function(e,t){return nt.isArray(t)?e.checked=nt.inArray(nt(e).val(),t)>=0:void 0}},it.checkOn||(nt.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ti,Si,Ci=nt.expr.attrHandle,wi=/^(?:checked|selected)$/i,bi=it.getSetAttribute,Ai=it.input;nt.fn.extend({attr:function(e,t){return Mt(this,nt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){nt.removeAttr(this,e)})}}),nt.extend({attr:function(e,t,i){var s,n,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Ct?nt.prop(e,t,i):(1===o&&nt.isXMLDoc(e)||(t=t.toLowerCase(),s=nt.attrHooks[t]||(nt.expr.match.bool.test(t)?Si:Ti)),void 0===i?s&&"get"in s&&null!==(n=s.get(e,t))?n:(n=nt.find.attr(e,t),null==n?void 0:n):null!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):void nt.removeAttr(e,t))},removeAttr:function(e,t){var i,s,n=0,o=t&&t.match(Et);if(o&&1===e.nodeType)for(;i=o[n++];)s=nt.propFix[i]||i,nt.expr.match.bool.test(i)?Ai&&bi||!wi.test(i)?e[s]=!1:e[nt.camelCase("default-"+i)]=e[s]=!1:nt.attr(e,i,""),e.removeAttribute(bi?i:s)},attrHooks:{type:{set:function(e,t){if(!it.radioValue&&"radio"===t&&nt.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),Si={set:function(e,t,i){return t===!1?nt.removeAttr(e,i):Ai&&bi||!wi.test(i)?e.setAttribute(!bi&&nt.propFix[i]||i,i):e[nt.camelCase("default-"+i)]=e[i]=!0,i}},nt.each(nt.expr.match.bool.source.match(/\w+/g),function(e,t){var i=Ci[t]||nt.find.attr;Ci[t]=Ai&&bi||!wi.test(t)?function(e,t,s){var n,o;return s||(o=Ci[t],Ci[t]=n,n=null!=i(e,t,s)?t.toLowerCase():null,Ci[t]=o),n}:function(e,t,i){return i?void 0:e[nt.camelCase("default-"+t)]?t.toLowerCase():null}}),Ai&&bi||(nt.attrHooks.value={set:function(e,t,i){return nt.nodeName(e,"input")?void(e.defaultValue=t):Ti&&Ti.set(e,t,i)}}),bi||(Ti={set:function(e,t,i){var s=e.getAttributeNode(i);return s||e.setAttributeNode(s=e.ownerDocument.createAttribute(i)),s.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},Ci.id=Ci.name=Ci.coords=function(e,t,i){var s;return i?void 0:(s=e.getAttributeNode(t))&&""!==s.value?s.value:null},nt.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:Ti.set},nt.attrHooks.contenteditable={set:function(e,t,i){Ti.set(e,""===t?!1:t,i)}},nt.each(["width","height"],function(e,t){nt.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),it.style||(nt.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Li=/^(?:input|select|textarea|button|object)$/i,xi=/^(?:a|area)$/i;nt.fn.extend({prop:function(e,t){return Mt(this,nt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=nt.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),nt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var s,n,o,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return o=1!==r||!nt.isXMLDoc(e),o&&(t=nt.propFix[t]||t,n=nt.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:e[t]=i:n&&"get"in n&&null!==(s=n.get(e,t))?s:e[t]},propHooks:{tabIndex:{get:function(e){var t=nt.find.attr(e,"tabindex");return t?parseInt(t,10):Li.test(e.nodeName)||xi.test(e.nodeName)&&e.href?0:-1}}}}),it.hrefNormalized||nt.each(["href","src"],function(e,t){nt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),it.optSelected||(nt.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),nt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){nt.propFix[this.toLowerCase()]=this}),it.enctype||(nt.propFix.enctype="encoding");var Mi=/[\t\r\n\f]/g;nt.fn.extend({addClass:function(e){var t,i,s,n,o,r,a=0,h=this.length,l="string"==typeof e&&e;if(nt.isFunction(e))return this.each(function(t){nt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(Et)||[];h>a;a++)if(i=this[a],s=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Mi," "):" ")){for(o=0;n=t[o++];)s.indexOf(" "+n+" ")<0&&(s+=n+" ");r=nt.trim(s),i.className!==r&&(i.className=r)}return this},removeClass:function(e){var t,i,s,n,o,r,a=0,h=this.length,l=0===arguments.length||"string"==typeof e&&e;if(nt.isFunction(e))return this.each(function(t){nt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(Et)||[];h>a;a++)if(i=this[a],s=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Mi," "):"")){for(o=0;n=t[o++];)for(;s.indexOf(" "+n+" ")>=0;)s=s.replace(" "+n+" "," ");r=e?nt.trim(s):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):this.each(nt.isFunction(e)?function(i){nt(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var t,s=0,n=nt(this),o=e.match(Et)||[];t=o[s++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else(i===Ct||"boolean"===i)&&(this.className&&nt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":nt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,s=this.length;s>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Mi," ").indexOf(t)>=0)return!0;return!1}}),nt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){nt.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),nt.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,s){return this.on(t,e,i,s)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var Ii=nt.now(),Oi=/\?/,Ri=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;nt.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var i,s=null,n=nt.trim(t+"");return n&&!nt.trim(n.replace(Ri,function(e,t,n,o){return i&&t&&(s=0),0===s?e:(i=n||t,s+=!o-!n,"")}))?Function("return "+n)():nt.error("Invalid JSON: "+t)},nt.parseXML=function(t){var i,s;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(t,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t))}catch(n){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||nt.error("Invalid XML: "+t),i};var Ni,Pi,Di=/#.*$/,ki=/([?&])_=[^&]*/,Bi=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ui=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hi=/^(?:GET|HEAD)$/,Gi=/^\/\//,Vi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Fi={},Wi={},ji="*/".concat("*");try{Pi=location.href}catch(Yi){Pi=pt.createElement("a"),Pi.href="",Pi=Pi.href}Ni=Vi.exec(Pi.toLowerCase())||[],nt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Pi,type:"GET",isLocal:Ui.test(Ni[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ji,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":nt.parseJSON,"text xml":nt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?V(V(e,nt.ajaxSettings),t):V(nt.ajaxSettings,e)},ajaxPrefilter:H(Fi),ajaxTransport:H(Wi),ajax:function(e,t){function i(e,t,i,s){var n,c,f,v,y,S=t;2!==E&&(E=2,a&&clearTimeout(a),l=void 0,r=s||"",T.readyState=e>0?4:0,n=e>=200&&300>e||304===e,i&&(v=F(d,T,i)),v=W(d,v,T,n),n?(d.ifModified&&(y=T.getResponseHeader("Last-Modified"),y&&(nt.lastModified[o]=y),y=T.getResponseHeader("etag"),y&&(nt.etag[o]=y)),204===e||"HEAD"===d.type?S="nocontent":304===e?S="notmodified":(S=v.state,c=v.data,f=v.error,n=!f)):(f=S,(e||!S)&&(S="error",0>e&&(e=0))),T.status=e,T.statusText=(t||S)+"",n?p.resolveWith(u,[c,S,T]):p.rejectWith(u,[T,S,f]),T.statusCode(_),_=void 0,h&&g.trigger(n?"ajaxSuccess":"ajaxError",[T,d,n?c:f]),m.fireWith(u,[T,S]),h&&(g.trigger("ajaxComplete",[T,d]),--nt.active||nt.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var s,n,o,r,a,h,l,c,d=nt.ajaxSetup({},t),u=d.context||d,g=d.context&&(u.nodeType||u.jquery)?nt(u):nt.event,p=nt.Deferred(),m=nt.Callbacks("once memory"),_=d.statusCode||{},f={},v={},E=0,y="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===E){if(!c)for(c={};t=Bi.exec(r);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===E?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return E||(e=v[i]=v[i]||e,f[e]=t),this},overrideMimeType:function(e){return E||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>E)for(t in e)_[t]=[_[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||y;return l&&l.abort(t),i(0,t),this}};if(p.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,d.url=((e||d.url||Pi)+"").replace(Di,"").replace(Gi,Ni[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=nt.trim(d.dataType||"*").toLowerCase().match(Et)||[""],null==d.crossDomain&&(s=Vi.exec(d.url.toLowerCase()),d.crossDomain=!(!s||s[1]===Ni[1]&&s[2]===Ni[2]&&(s[3]||("http:"===s[1]?"80":"443"))===(Ni[3]||("http:"===Ni[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=nt.param(d.data,d.traditional)),G(Fi,d,t,T),2===E)return T;h=nt.event&&d.global,h&&0===nt.active++&&nt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Hi.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(Oi.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=ki.test(o)?o.replace(ki,"$1_="+Ii++):o+(Oi.test(o)?"&":"?")+"_="+Ii++)),d.ifModified&&(nt.lastModified[o]&&T.setRequestHeader("If-Modified-Since",nt.lastModified[o]),nt.etag[o]&&T.setRequestHeader("If-None-Match",nt.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&T.setRequestHeader("Content-Type",d.contentType),T.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+ji+"; q=0.01":""):d.accepts["*"]);for(n in d.headers)T.setRequestHeader(n,d.headers[n]);if(d.beforeSend&&(d.beforeSend.call(u,T,d)===!1||2===E))return T.abort();y="abort";for(n in{success:1,error:1,complete:1})T[n](d[n]);if(l=G(Wi,d,t,T)){T.readyState=1,h&&g.trigger("ajaxSend",[T,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){T.abort("timeout")},d.timeout));try{E=1,l.send(f,i)}catch(S){if(!(2>E))throw S;i(-1,S)}}else i(-1,"No Transport");return T},getJSON:function(e,t,i){return nt.get(e,t,i,"json")},getScript:function(e,t){return nt.get(e,void 0,t,"script")}}),nt.each(["get","post"],function(e,t){nt[t]=function(e,i,s,n){return nt.isFunction(i)&&(n=n||s,s=i,i=void 0),nt.ajax({url:e,type:t,dataType:n,data:i,success:s})}}),nt._evalUrl=function(e){return nt.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},nt.fn.extend({wrapAll:function(e){if(nt.isFunction(e))return this.each(function(t){nt(this).wrapAll(e.call(this,t))});if(this[0]){var t=nt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(nt.isFunction(e)?function(t){nt(this).wrapInner(e.call(this,t))}:function(){var t=nt(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=nt.isFunction(e);return this.each(function(i){nt(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){nt.nodeName(this,"body")||nt(this).replaceWith(this.childNodes)}).end()}}),nt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!it.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||nt.css(e,"display"))},nt.expr.filters.visible=function(e){return!nt.expr.filters.hidden(e)};var Xi=/%20/g,qi=/\[\]$/,Ki=/\r?\n/g,zi=/^(?:submit|button|image|reset|file)$/i,Qi=/^(?:input|select|textarea|keygen)/i;nt.param=function(e,t){var i,s=[],n=function(e,t){t=nt.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=nt.ajaxSettings&&nt.ajaxSettings.traditional),nt.isArray(e)||e.jquery&&!nt.isPlainObject(e))nt.each(e,function(){n(this.name,this.value)});else for(i in e)j(i,e[i],t,n);return s.join("&").replace(Xi,"+")},nt.fn.extend({serialize:function(){return nt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=nt.prop(this,"elements");return e?nt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!nt(this).is(":disabled")&&Qi.test(this.nodeName)&&!zi.test(e)&&(this.checked||!It.test(e))}).map(function(e,t){var i=nt(this).val();return null==i?null:nt.isArray(i)?nt.map(i,function(e){return{name:t.name,value:e.replace(Ki,"\r\n")}}):{name:t.name,value:i.replace(Ki,"\r\n")}}).get()}}),nt.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Y()||X()}:Y;var Ji=0,Zi={},$i=nt.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Zi)Zi[e](void 0,!0)}),it.cors=!!$i&&"withCredentials"in $i,$i=it.ajax=!!$i,$i&&nt.ajaxTransport(function(e){if(!e.crossDomain||it.cors){var t;return{send:function(i,s){var n,o=e.xhr(),r=++Ji;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(n in e.xhrFields)o[n]=e.xhrFields[n];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(n in i)void 0!==i[n]&&o.setRequestHeader(n,i[n]+"");o.send(e.hasContent&&e.data||null),t=function(i,n){var a,h,l;if(t&&(n||4===o.readyState))if(delete Zi[r],t=void 0,o.onreadystatechange=nt.noop,n)4!==o.readyState&&o.abort();else{l={},a=o.status,"string"==typeof o.responseText&&(l.text=o.responseText);try{h=o.statusText}catch(c){h=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=l.text?200:404}l&&s(a,h,l,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Zi[r]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),nt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return nt.globalEval(e),e}}}),nt.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),nt.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=pt.head||nt("head")[0]||pt.documentElement;return{send:function(s,n){t=pt.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||n(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var es=[],ts=/(=)\?(?=&|$)|\?\?/;nt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=es.pop()||nt.expando+"_"+Ii++;return this[e]=!0,e}}),nt.ajaxPrefilter("json jsonp",function(t,i,s){var n,o,r,a=t.jsonp!==!1&&(ts.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ts.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=nt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ts,"$1"+n):t.jsonp!==!1&&(t.url+=(Oi.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return r||nt.error(n+" was not called"),r[0]},t.dataTypes[0]="json",o=e[n],e[n]=function(){r=arguments},s.always(function(){e[n]=o,t[n]&&(t.jsonpCallback=i.jsonpCallback,es.push(n)),r&&nt.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),nt.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||pt;var s=dt.exec(e),n=!i&&[];return s?[t.createElement(s[1])]:(s=nt.buildFragment([e],t,n),n&&n.length&&nt(n).remove(),nt.merge([],s.childNodes))};var is=nt.fn.load;nt.fn.load=function(e,t,i){if("string"!=typeof e&&is)return is.apply(this,arguments);var s,n,o,r=this,a=e.indexOf(" ");return a>=0&&(s=nt.trim(e.slice(a,e.length)),e=e.slice(0,a)),nt.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&nt.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){n=arguments,r.html(s?nt("<div>").append(nt.parseHTML(e)).find(s):e)}).complete(i&&function(e,t){r.each(i,n||[e.responseText,t,e])}),this},nt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){nt.fn[t]=function(e){return this.on(t,e)}}),nt.expr.filters.animated=function(e){return nt.grep(nt.timers,function(t){return e===t.elem}).length};var ss=e.document.documentElement;nt.offset={setOffset:function(e,t,i){var s,n,o,r,a,h,l,c=nt.css(e,"position"),d=nt(e),u={};"static"===c&&(e.style.position="relative"),a=d.offset(),o=nt.css(e,"top"),h=nt.css(e,"left"),l=("absolute"===c||"fixed"===c)&&nt.inArray("auto",[o,h])>-1,l?(s=d.position(),r=s.top,n=s.left):(r=parseFloat(o)||0,n=parseFloat(h)||0),nt.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(u.top=t.top-a.top+r),null!=t.left&&(u.left=t.left-a.left+n),"using"in t?t.using.call(e,u):d.css(u)}},nt.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){nt.offset.setOffset(this,e,t)});var t,i,s={top:0,left:0},n=this[0],o=n&&n.ownerDocument;if(o)return t=o.documentElement,nt.contains(t,n)?(typeof n.getBoundingClientRect!==Ct&&(s=n.getBoundingClientRect()),i=q(o),{top:s.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:s.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):s},position:function(){if(this[0]){var e,t,i={top:0,left:0},s=this[0];return"fixed"===nt.css(s,"position")?t=s.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),nt.nodeName(e[0],"html")||(i=e.offset()),i.top+=nt.css(e[0],"borderTopWidth",!0),i.left+=nt.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-nt.css(s,"marginTop",!0),left:t.left-i.left-nt.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ss;e&&!nt.nodeName(e,"html")&&"static"===nt.css(e,"position");)e=e.offsetParent;return e||ss})}}),nt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);nt.fn[e]=function(s){return Mt(this,function(e,s,n){var o=q(e);return void 0===n?o?t in o?o[t]:o.document.documentElement[s]:e[s]:void(o?o.scrollTo(i?nt(o).scrollLeft():n,i?n:nt(o).scrollTop()):e[s]=n)},e,s,arguments.length,null)}}),nt.each(["top","left"],function(e,t){nt.cssHooks[t]=A(it.pixelPosition,function(e,i){return i?(i=ti(e,t),si.test(i)?nt(e).position()[t]+"px":i):void 0})}),nt.each({Height:"height",Width:"width"},function(e,t){nt.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,s){nt.fn[s]=function(s,n){var o=arguments.length&&(i||"boolean"!=typeof s),r=i||(s===!0||n===!0?"margin":"border");return Mt(this,function(t,i,s){var n;return nt.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===s?nt.css(t,i,r):nt.style(t,i,s,r)
},t,o?s:void 0,o,null)}})}),nt.fn.size=function(){return this.length},nt.fn.andSelf=nt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return nt});var ns=e.jQuery,os=e.$;return nt.noConflict=function(t){return e.$===nt&&(e.$=os),t&&e.jQuery===nt&&(e.jQuery=ns),nt},typeof t===Ct&&(e.jQuery=e.$=nt),nt}),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(i,s,n){e.Backbone=t(e,n,i,s)});else if("undefined"!=typeof exports){var i,s=require("underscore");try{i=require("jquery")}catch(n){}t(e,exports,s,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,i,s){{var n=e.Backbone,o=[],r=(o.push,o.slice);o.splice}t.VERSION="1.1.0",t.$=s,t.noConflict=function(){return e.Backbone=n,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,i){if(!l(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var s=this._events[e]||(this._events[e]=[]);return s.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,s){if(!l(this,"once",e,[t,s])||!t)return this;var n=this,o=i.once(function(){n.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,s)},off:function(e,t,s){var n,o,r,a,h,c,d,u;if(!this._events||!l(this,"off",e,[t,s]))return this;if(!e&&!t&&!s)return this._events=void 0,this;for(a=e?[e]:i.keys(this._events),h=0,c=a.length;c>h;h++)if(e=a[h],r=this._events[e]){if(this._events[e]=n=[],t||s)for(d=0,u=r.length;u>d;d++)o=r[d],(t&&t!==o.callback&&t!==o.callback._callback||s&&s!==o.context)&&n.push(o);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!l(this,"trigger",e,t))return this;var i=this._events[e],s=this._events.all;return i&&c(i,t),s&&c(s,arguments),this},stopListening:function(e,t,s){var n=this._listeningTo;if(!n)return this;var o=!t&&!s;s||"object"!=typeof t||(s=this),e&&((n={})[e._listenId]=e);for(var r in n)e=n[r],e.off(t,s,this),(o||i.isEmpty(e._events))&&delete this._listeningTo[r];return this}},h=/\s+/,l=function(e,t,i,s){if(!i)return!0;if("object"==typeof i){for(var n in i)e[t].apply(e,[n,i[n]].concat(s));return!1}if(h.test(i)){for(var o=i.split(h),r=0,a=o.length;a>r;r++)e[t].apply(e,[o[r]].concat(s));return!1}return!0},c=function(e,t){var i,s=-1,n=e.length,o=t[0],r=t[1],a=t[2];switch(t.length){case 0:for(;++s<n;)(i=e[s]).callback.call(i.ctx);return;case 1:for(;++s<n;)(i=e[s]).callback.call(i.ctx,o);return;case 2:for(;++s<n;)(i=e[s]).callback.call(i.ctx,o,r);return;case 3:for(;++s<n;)(i=e[s]).callback.call(i.ctx,o,r,a);return;default:for(;++s<n;)(i=e[s]).callback.apply(i.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};i.each(d,function(e,t){a[t]=function(t,s,n){var o=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=i.uniqueId("l"));return o[r]=t,n||"object"!=typeof s||(n=this),t[e](s,n,this),this}}),a.bind=a.on,a.unbind=a.off,i.extend(t,a);var u=t.Model=function(e,t){var s=e||{};t||(t={}),this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(s=this.parse(s,t)||{}),s=i.defaults({},s,i.result(this,"defaults")),this.set(s,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(u.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,s){var n,o,r,a,h,l,c,d;if(null==e)return this;if("object"==typeof e?(o=e,s=t):(o={})[e]=t,s||(s={}),!this._validate(o,s))return!1;r=s.unset,h=s.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={}),d=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)t=o[n],i.isEqual(d[n],t)||a.push(n),i.isEqual(c[n],t)?delete this.changed[n]:this.changed[n]=t,r?delete d[n]:d[n]=t;if(!h){a.length&&(this._pending=s);for(var u=0,g=a.length;g>u;u++)this.trigger("change:"+a[u],this,d[a[u]],s)}if(l)return this;if(!h)for(;this._pending;)s=this._pending,this._pending=!1,this.trigger("change",this,s);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var s in this.attributes)t[s]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?i.clone(this.changed):!1;var t,s=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in e)i.isEqual(n[o],t=e[o])||((s||(s={}))[o]=t);return s},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,s=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(s&&s(t,i,e),void t.trigger("sync",t,i,e)):!1},B(this,e),this.sync("read",this,e)},save:function(e,t,s){var n,o,r,a=this.attributes;if(null==e||"object"==typeof e?(n=e,s=t):(n={})[e]=t,s=i.extend({validate:!0},s),n&&!s.wait){if(!this.set(n,s))return!1}else if(!this._validate(n,s))return!1;n&&s.wait&&(this.attributes=i.extend({},a,n)),void 0===s.parse&&(s.parse=!0);var h=this,l=s.success;return s.success=function(e){h.attributes=a;var t=h.parse(e,s);return s.wait&&(t=i.extend(n||{},t)),i.isObject(t)&&!h.set(t,s)?!1:(l&&l(h,e,s),void h.trigger("sync",h,e,s))},B(this,s),o=this.isNew()?"create":s.patch?"patch":"update","patch"===o&&(s.attrs=n),r=this.sync(o,this,s),n&&s.wait&&(this.attributes=a),r},destroy:function(e){e=e?i.clone(e):{};var t=this,s=e.success,n=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&n(),s&&s(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;B(this,e);var o=this.sync("delete",this,e);return e.wait||n(),o},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||k();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var s=this.validationError=this.validate(e,t)||null;return s?(this.trigger("invalid",this,s,i.extend(t,{validationError:s})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];i.each(g,function(e){u.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},_={add:!0,remove:!1};i.extend(p.prototype,a,{model:u,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,_))},remove:function(e,t){var s=!i.isArray(e);e=s?[e]:i.clone(e),t||(t={});var n,o,r,a;for(n=0,o=e.length;o>n;n++)a=e[n]=this.get(e[n]),a&&(r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a,t));return s?e[0]:e},set:function(e,t){t=i.defaults({},t,m),t.parse&&(e=this.parse(e,t));var s=!i.isArray(e);e=s?e?[e]:[]:i.clone(e);var n,o,r,a,h,l,c,d=t.at,g=this.model,p=this.comparator&&null==d&&t.sort!==!1,_=i.isString(this.comparator)?this.comparator:null,f=[],v=[],E={},y=t.add,T=t.merge,S=t.remove,C=!p&&y&&S?[]:!1;for(n=0,o=e.length;o>n;n++){if(h=e[n]||{},r=h instanceof u?a=h:h[g.prototype.idAttribute||"id"],l=this.get(r))S&&(E[l.cid]=!0),T&&(h=h===a?a.attributes:h,t.parse&&(h=l.parse(h,t)),l.set(h,t),p&&!c&&l.hasChanged(_)&&(c=!0)),e[n]=l;else if(y){if(a=e[n]=this._prepareModel(h,t),!a)continue;f.push(a),this._addReference(a,t)}C&&C.push(l||a)}if(S){for(n=0,o=this.length;o>n;++n)E[(a=this.models[n]).cid]||v.push(a);v.length&&this.remove(v,t)}if(f.length||C&&C.length)if(p&&(c=!0),this.length+=f.length,null!=d)for(n=0,o=f.length;o>n;n++)this.models.splice(d+n,0,f[n]);else{C&&(this.models.length=0);var w=C||f;for(n=0,o=w.length;o>n;n++)this.models.push(w[n])}if(c&&this.sort({silent:!0}),!t.silent){for(n=0,o=f.length;o>n;n++)(a=f[n]).trigger("add",a,this,t);(c||C&&C.length)&&this.trigger("sort",this,t)}return s?e[0]:e},reset:function(e,t){t||(t={});for(var s=0,n=this.models.length;n>s;s++)this._removeReference(this.models[s],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return r.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,s=this;return e.success=function(i){var n=e.reset?"reset":"set";s[n](i,e),t&&t(s,i,e),s.trigger("sync",s,i,e)},B(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var s=this,n=t.success;return t.success=function(e,i){t.wait&&s.add(e,t),n&&n(e,i,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof u)return e;t=t?i.clone(t):{},t.collection=this;var s=new this.model(e,t);return s.validationError?(this.trigger("invalid",this,s.validationError,t),!1):s},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){delete this._byId[e.id],delete this._byId[e.cid],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,s){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,s),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var f=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(f,function(e){p.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var v=["groupBy","countBy","sortBy","indexBy"];i.each(v,function(e){p.prototype[e]=function(t,s){var n=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,n,s)}});var E=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,T)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];i.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var s=e[t];if(i.isFunction(s)||(s=this[e[t]]),s){var n=t.match(y),o=n[1],r=n[2];s=i.bind(s,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,s):this.$el.on(o,r,s)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e["class"]=i.result(this,"className"));var s=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(s,!1)}}}),t.sync=function(e,s,n){var o=C[e];i.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:o,dataType:"json"};if(n.url||(r.url=i.result(s,"url")||k()),null!=n.data||!s||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||s.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",n.emulateJSON&&(r.data._method=o);var a=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"===r.type&&S&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=n.xhr=t.ajax(i.extend(r,n));return s.trigger("request",s,h,n),h};var S=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var w=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},b=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,L=/\*\w+/g,x=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(w.prototype,a,{initialize:function(){},route:function(e,s,n){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(s)&&(n=s,s=""),n||(n=this[s]);var o=this;return t.history.route(e,function(i){var r=o._extractParameters(e,i);n&&n.apply(o,r),o.trigger.apply(o,["route:"+s].concat(r)),o.trigger("route",s,r),t.history.trigger("route",o,s,r)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(x,"\\$&").replace(b,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var s=e.exec(t).slice(1);return i.map(s,function(e){return e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,O=/^\/+|\/+$/g,R=/msie [\w.]+/,N=/\/$/,P=/[?#].*$/;M.started=!1,i.extend(M.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(N,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(I,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var s=this.getFragment(),n=document.documentMode,o=R.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(O,"/"),o&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(s)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=s;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!M.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(P,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var s=e.href.replace(/(javascript:|#).*$/,"");e.replace(s+"#"+t)}else e.hash="#"+t}}),t.history=new M;var D=function(e,t){var s,n=this;s=e&&i.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},i.extend(s,n,t);var o=function(){this.constructor=s};return o.prototype=n.prototype,s.prototype=new o,e&&i.extend(s.prototype,e),s.__super__=n.prototype,s};u.extend=p.extend=w.extend=E.extend=M.extend=D;var k=function(){throw new Error('A "url" property or function must be specified')},B=function(e,t){var i=t.error;t.error=function(s){i&&i(e,s,t),e.trigger("error",e,s,t)}};return t}),define("route/router",["backbone","underscore"],function(e,t){var i=e.Router.extend({page:null,pageOptions:null,authCheck:null,initialize:function(e){e&&(this.authCheck=e.authCheck),this.on("route",this.onRoute,this)},start:function(){e.history.start()},setRoutes:function(e){this.routeObjects=e,t.each(e,function(e){for(var t=e.fragments,i=0;i<t.length;i++){var s=t[i];this.route(s,e.id)}},this)},onRoute:function(e,t){var i=this.getRouteObjectByID(e);t=i.fromURL(t),this._setPage(e,t)},setAuthCallBack:function(e){this.authCheck=e},_setPage:function(e,t){this.page=e,this.pageOptions=t,this.trigger("page",e,t)},navigate:function(i,s){var n={triggerRoute:!0,updateURL:!0};s||(s={});var o=s.pageOptions;t.defaults(s,n),s.triggerRoute=s.triggerRoute===!1?!1:!0,s.updateURL=s.updateURL===!1?!1:!0;var r=this.getRouteObjectByID(i),a=r.getFragment();return o&&(a=a+"/"+r.toURL(o)),this.authCheck&&!this.authCheck.call(this,i)?!1:s.updateURL?e.Router.prototype.navigate.call(this,a,s.triggerRoute):void this._setPage(i,o)},getRouteObjectByID:function(e){var i=t.where(this.routeObjects,{id:e});if(0===i.length)throw Error("You requested a page without a valid routeID: "+e);var s=i[0];return s},back:function(){history.back()}});return new i}),define("route/route_object",["jquery","underscore"],function(e,t){"use strict";var i=function(e,i,s,n){t.isArray(e)||(e=[e]),this.fragments=e,this.id=i,this.toURL=s||function(){},this.fromURL=n||function(){},this.getFragment=function(){return e[0]}};return i}),define("model/app_model",["backbone","config"],function(e,t){var i=e.Model.extend({PAGES:{ABOUT:"ABOUT",LOADER:"LOADER",LEGAL:"LEGAL",CAROUSEL:"CAROUSEL",EARLY_YEARS:"EARLY_YEARS",MANDOLIN:"MANDOLIN",GUN_FIGHT:"GUN_FIGHT",LOOSE_LIPS:"LOOSE_LIPS",GAME:"GAME",DEPARTED_COLONEL:"DEPARTED_COLONEL"},MOBILE:{OVERLAYS:{MENU:"MENU",ABOUT:"ABOUT"}},defaults:{page:null,pageOptions:{},postLoaderPage:null,postLoaderPageOptions:null},overlays:[],update:function(){this.shouldRenderCreateJS&&this.trigger("update")},renderCreateJS:function(e){this.shouldRenderCreateJS=e},getEmbedOptions:function(){var e=null,i=!0;switch(this.get("page")){case this.PAGES.ABOUT:break;case this.PAGES.CAROUSEL:break;case this.PAGES.ABOUT:break;case this.PAGES.EARLY_YEARS:break;case this.PAGES.MANDOLIN:e='<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/205564940%3Fsecret_token%3Ds-PdGXy&amp;color=ff5500&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false"></iframe>';break;case this.PAGES.GUN_FIGHT:e='<iframe width="560" height="315" src="https://www.youtube.com/embed/4N6W6An2Isg" frameborder="0" allowfullscreen></iframe>';break;case this.PAGES.LOOSE_LIPS:break;case this.PAGES.GAME:e='<iframe src="'+t.SITE_URL+'embed_canvas.html" width="398" height="303" frameborder="0" scrolling="no" style="border:none; overflow:hidden;"></iframe>';break;case this.PAGES.DEPARTED_COLONEL:}return{embedCode:e,socialMedia:i}},getOverlays:function(){return this.overlays},addOverlay:function(e){this.overlays.push(e),this.trigger("overlay_added",e)},setFullscreen:function(e){var t=document.documentElement;e?t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},removeOverlay:function(){this.trigger("overlay_removed",this.overlays.pop())},showVideo:function(e){this.trigger("show_video",e)},removeVideo:function(e){this.trigger("remove_video",e)},resize:function(e,t){this.set("viewport_width",e),this.set("viewport_height",t),this.trigger("resize",e,t)}});return new i}),function(){"use strict";var bind=function(e,t){var i=Array.prototype.slice.call(arguments,2);return function(){var s=i.concat(Array.prototype.slice.call(arguments,0));e.apply(t,s)}};window.console||(window.console={});var console=window.console;if(!console.log)if(window.log4javascript){var log=log4javascript.getDefaultLogger();console.log=bind(log.info,log),console.debug=bind(log.debug,log),console.info=bind(log.info,log),console.warn=bind(log.warn,log),console.error=bind(log.error,log)}else console.log=function(){};if(console.debug||(console.debug=console.log),console.info||(console.info=console.log),console.warn||(console.warn=console.log),console.error||(console.error=console.log),null!=window.__consoleShimTest__||eval("/*@cc_on @_jscript_version <= 9@*/")){var wrap=function(e){var t,i,s,n;if(e=Array.prototype.slice.call(arguments,0),n=e.shift(),i=e.length,i>1&&window.__consoleShimTest__!==!1)for("string"!=typeof e[0]&&(e.unshift("%o"),i+=1),s=e[0].match(/%[a-z]/g),t=s?s.length+1:1;i>t;t+=1)e[0]+=" %o";Function.apply.call(n,console,e)};console.log=bind(wrap,window,console.log),console.debug=bind(wrap,window,console.debug),console.info=bind(wrap,window,console.info),console.warn=bind(wrap,window,console.warn),console.error=bind(wrap,window,console.error)}if(console.assert||(console.assert=function(){var e=Array.prototype.slice.call(arguments,0),t=e.shift();t||(e[0]="Assertion failed: "+e[0],console.error.apply(console,e))}),console.dir||(console.dir=console.log),console.dirxml||(console.dirxml=console.log),console.exception||(console.exception=console.error),!console.time||!console.timeEnd){var timers={};console.time=function(e){timers[e]=(new Date).getTime()},console.timeEnd=function(e){var t=timers[e];t&&(console.log(e+": "+((new Date).getTime()-t)+"ms"),delete timers[e])}}console.table||(console.table=function(e,t){var i,s,n,o,r,a;if(e&&e instanceof Array&&e.length){if(!(t&&t instanceof Array)){t=[];for(a in e[0])e[0].hasOwnProperty(a)&&t.push(a)}for(i=0,s=e.length;s>i;i+=1){for(n=[],o=0,r=t.length;r>o;o+=1)n.push(e[i][t[o]]);Function.apply.call(console.log,console,n)}}}),console.clear||(console.clear=function(){}),console.trace||(console.trace=function(){}),console.group||(console.group=function(){}),console.groupCollapsed||(console.groupCollapsed=function(){}),console.groupEnd||(console.groupEnd=function(){}),console.timeStamp||(console.timeStamp=function(){}),console.profile||(console.profile=function(){}),console.profileEnd||(console.profileEnd=function(){}),console.count||(console.count=function(){})}(),define("libs/console-shim",function(e){return function(){var t;return t||e.console}}(this)),define("console",["libs/console-shim","config"],function(e,t){var i={log:function(){this._isDebug()&&e.log.apply(e,arguments)},info:function(t){this._isDebug()&&e.info(t)},warn:function(t){this._isDebug()&&e.warn(t)},error:function(t){this._isDebug()&&e.error(t)},_isDebug:function(){return"local"===t.getEnv()||"true"===this._getParameterByName("debug")?!0:!1},_getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=t.exec(location.search);return null==i?"":decodeURIComponent(i[1].replace(/\+/g," "))}};return i}),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.PreloadJS=createjs.PreloadJS||{};e.version="0.6.0",e.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(e,t){"use strict";function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(e,t){"use strict";var i=e.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(s){i[(t+="_")+"constructor"]=s.constructor;for(var n in s)i.hasOwnProperty(n)&&"function"==typeof s[n]&&(i[t+n]=s[n])}return e},this.createjs=this.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var i=0,s=e.length;s>i;i++)if(t===e[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var i=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var t=e.agent=window.navigator.userAgent;e.isWindowPhone=t.indexOf("IEMobile")>-1||t.indexOf("Windows Phone")>-1,e.isFirefox=t.indexOf("Firefox")>-1,e.isOpera=null!=window.opera,e.isChrome=t.indexOf("Chrome")>-1,e.isIOS=(t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&!e.isWindowPhone,e.isAndroid=t.indexOf("Android")>-1&&!e.isWindowPhone,e.isBlackberry=t.indexOf("Blackberry")>-1,createjs.BrowserDetect=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.Event_constructor("error"),this.title=e,this.message=t,this.data=i}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=s[e];return n&&this.removeEventListener(e,t,i),n=s[e],n?n.push(t):s[e]=[t],t},t.on=function(e,t,i,s,n,o){return t.handleEvent&&(i=i||t,t=t.handleEvent),i=i||this,this.addEventListener(e,function(e){t.call(i,e,n),s&&e.remove()},o)},t.removeEventListener=function(e,t,i){var s=i?this._captureListeners:this._listeners;if(s){var n=s[e];if(n)for(var o=0,r=n.length;r>o;o++)if(n[o]==t){1==r?delete s[e]:n.splice(o,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e){if("string"==typeof e){var t=this._listeners;if(!t||!t[e])return!1;e=new createjs.Event(e)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(i){}if(e.bubbles&&this.parent){for(var s=this,n=[s];s.parent;)n.push(s=s.parent);var o,r=n.length;for(o=r-1;o>=0&&!e.propagationStopped;o--)n[o]._dispatchEvent(e,1+(0==o));for(o=1;r>o&&!e.propagationStopped;o++)n[o]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,i=this._captureListeners;return!!(t&&t[e]||i&&i[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var i,s=1==t?this._captureListeners:this._listeners;if(e&&s){var n=s[e.type];if(!n||!(i=n.length))return;try{e.currentTarget=this}catch(o){}try{e.eventPhase=t}catch(o){}e.removed=!1,n=n.slice();for(var r=0;i>r&&!e.immediatePropagationStopped;r++){var a=n[r];a.handleEvent?a.handleEvent(e):a(e),e.removed&&(this.off(e.type,a,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.Event_constructor("progress"),this.loaded=e,this.total=null==t?1:t,this.progress=0==t?0:this.loaded/this.total}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){function e(t,s){function o(e){if(o[e]!==_)return o[e];
var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=o("json-stringify")&&o("json-parse");else{var i,n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var h=s.stringify,c="function"==typeof h&&E;if(c){(i=function(){return 1}).toJSON=i;try{c="0"===h(0)&&"0"===h(new r)&&'""'==h(new a)&&h(v)===_&&h(_)===_&&h()===_&&"1"===h(i)&&"[1]"==h([i])&&"[null]"==h([_])&&"null"==h(null)&&"[null,null,null]"==h([_,v,null])&&h({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==n&&"1"===h(null,i)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new l(-1))}catch(d){c=!1}}t=c}if("json-parse"==e){var u=s.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){i=u(n);var g=5==i.a.length&&1===i.a[0];if(g){try{g=!u('"	"')}catch(d){}if(g)try{g=1!==u("01")}catch(d){}if(g)try{g=1!==u("1.")}catch(d){}}}}catch(d){g=!1}t=g}}return o[e]=!!t}t||(t=n.Object()),s||(s=n.Object());var r=t.Number||n.Number,a=t.String||n.String,h=t.Object||n.Object,l=t.Date||n.Date,c=t.SyntaxError||n.SyntaxError,d=t.TypeError||n.TypeError,u=t.Math||n.Math,g=t.JSON||n.JSON;"object"==typeof g&&g&&(s.stringify=g.stringify,s.parse=g.parse);var p,m,_,f=h.prototype,v=f.toString,E=new l(-0xc782b5b800cec);try{E=-109252==E.getUTCFullYear()&&0===E.getUTCMonth()&&1===E.getUTCDate()&&10==E.getUTCHours()&&37==E.getUTCMinutes()&&6==E.getUTCSeconds()&&708==E.getUTCMilliseconds()}catch(y){}if(!o("json")){var T="[object Function]",S="[object Date]",C="[object Number]",w="[object String]",b="[object Array]",A="[object Boolean]",L=o("bug-string-char-index");if(!E)var x=u.floor,M=[0,31,59,90,120,151,181,212,243,273,304,334],I=function(e,t){return M[t]+365*(e-1970)+x((e-1969+(t=+(t>1)))/4)-x((e-1901+t)/100)+x((e-1601+t)/400)};if((p=f.hasOwnProperty)||(p=function(e){var t,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=v?p=function(e){var t=this.__proto__,i=e in(this.__proto__=null,this);return this.__proto__=t,i}:(t=i.constructor,p=function(e){var i=(this.constructor||t).prototype;return e in this&&!(e in i&&this[e]===i[e])}),i=null,p.call(this,e)}),m=function(e,t){var s,n,o,r=0;(s=function(){this.valueOf=0}).prototype.valueOf=0,n=new s;for(o in n)p.call(n,o)&&r++;return s=n=null,r?m=2==r?function(e,t){var i,s={},n=v.call(e)==T;for(i in e)n&&"prototype"==i||p.call(s,i)||!(s[i]=1)||!p.call(e,i)||t(i)}:function(e,t){var i,s,n=v.call(e)==T;for(i in e)n&&"prototype"==i||!p.call(e,i)||(s="constructor"===i)||t(i);(s||p.call(e,i="constructor"))&&t(i)}:(n=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var s,o,r=v.call(e)==T,a=!r&&"function"!=typeof e.constructor&&i[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(s in e)r&&"prototype"==s||!a.call(e,s)||t(s);for(o=n.length;s=n[--o];a.call(e,s)&&t(s));}),m(e,t)},!o("json-stringify")){var O={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},R="000000",N=function(e,t){return(R+(t||0)).slice(-e)},P="\\u00",D=function(e){for(var t='"',i=0,s=e.length,n=!L||s>10,o=n&&(L?e.split(""):e);s>i;i++){var r=e.charCodeAt(i);switch(r){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=O[r];break;default:if(32>r){t+=P+N(2,r.toString(16));break}t+=n?o[i]:e.charAt(i)}}return t+'"'},k=function(e,t,i,s,n,o,r){var a,h,l,c,u,g,f,E,y,T,L,M,O,R,P,B;try{a=t[e]}catch(U){}if("object"==typeof a&&a)if(h=v.call(a),h!=S||p.call(a,"toJSON"))"function"==typeof a.toJSON&&(h!=C&&h!=w&&h!=b||p.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&1/0>a){if(I){for(u=x(a/864e5),l=x(u/365.2425)+1970-1;I(l+1,0)<=u;l++);for(c=x((u-I(l,0))/30.42);I(l,c+1)<=u;c++);u=1+u-I(l,c),g=(a%864e5+864e5)%864e5,f=x(g/36e5)%24,E=x(g/6e4)%60,y=x(g/1e3)%60,T=g%1e3}else l=a.getUTCFullYear(),c=a.getUTCMonth(),u=a.getUTCDate(),f=a.getUTCHours(),E=a.getUTCMinutes(),y=a.getUTCSeconds(),T=a.getUTCMilliseconds();a=(0>=l||l>=1e4?(0>l?"-":"+")+N(6,0>l?-l:l):N(4,l))+"-"+N(2,c+1)+"-"+N(2,u)+"T"+N(2,f)+":"+N(2,E)+":"+N(2,y)+"."+N(3,T)+"Z"}else a=null;if(i&&(a=i.call(t,e,a)),null===a)return"null";if(h=v.call(a),h==A)return""+a;if(h==C)return a>-1/0&&1/0>a?""+a:"null";if(h==w)return D(""+a);if("object"==typeof a){for(R=r.length;R--;)if(r[R]===a)throw d();if(r.push(a),L=[],P=o,o+=n,h==b){for(O=0,R=a.length;R>O;O++)M=k(O,a,i,s,n,o,r),L.push(M===_?"null":M);B=L.length?n?"[\n"+o+L.join(",\n"+o)+"\n"+P+"]":"["+L.join(",")+"]":"[]"}else m(s||a,function(e){var t=k(e,a,i,s,n,o,r);t!==_&&L.push(D(e)+":"+(n?" ":"")+t)}),B=L.length?n?"{\n"+o+L.join(",\n"+o)+"\n"+P+"}":"{"+L.join(",")+"}":"{}";return r.pop(),B}};s.stringify=function(e,t,s){var n,o,r,a;if(i[typeof t]&&t)if((a=v.call(t))==T)o=t;else if(a==b){r={};for(var h,l=0,c=t.length;c>l;h=t[l++],a=v.call(h),(a==w||a==C)&&(r[h]=1));}if(s)if((a=v.call(s))==C){if((s-=s%1)>0)for(n="",s>10&&(s=10);n.length<s;n+=" ");}else a==w&&(n=s.length<=10?s:s.slice(0,10));return k("",(h={},h[""]=e,h),o,r,n,"",[])}}if(!o("json-parse")){var B,U,H=a.fromCharCode,G={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},V=function(){throw B=U=null,c()},F=function(){for(var e,t,i,s,n,o=U,r=o.length;r>B;)switch(n=o.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=L?o.charAt(B):o[B],B++,e;case 34:for(e="@",B++;r>B;)if(n=o.charCodeAt(B),32>n)V();else if(92==n)switch(n=o.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=G[n],B++;break;case 117:for(t=++B,i=B+4;i>B;B++)n=o.charCodeAt(B),n>=48&&57>=n||n>=97&&102>=n||n>=65&&70>=n||V();e+=H("0x"+o.slice(t,B));break;default:V()}else{if(34==n)break;for(n=o.charCodeAt(B),t=B;n>=32&&92!=n&&34!=n;)n=o.charCodeAt(++B);e+=o.slice(t,B)}if(34==o.charCodeAt(B))return B++,e;V();default:if(t=B,45==n&&(s=!0,n=o.charCodeAt(++B)),n>=48&&57>=n){for(48==n&&(n=o.charCodeAt(B+1),n>=48&&57>=n)&&V(),s=!1;r>B&&(n=o.charCodeAt(B),n>=48&&57>=n);B++);if(46==o.charCodeAt(B)){for(i=++B;r>i&&(n=o.charCodeAt(i),n>=48&&57>=n);i++);i==B&&V(),B=i}if(n=o.charCodeAt(B),101==n||69==n){for(n=o.charCodeAt(++B),(43==n||45==n)&&B++,i=B;r>i&&(n=o.charCodeAt(i),n>=48&&57>=n);i++);i==B&&V(),B=i}return+o.slice(t,B)}if(s&&V(),"true"==o.slice(B,B+4))return B+=4,!0;if("false"==o.slice(B,B+5))return B+=5,!1;if("null"==o.slice(B,B+4))return B+=4,null;V()}return"$"},W=function(e){var t,i;if("$"==e&&V(),"string"==typeof e){if("@"==(L?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=F(),"]"!=e;i||(i=!0))i&&(","==e?(e=F(),"]"==e&&V()):V()),","==e&&V(),t.push(W(e));return t}if("{"==e){for(t={};e=F(),"}"!=e;i||(i=!0))i&&(","==e?(e=F(),"}"==e&&V()):V()),(","==e||"string"!=typeof e||"@"!=(L?e.charAt(0):e[0])||":"!=F())&&V(),t[e.slice(1)]=W(F());return t}V()}return e},j=function(e,t,i){var s=Y(e,t,i);s===_?delete e[t]:e[t]=s},Y=function(e,t,i){var s,n=e[t];if("object"==typeof n&&n)if(v.call(n)==b)for(s=n.length;s--;)j(n,s,i);else m(n,function(e){j(n,e,i)});return i.call(e,t,n)};s.parse=function(e,t){var i,s;return B=0,U=""+e,i=W(F()),"$"!=F()&&V(),B=U=null,t&&v.call(t)==T?Y((s={},s[""]=i,s),"",t):i}}}return s.runInContext=e,s}var t="function"==typeof define&&define.amd,i={"function":!0,object:!0},s=i[typeof exports]&&exports&&!exports.nodeType&&exports,n=i[typeof window]&&window||this,o=s&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!o||o.global!==o&&o.window!==o&&o.self!==o||(n=o),s&&!t)e(n,s);else{var r=n.JSON,a=n.JSON3,h=!1,l=e(n,n.JSON3={noConflict:function(){return h||(h=!0,n.JSON=r,n.JSON3=a,r=a=null),l}});n.JSON={parse:l.parse,stringify:l.stringify}}t&&define("libs/createjs/preloadjs",[],function(){return l})}.call(this),function(){var e={};e.parseXML=function(e,t){var i=null;try{if(window.DOMParser){var s=new DOMParser;i=s.parseFromString(e,t)}else i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(e)}catch(n){}return i},e.parseJSON=function(e){if(null==e)return null;try{return JSON.parse(e)}catch(t){throw t}},createjs.DataUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=8e3}var t=e.prototype={},i=e;i.create=function(t){if("string"==typeof t){var s=new e;return s.src=t,s}if(t instanceof i)return t;if(t instanceof Object)return t;throw new Error("Type not recognized.")},t.set=function(e){for(var t in e)this[t]=e[t];return this},createjs.LoadItem=i}(),function(){var e={};e.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,e.RELATIVE_PATT=/^[.\/]*?\//i,e.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,e.parseURI=function(t){var i={absolute:!1,relative:!1};if(null==t)return i;var s=t.indexOf("?");s>-1&&(t=t.substr(0,s));var n;return e.ABSOLUTE_PATT.test(t)?i.absolute=!0:e.RELATIVE_PATT.test(t)&&(i.relative=!0),(n=t.match(e.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},e.formatQueryString=function(e,t){if(null==e)throw new Error("You must specify data.");var i=[];for(var s in e)i.push(s+"="+escape(e[s]));return t&&(i=i.concat(t)),i.join("&")},e.buildPath=function(e,t){if(null==t)return e;var i=[],s=e.indexOf("?");if(-1!=s){var n=e.slice(s+1);i=i.concat(n.split("&"))}return-1!=s?e.slice(0,s)+"?"+this._formatQueryString(t,i):e+"?"+this._formatQueryString(t,i)},e.isCrossDomain=function(e){var t=document.createElement("a");t.href=e.src;var i=document.createElement("a");i.href=location.href;var s=""!=t.hostname&&(t.port!=i.port||t.protocol!=i.protocol||t.hostname!=i.hostname);return s},e.isLocal=function(e){var t=document.createElement("a");return t.href=e.src,""==t.hostname&&"file:"==t.protocol},e.isBinary=function(e){switch(e){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},e.isImageTag=function(e){return e instanceof HTMLImageElement},e.isAudioTag=function(e){return window.HTMLAudioElement?e instanceof HTMLAudioElement:!1},e.isVideoTag=function(e){return window.HTMLVideoElement?e instanceof HTMLVideoElement:void 0},e.isText=function(e){switch(e){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},e.getTypeByExtension=function(e){if(null==e)return createjs.AbstractLoader.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=e?createjs.LoadItem.create(e):null,this._preferXHR=t,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var t=createjs.extend(e,createjs.EventDispatcher),i=e;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",t.getItem=function(){return this._item},t.getResult=function(e){return e?this._rawResult:this._result},t.getTag=function(){return this._tag},t.setTag=function(e){this._tag=e},t.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var e=new createjs.Event("initialize");e.loader=this._request,this.dispatchEvent(e),this._request.load()},t.cancel=function(){this.canceled=!0,this.destroy()},t.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},t.getLoadedItems=function(){return this._loadedItems},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._createTag=function(){return null},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.ProgressEvent(this.progress)):(t=e,this.progress=e.loaded/e.total,t.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var e=new createjs.Event("complete");e.rawResult=this._rawResult,null!=this._result&&(e.result=this._result),this.dispatchEvent(e)}},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(e))},t._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},t.resultFormatter=null,t.handleEvent=function(e){switch(e.type){case"complete":this._rawResult=e.target._response;var t=this.resultFormatter&&this.resultFormatter(this),i=this;t instanceof Function?t(function(e){i._result=e,i._sendComplete()}):(this._result=t||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(e);break;case"error":this._sendError(e);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(e.type)}},t.buildPath=function(e,t){return createjs.RequestUtils.buildPath(e,t)},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.AbstractLoader_constructor(e,t,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var t=createjs.extend(e,createjs.AbstractLoader);t.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},t._createTag=function(){},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._formatResult=function(e){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(e.getTag().src=e.getResult(!0)),e.getTag()},createjs.AbstractMediaLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e){this._item=e},t=createjs.extend(e,createjs.EventDispatcher);t.load=function(){},t.destroy=function(){},t.cancel=function(){},createjs.AbstractRequest=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var t=createjs.extend(e,createjs.AbstractRequest);t.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var e=new createjs.Event("initialize");e.loader=this._tag,this.dispatchEvent(e),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},t.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},t._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},t._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},t._showTag=function(){this._tag.style.visibility=this._startTagVisibility},t._handleStalled=function(){},createjs.TagRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var t=createjs.extend(e,createjs.TagRequest);t.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleStalled=function(){},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(e,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractRequest_constructor(e),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(e)}var t=createjs.extend(e,createjs.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(e){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,e))}},t.setResponseType=function(e){this._request.responseType=e},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},t._handleAbort=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,e))},t._handleError=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(e.message))},t._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},t._handleTimeout=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,e))},t._checkError=function(){var e=parseInt(this._request.status);switch(e){case 404:case 0:return new Error(e)}return null},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t=createjs.RequestUtils.isCrossDomain(e),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,t&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var o=0,r=s.ACTIVEX_VERSIONS.length;r>o;o++){{s.ACTIVEX_VERSIONS[o]}try{n=new ActiveXObject(axVersions);break}catch(a){}}if(null==n)return!1}e.mimeType&&n.overrideMimeType&&n.overrideMimeType(e.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var h=null;if(h=e.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(e.src,e.values):e.src,n.open(e.method||createjs.AbstractLoader.GET,h,!0),t&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),e.values&&e.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),t||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),e.headers)for(var l in e.headers)i[l]=e.headers[l];for(l in i)n.setRequestHeader(l,i[l]);return n instanceof XMLHttpRequest&&void 0!==e.withCredentials&&(n.withCredentials=e.withCredentials),this._request=n,!0},t._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},t.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.AbstractLoader_constructor(),this.init(e,t,i)}var t=createjs.extend(e,createjs.AbstractLoader),i=e;t.init=function(e,t,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(e),this.stopOnError=!1,this.maintainScriptOrder=!0,this.next=null,this._paused=!1,this._basePath=t,this._crossOrigin=i,this._typeCallbacks={},this._extensionCallbacks={},this._loadStartWasDispatched=!1,this._maxConnections=1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=0/0,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,t.registerLoader=function(e){if(!e||!e.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(e))throw new Error("loader already exists.");this._availableLoaders.unshift(e)},t.unregisterLoader=function(e){var t=this._availableLoaders.indexOf(e);-1!=t&&t<this._defaultLoaderLength-1&&this._availableLoaders.splice(t,1)},t.setUseXHR=function(e){return this.setPreferXHR(e)},t.setPreferXHR=function(e){return this.preferXHR=0!=e&&null!=window.XMLHttpRequest,this.preferXHR},t.removeAll=function(){this.remove()},t.remove=function(e){var t=null;if(!e||e instanceof Array){if(e)t=e;else if(arguments.length>0)return}else t=[e];var i=!1;if(t){for(;t.length;){var s=t.pop(),n=this.getResult(s);for(o=this._loadQueue.length-1;o>=0;o--)if(r=this._loadQueue[o].getItem(),r.id==s||r.src==s){this._loadQueue.splice(o,1)[0].cancel();break}for(o=this._loadQueueBackup.length-1;o>=0;o--)if(r=this._loadQueueBackup[o].getItem(),r.id==s||r.src==s){this._loadQueueBackup.splice(o,1)[0].cancel();break}if(n)delete this._loadItemsById[n.id],delete this._loadItemsBySrc[n.src],this._disposeItem(n);else for(var o=this._currentLoads.length-1;o>=0;o--){var r=this._currentLoads[o].getItem();if(r.id==s||r.src==s){this._currentLoads.splice(o,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath)}},t.reset=function(){this.close();for(var e in this._loadItemsById)this._disposeItem(this._loadItemsById[e]);for(var t=[],i=0,s=this._loadQueueBackup.length;s>i;i++)t.push(this._loadQueueBackup[i].getItem());this.loadManifest(t,!1)},t.installPlugin=function(e){if(null!=e&&null!=e.getPreloadHandlers){var t=e.getPreloadHandlers();if(t.scope=e,null!=t.types)for(var i=0,s=t.types.length;s>i;i++)this._typeCallbacks[t.types[i]]=t;if(null!=t.extensions)for(i=0,s=t.extensions.length;s>i;i++)this._extensionCallbacks[t.extensions[i]]=t}},t.setMaxConnections=function(e){this._maxConnections=e,!this._paused&&this._loadQueue.length>0&&this._loadNext()},t.loadFile=function(e,t,i){if(null==e){var s=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(s)}this._addItem(e,null,i),this.setPaused(t!==!1?!1:!0)},t.loadManifest=function(e,t,s){var n=null,o=null;if(e instanceof Array){if(0==e.length){var r=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(r)}n=e}else if("string"==typeof e)n=[{src:e,type:i.MANIFEST}];else{if("object"!=typeof e){var r=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(r)}if(void 0!==e.src){if(null==e.type)e.type=i.MANIFEST;else if(e.type!=i.MANIFEST){var r=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(r)}n=[e]}else void 0!==e.manifest&&(n=e.manifest,o=e.path)}for(var a=0,h=n.length;h>a;a++)this._addItem(n[a],o,s);this.setPaused(t!==!1?!1:!0)},t.load=function(){this.setPaused(!1)},t.getItem=function(e){return this._loadItemsById[e]||this._loadItemsBySrc[e]},t.getResult=function(e,t){var i=this._loadItemsById[e]||this._loadItemsBySrc[e];if(null==i)return null;var s=i.id;return t&&this._loadedRawResults[s]?this._loadedRawResults[s]:this._loadedResults[s]},t.getItems=function(e){for(var t=[],i=0,s=this._loadQueueBackup.length;s>i;i++){var n=this._loadQueueBackup[i],o=n.getItem();(e!==!0||n.loaded)&&t.push({item:o,result:this.getResult(o.id),rawResult:this.getResult(o.id,!0)})}return t},t.setPaused=function(e){this._paused=e,this._paused||this._loadNext()},t.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=0/0},t._addItem=function(e,t,i){var s=this._createLoadItem(e,t,i);if(null!=s){var n=this._createLoader(s);null!=n&&(s._loader=n,this._loadQueue.push(n),this._loadQueueBackup.push(n),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&s.type==createjs.LoadQueue.JAVASCRIPT||s.maintainOrder===!0)&&(this._scriptOrder.push(s),this._loadedScripts.push(null)))}},t._createLoadItem=function(e,t,s){var n=createjs.LoadItem.create(e);if(null==n)return null;var o=createjs.RequestUtils.parseURI(n.src);o.extension&&(n.ext=o.extension),null==n.type&&(n.type=createjs.RequestUtils.getTypeByExtension(n.ext));var r="",a=s||this._basePath,h=n.src;if(!o.absolute&&!o.relative)if(t){r=t;var l=createjs.RequestUtils.parseURI(t);h=t+h,null==a||l.absolute||l.relative||(r=a+r)}else null!=a&&(r=a);n.src=r+n.src,n.path=r,(void 0===n.id||null===n.id||""===n.id)&&(n.id=h);var c=this._typeCallbacks[n.type]||this._extensionCallbacks[n.ext];if(c){var d=c.callback.call(c.scope,n,this);if(d===!1)return null;d===!0||null!=d&&(n._loader=d),o=createjs.RequestUtils.parseURI(n.src),null!=o.extension&&(n.ext=o.extension)}return this._loadItemsById[n.id]=n,this._loadItemsBySrc[n.src]=n,null==n.loadTimeout&&(n.loadTimeout=i.loadTimeout),null==n.crossOrigin&&(n.crossOrigin=this._crossOrigin),n},t._createLoader=function(e){if(null!=e._loader)return e._loader;for(var t=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var s=this._availableLoaders[i];if(s&&s.canLoadItem(e))return new s(e,t)}return null},t._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var e=0;e<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);e++){var t=this._loadQueue[e];this._canStartLoad(t)&&(this._loadQueue.splice(e,1),e--,this._loadItem(t))}}},t._loadItem=function(e){e.on("fileload",this._handleFileLoad,this),e.on("progress",this._handleProgress,this),e.on("complete",this._handleFileComplete,this),e.on("error",this._handleError,this),e.on("fileerror",this._handleFileError,this),this._currentLoads.push(e),this._sendFileStart(e.getItem()),e.load()},t._handleFileLoad=function(e){e.target=null,this.dispatchEvent(e)},t._handleFileError=function(e){var t=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.item);this._sendError(t)},t._handleError=function(e){var t=e.target;this._numItemsLoaded++,this._finishOrderedItem(t,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.getItem());this._sendError(i),this.stopOnError||(this._removeLoadItem(t),this._loadNext())},t._handleFileComplete=function(e){var t=e.target,i=t.getItem(),s=t.getResult();
this._loadedResults[i.id]=s;var n=t.getResult(!0);null!=n&&n!==s&&(this._loadedRawResults[i.id]=n),this._saveLoadedItems(t),this._removeLoadItem(t),this._finishOrderedItem(t)||this._processFinishedLoad(i,t)},t._saveLoadedItems=function(e){var t=e.getLoadedItems();if(null!==t)for(var i=0;i<t.length;i++){var s=t[i].item;this._loadItemsBySrc[s.src]=s,this._loadItemsById[s.id]=s,this._loadedResults[s.id]=t[i].result,this._loadedRawResults[s.id]=t[i].rawResult}},t._finishOrderedItem=function(e,t){var i=e.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){e instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var s=createjs.indexOf(this._scriptOrder,i);return-1==s?!1:(this._loadedScripts[s]=t===!0?!0:i,this._checkScriptLoadOrder(),!0)}return!1},t._checkScriptLoadOrder=function(){for(var e=this._loadedScripts.length,t=0;e>t;t++){var i=this._loadedScripts[t];if(null===i)break;if(i!==!0){var s=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&(document.body||document.getElementsByTagName("body")[0]).appendChild(s);var n=i._loader;this._processFinishedLoad(i,n),this._loadedScripts[t]=!0}}},t._processFinishedLoad=function(e,t){this._numItemsLoaded++,this._updateProgress(),this._sendFileComplete(e,t),this._loadNext()},t._canStartLoad=function(e){if(!this.maintainScriptOrder||e.preferXHR)return!0;var t=e.getItem();if(t.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(t),s=0;i>s;){var n=this._loadedScripts[s];if(null==n)return!1;s++}return this._currentlyLoadingScript=!0,!0},t._removeLoadItem=function(e){var t=e.getItem();delete t._loader;for(var i=this._currentLoads.length,s=0;i>s;s++)if(this._currentLoads[s]==e){this._currentLoads.splice(s,1);break}},t._handleProgress=function(e){var t=e.target;this._sendFileProgress(t.getItem(),t.progress),this._updateProgress()},t._updateProgress=function(){var e=this._numItemsLoaded/this._numItems,t=this._numItems-this._numItemsLoaded;if(t>0){for(var i=0,s=0,n=this._currentLoads.length;n>s;s++)i+=this._currentLoads[s].progress;e+=i/t*(t/this._numItems)}this._lastProgress!=e&&(this._sendProgress(e),this._lastProgress=e)},t._disposeItem=function(e){delete this._loadedResults[e.id],delete this._loadedRawResults[e.id],delete this._loadItemsById[e.id],delete this._loadItemsBySrc[e.src]},t._sendFileProgress=function(e,t){if(this._isCanceled())return void this._cleanUp();if(this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=t,i.loaded=t,i.total=1,i.item=e,this.dispatchEvent(i)}},t._sendFileComplete=function(e,t){if(!this._isCanceled()){var i=new createjs.Event("fileload");i.loader=t,i.item=e,i.result=this._loadedResults[e.id],i.rawResult=this._loadedRawResults[e.id],e.completeHandler&&e.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},t._sendFileStart=function(e){var t=new createjs.Event("filestart");t.item=e,this.hasEventListener("filestart")&&this.dispatchEvent(t)},t.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.TEXT)}var t=(createjs.extend(e,createjs.AbstractLoader),e);t.canLoadItem=function(e){return e.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.BINARY},t._updateXHR=function(e){e.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=document.createElement(t?"style":"link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.CSS},t._formatResult=function(e){if(this._preferXHR){var t=e.getTag(),i=document.getElementsByTagName("head")[0];if(i.appendChild(t),t.styleSheet)t.styleSheet.cssText=e.getResult(!0);else{var s=document.createTextNode(e.getResult(!0));t.appendChild(s)}}else t=this._tag;return t},createjs.CSSLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(e)?this._tag=e:createjs.RequestUtils.isImageTag(e.src)?this._tag=e.src:createjs.RequestUtils.isImageTag(e.tag)&&(this._tag=e.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.IMAGE},t.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var e=this._item.crossOrigin;1==e&&(e="Anonymous"),null==e||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=e),this.AbstractLoader_load()},t._updateXHR=function(e){e.loader.mimeType="text/plain; charset=x-user-defined-binary",e.loader.setResponseType&&e.loader.setResponseType("blob")},t._formatResult=function(e){var t=this;return function(i){var s=t._tag,n=window.URL||window.webkitURL;if(t._preferXHR)if(n){var o=n.createObjectURL(e.getResult(!0));s.src=o,s.onload=function(){n.revokeObjectURL(t.src)}}else s.src=e.getItem().src;else;s.complete?i(s):s.onload=function(){i(this)}}},createjs.ImageLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JAVASCRIPT},t._formatResult=function(e){var t=e.getTag();return this._preferXHR&&(t.text=e.getResult(!0)),t},createjs.JavaScriptLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JSON&&!e._loadAsJSONP},t._formatResult=function(e){var t=null;try{t=createjs.DataUtils.parseJSON(e.getResult(!0))}catch(i){var s=new createjs.ErrorEvent("JSON_FORMAT",null,i);return this._sendError(s),i}return t},createjs.JSONLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.JSONP||e._loadAsJSONP},t.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},t.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._tag.src=this._item.src},t._handleLoad=function(e){this._result=this._rawResult=e,this._sendComplete(),this._dispose()},t._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback]},createjs.JSONPLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,null,createjs.AbstractLoader.MANIFEST),this._manifestQueue=null}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.MANIFEST},t.load=function(){this.AbstractLoader_load()},t._createRequest=function(){var e=this._item.callback;this._request=null!=e?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},t.handleEvent=function(e){switch(e.type){case"complete":return this._rawResult=e.target.getResult(!0),this._result=e.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return e.loaded*=i.MANIFEST_PROGRESS,this.progress=e.loaded/e.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(e)}this.AbstractLoader_handleEvent(e)},t.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},t._loadManifest=function(e){if(e&&e.manifest){var t=this._manifestQueue=new createjs.LoadQueue;t.on("fileload",this._handleManifestFileLoad,this),t.on("progress",this._handleManifestProgress,this),t.on("complete",this._handleManifestComplete,this,!0),t.on("error",this._handleManifestError,this,!0),t.loadManifest(e)}else this._sendComplete()},t._handleManifestFileLoad=function(e){e.target=null,this.dispatchEvent(e)},t._handleManifestComplete=function(){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},t._handleManifestProgress=function(e){this.progress=e.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},t._handleManifestError=function(e){var t=new createjs.Event("fileerror");t.item=e.data,this.dispatchEvent(t)},createjs.ManifestLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(e)?this._tag=e:createjs.RequestUtils.isAudioTag(e.src)?this._tag=e:createjs.RequestUtils.isAudioTag(e.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(e)?e:e.src),null!=this._tag&&(this._preferXHR=!1)}var t=createjs.extend(e,createjs.AbstractMediaLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SOUND},t._createTag=function(e){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t.src=e,t},createjs.SoundLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(e)||createjs.RequestUtils.isVideoTag(e.src)?(this.setTag(createjs.RequestUtils.isVideoTag(e)?e:e.src),this._preferXHR=!1):this.setTag(this._createTag())}var t=createjs.extend(e,createjs.AbstractMediaLoader),i=e;t._createTag=function(){return document.createElement("video")},i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SPRITESHEET},t.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},t._createRequest=function(){var e=this._item.callback;this._request=null!=e&&e instanceof Function?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},t.handleEvent=function(e){switch(e.type){case"complete":return this._rawResult=e.target.getResult(!0),this._result=e.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return e.loaded*=i.SPRITESHEET_PROGRESS,this.progress=e.loaded/e.total,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0),void this._sendProgress(e)}this.AbstractLoader_handleEvent(e)},t._loadManifest=function(e){if(e&&e.images){var t=this._manifestQueue=new createjs.LoadQueue;t.on("complete",this._handleManifestComplete,this,!0),t.on("fileload",this._handleManifestFileLoad,this),t.on("progress",this._handleManifestProgress,this),t.on("error",this._handleManifestError,this,!0),t.loadManifest(e.images)}},t._handleManifestFileLoad=function(e){var t=e.result;if(null!=t){var i=this.getResult().images,s=i.indexOf(e.item.src);i[s]=t}},t._handleManifestComplete=function(){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},t._handleManifestProgress=function(e){this.progress=e.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},t._handleManifestError=function(e){var t=new createjs.Event("fileerror");t.item=e.data,this.dispatchEvent(t)},createjs.SpriteSheetLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractLoader_constructor(e,t,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",t?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml"),this.getTag().style.visibility="hidden"}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SVG},t._formatResult=function(e){var t=createjs.DataUtils.parseXML(e.getResult(!0),"text/xml"),i=e.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=t.documentElement?(i.appendChild(t.documentElement),i.style.visibility="visible",i):t},createjs.SVGLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var t=createjs.extend(e,createjs.AbstractLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.XML},t._formatResult=function(e){return createjs.DataUtils.parseXML(e.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},createjs.extend=function(e,t){"use strict";function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(e,t){"use strict";var i=e.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(s){i[(t+="_")+"constructor"]=s.constructor;for(var n in s)i.hasOwnProperty(n)&&"function"==typeof s[n]&&(i[t+n]=s[n])}return e},this.createjs=this.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var i=0,s=e.length;s>i;i++)if(t===e[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=s[e];return n&&this.removeEventListener(e,t,i),n=s[e],n?n.push(t):s[e]=[t],t},t.on=function(e,t,i,s,n,o){return t.handleEvent&&(i=i||t,t=t.handleEvent),i=i||this,this.addEventListener(e,function(e){t.call(i,e,n),s&&e.remove()},o)},t.removeEventListener=function(e,t,i){var s=i?this._captureListeners:this._listeners;if(s){var n=s[e];if(n)for(var o=0,r=n.length;r>o;o++)if(n[o]==t){1==r?delete s[e]:n.splice(o,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e){if("string"==typeof e){var t=this._listeners;if(!t||!t[e])return!1;e=new createjs.Event(e)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(i){}if(e.bubbles&&this.parent){for(var s=this,n=[s];s.parent;)n.push(s=s.parent);var o,r=n.length;for(o=r-1;o>=0&&!e.propagationStopped;o--)n[o]._dispatchEvent(e,1+(0==o));for(o=1;r>o&&!e.propagationStopped;o++)n[o]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,i=this._captureListeners;return!!(t&&t[e]||i&&i[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var i,s=1==t?this._captureListeners:this._listeners;if(e&&s){var n=s[e.type];if(!n||!(i=n.length))return;try{e.currentTarget=this}catch(o){}try{e.eventPhase=t}catch(o){}e.removed=!1,n=n.slice();for(var r=0;i>r&&!e.immediatePropagationStopped;r++){var a=n[r];a.handleEvent?a.handleEvent(e):a(e),e.removed&&(this.off(e.type,a,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.useRAF=!1,e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return!e._inited&&e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval};try{Object.defineProperties(e,{interval:{get:e.getInterval,set:e.setInterval},framerate:{get:e.getFPS,set:e.setFPS}})}catch(t){console.log(t)}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){if(e._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(e._timerId)}else clearTimeout(e._timerId);e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=0,e._inited=!1},e.getMeasuredTickTime=function(t){var i=0,s=e._tickTimes;if(!s||s.length<1)return-1;t=Math.min(s.length,t||0|e.getFPS());for(var n=0;t>n;n++)i+=s[n];return i/t},e.getMeasuredFPS=function(t){var i=e._times;return!i||i.length<2?-1:(t=Math.min(i.length-1,t||0|e.getFPS()),1e3/((i[0]-i[t])/t))},e.setPaused=function(t){e.paused=t},e.getPaused=function(){return e.paused},e.getTime=function(t){return e._startTime?e._getTime()-(t?e._pausedTime:0):-1},e.getEventTime=function(t){return e._startTime?(e._lastTime||e._startTime)-(t?e._pausedTime:0):-1},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(null==e._timerId){var t=e.timingMode||e.useRAF&&e.RAF_SYNCHED;if(t==e.RAF_SYNCHED||t==e.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return e._timerId=i(t==e.RAF?e._handleRAF:e._handleSynch),void(e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e.paused,i=e._getTime(),s=i-e._lastTime;if(e._lastTime=i,e._ticks++,t&&(e._pausedTicks++,e._pausedTime+=s),e.hasEventListener("tick")){var n=new createjs.Event("tick"),o=e.maxDelta;n.delta=o&&s>o?o:s,n.paused=t,n.time=i,n.runTime=i-e._pausedTime,e.dispatchEvent(n)}for(e._tickTimes.unshift(e._getTime()-i);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(i);e._times.length>100;)e._times.pop()};var i=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return(i&&i.call(performance)||(new Date).getTime())-e._startTime},createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"UID cannot be instantiated"}e._nextID=0,e.get=function(){return e._nextID++},createjs.UID=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s,n,o,r,a,h,l){this.Event_constructor(e,t,i),this.stageX=s,this.stageY=n,this.rawX=null==h?s:h,this.rawY=null==l?n:l,this.nativeEvent=o,this.pointerID=r,this.primary=!!a}var t=createjs.extend(e,createjs.Event);t._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},t._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},t._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(t,{localX:{get:t._get_localX},localY:{get:t._get_localY},isTouch:{get:t._get_isTouch}})}catch(i){}t.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},t.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s,n,o){this.setValues(e,t,i,s,n,o)}var t=e.prototype;e.DEG_TO_RAD=Math.PI/180,e.identity=null,t.setValues=function(e,t,i,s,n,o){return this.a=null==e?1:e,this.b=t||0,this.c=i||0,this.d=null==s?1:s,this.tx=n||0,this.ty=o||0,this},t.append=function(e,t,i,s,n,o){var r=this.a,a=this.b,h=this.c,l=this.d;return(1!=e||0!=t||0!=i||1!=s)&&(this.a=r*e+h*t,this.b=a*e+l*t,this.c=r*i+h*s,this.d=a*i+l*s),this.tx=r*n+h*o+this.tx,this.ty=a*n+l*o+this.ty,this},t.prepend=function(e,t,i,s,n,o){var r=this.a,a=this.c,h=this.tx;return this.a=e*r+i*this.b,this.b=t*r+s*this.b,this.c=e*a+i*this.d,this.d=t*a+s*this.d,this.tx=e*h+i*this.ty+n,this.ty=t*h+s*this.ty+o,this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.appendTransform=function(t,i,s,n,o,r,a,h,l){if(o%360)var c=o*e.DEG_TO_RAD,d=Math.cos(c),u=Math.sin(c);else d=1,u=0;return r||a?(r*=e.DEG_TO_RAD,a*=e.DEG_TO_RAD,this.append(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),t,i),this.append(d*s,u*s,-u*n,d*n,0,0)):this.append(d*s,u*s,-u*n,d*n,t,i),(h||l)&&(this.tx-=h*this.a+l*this.c,this.ty-=h*this.b+l*this.d),this},t.prependTransform=function(t,i,s,n,o,r,a,h,l){if(o%360)var c=o*e.DEG_TO_RAD,d=Math.cos(c),u=Math.sin(c);else d=1,u=0;return(h||l)&&(this.tx-=h,this.ty-=l),r||a?(r*=e.DEG_TO_RAD,a*=e.DEG_TO_RAD,this.prepend(d*s,u*s,-u*n,d*n,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(r),Math.cos(r),t,i)):this.prepend(d*s,u*s,-u*n,d*n,t,i),this},t.rotate=function(t){t*=e.DEG_TO_RAD;var i=Math.cos(t),s=Math.sin(t),n=this.a,o=this.b;return this.a=n*i+this.c*s,this.b=o*i+this.d*s,this.c=-n*s+this.c*i,this.d=-o*s+this.d*i,this},t.skew=function(t,i){return t*=e.DEG_TO_RAD,i*=e.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this},t.translate=function(e,t){return this.tx+=this.a*e+this.c*t,this.ty+=this.b*e+this.d*t,this},t.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.invert=function(){var e=this.a,t=this.b,i=this.c,s=this.d,n=this.tx,o=e*s-t*i;return this.a=s/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(e*this.ty-t*n)/o,this},t.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.equals=function(e){return this.tx===e.tx&&this.ty===e.ty&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d},t.transformPoint=function(e,t,i){return i=i||{},i.x=e*this.a+t*this.c+this.tx,i.y=e*this.b+t*this.d+this.ty,i},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),s=Math.atan2(this.b,this.a),n=Math.abs(1-i/s);return 1e-5>n?(t.rotation=s/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=i/e.DEG_TO_RAD,t.skewY=s/e.DEG_TO_RAD),t},t.copy=function(e){return this.setValues(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,createjs.Matrix2D=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s,n){this.setValues(e,t,i,s,n)}var t=e.prototype;t.setValues=function(e,t,i,s,n){return this.visible=null==e?!0:!!e,this.alpha=null==t?1:t,this.shadow=i,this.compositeOperation=i,this.matrix=n||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},t.append=function(e,t,i,s,n){return this.alpha*=t,this.shadow=i||this.shadow,this.compositeOperation=s||this.compositeOperation,this.visible=this.visible&&e,n&&this.matrix.appendMatrix(n),this},t.prepend=function(e,t,i,s,n){return this.alpha*=t,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||s,this.visible=this.visible&&e,n&&this.matrix.prependMatrix(n),this},t.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},t.clone=function(){return new e(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.setValues(e,t)}var t=e.prototype;t.setValues=function(e,t){return this.x=e||0,this.y=t||0,this},t.copy=function(e){return this.x=e.x,this.y=e.y,this},t.clone=function(){return new e(this.x,this.y)},t.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s){this.setValues(e,t,i,s)}var t=e.prototype;t.setValues=function(e,t,i,s){return this.x=e||0,this.y=t||0,this.width=i||0,this.height=s||0,this},t.extend=function(e,t,i,s){return i=i||0,s=s||0,e+i>this.x+this.width&&(this.width=e+i-this.x),t+s>this.y+this.height&&(this.height=t+s-this.y),e<this.x&&(this.width+=this.x-e,this.x=e),t<this.y&&(this.height+=this.y-t,this.y=t),this},t.pad=function(e,t,i,s){return this.x-=e,this.y-=t,this.width+=e+i,this.height+=t+s,this},t.copy=function(e){return this.setValues(e.x,e.y,e.width,e.height)},t.contains=function(e,t,i,s){return i=i||0,s=s||0,e>=this.x&&e+i<=this.x+this.width&&t>=this.y&&t+s<=this.y+this.height},t.union=function(e){return this.clone().extend(e.x,e.y,e.width,e.height)},t.intersection=function(t){var i=t.x,s=t.y,n=i+t.width,o=s+t.height;return this.x>i&&(i=this.x),this.y>s&&(s=this.y),this.x+this.width<n&&(n=this.x+this.width),this.y+this.height<o&&(o=this.y+this.height),i>=n||s>=o?null:new e(i,s,n-i,o-s)},t.intersects=function(e){return e.x<=this.x+this.width&&this.x<=e.x+e.width&&e.y<=this.y+this.height&&this.y<=e.y+e.height},t.isEmpty=function(){return this.width<=0||this.height<=0},t.clone=function(){return new e(this.x,this.y,this.width,this.height)},t.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s,n,o,r){e.addEventListener&&(this.target=e,this.overLabel=null==i?"over":i,this.outLabel=null==t?"out":t,this.downLabel=null==s?"down":s,this.play=n,this._isPressed=!1,this._isOver=!1,this._enabled=!1,e.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),o&&(r&&(o.actionsEnabled=!1,o.gotoAndStop&&o.gotoAndStop(r)),e.hitArea=o))}var t=e.prototype;t.setEnabled=function(e){if(e!=this._enabled){var t=this.target;this._enabled=e,e?(t.cursor="pointer",t.addEventListener("rollover",this),t.addEventListener("rollout",this),t.addEventListener("mousedown",this),t.addEventListener("pressup",this)):(t.cursor=null,t.removeEventListener("rollover",this),t.removeEventListener("rollout",this),t.removeEventListener("mousedown",this),t.removeEventListener("pressup",this))}},t.getEnabled=function(){return this._enabled};try{Object.defineProperties(t,{enabled:{get:t.getEnabled,set:t.setEnabled}})}catch(i){}t.toString=function(){return"[ButtonHelper]"},t.handleEvent=function(e){var t,i=this.target,s=e.type;"mousedown"==s?(this._isPressed=!0,t=this.downLabel):"pressup"==s?(this._isPressed=!1,t=this._isOver?this.overLabel:this.outLabel):"rollover"==s?(this._isOver=!0,t=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,t=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(t):i.gotoAndStop&&i.gotoAndStop(t)},createjs.ButtonHelper=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s){this.color=e||"black",this.offsetX=t||0,this.offsetY=i||0,this.blur=s||0}var t=e.prototype;e.identity=new e("transparent",0,0,0),t.toString=function(){return"[Shadow]"},t.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(e)}var t=createjs.extend(e,createjs.EventDispatcher);t.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(t,{animations:{get:t.getAnimations}})}catch(i){}t.getNumFrames=function(e){if(null==e)return this._frames?this._frames.length:this._numFrames||0;var t=this._data[e];return null==t?0:t.frames.length},t.getAnimation=function(e){return this._data[e]},t.getFrame=function(e){var t;return this._frames&&(t=this._frames[e])?t:null},t.getFrameBounds=function(e,t){var i=this.getFrame(e);return i?(t||new createjs.Rectangle).setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null
},t.toString=function(){return"[SpriteSheet]"},t.clone=function(){throw"SpriteSheet cannot be cloned."},t._parseData=function(e){var t,i,s,n;if(null!=e){if(this.framerate=e.framerate||0,e.images&&(i=e.images.length)>0)for(n=this._images=[],t=0;i>t;t++){var o=e.images[t];if("string"==typeof o){var r=o;o=document.createElement("img"),o.src=r}n.push(o),o.getContext||o.complete||(this._loadCount++,this.complete=!1,function(e){o.onload=function(){e._handleImageLoad()}}(this))}if(null==e.frames);else if(e.frames instanceof Array)for(this._frames=[],n=e.frames,t=0,i=n.length;i>t;t++){var a=n[t];this._frames.push({image:this._images[a[4]?a[4]:0],rect:new createjs.Rectangle(a[0],a[1],a[2],a[3]),regX:a[5]||0,regY:a[6]||0})}else s=e.frames,this._frameWidth=s.width,this._frameHeight=s.height,this._regX=s.regX||0,this._regY=s.regY||0,this._spacing=s.spacing||0,this._margin=s.margin||0,this._numFrames=s.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(s=e.animations)){this._data={};var h;for(h in s){var l={name:h},c=s[h];if("number"==typeof c)n=l.frames=[c];else if(c instanceof Array)if(1==c.length)l.frames=[c[0]];else for(l.speed=c[3],l.next=c[2],n=l.frames=[],t=c[0];t<=c[1];t++)n.push(t);else{l.speed=c.speed,l.next=c.next;var d=c.frames;n=l.frames="number"==typeof d?[d]:d.slice(0)}(l.next===!0||void 0===l.next)&&(l.next=h),(l.next===!1||n.length<2&&l.next==h)&&(l.next=null),l.speed||(l.speed=1),this._animations.push(h),this._data[h]=l}}}},t._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},t._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var e=this._numFrames||1e5,t=0,i=this._frameWidth,s=this._frameHeight,n=this._spacing,o=this._margin;e:for(var r=0,a=this._images;r<a.length;r++)for(var h=a[r],l=h.width,c=h.height,d=o;c-o-s>=d;){for(var u=o;l-o-i>=u;){if(t>=e)break e;t++,this._frames.push({image:h,rect:new createjs.Rectangle(u,d,i,s),regX:this._regX,regY:this._regY}),u+=i+n}d+=s+n}this._numFrames=t}},createjs.SpriteSheet=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.command=null,this._stroke=null,this._strokeStyle=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var t=e.prototype,i=e;e.getRGB=function(e,t,i,s){return null!=e&&null==i&&(s=t,i=255&e,t=e>>8&255,e=e>>16&255),null==s?"rgb("+e+","+t+","+i+")":"rgba("+e+","+t+","+i+","+s+")"},e.getHSL=function(e,t,i,s){return null==s?"hsl("+e%360+","+t+"%,"+i+"%)":"hsla("+e%360+","+t+"%,"+i+"%,"+s+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var s=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");s.getContext&&(e._ctx=s.getContext("2d"),s.width=s.height=1),t.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(t,{instructions:{get:t.getInstructions}})}catch(n){}t.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},t.draw=function(e,t){this._updateInstructions();for(var i=this._instructions,s=this._storeIndex,n=i.length;n>s;s++)i[s].exec(e,t)},t.drawAsPath=function(e){this._updateInstructions();for(var t,i=this._instructions,s=this._storeIndex,n=i.length;n>s;s++)(t=i[s]).path!==!1&&t.exec(e)},t.moveTo=function(e,t){return this.append(new i.MoveTo(e,t),!0)},t.lineTo=function(e,t){return this.append(new i.LineTo(e,t))},t.arcTo=function(e,t,s,n,o){return this.append(new i.ArcTo(e,t,s,n,o))},t.arc=function(e,t,s,n,o,r){return this.append(new i.Arc(e,t,s,n,o,r))},t.quadraticCurveTo=function(e,t,s,n){return this.append(new i.QuadraticCurveTo(e,t,s,n))},t.bezierCurveTo=function(e,t,s,n,o,r){return this.append(new i.BezierCurveTo(e,t,s,n,o,r))},t.rect=function(e,t,s,n){return this.append(new i.Rect(e,t,s,n))},t.closePath=function(){return this._activeInstructions.length?this.append(new i.ClosePath):this},t.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._stroke=this._fill=null,this._dirty=this._strokeIgnoreScale=!1,this},t.beginFill=function(e){return this._setFill(e?new i.Fill(e):null)},t.beginLinearGradientFill=function(e,t,s,n,o,r){return this._setFill((new i.Fill).linearGradient(e,t,s,n,o,r))},t.beginRadialGradientFill=function(e,t,s,n,o,r,a,h){return this._setFill((new i.Fill).radialGradient(e,t,s,n,o,r,a,h))},t.beginBitmapFill=function(e,t,s){return this._setFill(new i.Fill(null,s).bitmap(e,t))},t.endFill=function(){return this.beginFill()},t.setStrokeStyle=function(e,t,s,n,o){return this._updateInstructions(!0),this._strokeStyle=this.command=new i.StrokeStyle(e,t,s,n,o),this._stroke&&(this._stroke.ignoreScale=o),this._strokeIgnoreScale=o,this},t.beginStroke=function(e){return this._setStroke(e?new i.Stroke(e):null)},t.beginLinearGradientStroke=function(e,t,s,n,o,r){return this._setStroke((new i.Stroke).linearGradient(e,t,s,n,o,r))},t.beginRadialGradientStroke=function(e,t,s,n,o,r,a,h){return this._setStroke((new i.Stroke).radialGradient(e,t,s,n,o,r,a,h))},t.beginBitmapStroke=function(e,t){return this._setStroke((new i.Stroke).bitmap(e,t))},t.endStroke=function(){return this.beginStroke()},t.curveTo=t.quadraticCurveTo,t.drawRect=t.rect,t.drawRoundRect=function(e,t,i,s,n){return this.drawRoundRectComplex(e,t,i,s,n,n,n,n)},t.drawRoundRectComplex=function(e,t,s,n,o,r,a,h){return this.append(new i.RoundRect(e,t,s,n,o,r,a,h))},t.drawCircle=function(e,t,s){return this.append(new i.Circle(e,t,s))},t.drawEllipse=function(e,t,s,n){return this.append(new i.Ellipse(e,t,s,n))},t.drawPolyStar=function(e,t,s,n,o,r){return this.append(new i.PolyStar(e,t,s,n,o,r))},t.append=function(e,t){return this._activeInstructions.push(e),this.command=e,t||(this._dirty=!0),this},t.decodePath=function(t){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],s=[2,2,4,6,0],n=0,o=t.length,r=[],a=0,h=0,l=e.BASE_64;o>n;){var c=t.charAt(n),d=l[c],u=d>>3,g=i[u];if(!g||3&d)throw"bad path data (@"+n+"): "+c;var p=s[u];u||(a=h=0),r.length=0,n++;for(var m=(d>>2&1)+2,_=0;p>_;_++){var f=l[t.charAt(n)],v=f>>5?-1:1;f=(31&f)<<6|l[t.charAt(n+1)],3==m&&(f=f<<6|l[t.charAt(n+2)]),f=v*f/10,_%2?a=f+=a:h=f+=h,r[_]=f,n+=m}g.apply(this,r)}return this},t.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},t.unstore=function(){return this._storeIndex=0,this},t.clone=function(){var t=new e;return t.command=this.command,t._stroke=this._stroke,t._strokeStyle=this._strokeStyle,t._strokeIgnoreScale=this._strokeIgnoreScale,t._fill=this._fill,t._instructions=this._instructions.slice(),t._commitIndex=this._commitIndex,t._activeInstructions=this._activeInstructions.slice(),t._dirty=this._dirty,t._storeIndex=this._storeIndex,t},t.toString=function(){return"[Graphics]"},t.mt=t.moveTo,t.lt=t.lineTo,t.at=t.arcTo,t.bt=t.bezierCurveTo,t.qt=t.quadraticCurveTo,t.a=t.arc,t.r=t.rect,t.cp=t.closePath,t.c=t.clear,t.f=t.beginFill,t.lf=t.beginLinearGradientFill,t.rf=t.beginRadialGradientFill,t.bf=t.beginBitmapFill,t.ef=t.endFill,t.ss=t.setStrokeStyle,t.s=t.beginStroke,t.ls=t.beginLinearGradientStroke,t.rs=t.beginRadialGradientStroke,t.bs=t.beginBitmapStroke,t.es=t.endStroke,t.dr=t.drawRect,t.rr=t.drawRoundRect,t.rc=t.drawRoundRectComplex,t.dc=t.drawCircle,t.de=t.drawEllipse,t.dp=t.drawPolyStar,t.p=t.decodePath,t._updateInstructions=function(t){var i=this._instructions,s=this._activeInstructions,n=this._commitIndex;if(this._dirty&&s.length){i.length=n,i.push(e.beginCmd);var o=s.length,r=i.length;i.length=r+o;for(var a=0;o>a;a++)i[a+r]=s[a];this._fill&&i.push(this._fill),this._stroke&&this._strokeStyle&&i.push(this._strokeStyle),this._stroke&&i.push(this._stroke),this._dirty=!1}t&&(s.length=0,this._commitIndex=i.length)},t._setFill=function(e){return this._updateInstructions(!0),(this._fill=e)&&(this.command=e),this},t._setStroke=function(e){return this._updateInstructions(!0),(this._stroke=e)&&(this.command=e,e.ignoreScale=this._strokeIgnoreScale),this},(i.LineTo=function(e,t){this.x=e,this.y=t}).prototype.exec=function(e){e.lineTo(this.x,this.y)},(i.MoveTo=function(e,t){this.x=e,this.y=t}).prototype.exec=function(e){e.moveTo(this.x,this.y)},(i.ArcTo=function(e,t,i,s,n){this.x1=e,this.y1=t,this.x2=i,this.y2=s,this.radius=n}).prototype.exec=function(e){e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(i.Arc=function(e,t,i,s,n,o){this.x=e,this.y=t,this.radius=i,this.startAngle=s,this.endAngle=n,this.anticlockwise=!!o}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(i.QuadraticCurveTo=function(e,t,i,s){this.cpx=e,this.cpy=t,this.x=i,this.y=s}).prototype.exec=function(e){e.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(i.BezierCurveTo=function(e,t,i,s,n,o){this.cp1x=e,this.cp1y=t,this.cp2x=i,this.cp2y=s,this.x=n,this.y=o}).prototype.exec=function(e){e.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(i.Rect=function(e,t,i,s){this.x=e,this.y=t,this.w=i,this.h=s}).prototype.exec=function(e){e.rect(this.x,this.y,this.w,this.h)},(i.ClosePath=function(){}).prototype.exec=function(e){e.closePath()},(i.BeginPath=function(){}).prototype.exec=function(e){e.beginPath()},t=(i.Fill=function(e,t){this.style=e,this.matrix=t}).prototype,t.exec=function(e){if(this.style){e.fillStyle=this.style;var t=this.matrix;t&&(e.save(),e.transform(t.a,t.b,t.c,t.d,t.tx,t.ty)),e.fill(),t&&e.restore()}},t.linearGradient=function(t,i,s,n,o,r){for(var a=this.style=e._ctx.createLinearGradient(s,n,o,r),h=0,l=t.length;l>h;h++)a.addColorStop(i[h],t[h]);return a.props={colors:t,ratios:i,x0:s,y0:n,x1:o,y1:r,type:"linear"},this},t.radialGradient=function(t,i,s,n,o,r,a,h){for(var l=this.style=e._ctx.createRadialGradient(s,n,o,r,a,h),c=0,d=t.length;d>c;c++)l.addColorStop(i[c],t[c]);return l.props={colors:t,ratios:i,x0:s,y0:n,r0:o,x1:r,y1:a,r1:h,type:"radial"},this},t.bitmap=function(t,i){var s=this.style=e._ctx.createPattern(t,i||"");return s.props={image:t,repetition:i,type:"bitmap"},this},t.path=!1,t=(i.Stroke=function(e,t){this.style=e,this.ignoreScale=t}).prototype,t.exec=function(e){this.style&&(e.strokeStyle=this.style,this.ignoreScale&&(e.save(),e.setTransform(1,0,0,1,0,0)),e.stroke(),this.ignoreScale&&e.restore())},t.linearGradient=i.Fill.prototype.linearGradient,t.radialGradient=i.Fill.prototype.radialGradient,t.bitmap=i.Fill.prototype.bitmap,t.path=!1,t=(i.StrokeStyle=function(e,t,i,s){this.width=e,this.caps=t,this.joints=i,this.miterLimit=s}).prototype,t.exec=function(t){t.lineWidth=null==this.width?"1":this.width,t.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:e.STROKE_CAPS_MAP[this.caps],t.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:e.STROKE_JOINTS_MAP[this.joints],t.miterLimit=null==this.miterLimit?"10":this.miterLimit},t.path=!1,(i.RoundRect=function(e,t,i,s,n,o,r,a){this.x=e,this.y=t,this.w=i,this.h=s,this.radiusTL=n,this.radiusTR=o,this.radiusBR=r,this.radiusBL=a}).prototype.exec=function(e){var t=(l>h?h:l)/2,i=0,s=0,n=0,o=0,r=this.x,a=this.y,h=this.w,l=this.h,c=this.radiusTL,d=this.radiusTR,u=this.radiusBR,g=this.radiusBL;0>c&&(c*=i=-1),c>t&&(c=t),0>d&&(d*=s=-1),d>t&&(d=t),0>u&&(u*=n=-1),u>t&&(u=t),0>g&&(g*=o=-1),g>t&&(g=t),e.moveTo(r+h-d,a),e.arcTo(r+h+d*s,a-d*s,r+h,a+d,d),e.lineTo(r+h,a+l-u),e.arcTo(r+h+u*n,a+l+u*n,r+h-u,a+l,u),e.lineTo(r+g,a+l),e.arcTo(r-g*o,a+l+g*o,r,a+l-g,g),e.lineTo(r,a+c),e.arcTo(r-c*i,a-c*i,r+c,a,c),e.closePath()},(i.Circle=function(e,t,i){this.x=e,this.y=t,this.radius=i}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,0,2*Math.PI)},(i.Ellipse=function(e,t,i,s){this.x=e,this.y=t,this.w=i,this.h=s}).prototype.exec=function(e){var t=this.x,i=this.y,s=this.w,n=this.h,o=.5522848,r=s/2*o,a=n/2*o,h=t+s,l=i+n,c=t+s/2,d=i+n/2;e.moveTo(t,d),e.bezierCurveTo(t,d-a,c-r,i,c,i),e.bezierCurveTo(c+r,i,h,d-a,h,d),e.bezierCurveTo(h,d+a,c+r,l,c,l),e.bezierCurveTo(c-r,l,t,d+a,t,d)},(i.PolyStar=function(e,t,i,s,n,o){this.x=e,this.y=t,this.radius=i,this.sides=s,this.pointSize=n,this.angle=o}).prototype.exec=function(e){var t=this.x,i=this.y,s=this.radius,n=(this.angle||0)/180*Math.PI,o=this.sides,r=1-(this.pointSize||0),a=Math.PI/o;e.moveTo(t+Math.cos(n)*s,i+Math.sin(n)*s);for(var h=0;o>h;h++)n+=a,1!=r&&e.lineTo(t+Math.cos(n)*s*r,i+Math.sin(n)*s*r),n+=a,e.lineTo(t+Math.cos(n)*s,i+Math.sin(n)*s);e.closePath()},e.beginCmd=new i.BeginPath,createjs.Graphics=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var t=createjs.extend(e,createjs.EventDispatcher);e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1,e._snapToPixelEnabled=!1;var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(e._hitTestCanvas=i,e._hitTestContext=i.getContext("2d"),i.width=i.height=1),e._nextCacheID=1,t.getStage=function(){for(var e=this,t=createjs.Stage;e.parent;)e=e.parent;return e instanceof t?e:null};try{Object.defineProperties(t,{stage:{get:t.getStage}})}catch(s){}t.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},t.draw=function(e,t){var i=this.cacheCanvas;if(t||!i)return!1;var s=this._cacheScale;return e.drawImage(i,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,i.width/s,i.height/s),!0},t.updateContext=function(t){var i=this,s=i.mask,n=i._props.matrix;s&&s.graphics&&!s.graphics.isEmpty()&&(s.getMatrix(n),t.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),s.graphics.drawAsPath(t),t.clip(),n.invert(),t.transform(n.a,n.b,n.c,n.d,n.tx,n.ty)),this.getMatrix(n);var o=n.tx,r=n.ty;e._snapToPixelEnabled&&i.snapToPixel&&(o=o+(0>o?-.5:.5)|0,r=r+(0>r?-.5:.5)|0),t.transform(n.a,n.b,n.c,n.d,o,r),t.globalAlpha*=i.alpha,i.compositeOperation&&(t.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(t,i.shadow)},t.cache=function(e,t,i,s,n){n=n||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=i,this._cacheHeight=s,this._cacheOffsetX=e,this._cacheOffsetY=t,this._cacheScale=n,this.updateCache()},t.updateCache=function(t){var i=this.cacheCanvas;if(!i)throw"cache() must be called before updateCache()";var s=this._cacheScale,n=this._cacheOffsetX*s,o=this._cacheOffsetY*s,r=this._cacheWidth,a=this._cacheHeight,h=i.getContext("2d"),l=this._getFilterBounds();n+=this._filterOffsetX=l.x,o+=this._filterOffsetY=l.y,r=Math.ceil(r*s)+l.width,a=Math.ceil(a*s)+l.height,r!=i.width||a!=i.height?(i.width=r,i.height=a):t||h.clearRect(0,0,r+1,a+1),h.save(),h.globalCompositeOperation=t,h.setTransform(s,0,0,s,-n,-o),this.draw(h,!0),this._applyFilters(),h.restore(),this.cacheID=e._nextCacheID++},t.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},t.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},t.localToGlobal=function(e,t,i){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(e,t,i||new createjs.Point)},t.globalToLocal=function(e,t,i){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(e,t,i||new createjs.Point)},t.localToLocal=function(e,t,i,s){return s=this.localToGlobal(e,t,s),i.globalToLocal(s.x,s.y,s)},t.setTransform=function(e,t,i,s,n,o,r,a,h){return this.x=e||0,this.y=t||0,this.scaleX=null==i?1:i,this.scaleY=null==s?1:s,this.rotation=n||0,this.skewX=o||0,this.skewY=r||0,this.regX=a||0,this.regY=h||0,this},t.getMatrix=function(e){var t=this,i=e&&e.identity()||new createjs.Matrix2D;return t.transformMatrix?i.copy(t.transformMatrix):i.appendTransform(t.x,t.y,t.scaleX,t.scaleY,t.rotation,t.skewX,t.skewY,t.regX,t.regY)},t.getConcatenatedMatrix=function(e){for(var t=this,i=this.getMatrix(e);t=t.parent;)i.prependMatrix(t.getMatrix(t._props.matrix));return i},t.getConcatenatedDisplayProps=function(e){e=e?e.identity():new createjs.DisplayProps;var t=this,i=t.getMatrix(e.matrix);do e.prepend(t.visible,t.alpha,t.shadow,t.compositeOperation),t!=this&&i.prependMatrix(t.getMatrix(t._props.matrix));while(t=t.parent);return e},t.hitTest=function(t,i){var s=e._hitTestContext;s.setTransform(1,0,0,1,-t,-i),this.draw(s);var n=this._testHit(s);return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),n},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var e=this.cacheCanvas;if(e){var t=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,e.width/t,e.height/t)}return null},t.getTransformedBounds=function(){return this._getBounds()},t.setBounds=function(e,t,i,s){null==e&&(this._bounds=e),this._bounds=(this._bounds||new createjs.Rectangle).setValues(e,t,i,s)},t.clone=function(){return this._cloneProps(new e)},t.toString=function(){return"[DisplayObject (name="+this.name+")]"},t._cloneProps=function(e){return e.alpha=this.alpha,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,e.cursor=this.cursor,e._bounds=this._bounds,e},t._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},t._tick=function(e){var t=this._listeners;t&&t.tick&&(e.target=null,e.propagationStopped=e.immediatePropagationStopped=!1,this.dispatchEvent(e))},t._testHit=function(t){try{var i=t.getImageData(0,0,1,1).data[3]>1}catch(s){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},t._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,s=this.cacheCanvas.height,n=0;e>n;n++)this.filters[n].applyFilter(t,0,0,i,s)},t._getFilterBounds=function(){var e,t=this.filters,i=this._rectangle.setValues(0,0,0,0);if(!t||!(e=t.length))return i;for(var s=0;e>s;s++){var n=this.filters[s];n.getBounds&&n.getBounds(i)}return i},t._getBounds=function(e,t){return this._transformBounds(this.getBounds(),e,t)},t._transformBounds=function(e,t,i){if(!e)return e;var s=e.x,n=e.y,o=e.width,r=e.height,a=this._props.matrix;a=i?a.identity():this.getMatrix(a),(s||n)&&a.appendTransform(0,0,1,1,0,0,0,-s,-n),t&&a.prependMatrix(t);var h=o*a.a,l=o*a.b,c=r*a.c,d=r*a.d,u=a.tx,g=a.ty,p=u,m=u,_=g,f=g;return(s=h+u)<p?p=s:s>m&&(m=s),(s=h+c+u)<p?p=s:s>m&&(m=s),(s=c+u)<p?p=s:s>m&&(m=s),(n=l+g)<_?_=n:n>f&&(f=n),(n=l+d+g)<_?_=n:n>f&&(f=n),(n=d+g)<_?_=n:n>f&&(f=n),e.setValues(p,_,m-p,f-_)},t._hasMouseEventListener=function(){for(var t=e._MOUSE_EVENTS,i=0,s=t.length;s>i;i++)if(this.hasEventListener(t[i]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var t=createjs.extend(e,createjs.DisplayObject);t.getNumChildren=function(){return this.children.length};try{Object.defineProperties(t,{numChildren:{get:t.getNumChildren}})}catch(i){}t.initialize=e,t.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var i=this.children.slice(),s=0,n=i.length;n>s;s++){var o=i[s];o.isVisible()&&(e.save(),o.updateContext(e),o.draw(e),e.restore())}return!0},t.addChild=function(e){if(null==e)return e;var t=arguments.length;if(t>1){for(var i=0;t>i;i++)this.addChild(arguments[i]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e.dispatchEvent("added"),e},t.addChildAt=function(e,t){var i=arguments.length,s=arguments[i-1];if(0>s||s>this.children.length)return arguments[i-2];if(i>2){for(var n=0;i-1>n;n++)this.addChildAt(arguments[n],s+n);return arguments[i-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e.dispatchEvent("added"),e},t.removeChild=function(e){var t=arguments.length;if(t>1){for(var i=!0,s=0;t>s;s++)i=i&&this.removeChild(arguments[s]);return i}return this.removeChildAt(createjs.indexOf(this.children,e))},t.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var i=[],s=0;t>s;s++)i[s]=arguments[s];i.sort(function(e,t){return t-e});for(var n=!0,s=0;t>s;s++)n=n&&this.removeChildAt(i[s]);return n}if(0>e||e>this.children.length-1)return!1;var o=this.children[e];return o&&(o.parent=null),this.children.splice(e,1),o.dispatchEvent("removed"),!0},t.removeAllChildren=function(){for(var e=this.children;e.length;)this.removeChildAt(0)},t.getChildAt=function(e){return this.children[e]},t.getChildByName=function(e){for(var t=this.children,i=0,s=t.length;s>i;i++)if(t[i].name==e)return t[i];return null},t.sortChildren=function(e){this.children.sort(e)},t.getChildIndex=function(e){return createjs.indexOf(this.children,e)},t.swapChildrenAt=function(e,t){var i=this.children,s=i[e],n=i[t];s&&n&&(i[e]=n,i[t]=s)},t.swapChildren=function(e,t){for(var i,s,n=this.children,o=0,r=n.length;r>o&&(n[o]==e&&(i=o),n[o]==t&&(s=o),null==i||null==s);o++);o!=r&&(n[i]=t,n[s]=e)},t.setChildIndex=function(e,t){var i=this.children,s=i.length;if(!(e.parent!=this||0>t||t>=s)){for(var n=0;s>n&&i[n]!=e;n++);n!=s&&n!=t&&(i.splice(n,1),i.splice(t,0,e))}},t.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},t.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},t.getObjectsUnderPoint=function(e,t,i){var s=[],n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y,s,i>0,1==i),s},t.getObjectUnderPoint=function(e,t,i){var s=this.localToGlobal(e,t);return this._getObjectsUnderPoint(s.x,s.y,null,i>0,1==i)},t.getBounds=function(){return this._getBounds(null,!0)},t.getTransformedBounds=function(){return this._getBounds()},t.clone=function(t){var i=this._cloneProps(new e);return t&&this._cloneChildren(i),i},t.toString=function(){return"[Container (name="+this.name+")]"},t._tick=function(e){if(this.tickChildren)for(var t=this.children.length-1;t>=0;t--){var i=this.children[t];i.tickEnabled&&i._tick&&i._tick(e)}this.DisplayObject__tick(e)},t._cloneChildren=function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,i=0,s=this.children.length;s>i;i++){var n=this.children[i].clone(!0);n.parent=e,t.push(n)}},t._getObjectsUnderPoint=function(t,i,s,n,o,r){if(r=r||0,!r&&!this._testMask(this,t,i))return null;var a,h=createjs.DisplayObject._hitTestContext;o=o||n&&this._hasMouseEventListener();for(var l=this.children,c=l.length,d=c-1;d>=0;d--){var u=l[d],g=u.hitArea;if(u.visible&&(g||u.isVisible())&&(!n||u.mouseEnabled)&&(g||this._testMask(u,t,i)))if(!g&&u instanceof e){var p=u._getObjectsUnderPoint(t,i,s,n,o,r+1);if(!s&&p)return n&&!this.mouseChildren?this:p}else{if(n&&!o&&!u._hasMouseEventListener())continue;var m=u.getConcatenatedDisplayProps(u._props);if(a=m.matrix,g&&(a.appendMatrix(g.getMatrix(g._props.matrix)),m.alpha=g.alpha),h.globalAlpha=m.alpha,h.setTransform(a.a,a.b,a.c,a.d,a.tx-t,a.ty-i),(g||u).draw(h),!this._testHit(h))continue;if(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,2,2),!s)return n&&!this.mouseChildren?this:u;s.push(u)}}return null},t._testMask=function(e,t,i){var s=e.mask;if(!s||!s.graphics||s.graphics.isEmpty())return!0;var n=this._props.matrix,o=e.parent;n=o?o.getConcatenatedMatrix(n):n.identity(),n=s.getMatrix(s._props.matrix).prependMatrix(n);var r=createjs.DisplayObject._hitTestContext;return r.setTransform(n.a,n.b,n.c,n.d,n.tx-t,n.ty-i),s.graphics.drawAsPath(r),r.fillStyle="#000",r.fill(),this._testHit(r)?(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),!0):!1},t._getBounds=function(e,t){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,e,t);var s=this._props.matrix;s=t?s.identity():this.getMatrix(s),e&&s.prependMatrix(e);for(var n=this.children.length,o=null,r=0;n>r;r++){var a=this.children[r];a.visible&&(i=a._getBounds(s))&&(o?o.extend(i.x,i.y,i.width,i.height):o=i.clone())}return o},createjs.Container=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof e?document.getElementById(e):e,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var t=createjs.extend(e,createjs.Container);t._get_nextStage=function(){return this._nextStage},t._set_nextStage=function(e){this._nextStage&&(this._nextStage._prevStage=null),e&&(e._prevStage=this),this._nextStage=e};try{Object.defineProperties(t,{nextStage:{get:t._get_nextStage,set:t._set_nextStage}})}catch(i){}t.update=function(e){if(this.canvas&&(this.tickOnUpdate&&this.tick(e),!this.dispatchEvent("drawstart"))){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var t=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(t?i.clearRect(t.x,t.y,t.width,t.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(t.x,t.y,t.width,t.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},t.tick=function(e){if(this.tickEnabled&&!this.dispatchEvent("tickstart")){var t=new createjs.Event("tick");if(e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);this._tick(t),this.dispatchEvent("tickend")}},t.handleEvent=function(e){"tick"==e.type&&this.update(e)},t.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},t.toDataURL=function(e,t){var i,s=this.canvas.getContext("2d"),n=this.canvas.width,o=this.canvas.height;if(e){i=s.getImageData(0,0,n,o);var r=s.globalCompositeOperation;s.globalCompositeOperation="destination-over",s.fillStyle=e,s.fillRect(0,0,n,o)}var a=this.canvas.toDataURL(t||"image/png");return e&&(s.putImageData(i,0,0),s.globalCompositeOperation=r),a},t.enableMouseOver=function(e){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==e&&this._testMouseOver(!0)),null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},t.enableDOMEvents=function(e){null==e&&(e=!0);var t,i,s=this._eventListeners;if(!e&&s){for(t in s)i=s[t],i.t.removeEventListener(t,i.f,!1);this._eventListeners=null}else if(e&&!s&&this.canvas){var n=window.addEventListener?window:document,o=this;s=this._eventListeners={},s.mouseup={t:n,f:function(e){o._handleMouseUp(e)}},s.mousemove={t:n,f:function(e){o._handleMouseMove(e)}},s.dblclick={t:this.canvas,f:function(e){o._handleDoubleClick(e)}},s.mousedown={t:this.canvas,f:function(e){o._handleMouseDown(e)}};for(t in s)i=s[t],i.t.addEventListener(t,i.f,!1)}},t.clone=function(){throw"Stage cannot be cloned."},t.toString=function(){return"[Stage (name="+this.name+")]"},t._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(i){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var s=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),n=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),o=window.getComputedStyle?getComputedStyle(e,null):e.currentStyle,r=parseInt(o.paddingLeft)+parseInt(o.borderLeftWidth),a=parseInt(o.paddingTop)+parseInt(o.borderTopWidth),h=parseInt(o.paddingRight)+parseInt(o.borderRightWidth),l=parseInt(o.paddingBottom)+parseInt(o.borderBottomWidth);return{left:t.left+s+r,right:t.right+s-h,top:t.top+n+a,bottom:t.bottom+n-l}},t._getPointerData=function(e){var t=this._pointerData[e];return t||(t=this._pointerData[e]={x:0,y:0}),t},t._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},t._handlePointerMove=function(e,t,i,s,n){if((!this._prevStage||void 0!==n)&&this.canvas){var o=this._nextStage,r=this._getPointerData(e),a=r.inBounds;this._updatePointerPosition(e,t,i,s),(a||r.inBounds||this.mouseMoveOutside)&&(-1===e&&r.inBounds==!a&&this._dispatchMouseEvent(this,a?"mouseleave":"mouseenter",!1,e,r,t),this._dispatchMouseEvent(this,"stagemousemove",!1,e,r,t),this._dispatchMouseEvent(r.target,"pressmove",!0,e,r,t)),o&&o._handlePointerMove(e,t,i,s,null)}},t._updatePointerPosition=function(e,t,i,s){var n=this._getElementRect(this.canvas);i-=n.left,s-=n.top;var o=this.canvas.width,r=this.canvas.height;i/=(n.right-n.left)/o,s/=(n.bottom-n.top)/r;var a=this._getPointerData(e);(a.inBounds=i>=0&&s>=0&&o-1>=i&&r-1>=s)?(a.x=i,a.y=s):this.mouseMoveOutside&&(a.x=0>i?0:i>o-1?o-1:i,a.y=0>s?0:s>r-1?r-1:s),a.posEvtObj=t,a.rawX=i,a.rawY=s,(e===this._primaryPointerID||-1===e)&&(this.mouseX=a.x,this.mouseY=a.y,this.mouseInBounds=a.inBounds)},t._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},t._handlePointerUp=function(e,t,i,s){var n=this._nextStage,o=this._getPointerData(e);if(!this._prevStage||void 0!==s){o.down&&this._dispatchMouseEvent(this,"stagemouseup",!1,e,o,t),o.down=!1;var r=null,a=o.target;s||!a&&!n||(r=this._getObjectsUnderPoint(o.x,o.y,null,!0)),r==a&&this._dispatchMouseEvent(a,"click",!0,e,o,t),this._dispatchMouseEvent(a,"pressup",!0,e,o,t),i?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):o.target=null,n&&n._handlePointerUp(e,t,i,s||r&&this)}},t._handleMouseDown=function(e){this._handlePointerDown(-1,e,e.pageX,e.pageY)},t._handlePointerDown=function(e,t,i,s,n){this.preventSelection&&t.preventDefault(),(null==this._primaryPointerID||-1===e)&&(this._primaryPointerID=e),null!=s&&this._updatePointerPosition(e,t,i,s);var o=null,r=this._nextStage,a=this._getPointerData(e);a.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,e,a,t),a.down=!0),n||(o=a.target=this._getObjectsUnderPoint(a.x,a.y,null,!0),this._dispatchMouseEvent(a.target,"mousedown",!0,e,a,t)),r&&r._handlePointerDown(e,t,i,s,n||o&&this)
},t._testMouseOver=function(e,t,i){if(!this._prevStage||void 0!==t){var s=this._nextStage;if(!this._mouseOverIntervalID)return void(s&&s._testMouseOver(e,t,i));var n=this._getPointerData(-1);if(n&&(e||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var o,r,a,h=n.posEvtObj,l=i||h&&h.target==this.canvas,c=null,d=-1,u="";!t&&(e||this.mouseInBounds&&l)&&(c=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var g=this._mouseOverTarget||[],p=g[g.length-1],m=this._mouseOverTarget=[];for(o=c;o;)m.unshift(o),null!=o.cursor&&(u=o.cursor),o=o.parent;for(this.canvas.style.cursor=u,!t&&i&&(i.canvas.style.cursor=u),r=0,a=m.length;a>r&&m[r]==g[r];r++)d=r;for(p!=c&&this._dispatchMouseEvent(p,"mouseout",!0,-1,n,h),r=g.length-1;r>d;r--)this._dispatchMouseEvent(g[r],"rollout",!1,-1,n,h);for(r=m.length-1;r>d;r--)this._dispatchMouseEvent(m[r],"rollover",!1,-1,n,h);p!=c&&this._dispatchMouseEvent(c,"mouseover",!0,-1,n,h),s&&s._testMouseOver(e,t||c&&this,i||l&&this)}}},t._handleDoubleClick=function(e,t){var i=null,s=this._nextStage,n=this._getPointerData(-1);t||(i=this._getObjectsUnderPoint(n.x,n.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,n,e)),s&&s._handleDoubleClick(e,t||i&&this)},t._dispatchMouseEvent=function(e,t,i,s,n,o){if(e&&(i||e.hasEventListener(t))){var r=new createjs.MouseEvent(t,i,!1,n.x,n.y,o,s,s===this._primaryPointerID||-1===s,n.rawX,n.rawY);e.dispatchEvent(r)}},createjs.Stage=createjs.promote(e,"Container")}(),this.createjs=this.createjs||{},function(){function e(e){this.DisplayObject_constructor(),"string"==typeof e?(this.image=document.createElement("img"),this.image.src=e):this.image=e,this.sourceRect=null}var t=createjs.extend(e,createjs.DisplayObject);t.initialize=e,t.isVisible=function(){var e=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t)||!this.image)return!0;var i=this.image,s=this.sourceRect;if(s){var n=s.x,o=s.y,r=n+s.width,a=o+s.height,h=0,l=0,c=i.width,d=i.height;0>n&&(h-=n,n=0),r>c&&(r=c),0>o&&(l-=o,o=0),a>d&&(a=d),e.drawImage(i,n,o,r-n,a-o,h,l,r-n,a-o)}else e.drawImage(i,0,0);return!0},t.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;var t=this.sourceRect||this.image,i=this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return i?this._rectangle.setValues(0,0,t.width,t.height):null},t.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this._cloneProps(t),t},t.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=e,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,t&&this.gotoAndPlay(t)}var t=createjs.extend(e,createjs.DisplayObject);t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var s=i.rect;return s.width&&s.height&&e.drawImage(i.image,s.x,s.y,s.width,s.height,-i.regX,-i.regY,s.width,s.height),!0},t.play=function(){this.paused=!1},t.stop=function(){this.paused=!0},t.gotoAndPlay=function(e){this.paused=!1,this._skipAdvance=!0,this._goto(e)},t.gotoAndStop=function(e){this.paused=!0,this._goto(e)},t.advance=function(e){var t=this.framerate||this.spriteSheet.framerate,i=t&&null!=e?e/(1e3/t):1;this._normalizeFrame(i)},t.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},t.clone=function(){return this._cloneProps(new e(this.spriteSheet))},t.toString=function(){return"[Sprite (name="+this.name+")]"},t._cloneProps=function(e){return this.DisplayObject__cloneProps(e),e.currentFrame=this.currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e.currentAnimationFrame=this.currentAnimationFrame,e.framerate=this.framerate,e._animation=this._animation,e._currentFrame=this._currentFrame,e._skipAdvance=this._skipAdvance,e},t._tick=function(e){this.paused||(this._skipAdvance||this.advance(e&&e.delta),this._skipAdvance=!1),this.DisplayObject__tick(e)},t._normalizeFrame=function(e){e=e||0;var t,i=this._animation,s=this.paused,n=this._currentFrame;if(i){var o=i.speed||1,r=this.currentAnimationFrame;if(t=i.frames.length,r+e*o>=t){var a=i.next;if(this._dispatchAnimationEnd(i,n,s,a,t-1))return;if(a)return this._goto(a,e-(t-r)/o);this.paused=!0,r=i.frames.length-1}else r+=e*o;this.currentAnimationFrame=r,this._currentFrame=i.frames[0|r]}else if(n=this._currentFrame+=e,t=this.spriteSheet.getNumFrames(),n>=t&&t>0&&!this._dispatchAnimationEnd(i,n,s,t-1)&&(this._currentFrame-=t)>=t)return this._normalizeFrame();n=0|this._currentFrame,this.currentFrame!=n&&(this.currentFrame=n,this.dispatchEvent("change"))},t._dispatchAnimationEnd=function(e,t,i,s,n){var o=e?e.name:null;if(this.hasEventListener("animationend")){var r=new createjs.Event("animationend");r.name=o,r.next=s,this.dispatchEvent(r)}var a=this._animation!=e||this._currentFrame!=t;return a||i||!this.paused||(this.currentAnimationFrame=n,a=!0),a},t._goto=function(e,t){if(this.currentAnimationFrame=0,isNaN(e)){var i=this.spriteSheet.getAnimation(e);i&&(this._animation=i,this.currentAnimation=e,this._normalizeFrame(t))}else this.currentAnimation=this._animation=null,this._currentFrame=e,this._normalizeFrame()},createjs.Sprite=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.DisplayObject_constructor(),this.graphics=e?e:new createjs.Graphics}var t=createjs.extend(e,createjs.DisplayObject);t.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e,this),!0)},t.clone=function(t){var i=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new e(i))},t.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.DisplayObject_constructor(),this.text=e,this.font=t,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var t=createjs.extend(e,createjs.DisplayObject),i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(e._workingContext=i.getContext("2d"),i.width=i.height=1),e.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},t.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},t.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var i=this.color||"#000";return this.outline?(e.strokeStyle=i,e.lineWidth=1*this.outline):e.fillStyle=i,this._drawText(this._prepContext(e)),!0},t.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},t.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},t.getMeasuredHeight=function(){return this._drawText(null,{}).height},t.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""==this.text)return null;var i=this._drawText(null,{}),s=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,n=s*e.H_OFFSETS[this.textAlign||"left"],o=this.lineHeight||this.getMeasuredLineHeight(),r=o*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(n,r,s,i.height)},t.getMetrics=function(){var t={lines:[]};return t.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),t.vOffset=t.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,t,t.lines)},t.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},t.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},t._cloneProps=function(e){return this.DisplayObject__cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth,e},t._prepContext=function(e){return e.font=this.font||"10px sans-serif",e.textAlign=this.textAlign||"left",e.textBaseline=this.textBaseline||"top",e},t._drawText=function(t,i,s){var n=!!t;n||(t=e._workingContext,t.save(),this._prepContext(t));for(var o=this.lineHeight||this.getMeasuredLineHeight(),r=0,a=0,h=String(this.text).split(/(?:\r\n|\r|\n)/),l=0,c=h.length;c>l;l++){var d=h[l],u=null;if(null!=this.lineWidth&&(u=t.measureText(d).width)>this.lineWidth){var g=d.split(/(\s)/);d=g[0],u=t.measureText(d).width;for(var p=1,m=g.length;m>p;p+=2){var _=t.measureText(g[p]+g[p+1]).width;u+_>this.lineWidth?(n&&this._drawTextLine(t,d,a*o),s&&s.push(d),u>r&&(r=u),d=g[p+1],u=t.measureText(d).width,a++):(d+=g[p]+g[p+1],u+=_)}}n&&this._drawTextLine(t,d,a*o),s&&s.push(d),i&&null==u&&(u=t.measureText(d).width),u>r&&(r=u),a++}return i&&(i.width=r,i.height=a*o),n||t.restore(),i},t._drawTextLine=function(e,t,i){this.outline?e.strokeText(t,0,i,this.maxWidth||65535):e.fillText(t,0,i,this.maxWidth||65535)},t._getMeasuredWidth=function(t){var i=e._workingContext;i.save();var s=this._prepContext(i).measureText(t).width;return i.restore(),s},createjs.Text=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.Container_constructor(),this.text=e||"",this.spriteSheet=t,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var t=createjs.extend(e,createjs.Container);e.maxPoolSize=100,e._spritePool=[],t.draw=function(e,t){this.DisplayObject_draw(e,t)||(this._updateText(),this.Container_draw(e,t))},t.getBounds=function(){return this._updateText(),this.Container_getBounds()},t.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&e)},t.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},t.addChild=t.addChildAt=t.removeChild=t.removeChildAt=t.removeAllChildren=function(){},t._cloneProps=function(e){return this.DisplayObject__cloneProps(e),e.lineHeight=this.lineHeight,e.letterSpacing=this.letterSpacing,e.spaceWidth=this.spaceWidth,e},t._getFrameIndex=function(e,t){var i,s=t.getAnimation(e);return s||(e!=(i=e.toUpperCase())||e!=(i=e.toLowerCase())||(i=null),i&&(s=t.getAnimation(i))),s&&s.frames[0]},t._getFrame=function(e,t){var i=this._getFrameIndex(e,t);return null==i?i:t.getFrame(i)},t._getLineHeight=function(e){var t=this._getFrame("1",e)||this._getFrame("T",e)||this._getFrame("L",e)||e.getFrame(0);return t?t.rect.height:1},t._getSpaceWidth=function(e){var t=this._getFrame("1",e)||this._getFrame("l",e)||this._getFrame("e",e)||this._getFrame("a",e)||e.getFrame(0);return t?t.rect.width:1},t._updateText=function(){var t,i=0,s=0,n=this._oldProps,o=!1,r=this.spaceWidth,a=this.lineHeight,h=this.spriteSheet,l=e._spritePool,c=this.children,d=0,u=c.length;for(var g in n)n[g]!=this[g]&&(n[g]=this[g],o=!0);if(o){var p=!!this._getFrame(" ",h);p||r||(r=this._getSpaceWidth(h)),a||(a=this._getLineHeight(h));for(var m=0,_=this.text.length;_>m;m++){var f=this.text.charAt(m);if(" "!=f||p)if("\n"!=f&&"\r"!=f){var v=this._getFrameIndex(f,h);null!=v&&(u>d?t=c[d]:(c.push(t=l.length?l.pop():new createjs.Sprite),t.parent=this,u++),t.spriteSheet=h,t.gotoAndStop(v),t.x=i,t.y=s,d++,i+=t.getBounds().width+this.letterSpacing)}else"\r"==f&&"\n"==this.text.charAt(m+1)&&m++,i=0,s+=a;else i+=r}for(;u>d;)l.push(t=c.pop()),t.parent=null,u--;l.length>e.maxPoolSize&&(l.length=e.maxPoolSize)}},createjs.BitmapText=createjs.promote(e,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"SpriteSheetUtils cannot be instantiated"}var t=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");t.getContext&&(e._workingCanvas=t,e._workingContext=t.getContext("2d"),t.width=t.height=1),e.addFlippedFrames=function(t,i,s,n){if(i||s||n){var o=0;i&&e._flip(t,++o,!0,!1),s&&e._flip(t,++o,!1,!0),n&&e._flip(t,++o,!0,!0)}},e.extractFrame=function(t,i){isNaN(i)&&(i=t.getAnimation(i).frames[0]);var s=t.getFrame(i);if(!s)return null;var n=s.rect,o=e._workingCanvas;o.width=n.width,o.height=n.height,e._workingContext.drawImage(s.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height);var r=document.createElement("img");return r.src=o.toDataURL("image/png"),r},e.mergeAlpha=function(e,t,i){i||(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),i.width=Math.max(t.width,e.width),i.height=Math.max(t.height,e.height);var s=i.getContext("2d");return s.save(),s.drawImage(e,0,0),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0),s.restore(),i},e._flip=function(t,i,s,n){for(var o=t._images,r=e._workingCanvas,a=e._workingContext,h=o.length/i,l=0;h>l;l++){var c=o[l];c.__tmp=l,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,r.width+1,r.height+1),r.width=c.width,r.height=c.height,a.setTransform(s?-1:1,0,0,n?-1:1,s?c.width:0,n?c.height:0),a.drawImage(c,0,0);var d=document.createElement("img");d.src=r.toDataURL("image/png"),d.width=c.width,d.height=c.height,o.push(d)}var u=t._frames,g=u.length/i;for(l=0;g>l;l++){c=u[l];var p=c.rect.clone();d=o[c.image.__tmp+h*i];var m={image:d,rect:p,regX:c.regX,regY:c.regY};s&&(p.x=d.width-p.x-p.width,m.regX=p.width-c.regX),n&&(p.y=d.height-p.y-p.height,m.regY=p.height-c.regY),u.push(m)}var _="_"+(s?"h":"")+(n?"v":""),f=t._animations,v=t._data,E=f.length/i;for(l=0;E>l;l++){var y=f[l];c=v[y];var T={name:y+_,speed:c.speed,next:c.next,frames:[]};c.next&&(T.next+=_),u=c.frames;for(var S=0,C=u.length;C>S;S++)T.frames.push(u[S]+g*i);v[T.name]=T,f.push(T.name)}},createjs.SpriteSheetUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var t=createjs.extend(e,createjs.EventDispatcher);e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",t.addFrame=function(t,i,s,n,o){if(this._data)throw e.ERR_RUNNING;var r=i||t.bounds||t.nominalBounds;return!r&&t.getBounds&&(r=t.getBounds()),r?(s=s||1,this._frames.push({source:t,sourceRect:r,scale:s,funct:n,data:o,index:this._frames.length,height:r.height*s})-1):null},t.addAnimation=function(t,i,s,n){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:i,next:s,frequency:n}},t.addMovieClip=function(t,i,s,n,o,r){if(this._data)throw e.ERR_RUNNING;var a=t.frameBounds,h=i||t.bounds||t.nominalBounds;if(!h&&t.getBounds&&(h=t.getBounds()),h||a){var l,c,d=this._frames.length,u=t.timeline.duration;for(l=0;u>l;l++){var g=a&&a[l]?a[l]:h;this.addFrame(t,g,s,this._setupMovieClipFrame,{i:l,f:n,d:o})}var p=t.timeline._labels,m=[];for(var _ in p)m.push({index:p[_],label:_});if(m.length)for(m.sort(function(e,t){return e.index-t.index}),l=0,c=m.length;c>l;l++){for(var f=m[l].label,v=d+m[l].index,E=d+(l==c-1?u:m[l+1].index),y=[],T=v;E>T;T++)y.push(T);(!r||(f=r(f,t,v,E)))&&this.addAnimation(f,y,!0)}}},t.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},t.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},t.stopAsync=function(){clearTimeout(this._timerID),this._data=null},t.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},t.toString=function(){return"[SpriteSheetBuilder]"},t._startBuild=function(){var t=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,animations:this._animations};var s=this._frames.slice();if(s.sort(function(e,t){return e.height<=t.height?-1:1}),s[s.length-1].height+2*t>this.maxHeight)throw e.ERR_DIMENSIONS;for(var n=0,o=0,r=0;s.length;){var a=this._fillRow(s,n,r,i,t);if(a.w>o&&(o=a.w),n+=a.h,!a.h||!s.length){var h=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");h.width=this._getSize(o,this.maxWidth),h.height=this._getSize(n,this.maxHeight),this._data.images[r]=h,a.h||(o=n=0,r++)}}},t._setupMovieClipFrame=function(e,t){var i=e.actionsEnabled;e.actionsEnabled=!1,e.gotoAndStop(t.i),e.actionsEnabled=i,t.f&&t.f(e,t.d,t.i)},t._getSize=function(e,t){for(var i=4;Math.pow(2,++i)<e;);return Math.min(t,Math.pow(2,i))},t._fillRow=function(t,i,s,n,o){var r=this.maxWidth,a=this.maxHeight;i+=o;for(var h=a-i,l=o,c=0,d=t.length-1;d>=0;d--){var u=t[d],g=this._scale*u.scale,p=u.sourceRect,m=u.source,_=Math.floor(g*p.x-o),f=Math.floor(g*p.y-o),v=Math.ceil(g*p.height+2*o),E=Math.ceil(g*p.width+2*o);if(E>r)throw e.ERR_DIMENSIONS;v>h||l+E>r||(u.img=s,u.rect=new createjs.Rectangle(l,i,E,v),c=c||v,t.splice(d,1),n[u.index]=[l,i,E,v,s,Math.round(-_+g*m.regX-o),Math.round(-f+g*m.regY-o)],l+=E)}return{w:l,h:c}},t._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},t._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),t=(new Date).getTime()+e,i=!1;t>(new Date).getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var s=this;this._timerID=setTimeout(function(){s._run()},50-e)}var n=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var o=new createjs.Event("progress");o.progress=n,this.dispatchEvent(o)}},t._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,i=e.rect,s=e.sourceRect,n=this._data.images[e.img],o=n.getContext("2d");return e.funct&&e.funct(e.source,e.data),o.save(),o.beginPath(),o.rect(i.x,i.y,i.width,i.height),o.clip(),o.translate(Math.ceil(i.x-s.x*t),Math.ceil(i.y-s.y*t)),o.scale(t,t),e.source.draw(o),o.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.DisplayObject_constructor(),"string"==typeof e&&(e=document.getElementById(e)),this.mouseEnabled=!1;var t=e.style;t.position="absolute",t.transformOrigin=t.WebkitTransformOrigin=t.msTransformOrigin=t.MozTransformOrigin=t.OTransformOrigin="0% 0%",this.htmlElement=e,this._oldProps=null}var t=createjs.extend(e,createjs.DisplayObject);t.isVisible=function(){return null!=this.htmlElement},t.draw=function(){return!0},t.cache=function(){},t.uncache=function(){},t.updateCache=function(){},t.hitTest=function(){},t.localToGlobal=function(){},t.globalToLocal=function(){},t.localToLocal=function(){},t.clone=function(){throw"DOMElement cannot be cloned."},t.toString=function(){return"[DOMElement (name="+this.name+")]"},t._tick=function(e){var t=this.getStage();t&&t.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(e)},t._handleDrawEnd=function(){var e=this.htmlElement;if(e){var t=e.style,i=this.getConcatenatedDisplayProps(this._props),s=i.matrix,n=i.visible?"visible":"hidden";if(n!=t.visibility&&(t.visibility=n),i.visible){var o=this._oldProps,r=o&&o.matrix,a=1e4;if(!r||!r.equals(s)){var h="matrix("+(s.a*a|0)/a+","+(s.b*a|0)/a+","+(s.c*a|0)/a+","+(s.d*a|0)/a+","+(s.tx+.5|0);t.transform=t.WebkitTransform=t.OTransform=t.msTransform=h+","+(s.ty+.5|0)+")",t.MozTransform=h+"px,"+(s.ty+.5|0)+"px)",o||(o=this._oldProps=new createjs.DisplayProps(!0,0/0)),o.matrix.copy(s)}o.alpha!=i.alpha&&(t.opacity=""+(i.alpha*a|0)/a,o.alpha=i.alpha)}}},createjs.DOMElement=createjs.promote(e,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){}var t=e.prototype;t.getBounds=function(e){return e},t.applyFilter=function(e,t,i,s,n,o,r,a){o=o||e,null==r&&(r=t),null==a&&(a=i);try{var h=e.getImageData(t,i,s,n)}catch(l){return!1}return this._applyFilter(h)?(o.putImageData(h,r,a),!0):!1},t.toString=function(){return"[Filter]"},t.clone=function(){return new e},t._applyFilter=function(){return!0},createjs.Filter=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){(isNaN(e)||0>e)&&(e=0),(isNaN(t)||0>t)&&(t=0),(isNaN(i)||1>i)&&(i=1),this.blurX=0|e,this.blurY=0|t,this.quality=0|i}var t=createjs.extend(e,createjs.Filter);e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],t.getBounds=function(e){var t=0|this.blurX,i=0|this.blurY;if(0>=t&&0>=i)return e;var s=Math.pow(this.quality,.2);return(e||new createjs.Rectangle).pad(t*s+1,i*s+1,t*s+1,i*s+1)},t.clone=function(){return new e(this.blurX,this.blurY,this.quality)},t.toString=function(){return"[BlurFilter]"},t._applyFilter=function(t){var i=this.blurX>>1;if(isNaN(i)||0>i)return!1;var s=this.blurY>>1;if(isNaN(s)||0>s)return!1;if(0==i&&0==s)return!1;var n=this.quality;(isNaN(n)||1>n)&&(n=1),n|=0,n>3&&(n=3),1>n&&(n=1);var o=t.data,r=0,a=0,h=0,l=0,c=0,d=0,u=0,g=0,p=0,m=0,_=0,f=0,v=0,E=0,y=0,T=i+i+1|0,S=s+s+1|0,C=0|t.width,w=0|t.height,b=C-1|0,A=w-1|0,L=i+1|0,x=s+1|0,M={r:0,b:0,g:0,a:0},I=M;for(h=1;T>h;h++)I=I.n={r:0,b:0,g:0,a:0};I.n=M;var O={r:0,b:0,g:0,a:0},R=O;for(h=1;S>h;h++)R=R.n={r:0,b:0,g:0,a:0};R.n=O;for(var N=null,P=0|e.MUL_TABLE[i],D=0|e.SHG_TABLE[i],k=0|e.MUL_TABLE[s],B=0|e.SHG_TABLE[s];n-->0;){u=d=0;var U=P,H=D;for(a=w;--a>-1;){for(g=L*(f=o[0|d]),p=L*(v=o[d+1|0]),m=L*(E=o[d+2|0]),_=L*(y=o[d+3|0]),I=M,h=L;--h>-1;)I.r=f,I.g=v,I.b=E,I.a=y,I=I.n;for(h=1;L>h;h++)l=d+((h>b?b:h)<<2)|0,g+=I.r=o[l],p+=I.g=o[l+1],m+=I.b=o[l+2],_+=I.a=o[l+3],I=I.n;for(N=M,r=0;C>r;r++)o[d++]=g*U>>>H,o[d++]=p*U>>>H,o[d++]=m*U>>>H,o[d++]=_*U>>>H,l=u+((l=r+i+1)<b?l:b)<<2,g-=N.r-(N.r=o[l]),p-=N.g-(N.g=o[l+1]),m-=N.b-(N.b=o[l+2]),_-=N.a-(N.a=o[l+3]),N=N.n;u+=C}for(U=k,H=B,r=0;C>r;r++){for(d=r<<2|0,g=x*(f=o[d])|0,p=x*(v=o[d+1|0])|0,m=x*(E=o[d+2|0])|0,_=x*(y=o[d+3|0])|0,R=O,h=0;x>h;h++)R.r=f,R.g=v,R.b=E,R.a=y,R=R.n;for(c=C,h=1;s>=h;h++)d=c+r<<2,g+=R.r=o[d],p+=R.g=o[d+1],m+=R.b=o[d+2],_+=R.a=o[d+3],R=R.n,A>h&&(c+=C);if(d=r,N=O,n>0)for(a=0;w>a;a++)l=d<<2,o[l+3]=y=_*U>>>H,y>0?(o[l]=g*U>>>H,o[l+1]=p*U>>>H,o[l+2]=m*U>>>H):o[l]=o[l+1]=o[l+2]=0,l=r+((l=a+x)<A?l:A)*C<<2,g-=N.r-(N.r=o[l]),p-=N.g-(N.g=o[l+1]),m-=N.b-(N.b=o[l+2]),_-=N.a-(N.a=o[l+3]),N=N.n,d+=C;else for(a=0;w>a;a++)l=d<<2,o[l+3]=y=_*U>>>H,y>0?(y=255/y,o[l]=(g*U>>>H)*y,o[l+1]=(p*U>>>H)*y,o[l+2]=(m*U>>>H)*y):o[l]=o[l+1]=o[l+2]=0,l=r+((l=a+x)<A?l:A)*C<<2,g-=N.r-(N.r=o[l]),p-=N.g-(N.g=o[l+1]),m-=N.b-(N.b=o[l+2]),_-=N.a-(N.a=o[l+3]),N=N.n,d+=C}}return!0},createjs.BlurFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.alphaMap=e,this._alphaMap=null,this._mapData=null}var t=createjs.extend(e,createjs.Filter);t.clone=function(){var t=new e(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},t.toString=function(){return"[AlphaMapFilter]"},t._applyFilter=function(e){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var t=e.data,i=this._mapData,s=0,n=t.length;n>s;s+=4)t[s+3]=i[s]||0;return!0},t._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var e,t=this._alphaMap=this.alphaMap,i=t;t instanceof HTMLCanvasElement?e=i.getContext("2d"):(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),i.width=t.width,i.height=t.height,e=i.getContext("2d"),e.drawImage(t,0,0));try{var s=e.getImageData(0,0,t.width,t.height)}catch(n){return!1}return this._mapData=s.data,!0},createjs.AlphaMapFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.mask=e}var t=createjs.extend(e,createjs.Filter);t.applyFilter=function(e,t,i,s,n,o,r,a){return this.mask?(o=o||e,null==r&&(r=t),null==a&&(a=i),o.save(),e!=o?!1:(o.globalCompositeOperation="destination-in",o.drawImage(this.mask,r,a),o.restore(),!0)):!0},t.clone=function(){return new e(this.mask)},t.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s,n,o,r,a){this.redMultiplier=null!=e?e:1,this.greenMultiplier=null!=t?t:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=s?s:1,this.redOffset=n||0,this.greenOffset=o||0,this.blueOffset=r||0,this.alphaOffset=a||0}var t=createjs.extend(e,createjs.Filter);t.toString=function(){return"[ColorFilter]"},t.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},t._applyFilter=function(e){for(var t=e.data,i=t.length,s=0;i>s;s+=4)t[s]=t[s]*this.redMultiplier+this.redOffset,t[s+1]=t[s+1]*this.greenMultiplier+this.greenOffset,t[s+2]=t[s+2]*this.blueMultiplier+this.blueOffset,t[s+3]=t[s+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s){this.setColor(e,t,i,s)}var t=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e.LENGTH=e.IDENTITY_MATRIX.length,t.setColor=function(e,t,i,s){return this.reset().adjustColor(e,t,i,s)},t.reset=function(){return this.copy(e.IDENTITY_MATRIX)},t.adjustColor=function(e,t,i,s){return this.adjustHue(s),this.adjustContrast(t),this.adjustBrightness(e),this.adjustSaturation(i)},t.adjustBrightness=function(e){return 0==e||isNaN(e)?this:(e=this._cleanValue(e,255),this._multiplyMatrix([1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1]),this)},t.adjustContrast=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var i;return 0>t?i=127+t/100*127:(i=t%1,i=0==i?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-i)+e.DELTA_INDEX[(t<<0)+1]*i,i=127*i+127),this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},t.adjustSaturation=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var t=1+(e>0?3*e/100:e/100),i=.3086,s=.6094,n=.082;return this._multiplyMatrix([i*(1-t)+t,s*(1-t),n*(1-t),0,0,i*(1-t),s*(1-t)+t,n*(1-t),0,0,i*(1-t),s*(1-t),n*(1-t)+t,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.adjustHue=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,180)/180*Math.PI;var t=Math.cos(e),i=Math.sin(e),s=.213,n=.715,o=.072;return this._multiplyMatrix([s+t*(1-s)+i*-s,n+t*-n+i*-n,o+t*-o+i*(1-o),0,0,s+t*-s+.143*i,n+t*(1-n)+.14*i,o+t*-o+i*-.283,0,0,s+t*-s+i*-(1-s),n+t*-n+i*n,o+t*(1-o)+i*o,0,0,0,0,0,1,0,0,0,0,0,1]),this},t.concat=function(t){return t=this._fixMatrix(t),t.length!=e.LENGTH?this:(this._multiplyMatrix(t),this)},t.clone=function(){return(new e).copy(this)},t.toArray=function(){for(var t=[],i=0,s=e.LENGTH;s>i;i++)t[i]=this[i];return t},t.copy=function(t){for(var i=e.LENGTH,s=0;i>s;s++)this[s]=t[s];return this},t.toString=function(){return"[ColorMatrix]"},t._multiplyMatrix=function(e){var t,i,s,n=[];for(t=0;5>t;t++){for(i=0;5>i;i++)n[i]=this[i+5*t];for(i=0;5>i;i++){var o=0;for(s=0;5>s;s++)o+=e[i+5*s]*n[s];this[i+5*t]=o}}},t._cleanValue=function(e,t){return Math.min(t,Math.max(-t,e))},t._fixMatrix=function(t){return t instanceof e&&(t=t.toArray()),t.length<e.LENGTH?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,e.LENGTH)):t.length>e.LENGTH&&(t=t.slice(0,e.LENGTH)),t},createjs.ColorMatrix=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.matrix=e}var t=createjs.extend(e,createjs.Filter);t.toString=function(){return"[ColorMatrixFilter]"},t.clone=function(){return new e(this.matrix)},t._applyFilter=function(e){for(var t,i,s,n,o=e.data,r=o.length,a=this.matrix,h=a[0],l=a[1],c=a[2],d=a[3],u=a[4],g=a[5],p=a[6],m=a[7],_=a[8],f=a[9],v=a[10],E=a[11],y=a[12],T=a[13],S=a[14],C=a[15],w=a[16],b=a[17],A=a[18],L=a[19],x=0;r>x;x+=4)t=o[x],i=o[x+1],s=o[x+2],n=o[x+3],o[x]=t*h+i*l+s*c+n*d+u,o[x+1]=t*g+i*p+s*m+n*_+f,o[x+2]=t*v+i*E+s*y+n*T+S,o[x+3]=t*C+i*w+s*b+n*A+L;return!0},createjs.ColorMatrixFilter=createjs.promote(e,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Touch cannot be instantiated"}e.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},e.enable=function(t,i,s){return t&&t.canvas&&e.isSupported()?t.__touch?!0:(t.__touch={pointers:{},multitouch:!i,preventDefault:!s,count:0},"ontouchstart"in window?e._IOS_enable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_enable(t),!0):!1},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_disable(t),delete t.__touch)},e._IOS_enable=function(t){var i=t.canvas,s=t.__touch.f=function(i){e._IOS_handleEvent(t,i)};i.addEventListener("touchstart",s,!1),i.addEventListener("touchmove",s,!1),i.addEventListener("touchend",s,!1),i.addEventListener("touchcancel",s,!1)},e._IOS_disable=function(e){var t=e.canvas;
if(t){var i=e.__touch.f;t.removeEventListener("touchstart",i,!1),t.removeEventListener("touchmove",i,!1),t.removeEventListener("touchend",i,!1),t.removeEventListener("touchcancel",i,!1)}},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var i=t.changedTouches,s=t.type,n=0,o=i.length;o>n;n++){var r=i[n],a=r.identifier;r.target==e.canvas&&("touchstart"==s?this._handleStart(e,a,t,r.pageX,r.pageY):"touchmove"==s?this._handleMove(e,a,t,r.pageX,r.pageY):("touchend"==s||"touchcancel"==s)&&this._handleEnd(e,a,t))}}},e._IE_enable=function(t){var i=t.canvas,s=t.__touch.f=function(i){e._IE_handleEvent(t,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",s,!1),window.addEventListener("MSPointerMove",s,!1),window.addEventListener("MSPointerUp",s,!1),window.addEventListener("MSPointerCancel",s,!1),t.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",s,!1),window.addEventListener("pointermove",s,!1),window.addEventListener("pointerup",s,!1),window.addEventListener("pointercancel",s,!1),t.__touch.preventDefault&&(i.style.touchAction="none")),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)):(window.removeEventListener("pointermove",t,!1),window.removeEventListener("pointerup",t,!1),window.removeEventListener("pointercancel",t,!1),e.canvas&&e.canvas.removeEventListener("pointerdown",t,!1))},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var i=t.type,s=t.pointerId,n=e.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(t.srcElement!=e.canvas)return;n[s]=!0,this._handleStart(e,s,t,t.pageX,t.pageY)}else n[s]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(e,s,t,t.pageX,t.pageY):("MSPointerUp"==i||"MSPointerCancel"==i||"pointerup"==i||"pointercancel"==i)&&(delete n[s],this._handleEnd(e,s,t)))}},e._handleStart=function(e,t,i,s,n){var o=e.__touch;if(o.multitouch||!o.count){var r=o.pointers;r[t]||(r[t]=!0,o.count++,e._handlePointerDown(t,i,s,n))}},e._handleMove=function(e,t,i,s,n){e.__touch.pointers[t]&&e._handlePointerMove(t,i,s,n)},e._handleEnd=function(e,t,i){var s=e.__touch,n=s.pointers;n[t]&&(s.count--,e._handlePointerUp(t,i,!0),delete n[t])},createjs.Touch=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.EaselJS=createjs.EaselJS||{};e.version="0.8.0",e.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),define("libs/createjs/easeljs",function(){}),this.createjs=this.createjs||{},createjs.extend=function(e,t){"use strict";function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(e,t){"use strict";var i=e.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(s){i[(t+="_")+"constructor"]=s.constructor;for(var n in s)i.hasOwnProperty(n)&&"function"==typeof s[n]&&(i[t+n]=s[n])}return e},this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=s[e];return n&&this.removeEventListener(e,t,i),n=s[e],n?n.push(t):s[e]=[t],t},t.on=function(e,t,i,s,n,o){return t.handleEvent&&(i=i||t,t=t.handleEvent),i=i||this,this.addEventListener(e,function(e){t.call(i,e,n),s&&e.remove()},o)},t.removeEventListener=function(e,t,i){var s=i?this._captureListeners:this._listeners;if(s){var n=s[e];if(n)for(var o=0,r=n.length;r>o;o++)if(n[o]==t){1==r?delete s[e]:n.splice(o,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e){if("string"==typeof e){var t=this._listeners;if(!t||!t[e])return!1;e=new createjs.Event(e)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(i){}if(e.bubbles&&this.parent){for(var s=this,n=[s];s.parent;)n.push(s=s.parent);var o,r=n.length;for(o=r-1;o>=0&&!e.propagationStopped;o--)n[o]._dispatchEvent(e,1+(0==o));for(o=1;r>o&&!e.propagationStopped;o++)n[o]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,i=this._captureListeners;return!!(t&&t[e]||i&&i[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var i,s=1==t?this._captureListeners:this._listeners;if(e&&s){var n=s[e.type];if(!n||!(i=n.length))return;try{e.currentTarget=this}catch(o){}try{e.eventPhase=t}catch(o){}e.removed=!1,n=n.slice();for(var r=0;i>r&&!e.immediatePropagationStopped;r++){var a=n[r];a.handleEvent?a.handleEvent(e):a(e),e.removed&&(this.off(e.type,a,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.useRAF=!1,e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return!e._inited&&e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval};try{Object.defineProperties(e,{interval:{get:e.getInterval,set:e.setInterval},framerate:{get:e.getFPS,set:e.setFPS}})}catch(t){console.log(t)}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){if(e._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(e._timerId)}else clearTimeout(e._timerId);e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=0,e._inited=!1},e.getMeasuredTickTime=function(t){var i=0,s=e._tickTimes;if(!s||s.length<1)return-1;t=Math.min(s.length,t||0|e.getFPS());for(var n=0;t>n;n++)i+=s[n];return i/t},e.getMeasuredFPS=function(t){var i=e._times;return!i||i.length<2?-1:(t=Math.min(i.length-1,t||0|e.getFPS()),1e3/((i[0]-i[t])/t))},e.setPaused=function(t){e.paused=t},e.getPaused=function(){return e.paused},e.getTime=function(t){return e._startTime?e._getTime()-(t?e._pausedTime:0):-1},e.getEventTime=function(t){return e._startTime?(e._lastTime||e._startTime)-(t?e._pausedTime:0):-1},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(null==e._timerId){var t=e.timingMode||e.useRAF&&e.RAF_SYNCHED;if(t==e.RAF_SYNCHED||t==e.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return e._timerId=i(t==e.RAF?e._handleRAF:e._handleSynch),void(e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var t=e.paused,i=e._getTime(),s=i-e._lastTime;if(e._lastTime=i,e._ticks++,t&&(e._pausedTicks++,e._pausedTime+=s),e.hasEventListener("tick")){var n=new createjs.Event("tick"),o=e.maxDelta;n.delta=o&&s>o?o:s,n.paused=t,n.time=i,n.runTime=i-e._pausedTime,e.dispatchEvent(n)}for(e._tickTimes.unshift(e._getTime()-i);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(i);e._times.length>100;)e._times.pop()};var i=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return(i&&i.call(performance)||(new Date).getTime())-e._startTime},createjs.Ticker=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(t,i,s){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=s||{},this.target=t,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=t,this._useTicks=!1,this._inited=!1,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&e.removeTweens(t)),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,e.NONE)}var t=createjs.extend(e,createjs.EventDispatcher);e.NONE=0,e.LOOP=1,e.REVERSE=2,e.IGNORE={},e._tweens=[],e._plugins={},e.get=function(t,i,s,n){return n&&e.removeTweens(t),new e(t,i,s)},e.tick=function(t,i){for(var s=e._tweens.slice(),n=s.length-1;n>=0;n--){var o=s[n];i&&!o.ignoreGlobalPause||o._paused||o.tick(o._useTicks?1:t)}},e.handleEvent=function(e){"tick"==e.type&&this.tick(e.delta,e.paused)},e.removeTweens=function(t){if(t.tweenjs_count){for(var i=e._tweens,s=i.length-1;s>=0;s--){var n=i[s];n._target==t&&(n._paused=!0,i.splice(s,1))}t.tweenjs_count=0}},e.removeAllTweens=function(){for(var t=e._tweens,i=0,s=t.length;s>i;i++){var n=t[i];n._paused=!0,n.target.tweenjs_count=0}t.length=0},e.hasActiveTweens=function(t){return t?t.tweenjs_count:e._tweens&&!!e._tweens.length},e.installPlugin=function(t,i){var s=t.priority;null==s&&(t.priority=s=0);for(var n=0,o=i.length,r=e._plugins;o>n;n++){var a=i[n];if(r[a]){for(var h=r[a],l=0,c=h.length;c>l&&!(s<h[l].priority);l++);r[a].splice(l,0,t)}else r[a]=[t]}},e._register=function(t,i){var s=t._target,n=e._tweens;if(i)s&&(s.tweenjs_count=s.tweenjs_count?s.tweenjs_count+1:1),n.push(t),!e._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",e),e._inited=!0);else{s&&s.tweenjs_count--;for(var o=n.length;o--;)if(n[o]==t)return void n.splice(o,1)}},t.wait=function(e,t){if(null==e||0>=e)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:i,e:this._linearEase,p1:i,v:t})},t.to=function(e,t,i){return(isNaN(t)||0>t)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(e))})},t.call=function(e,t,i){return this._addAction({f:e,p:t?t:[this],o:i?i:this._target})},t.set=function(e,t){return this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},t.play=function(e){return e||(e=this),this.call(e.setPaused,[!1],e)},t.pause=function(e){return e||(e=this),this.call(e.setPaused,[!0],e)},t.setPosition=function(e,t){0>e&&(e=0),null==t&&(t=1);var i=e,s=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,s=!0)),i==this._prevPos)return s;var n=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=e,this._target)if(s)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var o=0,r=this._steps.length;r>o&&!(this._steps[o].t>i);o++);var a=this._steps[o-1];this._updateTargetProps(a,(this._stepPosition=i-a.t)/a.d)}return 0!=t&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==t&&n>i?(n!=this.duration&&this._runActions(n,this.duration),this._runActions(0,i,!0)):this._runActions(n,i)),s&&this.setPaused(!0),this.dispatchEvent("change"),s},t.tick=function(e){this._paused||this.setPosition(this._prevPosition+e)},t.setPaused=function(t){return this._paused===!!t?this:(this._paused=!!t,e._register(this,!t),this)},t.w=t.wait,t.t=t.to,t.c=t.call,t.s=t.set,t.toString=function(){return"[Tween]"},t.clone=function(){throw"Tween can not be cloned."},t._updateTargetProps=function(t,i){var s,n,o,r,a,h;if(t||1!=i){if(this.passive=!!t.v,this.passive)return;t.e&&(i=t.e(i,0,1,1)),s=t.p0,n=t.p1}else this.passive=!1,s=n=this._curQueueProps;for(var l in this._initQueueProps){null==(r=s[l])&&(s[l]=r=this._initQueueProps[l]),null==(a=n[l])&&(n[l]=a=r),o=r==a||0==i||1==i||"number"!=typeof r?1==i?a:r:r+(a-r)*i;var c=!1;if(h=e._plugins[l])for(var d=0,u=h.length;u>d;d++){var g=h[d].tween(this,l,o,s,n,i,!!t&&s==n,!t);g==e.IGNORE?c=!0:o=g}c||(this._target[l]=o)}},t._runActions=function(e,t,i){var s=e,n=t,o=-1,r=this._actions.length,a=1;for(e>t&&(s=t,n=e,o=r,r=a=-1);(o+=a)!=r;){var h=this._actions[o],l=h.t;(l==n||l>s&&n>l||i&&l==e)&&h.f.apply(h.o,h.p)}},t._appendQueueProps=function(t){var i,s,n,o,r;for(var a in t)if(void 0===this._initQueueProps[a]){if(s=this._target[a],i=e._plugins[a])for(n=0,o=i.length;o>n;n++)s=i[n].init(this,a,s);this._initQueueProps[a]=this._curQueueProps[a]=void 0===s?null:s}else s=this._curQueueProps[a];for(var a in t){if(s=this._curQueueProps[a],i=e._plugins[a])for(r=r||{},n=0,o=i.length;o>n;n++)i[n].step&&i[n].step(this,a,s,t[a],r);this._curQueueProps[a]=t[a]}return r&&this._appendQueueProps(r),this._curQueueProps},t._cloneProps=function(e){var t={};for(var i in e)t[i]=e[i];return t},t._addStep=function(e){return e.d>0&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},t._addAction=function(e){return e.t=this.duration,this._actions.push(e),this},t._set=function(e,t){for(var i in e)t[i]=e[i]},createjs.Tween=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,i&&(this._useTicks=i.useTicks,this.loop=i.loop,this.ignoreGlobalPause=i.ignoreGlobalPause,i.onChange&&this.addEventListener("change",i.onChange)),e&&this.addTween.apply(this,e),this.setLabels(t),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,createjs.Tween.NONE)}var t=createjs.extend(e,createjs.EventDispatcher);t.addTween=function(e){var t=arguments.length;if(t>1){for(var i=0;t>i;i++)this.addTween(arguments[i]);return arguments[0]}return 0==t?null:(this.removeTween(e),this._tweens.push(e),e.setPaused(!0),e._paused=!1,e._useTicks=this._useTicks,e.duration>this.duration&&(this.duration=e.duration),this._prevPos>=0&&e.setPosition(this._prevPos,createjs.Tween.NONE),e)},t.removeTween=function(e){var t=arguments.length;if(t>1){for(var i=!0,s=0;t>s;s++)i=i&&this.removeTween(arguments[s]);return i}if(0==t)return!1;for(var n=this._tweens,s=n.length;s--;)if(n[s]==e)return n.splice(s,1),e.duration>=this.duration&&this.updateDuration(),!0;return!1},t.addLabel=function(e,t){this._labels[e]=t;var i=this._labelList;if(i){for(var s=0,n=i.length;n>s&&!(t<i[s].position);s++);i.splice(s,0,{label:e,position:t})}},t.setLabels=function(e){this._labels=e?e:{}},t.getLabels=function(){var e=this._labelList;if(!e){e=this._labelList=[];var t=this._labels;for(var i in t)e.push({label:i,position:t[i]});e.sort(function(e,t){return e.position-t.position})}return e},t.getCurrentLabel=function(){var e=this.getLabels(),t=this.position,i=e.length;if(i){for(var s=0;i>s&&!(t<e[s].position);s++);return 0==s?null:e[s-1].label}return null},t.gotoAndPlay=function(e){this.setPaused(!1),this._goto(e)},t.gotoAndStop=function(e){this.setPaused(!0),this._goto(e)},t.setPosition=function(e,t){0>e&&(e=0);var i=this.loop?e%this.duration:e,s=!this.loop&&e>=this.duration;if(i==this._prevPos)return s;this._prevPosition=e,this.position=this._prevPos=i;for(var n=0,o=this._tweens.length;o>n;n++)if(this._tweens[n].setPosition(i,t),i!=this._prevPos)return!1;return s&&this.setPaused(!0),this.dispatchEvent("change"),s},t.setPaused=function(e){this._paused=!!e,createjs.Tween._register(this,!e)},t.updateDuration=function(){this.duration=0;for(var e=0,t=this._tweens.length;t>e;e++){var i=this._tweens[e];i.duration>this.duration&&(this.duration=i.duration)}},t.tick=function(e){this.setPosition(this._prevPosition+e)},t.resolve=function(e){var t=Number(e);return isNaN(t)&&(t=this._labels[e]),t},t.toString=function(){return"[Timeline]"},t.clone=function(){throw"Timeline can not be cloned."},t._goto=function(e){var t=this.resolve(e);null!=t&&this.setPosition(t)},createjs.Timeline=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Ease cannot be instantiated."}e.linear=function(e){return e},e.none=e.linear,e.get=function(e){return-1>e&&(e=-1),e>1&&(e=1),function(t){return 0==e?t:0>e?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},e.getPowIn=function(e){return function(t){return Math.pow(t,e)}},e.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},e.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},e.sineOut=function(e){return Math.sin(e*Math.PI/2)},e.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},e.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},e.backIn=e.getBackIn(1.7),e.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},e.backOut=e.getBackOut(1.7),e.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},e.backInOut=e.getBackInOut(1.7),e.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},e.circOut=function(e){return Math.sqrt(1- --e*e)},e.circInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(e,t){var i=2*Math.PI;return function(s){if(0==s||1==s)return s;var n=t/i*Math.asin(1/e);return-(e*Math.pow(2,10*(s-=1))*Math.sin((s-n)*i/t))}},e.elasticIn=e.getElasticIn(1,.3),e.getElasticOut=function(e,t){var i=2*Math.PI;return function(s){if(0==s||1==s)return s;var n=t/i*Math.asin(1/e);return e*Math.pow(2,-10*s)*Math.sin((s-n)*i/t)+1}},e.elasticOut=e.getElasticOut(1,.3),e.getElasticInOut=function(e,t){var i=2*Math.PI;return function(s){var n=t/i*Math.asin(1/e);return(s*=2)<1?-.5*e*Math.pow(2,10*(s-=1))*Math.sin((s-n)*i/t):e*Math.pow(2,-10*(s-=1))*Math.sin((s-n)*i/t)*.5+1}},e.elasticInOut=e.getElasticInOut(1,.3*1.5),createjs.Ease=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"MotionGuidePlugin cannot be instantiated."}e.priority=0,e._rotOffS,e._rotOffE,e._rotNormS,e._rotNormE,e.install=function(){return createjs.Tween.installPlugin(e,["guide","x","y","rotation"]),createjs.Tween.IGNORE},e.init=function(e,t,i){var s=e.target;return s.hasOwnProperty("x")||(s.x=0),s.hasOwnProperty("y")||(s.y=0),s.hasOwnProperty("rotation")||(s.rotation=0),"rotation"==t&&(e.__needsRot=!0),"guide"==t?null:i},e.step=function(t,i,s,n,o){if("rotation"==i&&(t.__rotGlobalS=s,t.__rotGlobalE=n,e.testRotData(t,o)),"guide"!=i)return n;var r,a=n;a.hasOwnProperty("path")||(a.path=[]);var h=a.path;if(a.hasOwnProperty("end")||(a.end=1),a.hasOwnProperty("start")||(a.start=s&&s.hasOwnProperty("end")&&s.path===h?s.end:0),a.hasOwnProperty("_segments")&&a._length)return n;var l=h.length,c=10;if(!(l>=6&&(l-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";a._segments=[],a._length=0;for(var d=2;l>d;d+=4){for(var u,g,p=h[d-2],m=h[d-1],_=h[d+0],f=h[d+1],v=h[d+2],E=h[d+3],y=p,T=m,S=0,C=[],w=1;c>=w;w++){var b=w/c,A=1-b;u=A*A*p+2*A*b*_+b*b*v,g=A*A*m+2*A*b*f+b*b*E,S+=C[C.push(Math.sqrt((r=u-y)*r+(r=g-T)*r))-1],y=u,T=g}a._segments.push(S),a._segments.push(C),a._length+=S}r=a.orient,a.orient=!0;var L={};return e.calc(a,a.start,L),t.__rotPathS=Number(L.rotation.toFixed(5)),e.calc(a,a.end,L),t.__rotPathE=Number(L.rotation.toFixed(5)),a.orient=!1,e.calc(a,a.end,o),a.orient=r,a.orient?(t.__guideData=a,e.testRotData(t,o),n):n},e.testRotData=function(e,t){if(void 0===e.__rotGlobalS||void 0===e.__rotGlobalE){if(e.__needsRot)return;e.__rotGlobalS=e.__rotGlobalE=void 0!==e._curQueueProps.rotation?e._curQueueProps.rotation:t.rotation=e.target.rotation||0}if(void 0!==e.__guideData){var i=e.__guideData,s=e.__rotGlobalE-e.__rotGlobalS,n=e.__rotPathE-e.__rotPathS,o=s-n;if("auto"==i.orient)o>180?o-=360:-180>o&&(o+=360);else if("cw"==i.orient){for(;0>o;)o+=360;0==o&&s>0&&180!=s&&(o+=360)}else if("ccw"==i.orient){for(o=s-(n>180?360-n:n);o>0;)o-=360;0==o&&0>s&&-180!=s&&(o-=360)}i.rotDelta=o,i.rotOffS=e.__rotGlobalS-e.__rotPathS,e.__rotGlobalS=e.__rotGlobalE=e.__guideData=e.__needsRot=void 0}},e.tween=function(t,i,s,n,o,r,a){var h=o.guide;if(void 0==h||h===n.guide)return s;if(h.lastRatio!=r){var l=(h.end-h.start)*(a?h.end:r)+h.start;switch(e.calc(h,l,t.target),h.orient){case"cw":case"ccw":case"auto":t.target.rotation+=h.rotOffS+h.rotDelta*r;break;case"fixed":default:t.target.rotation+=h.rotOffS}h.lastRatio=r}return"rotation"!=i||h.orient&&"false"!=h.orient?t.target[i]:s},e.calc=function(t,i,s){void 0==t._segments&&e.validate(t),void 0==s&&(s={x:0,y:0,rotation:0});for(var n=t._segments,o=t.path,r=t._length*i,a=n.length-2,h=0;r>n[h]&&a>h;)r-=n[h],h+=2;var l=n[h+1],c=0;for(a=l.length-1;r>l[c]&&a>c;)r-=l[c],c++;var d=c/++a+r/(a*l[c]);h=2*h+2;var u=1-d;return s.x=u*u*o[h-2]+2*u*d*o[h+0]+d*d*o[h+2],s.y=u*u*o[h-1]+2*u*d*o[h+1]+d*d*o[h+3],t.orient&&(s.rotation=57.2957795*Math.atan2((o[h+1]-o[h-1])*u+(o[h+3]-o[h+1])*d,(o[h+0]-o[h-2])*u+(o[h+2]-o[h+0])*d)),s},createjs.MotionGuidePlugin=e}(),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.TweenJS=createjs.TweenJS||{};e.version="0.6.0",e.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),define("libs/createjs/tweenjs",["libs/createjs/easeljs"],function(e){return function(){var t;return t||e.createjs.Tween}}(this)),this.createjs=this.createjs||{},function(){"use strict";function e(t,i,s,n){this.Container_constructor(),this.mode=t||e.INDEPENDENT,this.startPosition=i||0,this.loop=s,this.currentFrame=0,this.timeline=new createjs.Timeline(null,n,{paused:!0,position:i,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function t(){throw"MovieClipPlugin cannot be instantiated."}var i=createjs.extend(e,createjs.Container);e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",i.getLabels=function(){return this.timeline.getLabels()},i.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()};try{Object.defineProperties(i,{labels:{get:i.getLabels},currentLabel:{get:i.getCurrentLabel}})}catch(s){}i.initialize=e,i.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},i.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this._updateTimeline(),this.Container_draw(e,t),!0)},i.play=function(){this.paused=!1},i.stop=function(){this.paused=!0},i.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},i.gotoAndStop=function(e){this.paused=!0,this._goto(e)},i.advance=function(t){var i=e.INDEPENDENT;if(this.mode==i){for(var s=this,n=s.framerate;(s=s.parent)&&null==n;)s.mode==i&&(n=s._framerate);this._framerate=n;var o=null!=n&&-1!=n&&null!=t?t/(1e3/n)+this._t:1,r=0|o;for(this._t=o-r;!this.paused&&r--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},i.clone=function(){throw"MovieClip cannot be cloned."},i.toString=function(){return"[MovieClip (name="+this.name+")]"},i._tick=function(e){this.advance(e&&e.delta),this.Container__tick(e)},i._goto=function(e){var t=this.timeline.resolve(e);null!=t&&(-1==this._prevPos&&(this._prevPos=0/0),this._prevPosition=t,this._t=0,this._updateTimeline())},i._reset=function(){this._prevPos=-1,this._t=0,this.currentFrame=0},i._updateTimeline=function(){var t=this.timeline,i=this.mode!=e.INDEPENDENT;if(t.loop=null==this.loop?!0:this.loop,i?t.setPosition(this.startPosition+(this.mode==e.SINGLE_FRAME?0:this._synchOffset),createjs.Tween.NONE):t.setPosition(this._prevPos<0?0:this._prevPosition,this.actionsEnabled?null:createjs.Tween.NONE),this._prevPosition=t._prevPosition,this._prevPos!=t._prevPos){this.currentFrame=this._prevPos=t._prevPos;for(var s in this._managed)this._managed[s]=1;for(var n=t._tweens,o=0,r=n.length;r>o;o++){var a=n[o],h=a._target;if(h!=this&&!a.passive){var l=a._stepPosition;h instanceof createjs.DisplayObject?this._addManagedChild(h,l):this._setState(h.state,l)}}var c=this.children;for(o=c.length-1;o>=0;o--){var d=c[o].id;1==this._managed[d]&&(this.removeChildAt(o),delete this._managed[d])}}},i._setState=function(e,t){if(e)for(var i=e.length-1;i>=0;i--){var s=e[i],n=s.t,o=s.p;for(var r in o)n[r]=o[r];this._addManagedChild(n,t)}},i._addManagedChild=function(t,i){t._off||(this.addChildAt(t,0),t instanceof e&&(t._synchOffset=i,t.mode==e.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)},i._getBounds=function(e,t){var i=this.DisplayObject_getBounds();return i||(this._updateTimeline(),this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame]))),i?this._transformBounds(i,e,t):this.Container__getBounds(e,t)},createjs.MovieClip=createjs.promote(e,"Container"),t.priority=100,t.install=function(){createjs.Tween.installPlugin(t,["startPosition"])},t.init=function(e,t,i){return i},t.step=function(){},t.tween=function(t,i,s,n,o,r){return t.target instanceof e?1==r?o[i]:n[i]:s},t.install()}(),this.createjs=this.createjs||{},function(){"use strict";var e=createjs.MovieClip=createjs.MovieClip||{};e.version="0.8.0",e.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),define("libs/createjs/movieclip",["libs/createjs/easeljs","libs/createjs/tweenjs"],function(){}),this.createjs=this.createjs||{},function(){var e=createjs.SoundJS=createjs.SoundJS||{};e.version="0.6.0",e.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(e,t){"use strict";function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(e,t){"use strict";var i=e.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(s){i[(t+="_")+"constructor"]=s.constructor;for(var n in s)i.hasOwnProperty(n)&&"function"==typeof s[n]&&(i[t+n]=s[n])}return e},this.createjs=this.createjs||{},createjs.indexOf=function(e,t){"use strict";for(var i=0,s=e.length;s>i;i++)if(t===e[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(e,t){var i=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";var e=Object.defineProperty?!0:!1,t={};try{Object.defineProperty(t,"bar",{get:function(){return this._bar},set:function(e){this._bar=e}})}catch(i){e=!1}createjs.definePropertySupported=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"BrowserDetect cannot be instantiated"}var t=e.agent=window.navigator.userAgent;e.isWindowPhone=t.indexOf("IEMobile")>-1||t.indexOf("Windows Phone")>-1,e.isFirefox=t.indexOf("Firefox")>-1,e.isOpera=null!=window.opera,e.isChrome=t.indexOf("Chrome")>-1,e.isIOS=(t.indexOf("iPod")>-1||t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&!e.isWindowPhone,e.isAndroid=t.indexOf("Android")>-1&&!e.isWindowPhone,e.isBlackberry=t.indexOf("Blackberry")>-1,createjs.BrowserDetect=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this._listeners=null,this._captureListeners=null}var t=e.prototype;e.initialize=function(e){e.addEventListener=t.addEventListener,e.on=t.on,e.removeEventListener=e.off=t.removeEventListener,e.removeAllEventListeners=t.removeAllEventListeners,e.hasEventListener=t.hasEventListener,e.dispatchEvent=t.dispatchEvent,e._dispatchEvent=t._dispatchEvent,e.willTrigger=t.willTrigger},t.addEventListener=function(e,t,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=s[e];return n&&this.removeEventListener(e,t,i),n=s[e],n?n.push(t):s[e]=[t],t},t.on=function(e,t,i,s,n,o){return t.handleEvent&&(i=i||t,t=t.handleEvent),i=i||this,this.addEventListener(e,function(e){t.call(i,e,n),s&&e.remove()},o)},t.removeEventListener=function(e,t,i){var s=i?this._captureListeners:this._listeners;if(s){var n=s[e];if(n)for(var o=0,r=n.length;r>o;o++)if(n[o]==t){1==r?delete s[e]:n.splice(o,1);break}}},t.off=t.removeEventListener,t.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},t.dispatchEvent=function(e){if("string"==typeof e){var t=this._listeners;if(!t||!t[e])return!1;e=new createjs.Event(e)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(i){}if(e.bubbles&&this.parent){for(var s=this,n=[s];s.parent;)n.push(s=s.parent);var o,r=n.length;for(o=r-1;o>=0&&!e.propagationStopped;o--)n[o]._dispatchEvent(e,1+(0==o));for(o=1;r>o&&!e.propagationStopped;o++)n[o]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},t.hasEventListener=function(e){var t=this._listeners,i=this._captureListeners;return!!(t&&t[e]||i&&i[e])},t.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},t.toString=function(){return"[EventDispatcher]"},t._dispatchEvent=function(e,t){var i,s=1==t?this._captureListeners:this._listeners;if(e&&s){var n=s[e.type];if(!n||!(i=n.length))return;try{e.currentTarget=this}catch(o){}try{e.eventPhase=t}catch(o){}e.removed=!1,n=n.slice();for(var r=0;i>r&&!e.immediatePropagationStopped;r++){var a=n[r];a.handleEvent?a.handleEvent(e):a(e),e.removed&&(this.off(e.type,a,1==t),e.removed=!1)}}},createjs.EventDispatcher=e}(),this.createjs=this.createjs||{},function(){"use strict";
function e(e,t,i){this.type=e,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!t,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var t=e.prototype;t.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},t.stopPropagation=function(){this.propagationStopped=!0},t.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},t.remove=function(){this.removed=!0},t.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},t.set=function(e){for(var t in e)this[t]=e[t];return this},t.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.Event_constructor("error"),this.title=e,this.message=t,this.data=i}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(e,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.Event_constructor("progress"),this.loaded=e,this.total=null==t?1:t,this.progress=0==t?0:this.loaded/this.total}var t=createjs.extend(e,createjs.Event);t.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function e(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin="Anonymous",this.loadTimeout=8e3}var t=e.prototype={},i=e;i.create=function(t){if("string"==typeof t){var s=new e;return s.src=t,s}if(t instanceof i)return t;if(t instanceof Object)return t;throw new Error("Type not recognized.")},t.set=function(e){for(var t in e)this[t]=e[t];return this},createjs.LoadItem=i}(),function(){var e={};e.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,e.RELATIVE_PATT=/^[.\/]*?\//i,e.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,e.parseURI=function(t){var i={absolute:!1,relative:!1};if(null==t)return i;var s=t.indexOf("?");s>-1&&(t=t.substr(0,s));var n;return e.ABSOLUTE_PATT.test(t)?i.absolute=!0:e.RELATIVE_PATT.test(t)&&(i.relative=!0),(n=t.match(e.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},e.formatQueryString=function(e,t){if(null==e)throw new Error("You must specify data.");var i=[];for(var s in e)i.push(s+"="+escape(e[s]));return t&&(i=i.concat(t)),i.join("&")},e.buildPath=function(e,t){if(null==t)return e;var i=[],s=e.indexOf("?");if(-1!=s){var n=e.slice(s+1);i=i.concat(n.split("&"))}return-1!=s?e.slice(0,s)+"?"+this._formatQueryString(t,i):e+"?"+this._formatQueryString(t,i)},e.isCrossDomain=function(e){var t=document.createElement("a");t.href=e.src;var i=document.createElement("a");i.href=location.href;var s=""!=t.hostname&&(t.port!=i.port||t.protocol!=i.protocol||t.hostname!=i.hostname);return s},e.isLocal=function(e){var t=document.createElement("a");return t.href=e.src,""==t.hostname&&"file:"==t.protocol},e.isBinary=function(e){switch(e){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},e.isImageTag=function(e){return e instanceof HTMLImageElement},e.isAudioTag=function(e){return window.HTMLAudioElement?e instanceof HTMLAudioElement:!1},e.isVideoTag=function(e){return window.HTMLVideoElement?e instanceof HTMLVideoElement:void 0},e.isText=function(e){switch(e){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},e.getTypeByExtension=function(e){if(null==e)return createjs.AbstractLoader.TEXT;switch(e.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=e?createjs.LoadItem.create(e):null,this._preferXHR=t,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var t=createjs.extend(e,createjs.EventDispatcher),i=e;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",t.getItem=function(){return this._item},t.getResult=function(e){return e?this._rawResult:this._result},t.getTag=function(){return this._tag},t.setTag=function(e){this._tag=e},t.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var e=new createjs.Event("initialize");e.loader=this._request,this.dispatchEvent(e),this._request.load()},t.cancel=function(){this.canceled=!0,this.destroy()},t.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},t.getLoadedItems=function(){return this._loadedItems},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._createTag=function(){return null},t._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},t._sendProgress=function(e){if(!this._isCanceled()){var t=null;"number"==typeof e?(this.progress=e,t=new createjs.ProgressEvent(this.progress)):(t=e,this.progress=e.loaded/e.total,t.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(t)}},t._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var e=new createjs.Event("complete");e.rawResult=this._rawResult,null!=this._result&&(e.result=this._result),this.dispatchEvent(e)}},t._sendError=function(e){!this._isCanceled()&&this.hasEventListener("error")&&(null==e&&(e=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(e))},t._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},t.resultFormatter=null,t.handleEvent=function(e){switch(e.type){case"complete":this._rawResult=e.target._response;var t=this.resultFormatter&&this.resultFormatter(this),i=this;t instanceof Function?t(function(e){i._result=e,i._sendComplete()}):(this._result=t||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(e);break;case"error":this._sendError(e);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(e.type)}},t.buildPath=function(e,t){return createjs.RequestUtils.buildPath(e,t)},t.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.AbstractLoader_constructor(e,t,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var t=createjs.extend(e,createjs.AbstractLoader);t.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},t._createTag=function(){},t._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},t._formatResult=function(e){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(e.getTag().src=e.getResult(!0)),e.getTag()},createjs.AbstractMediaLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e){this._item=e},t=createjs.extend(e,createjs.EventDispatcher);t.load=function(){},t.destroy=function(){},t.cancel=function(){},createjs.AbstractRequest=createjs.promote(e,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var t=createjs.extend(e,createjs.AbstractRequest);t.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var e=new createjs.Event("initialize");e.loader=this._tag,this.dispatchEvent(e),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},t.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},t._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},t._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},t._showTag=function(){this._tag.style.visibility=this._startTagVisibility},t._handleStalled=function(){},createjs.TagRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i){this.AbstractRequest_constructor(e),this._tag=t,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var t=createjs.extend(e,createjs.TagRequest);t.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},t._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var e=this._tag;("loaded"==e.readyState||"complete"==e.readyState)&&this._handleTagComplete()},t._handleStalled=function(){},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(e,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractRequest_constructor(e),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(e)}var t=createjs.extend(e,createjs.AbstractRequest);e.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],t.getResult=function(e){return e&&this._rawResponse?this._rawResponse:this._response},t.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},t.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(e){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,e))}},t.setResponseType=function(e){this._request.responseType=e},t.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},t.getResponseHeader=function(e){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(e):null},t._handleProgress=function(e){if(e&&!(e.loaded>0&&0==e.total)){var t=new createjs.ProgressEvent(e.loaded,e.total);this.dispatchEvent(t)}},t._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},t._handleAbort=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,e))},t._handleError=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(e.message))},t._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},t._handleLoad=function(){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},t._handleTimeout=function(e){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,e))},t._checkError=function(){var e=parseInt(this._request.status);switch(e){case 404:case 0:return new Error(e)}return null},t._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(e){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(e){}return null},t._createXHR=function(e){var t=createjs.RequestUtils.isCrossDomain(e),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,t&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var o=0,r=s.ACTIVEX_VERSIONS.length;r>o;o++){s.ACTIVEX_VERSIONS[o];try{n=new ActiveXObject(axVersions);break}catch(a){}}if(null==n)return!1}e.mimeType&&n.overrideMimeType&&n.overrideMimeType(e.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var h=null;if(h=e.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(e.src,e.values):e.src,n.open(e.method||createjs.AbstractLoader.GET,h,!0),t&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),e.values&&e.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),t||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),e.headers)for(var l in e.headers)i[l]=e.headers[l];for(l in i)n.setRequestHeader(l,i[l]);return n instanceof XMLHttpRequest&&void 0!==e.withCredentials&&(n.withCredentials=e.withCredentials),this._request=n,!0},t._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},t.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(e,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t){this.AbstractMediaLoader_constructor(e,t,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(e)?this._tag=e:createjs.RequestUtils.isAudioTag(e.src)?this._tag=e:createjs.RequestUtils.isAudioTag(e.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(e)?e:e.src),null!=this._tag&&(this._preferXHR=!1)}var t=createjs.extend(e,createjs.AbstractMediaLoader),i=e;i.canLoadItem=function(e){return e.type==createjs.AbstractLoader.SOUND},t._createTag=function(e){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t.src=e,t},createjs.SoundLoader=createjs.promote(e,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){throw"Sound cannot be instantiated"}function t(e,t){this.init(e,t)}var i=e;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._pluginsRegistered=!1,i._lastID=0,i._masterVolume=1,i._masterMute=!1,i._instances=[],i._idHash={},i._preloadHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(e){var t=e.target.getItem().src;if(i._preloadHash[t])for(var s=0,n=i._preloadHash[t].length;n>s;s++){var o=i._preloadHash[t][s];if(i._preloadHash[t][s]=!0,i.hasEventListener("fileload")){var e=new createjs.Event("fileload");e.src=o.src,e.id=o.id,e.data=o.data,e.sprite=o.sprite,i.dispatchEvent(e)}}},i._handleLoadError=function(e){var t=e.target.getItem().src;if(i._preloadHash[t])for(var s=0,n=i._preloadHash[t].length;n>s;s++){var o=i._preloadHash[t][s];if(i._preloadHash[t][s]=!1,i.hasEventListener("fileerror")){var e=new createjs.Event("fileerror");e.src=o.src,e.id=o.id,e.data=o.data,e.sprite=o.sprite,i.dispatchEvent(e)}}},i._registerPlugin=function(e){return e.isSupported()?(i.activePlugin=new e,!0):!1},i.registerPlugins=function(e){i._pluginsRegistered=!0;for(var t=0,s=e.length;s>t;t++)if(i._registerPlugin(e[t]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin?!0:i._pluginsRegistered?!1:i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(e){return null==i.activePlugin?null:i.activePlugin._capabilities[e]},i.initLoad=function(e){return i._registerSound(e)},i._registerSound=function(e){if(!i.initializeDefaultPlugins())return!1;var s=i._parsePath(e.src);if(null==s)return!1;e.src=s.src,e.type="sound";var n=e.data,o=i.activePlugin.defaultNumChannels||null;if(null!=n&&(isNaN(n.channels)?isNaN(n)||(o=parseInt(n)):o=parseInt(n.channels),n.audioSprite))for(var r,a=n.audioSprite.length;a--;)r=n.audioSprite[a],i._idHash[r.id]={src:e.src,startTime:parseInt(r.startTime),duration:parseInt(r.duration)};null!=e.id&&(i._idHash[e.id]={src:e.src});var h=i.activePlugin.register(e,o);return t.create(e.src,o),null!=n&&isNaN(n)?e.data.channels=o||t.maxPerChannel():e.data=o||t.maxPerChannel(),h.type&&(e.type=h.type),h},i.registerSound=function(e,t,s,n){var o={src:e,id:t,data:s};e instanceof Object&&(n=t,o=e),o=createjs.LoadItem.create(o),null!=n&&(o.src=n+e);var r=i._registerSound(o);if(!r)return!1;if(i._preloadHash[o.src]||(i._preloadHash[o.src]=[]),i._preloadHash[o.src].push(o),1==i._preloadHash[o.src].length)r.on("complete",createjs.proxy(this._handleLoadComplete,this)),r.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(r);else if(1==i._preloadHash[o.src][0])return!0;return o},i.registerSounds=function(e,t){var i=[];e.path&&(t?t+=e.path:t=e.path);for(var s=0,n=e.length;n>s;s++)i[s]=createjs.Sound.registerSound(e[s].src,e[s].id,e[s].data,t);return i},i.registerManifest=function(e,t){try{console.log("createjs.Sound.registerManifest is deprecated, please use createjs.Sound.registerSounds.")}catch(i){}return this.registerSounds(e,t)},i.removeSound=function(e,s){if(null==i.activePlugin)return!1;e instanceof Object&&(e=e.src),e=i._getSrcById(e).src,null!=s&&(e=s+e);var n=i._parsePath(e);if(null==n)return!1;e=n.src;for(var o in i._idHash)i._idHash[o].src==e&&delete i._idHash[o];return t.removeSrc(e),delete i._preloadHash[e],i.activePlugin.removeSound(e),!0},i.removeSounds=function(e,t){var i=[];e.path&&(t?t+=e.path:t=e.path);for(var s=0,n=e.length;n>s;s++)i[s]=createjs.Sound.removeSound(e[s].src,t);return i},i.removeManifest=function(e,t){try{console.log("createjs.Sound.removeManifest is deprecated, please use createjs.Sound.removeSounds.")}catch(s){}return i.removeSounds(e,t)},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},t.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(e){if(!i.isReady())return!1;var t=i._parsePath(e);return e=t?i._getSrcById(t.src).src:i._getSrcById(e).src,1==i._preloadHash[e][0]},i._parsePath=function(e){"string"!=typeof e&&(e=e.toString());var t=e.match(i.FILE_PATTERN);if(null==t)return!1;for(var s=t[4],n=t[5],o=i.getCapabilities(),r=0;!o[n];)if(n=i.alternateExtensions[r++],r>i.alternateExtensions.length)return null;e=e.replace("."+t[5],"."+n);var a={name:s,src:e,extension:n};return a},i.play=function(e,t,s,n,o,r,a,h,l){t instanceof Object&&(s=t.delay,n=t.offset,o=t.loop,r=t.volume,a=t.pan,h=t.startTime,l=t.duration,t=t.interrupt);var c=i.createInstance(e,h,l),d=i._playInstance(c,t,s,n,o,r,a);return d||c._playFailed(),c},i.createInstance=function(e,s,n){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(e,s,n);e=i._getSrcById(e);var o=i._parsePath(e.src),r=null;return null!=o&&null!=o.src?(t.create(o.src),null==s&&(s=e.startTime),r=i.activePlugin.create(o.src,s,n||e.duration)):r=new createjs.DefaultSoundInstance(e,s,n),r.uniqueId=i._lastID++,r},i.setVolume=function(e){if(null==Number(e))return!1;if(e=Math.max(0,Math.min(1,e)),i._masterVolume=e,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(e))for(var t=this._instances,s=0,n=t.length;n>s;s++)t[s].setMasterVolume(e)},i.getVolume=function(){return i._masterVolume},i.setMute=function(e){if(null==e)return!1;if(this._masterMute=e,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(e))for(var t=this._instances,i=0,s=t.length;s>i;i++)t[i].setMasterMute(e);return!0},i.getMute=function(){return this._masterMute},i.stop=function(){for(var e=this._instances,t=e.length;t--;)e[t].stop()},i._playInstance=function(e,t,s,n,o,r,a){if(t instanceof Object&&(s=t.delay,n=t.offset,o=t.loop,r=t.volume,a=t.pan,t=t.interrupt),t=t||i.defaultInterruptBehavior,null==s&&(s=0),null==n&&(n=e.getPosition()),null==o&&(o=e.loop),null==r&&(r=e.volume),null==a&&(a=e.pan),0==s){var h=i._beginPlaying(e,t,n,o,r,a);if(!h)return!1}else{var l=setTimeout(function(){i._beginPlaying(e,t,n,o,r,a)},s);e.delayTimeoutId=l}return this._instances.push(e),!0},i._beginPlaying=function(e,i,s,n,o,r){if(!t.add(e,i))return!1;var a=e._beginPlaying(s,n,o,r);if(!a){var h=createjs.indexOf(this._instances,e);return h>-1&&this._instances.splice(h,1),!1}return!0},i._getSrcById=function(e){return i._idHash[e]||{src:e}},i._playFinished=function(e){t.remove(e);var i=createjs.indexOf(this._instances,e);i>-1&&this._instances.splice(i,1)},createjs.Sound=e,t.channels={},t.create=function(e,i){var s=t.get(e);return null==s?(t.channels[e]=new t(e,i),!0):!1},t.removeSrc=function(e){var i=t.get(e);return null==i?!1:(i._removeAll(),delete t.channels[e],!0)},t.removeAll=function(){for(var e in t.channels)t.channels[e]._removeAll();t.channels={}},t.add=function(e,i){var s=t.get(e.src);return null==s?!1:s._add(e,i)},t.remove=function(e){var i=t.get(e.src);return null==i?!1:(i._remove(e),!0)},t.maxPerChannel=function(){return s.maxDefault},t.get=function(e){return t.channels[e]};var s=t.prototype;s.constructor=t,s.src=null,s.max=null,s.maxDefault=100,s.length=0,s.init=function(e,t){this.src=e,this.max=t||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},s._get=function(e){return this._instances[e]},s._add=function(e,t){return this._getSlot(t,e)?(this._instances.push(e),this.length++,!0):!1},s._remove=function(e){var t=createjs.indexOf(this._instances,e);return-1==t?!1:(this._instances.splice(t,1),this.length--,!0)},s._removeAll=function(){for(var e=this.length-1;e>=0;e--)this._instances[e].stop()},s._getSlot=function(t){var i,s;if(t!=e.INTERRUPT_NONE&&(s=this._get(0),null==s))return!0;for(var n=0,o=this.max;o>n;n++){if(i=this._get(n),null==i)return!0;if(i.playState==e.PLAY_FINISHED||i.playState==e.PLAY_INTERRUPTED||i.playState==e.PLAY_FAILED){s=i;break}t!=e.INTERRUPT_NONE&&(t==e.INTERRUPT_EARLY&&i.getPosition()<s.getPosition()||t==e.INTERRUPT_LATE&&i.getPosition()>s.getPosition())&&(s=i)}return null!=s?(s._interrupt(),this._remove(s),!0):!1},s.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(e,t,i,s){this.EventDispatcher_constructor(),this.src=e,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._startTime=Math.max(0,t||0),this._volume=1,createjs.definePropertySupported&&Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,createjs.definePropertySupported&&Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._duration=Math.max(0,i||0),createjs.definePropertySupported&&Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,createjs.definePropertySupported&&Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),s!==!1&&s!==!0&&this.setPlaybackResource(s),this._position=0,createjs.definePropertySupported&&Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,createjs.definePropertySupported&&Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,createjs.definePropertySupported&&Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,createjs.definePropertySupported&&Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},t=createjs.extend(e,createjs.EventDispatcher);t.play=function(e,t,i,s,n,o){return this.playState==createjs.Sound.PLAY_SUCCEEDED?(e instanceof Object&&(i=e.offset,s=e.loop,n=e.volume,o=e.pan),null!=i&&this.setPosition(i),null!=s&&this.setLoop(s),null!=n&&this.setVolume(n),null!=o&&this.setPan(o),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,e,t,i,s,n,o),this)},t.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this.setPaused(!0),!0)},t.resume=function(){return this._paused?(this.setPaused(!1),!0):!1},t.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},t.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},t.toString=function(){return"[AbstractSoundInstance]"},t.getPaused=function(){return this._paused},t.setPaused=function(e){return e!==!0&&e!==!1||this._paused==e||1==e&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=e,e?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},t.setVolume=function(e){return e==this._volume?this:(this._volume=Math.max(0,Math.min(1,e)),this._muted||this._updateVolume(),this)},t.getVolume=function(){return this._volume},t.setMute=function(e){this.setMuted(e)},t.getMute=function(){return this._muted},t.setMuted=function(e){return e===!0||e===!1?(this._muted=e,this._updateVolume(),this):void 0},t.getMuted=function(){return this._muted},t.setPan=function(e){return e==this._pan?this:(this._pan=Math.max(-1,Math.min(1,e)),this._updatePan(),this)},t.getPan=function(){return this._pan},t.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?this._position:this._calculateCurrentPosition()},t.setPosition=function(e){return this._position=Math.max(0,e),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},t.getDuration=function(){return this._duration},t.setDuration=function(e){return e==this._duration?this:(this._duration=Math.max(0,e||0),this._updateDuration(),this)},t.setPlaybackResource=function(e){return this._playbackResource=e,0==this._duration&&this._setDurationFromSource(),this},t.getPlaybackResource=function(){return this._playbackResource},t.getLoop=function(){return this._loop},t.setLoop=function(e){null!=this._playbackResource&&(0!=this._loop&&0==e&&this._removeLooping(e),0==this._loop&&0!=e&&this._addLooping(e)),this._loop=e},t._sendEvent=function(e){var t=new createjs.Event(e);this.dispatchEvent(t)},t._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},t._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},t._beginPlaying=function(e,t,i,s){return this.setPosition(e),this.setLoop(t),this.setVolume(i),this.setPan(s),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},t._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},t._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},t._handleSoundReady=function(){},t._updateVolume=function(){},t._updatePan=function(){},t._updateDuration=function(){},t._setDurationFromSource=function(){},t._calculateCurrentPosition=function(){},t._updatePosition=function(){},t._removeLooping=function(){},t._addLooping=function(){},t._pause=function(){},t._resume=function(){},t._handleStop=function(){},t._handleCleanUp=function(){},t._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(e,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance
}(),this.createjs=this.createjs||{},function(){"use strict";var e=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._loaderClass,this._soundInstanceClass},t=e.prototype;e._capabilities=null,e.isSupported=function(){return!0},t.register=function(e){if(this._audioSources[e.src]=!0,this._soundInstances[e.src]=[],this._loaders[e.src])return this._loaders[e.src];var t=new this._loaderClass(e);return t.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[e.src]=t,t},t.preload=function(e){e.on("error",createjs.proxy(this._handlePreloadError,this)),e.load()},t.isPreloadStarted=function(e){return null!=this._audioSources[e]},t.isPreloadComplete=function(e){return!(null==this._audioSources[e]||1==this._audioSources[e])},t.removeSound=function(e){if(this._soundInstances[e]){for(var t=this._soundInstances[e].length;t--;){var i=this._soundInstances[e][t];i.destroy()}delete this._soundInstances[e],delete this._audioSources[e],this._loaders[e]&&this._loaders[e].destroy(),delete this._loaders[e]}},t.removeAllSounds=function(){for(var e in this._audioSources)this.removeSound(e)},t.create=function(e,t,i){this.isPreloadStarted(e)||this.preload(this.register(e));var s=new this._soundInstanceClass(e,t,i,this._audioSources[e]);return this._soundInstances[e].push(s),s},t.setVolume=function(e){return this._volume=e,this._updateVolume(),!0},t.getVolume=function(){return this._volume},t.setMute=function(){return this._updateVolume(),!0},t.toString=function(){return"[AbstractPlugin]"},t._handlePreloadComplete=function(e){var t=e.target.getItem().src;this._audioSources[t]=e.result;for(var i=0,s=this._soundInstances[t].length;s>i;i++){var n=this._soundInstances[t][i];n.setPlaybackResource(this._audioSources[t])}},t._handlePreloadError=function(){},t._updateVolume=function(){},createjs.AbstractPlugin=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.AbstractLoader_constructor(e,!0,createjs.AbstractLoader.SOUND)}var t=createjs.extend(e,createjs.AbstractLoader);e.context=null,t.toString=function(){return"[WebAudioLoader]"},t._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},t._sendComplete=function(){e.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._handleError,this))},t._handleAudioDecoded=function(e){this._result=e,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(e,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,s,n){this.AbstractSoundInstance_constructor(e,t,s,n),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var t=createjs.extend(e,createjs.AbstractSoundInstance),i=e;i.context=null,i.destinationNode=null,i._panningModel="equalpower",t.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},t.toString=function(){return"[WebAudioSoundInstance]"},t._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},t._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},t._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},t._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},t._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},t._cleanUpAudioNode=function(e){return e&&(e.stop(0),e.disconnect(0),e=null),e},t._handleSoundReady=function(){this.gainNode.connect(i.destinationNode);var e=.001*this._duration,t=.001*this._position;this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-e,t),this._playbackStartTime=this.sourceNode.startTime-t,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-t)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},t._createAndPlayAudioNode=function(e,t){var s=i.context.createBufferSource();s.buffer=this.playbackResource,s.connect(this.panNode);var n=.001*this._duration;return s.startTime=e+n,s.start(s.startTime,t+.001*this._startTime,n-t),s},t._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},t._resume=function(){this._handleSoundReady()},t._updateVolume=function(){var e=this._muted?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},t._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},t._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},t._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},t._updateDuration=function(){this._pause(),this._resume()},createjs.WebAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this._volume=1,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var t=createjs.extend(e,createjs.AbstractPlugin),i=e;i._capabilities=null,i._panningModel="equalpower",i.context=null,i.isSupported=function(){var e=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||e||this._isFileXHRSupported()?(i._generateCapabilities(),null==i.context?!1:!0):!1},i.playEmptySound=function(){var e=i.context.createBufferSource();e.buffer=i.context.createBuffer(1,1,22050),e.connect(i.context.destination),e.start(0,0,0)},i._isFileXHRSupported=function(){var e=!0,t=new XMLHttpRequest;try{t.open("GET","WebAudioPluginTest.fail",!1)}catch(i){return e=!1}t.onerror=function(){e=!1},t.onload=function(){e=404==this.status||200==this.status||0==this.status&&""!=this.response};try{t.send()}catch(i){e=!1}return e},i._generateCapabilities=function(){if(null==i._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;if(null==i.context)if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}i._compatibilitySetUp(),i.playEmptySound(),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var t=createjs.Sound.SUPPORTED_EXTENSIONS,s=createjs.Sound.EXTENSION_MAP,n=0,o=t.length;o>n;n++){var r=t[n],a=s[r]||r;i._capabilities[r]="no"!=e.canPlayType("audio/"+r)&&""!=e.canPlayType("audio/"+r)||"no"!=e.canPlayType("audio/"+a)&&""!=e.canPlayType("audio/"+a)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var e=i.context.createBufferSource();e.__proto__.start=e.__proto__.noteGrainOn,e.__proto__.stop=e.__proto__.noteOff,i._panningModel=0}},t.toString=function(){return"[WebAudioPlugin]"},t._addPropsToClasses=function(){var e=this._soundInstanceClass;e.context=this.context,e.destinationNode=this.gainNode,e._panningModel=this._panningModel,this._loaderClass.context=this.context},t._updateVolume=function(){var e=createjs.Sound._masterMute?0:this._volume;e!=this.gainNode.gain.value&&(this.gainNode.gain.value=e)},createjs.WebAudioPlugin=createjs.promote(e,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function e(e){this.src=e,this.length=0,this.available=0,this.tags=[],this.duration=0}var t=e.prototype;t.constructor=e;var i=e;i.tags={},i.get=function(t){var s=i.tags[t];return null==s&&(s=i.tags[t]=new e(t)),s},i.remove=function(e){var t=i.tags[e];return null==t?!1:(t.removeAll(),delete i.tags[e],!0)},i.getInstance=function(e){var t=i.tags[e];return null==t?null:t.get()},i.setInstance=function(e,t){var s=i.tags[e];return null==s?null:s.set(t)},i.getDuration=function(e){var t=i.tags[e];return null==t?0:t.getDuration()},t.add=function(e){this.tags.push(e),this.length++,this.available++},t.removeAll=function(){for(var e;this.length--;)e=this.tags[this.length],e.parentNode&&e.parentNode.removeChild(e),delete this.tags[this.length];this.src=null,this.tags.length=0},t.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var e=this.tags.pop();return null==e.parentNode&&document.body.appendChild(e),e},t.set=function(e){var t=createjs.indexOf(this.tags,e);-1==t&&this.tags.push(e),this.available=this.tags.length},t.getDuration=function(){return this.duration||(this.duration=1e3*this.tags[this.tags.length-1].duration),this.duration},t.toString=function(){return"[HTMLAudioTagPool]"},createjs.HTMLAudioTagPool=e}(),this.createjs=this.createjs||{},function(){"use strict";function e(e,t,i,s){this.AbstractSoundInstance_constructor(e,t,i,s),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this.playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(t+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var t=createjs.extend(e,createjs.AbstractSoundInstance);t.setMasterVolume=function(){this._updateVolume()},t.setMasterMute=function(){this._updateVolume()},t.toString=function(){return"[HTMLAudioSoundInstance]"},t._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},t._handleCleanUp=function(){var e=this._playbackResource;if(null!=e){e.pause(),e.loop=!1,e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),e.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{e.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.setInstance(this.src,e),this._playbackResource=null}},t._beginPlaying=function(e,t,i,s){return this._playbackResource=createjs.HTMLAudioTagPool.getInstance(this.src),this.AbstractSoundInstance__beginPlaying(e,t,i,s)},t._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},t._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},t._pause=function(){this._playbackResource.pause()},t._resume=function(){this._playbackResource.play()},t._updateVolume=function(){if(null!=this._playbackResource){var e=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;e!=this._playbackResource.volume&&(this._playbackResource.volume=e)}},t._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},t._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(e){this._handleSetPositionSeek(null)}},t._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},t._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},t._updateDuration=function(){this._audioSpriteStopTime=.001*(startTime+duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(e,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function e(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var t=createjs.extend(e,createjs.AbstractPlugin),i=e;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.enableIOS=!1,i.isSupported=function(){return i._generateCapabilities(),null==i._capabilities?!1:!0},i._generateCapabilities=function(){if(null==i._capabilities){var e=document.createElement("audio");if(null==e.canPlayType)return null;i._capabilities={panning:!0,volume:!0,tracks:-1};for(var t=createjs.Sound.SUPPORTED_EXTENSIONS,s=createjs.Sound.EXTENSION_MAP,n=0,o=t.length;o>n;n++){var r=t[n],a=s[r]||r;i._capabilities[r]="no"!=e.canPlayType("audio/"+r)&&""!=e.canPlayType("audio/"+r)||"no"!=e.canPlayType("audio/"+a)&&""!=e.canPlayType("audio/"+a)}}},t.register=function(e,t){for(var i=createjs.HTMLAudioTagPool.get(e.src),s=null,n=0;t>n;n++)s=this._createTag(e.src),i.add(s);var o=this.AbstractPlugin_register(e,t);return o.setTag(s),o},t.removeSound=function(e){this.AbstractPlugin_removeSound(e),createjs.HTMLAudioTagPool.remove(e)},t.create=function(e,t,i){var s=this.AbstractPlugin_create(e,t,i);return s.setPlaybackResource(null),s},t.toString=function(){return"[HTMLAudioPlugin]"},t.setVolume=t.getVolume=t.setMute=null,t._createTag=function(e){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t.src=e,t},createjs.HTMLAudioPlugin=createjs.promote(e,"AbstractPlugin")}(),define("libs/createjs/soundjs",function(){}),define("createjs",["libs/createjs/preloadjs","libs/createjs/movieclip","libs/createjs/easeljs","libs/createjs/soundjs"],function(){"use strict";return window.createjs}),define("util/multitype_preload_plugin",["underscore"],function(e){"use strict";var t=function(){};t.plugins=[],t.use=function(e){return t.plugins=e,t};var i=t;return i.getPreloadHandlers=function(){var t,s={types:[],extensions:[]};return e.each(this.plugins,function(i){t=i.getPreloadHandlers(),s.types=e.union(s.types,t.types),s.extensions=e.union(s.extensions,t.extensions)}),{callback:i.preloadHandler,types:s.types,extensions:s.extensions}},i.preloadHandler=function(i,s){var n=!0;return e.find(t.plugins,function(t){var o=t.getPreloadHandlers();return e.contains(o.types,i.type)||e.contains(o.extensions,i.ext)?(n=o.callback(i,s),n===!1||e.isObject(n)):void 0},this),n},t}),define("util/createjs",["underscore","createjs"],function(e,t){"use strict";var i=window.lib={},s=window.images={};return e.extend(t,{lib:i,images:s}),t}),define("util/createjs_preload_plugin",["underscore","util/createjs","createjs"],function(e,t,i){"use strict";var s=i.Bitmap.prototype.initialize;i.Bitmap.prototype.initialize=function(){s.apply(this,arguments),this.image instanceof i.Bitmap&&(this.sourceRect=this.image.sourceRect,this.image=this.image.image)};var n=function(){},o=n;return o.getPreloadHandlers=function(){return{callback:o.preloadHandler,types:["image"],extensions:["jpg","jpeg","png","gif"]}},o.preloadHandler=function(t){if(t.createjs){var s=new i.ImageLoader(t);return s.on("complete",e.bind(o.fileLoadHandler,o)),s}return!0},o.fileLoadHandler=function(i){var s=i.target,n=s.getItem();if(n.createjs){var o=n.createjs.ns;if(t.images[o]||(t.images[o]={}),n.createjs.spritesheet){var r,a,h=s.getResult();e.each(n.createjs.spritesheet,function(e){r=document.createElement("canvas"),r.width=e.width,r.height=e.height,a=r.getContext("2d"),a.drawImage(h,e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.images[o][e.id]=r})}else t.images[o][n.createjs.id]=s.getResult()}},n}),function(){var e=this,t=t||{};t.WEBGL_RENDERER=0,t.CANVAS_RENDERER=1,t.VERSION="v2.2.8",t.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},t.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},t._UID=0,"undefined"!=typeof Float32Array?(t.Float32Array=Float32Array,t.Uint16Array=Uint16Array,t.Uint32Array=Uint32Array,t.ArrayBuffer=ArrayBuffer):(t.Float32Array=Array,t.Uint16Array=Array),t.INTERACTION_FREQUENCY=30,t.AUTO_PREVENT_DEFAULT=!0,t.PI_2=2*Math.PI,t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,t.RETINA_PREFIX="@2x",t.dontSayHello=!1,t.defaultRenderOptions={view:null,transparent:!1,antialias:!1,preserveDrawingBuffer:!1,resolution:1,clearBeforeRender:!0,autoResize:!1},t.sayHello=function(e){if(!t.dontSayHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["%c %c %c Pixi.js "+t.VERSION+" - "+e+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,i)}else window.console&&console.log("Pixi.js "+t.VERSION+" - http://www.pixijs.com/");t.dontSayHello=!0}},t.Point=function(e,t){this.x=e||0,this.y=t||0},t.Point.prototype.clone=function(){return new t.Point(this.x,this.y)},t.Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},t.Point.prototype.constructor=t.Point,t.Rectangle=function(e,t,i,s){this.x=e||0,this.y=t||0,this.width=i||0,this.height=s||0},t.Rectangle.prototype.clone=function(){return new t.Rectangle(this.x,this.y,this.width,this.height)},t.Rectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(e>=i&&e<=i+this.width){var s=this.y;if(t>=s&&t<=s+this.height)return!0}return!1},t.Rectangle.prototype.constructor=t.Rectangle,t.EmptyRectangle=new t.Rectangle(0,0,0,0),t.Polygon=function(e){if(e instanceof Array||(e=Array.prototype.slice.call(arguments)),e[0]instanceof t.Point){for(var i=[],s=0,n=e.length;n>s;s++)i.push(e[s].x,e[s].y);e=i}this.closed=!0,this.points=e},t.Polygon.prototype.clone=function(){var e=this.points.slice();return new t.Polygon(e)},t.Polygon.prototype.contains=function(e,t){for(var i=!1,s=this.points.length/2,n=0,o=s-1;s>n;o=n++){var r=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],l=this.points[2*o+1],c=a>t!=l>t&&(h-r)*(t-a)/(l-a)+r>e;c&&(i=!i)}return i},t.Polygon.prototype.constructor=t.Polygon,t.Circle=function(e,t,i){this.x=e||0,this.y=t||0,this.radius=i||0},t.Circle.prototype.clone=function(){return new t.Circle(this.x,this.y,this.radius)},t.Circle.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.x-e,s=this.y-t,n=this.radius*this.radius;return i*=i,s*=s,n>=i+s},t.Circle.prototype.getBounds=function(){return new t.Rectangle(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.Circle.prototype.constructor=t.Circle,t.Ellipse=function(e,t,i,s){this.x=e||0,this.y=t||0,this.width=i||0,this.height=s||0},t.Ellipse.prototype.clone=function(){return new t.Ellipse(this.x,this.y,this.width,this.height)},t.Ellipse.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,s=(t-this.y)/this.height;return i*=i,s*=s,1>=i+s},t.Ellipse.prototype.getBounds=function(){return new t.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},t.Ellipse.prototype.constructor=t.Ellipse,t.RoundedRectangle=function(e,t,i,s,n){this.x=e||0,this.y=t||0,this.width=i||0,this.height=s||0,this.radius=n||20},t.RoundedRectangle.prototype.clone=function(){return new t.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},t.RoundedRectangle.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(e>=i&&e<=i+this.width){var s=this.y;if(t>=s&&t<=s+this.height)return!0}return!1},t.RoundedRectangle.prototype.constructor=t.RoundedRectangle,t.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},t.Matrix.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.Matrix.prototype.toArray=function(e){this.array||(this.array=new t.Float32Array(9));var i=this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.Matrix.prototype.apply=function(e,i){return i=i||new t.Point,i.x=this.a*e.x+this.c*e.y+this.tx,i.y=this.b*e.x+this.d*e.y+this.ty,i},t.Matrix.prototype.applyInverse=function(e,i){i=i||new t.Point;var s=1/(this.a*this.d+this.c*-this.b);return i.x=this.d*s*e.x+-this.c*s*e.y+(this.ty*this.c-this.tx*this.d)*s,i.y=this.a*s*e.y+-this.b*s*e.x+(-this.ty*this.a+this.tx*this.b)*s,i},t.Matrix.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},t.Matrix.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},t.Matrix.prototype.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),s=this.a,n=this.c,o=this.tx;return this.a=s*t-this.b*i,this.b=s*i+this.b*t,this.c=n*t-this.d*i,this.d=n*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this},t.Matrix.prototype.append=function(e){var t=this.a,i=this.b,s=this.c,n=this.d;return this.a=e.a*t+e.b*s,this.b=e.a*i+e.b*n,this.c=e.c*t+e.d*s,this.d=e.c*i+e.d*n,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*n+this.ty,this},t.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.identityMatrix=new t.Matrix,t.DisplayObject=function(){this.position=new t.Point,this.scale=new t.Point(1,1),this.pivot=new t.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new t.Matrix,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new t.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},t.DisplayObject.prototype.constructor=t.DisplayObject,Object.defineProperty(t.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(e){this._interactive=e,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(t.DisplayObject.prototype,"worldVisible",{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}}),Object.defineProperty(t.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(t.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(e){if(e){for(var t=[],i=0;i<e.length;i++)for(var s=e[i].passes,n=0;n<s.length;n++)t.push(s[n]);this._filterBlock={target:this,filterPasses:t}}this._filters=e}}),Object.defineProperty(t.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(e?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=e)}}),t.DisplayObject.prototype.updateTransform=function(){var e,i,s,n,o,r,a=this.parent.worldTransform,h=this.worldTransform;this.rotation%t.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,i=this._sr*this.scale.x,s=-this._sr*this.scale.y,n=this._cr*this.scale.y,o=this.position.x,r=this.position.y,(this.pivot.x||this.pivot.y)&&(o-=this.pivot.x*e+this.pivot.y*s,r-=this.pivot.x*i+this.pivot.y*n),h.a=e*a.a+i*a.c,h.b=e*a.b+i*a.d,h.c=s*a.a+n*a.c,h.d=s*a.b+n*a.d,h.tx=o*a.a+r*a.c+a.tx,h.ty=o*a.b+r*a.d+a.ty):(e=this.scale.x,n=this.scale.y,o=this.position.x-this.pivot.x*e,r=this.position.y-this.pivot.y*n,h.a=e*a.a,h.b=e*a.b,h.c=n*a.c,h.d=n*a.d,h.tx=o*a.a+r*a.c+a.tx,h.ty=o*a.b+r*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},t.DisplayObject.prototype.displayObjectUpdateTransform=t.DisplayObject.prototype.updateTransform,t.DisplayObject.prototype.getBounds=function(e){return e=e,t.EmptyRectangle},t.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(t.identityMatrix)},t.DisplayObject.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0)},t.DisplayObject.prototype.generateTexture=function(e,i,s){var n=this.getLocalBounds(),o=new t.RenderTexture(0|n.width,0|n.height,s,i,e);return t.DisplayObject._tempMatrix.tx=-n.x,t.DisplayObject._tempMatrix.ty=-n.y,o.render(this,t.DisplayObject._tempMatrix),o},t.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},t.DisplayObject.prototype.toGlobal=function(e){return this.displayObjectUpdateTransform(),this.worldTransform.apply(e)},t.DisplayObject.prototype.toLocal=function(e,t){return t&&(e=t.toGlobal(e)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(e)},t.DisplayObject.prototype._renderCachedSprite=function(e){this._cachedSprite.worldAlpha=this.worldAlpha,e.gl?t.Sprite.prototype._renderWebGL.call(this._cachedSprite,e):t.Sprite.prototype._renderCanvas.call(this._cachedSprite,e)},t.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|e.width,0|e.height);else{var i=new t.RenderTexture(0|e.width,0|e.height);this._cachedSprite=new t.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform}var s=this._filters;this._filters=null,this._cachedSprite.filters=s,t.DisplayObject._tempMatrix.tx=-e.x,t.DisplayObject._tempMatrix.ty=-e.y,this._cachedSprite.texture.render(this,t.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._filters=s,this._cacheAsBitmap=!0},t.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},t.DisplayObject.prototype._renderWebGL=function(e){e=e},t.DisplayObject.prototype._renderCanvas=function(e){e=e},t.DisplayObject._tempMatrix=new t.Matrix,Object.defineProperty(t.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e}}),Object.defineProperty(t.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e}}),t.DisplayObjectContainer=function(){t.DisplayObject.call(this),this.children=[]},t.DisplayObjectContainer.prototype=Object.create(t.DisplayObject.prototype),t.DisplayObjectContainer.prototype.constructor=t.DisplayObjectContainer,Object.defineProperty(t.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}}),Object.defineProperty(t.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}),t.DisplayObjectContainer.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},t.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(t>=0&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),this.stage&&e.setStageReference(this.stage),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},t.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e!==t){var i=this.getChildIndex(e),s=this.getChildIndex(t);if(0>i||0>s)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=t,this.children[s]=e}},t.DisplayObjectContainer.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.DisplayObjectContainer.prototype.setChildIndex=function(e,t){if(0>t||t>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(e);this.children.splice(i,1),this.children.splice(t,0,e)},t.DisplayObjectContainer.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[e]},t.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(-1!==t)return this.removeChildAt(t)
},t.DisplayObjectContainer.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return this.stage&&t.removeStageReference(),t.parent=void 0,this.children.splice(e,1),t},t.DisplayObjectContainer.prototype.removeChildren=function(e,t){var i=e||0,s="number"==typeof t?t:this.children.length,n=s-i;if(n>0&&s>=n){for(var o=this.children.splice(i,n),r=0;r<o.length;r++){var a=o[r];this.stage&&a.removeStageReference(),a.parent=void 0}return o}if(0===n&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},t.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform()},t.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=t.DisplayObjectContainer.prototype.updateTransform,t.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return t.EmptyRectangle;for(var e,i,s,n=1/0,o=1/0,r=-1/0,a=-1/0,h=!1,l=0,c=this.children.length;c>l;l++){var d=this.children[l];d.visible&&(h=!0,e=this.children[l].getBounds(),n=n<e.x?n:e.x,o=o<e.y?o:e.y,i=e.width+e.x,s=e.height+e.y,r=r>i?r:i,a=a>s?a:s)}if(!h)return t.EmptyRectangle;var u=this._bounds;return u.x=n,u.y=o,u.width=r-n,u.height=a-o,u},t.DisplayObjectContainer.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=t.identityMatrix;for(var i=0,s=this.children.length;s>i;i++)this.children[i].updateTransform();var n=this.getBounds();return this.worldTransform=e,n},t.DisplayObjectContainer.prototype.setStageReference=function(e){this.stage=e,this._interactive&&(this.stage.dirty=!0);for(var t=0,i=this.children.length;i>t;t++){var s=this.children[t];s.setStageReference(e)}},t.DisplayObjectContainer.prototype.removeStageReference=function(){for(var e=0,t=this.children.length;t>e;e++){var i=this.children[e];i.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},t.DisplayObjectContainer.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);var t,i;if(this._mask||this._filters){for(this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),t=0,i=this.children.length;i>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),e.spriteBatch.start()}else for(t=0,i=this.children.length;i>t;t++)this.children[t]._renderWebGL(e)}},t.DisplayObjectContainer.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);this._mask&&e.maskManager.pushMask(this._mask,e);for(var t=0,i=this.children.length;i>t;t++){var s=this.children[t];s._renderCanvas(e)}this._mask&&e.maskManager.popMask(e)}},t.Sprite=function(e){t.DisplayObjectContainer.call(this),this.anchor=new t.Point,this.texture=e||t.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.blendMode=t.blendModes.NORMAL,this.shader=null,this.texture.baseTexture.hasLoaded?this.onTextureUpdate():this.texture.on("update",this.onTextureUpdate.bind(this)),this.renderable=!0},t.Sprite.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Sprite.prototype.constructor=t.Sprite,Object.defineProperty(t.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(t.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),t.Sprite.prototype.setTexture=function(e){this.texture=e,this.cachedTint=16777215},t.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},t.Sprite.prototype.getBounds=function(e){var t=this.texture.frame.width,i=this.texture.frame.height,s=t*(1-this.anchor.x),n=t*-this.anchor.x,o=i*(1-this.anchor.y),r=i*-this.anchor.y,a=e||this.worldTransform,h=a.a,l=a.b,c=a.c,d=a.d,u=a.tx,g=a.ty,p=-1/0,m=-1/0,_=1/0,f=1/0;if(0===l&&0===c)0>h&&(h*=-1),0>d&&(d*=-1),_=h*n+u,p=h*s+u,f=d*r+g,m=d*o+g;else{var v=h*n+c*r+u,E=d*r+l*n+g,y=h*s+c*r+u,T=d*r+l*s+g,S=h*s+c*o+u,C=d*o+l*s+g,w=h*n+c*o+u,b=d*o+l*n+g;_=_>v?v:_,_=_>y?y:_,_=_>S?S:_,_=_>w?w:_,f=f>E?E:f,f=f>T?T:f,f=f>C?C:f,f=f>b?b:f,p=v>p?v:p,p=y>p?y:p,p=S>p?S:p,p=w>p?w:p,m=E>m?E:m,m=T>m?T:m,m=C>m?C:m,m=b>m?b:m}var A=this._bounds;return A.x=_,A.width=p-_,A.y=f,A.height=m-f,this._currentBounds=A,A},t.Sprite.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){var t,i;if(this._mask||this._filters){var s=e.spriteBatch;for(this._filters&&(s.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(s.stop(),e.maskManager.pushMask(this.mask,e),s.start()),s.render(this),t=0,i=this.children.length;i>t;t++)this.children[t]._renderWebGL(e);s.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),s.start()}else for(e.spriteBatch.render(this),t=0,i=this.children.length;i>t;t++)this.children[t]._renderWebGL(e)}},t.Sprite.prototype._renderCanvas=function(e){if(!(this.visible===!1||0===this.alpha||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=t.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e),this.texture.valid){var i=this.texture.baseTexture.resolution/e.resolution;e.context.globalAlpha=this.worldAlpha,e.smoothProperty&&e.scaleMode!==this.texture.baseTexture.scaleMode&&(e.scaleMode=this.texture.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===t.scaleModes.LINEAR);var s=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;e.roundPixels?(e.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*e.resolution|0,this.worldTransform.ty*e.resolution|0),s=0|s,n=0|n):e.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*e.resolution,this.worldTransform.ty*e.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=t.CanvasTinter.getTintedTexture(this,this.tint)),e.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,s/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i)):e.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,s/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i)}for(var o=0,r=this.children.length;r>o;o++)this.children[o]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.Sprite.fromFrame=function(e){var i=t.TextureCache[e];if(!i)throw new Error('The frameId "'+e+'" does not exist in the texture cache'+this);return new t.Sprite(i)},t.Sprite.fromImage=function(e,i,s){var n=t.Texture.fromImage(e,i,s);return new t.Sprite(n)},t.SpriteBatch=function(e){t.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},t.SpriteBatch.prototype=Object.create(t.DisplayObjectContainer.prototype),t.SpriteBatch.prototype.constructor=t.SpriteBatch,t.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new t.WebGLFastSpriteBatch(e),this.ready=!0},t.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.SpriteBatch.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(e.gl),this.fastSpriteBatch.gl!==e.gl&&this.fastSpriteBatch.setContext(e.gl),e.spriteBatch.stop(),e.shaderManager.setShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.spriteBatch.start())},t.SpriteBatch.prototype._renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.children.length){var t=e.context;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var i=this.worldTransform,s=!0,n=0;n<this.children.length;n++){var o=this.children[n];if(o.visible){var r=o.texture,a=r.frame;if(t.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)===0)s&&(t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),s=!1),t.drawImage(r.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width*o.scale.x+o.position.x+.5|0,o.anchor.y*-a.height*o.scale.y+o.position.y+.5|0,a.width*o.scale.x,a.height*o.scale.y);else{s||(s=!0),o.displayObjectUpdateTransform();var h=o.worldTransform;e.roundPixels?t.setTransform(h.a,h.b,h.c,h.d,0|h.tx,0|h.ty):t.setTransform(h.a,h.b,h.c,h.d,h.tx,h.ty),t.drawImage(r.baseTexture.source,a.x,a.y,a.width,a.height,o.anchor.x*-a.width+.5|0,o.anchor.y*-a.height+.5|0,a.width,a.height)}}}}},t.MovieClip=function(e){t.Sprite.call(this,e[0]),this.textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1},t.MovieClip.prototype=Object.create(t.Sprite.prototype),t.MovieClip.prototype.constructor=t.MovieClip,Object.defineProperty(t.MovieClip.prototype,"totalFrames",{get:function(){return this.textures.length}}),t.MovieClip.prototype.stop=function(){this.playing=!1},t.MovieClip.prototype.play=function(){this.playing=!0},t.MovieClip.prototype.gotoAndStop=function(e){this.playing=!1,this.currentFrame=e;var t=this.currentFrame+.5|0;this.setTexture(this.textures[t%this.textures.length])},t.MovieClip.prototype.gotoAndPlay=function(e){this.currentFrame=e,this.playing=!0},t.MovieClip.prototype.updateTransform=function(){if(this.displayObjectContainerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var e=this.currentFrame+.5|0;this.currentFrame=this.currentFrame%this.textures.length,this.loop||e<this.textures.length?this.setTexture(this.textures[e%this.textures.length]):e>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},t.MovieClip.fromFrames=function(e){for(var i=[],s=0;s<e.length;s++)i.push(new t.Texture.fromFrame(e[s]));return new t.MovieClip(i)},t.MovieClip.fromImages=function(e){for(var i=[],s=0;s<e.length;s++)i.push(new t.Texture.fromImage(e[s]));return new t.MovieClip(i)},t.FilterBlock=function(){this.visible=!0,this.renderable=!0},t.FilterBlock.prototype.constructor=t.FilterBlock,t.Text=function(e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,t.Sprite.call(this,t.Texture.fromCanvas(this.canvas)),this.setText(e),this.setStyle(i)},t.Text.prototype=Object.create(t.Sprite.prototype),t.Text.prototype.constructor=t.Text,Object.defineProperty(t.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(t.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),t.Text.prototype.setStyle=function(e){e=e||{},e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.dropShadow=e.dropShadow||!1,e.dropShadowAngle=e.dropShadowAngle||Math.PI/6,e.dropShadowDistance=e.dropShadowDistance||4,e.dropShadowColor=e.dropShadowColor||"black",e.lineJoin=e.lineJoin||"miter",e.lineHeight=e.lineHeight||null,this.style=e,this.dirty=!0},t.Text.prototype.setText=function(e){this.text=e.toString()||" ",this.dirty=!0},t.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.wordWrap(this.text));for(var t=e.split(/(?:\r\n|\r|\n)/),i=[],s=0,n=this.determineFontProperties(this.style.font),o=0;o<t.length;o++){var r=this.context.measureText(t[o]).width;i[o]=r,s=Math.max(s,r)}var a=s+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=(a+this.context.lineWidth)*this.resolution;var h=this.style.lineHeight||n.fontSize+this.style.strokeThickness,l=h*t.length;this.style.dropShadow&&(l+=this.style.dropShadowDistance),this.canvas.height=l*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic",this.context.lineJoin=this.style.lineJoin;var c,d;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var u=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,g=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(o=0;o<t.length;o++)c=this.style.strokeThickness/2,d=this.style.strokeThickness/2+o*h+n.ascent,"right"===this.style.align?c+=s-i[o]:"center"===this.style.align&&(c+=(s-i[o])/2),this.style.fill&&this.context.fillText(t[o],c+u,d+g)}for(this.context.fillStyle=this.style.fill,o=0;o<t.length;o++)c=this.style.strokeThickness/2,d=this.style.strokeThickness/2+o*h+n.ascent,"right"===this.style.align?c+=s-i[o]:"center"===this.style.align&&(c+=(s-i[o])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(t[o],c,d),this.style.fill&&this.context.fillText(t[o],c,d);this.updateTexture()},t.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.texture.baseTexture.dirty()},t.Text.prototype._renderWebGL=function(e){this.dirty&&(this.resolution=e.resolution,this.updateText(),this.dirty=!1),t.Sprite.prototype._renderWebGL.call(this,e)},t.Text.prototype._renderCanvas=function(e){this.dirty&&(this.resolution=e.resolution,this.updateText(),this.dirty=!1),t.Sprite.prototype._renderCanvas.call(this,e)},t.Text.prototype.determineFontProperties=function(e){var i=t.Text.fontPropertiesCache[e];if(!i){i={};var s=t.Text.fontPropertiesCanvas,n=t.Text.fontPropertiesContext;n.font=e;var o=Math.ceil(n.measureText("|Mq").width),r=Math.ceil(n.measureText("M").width),a=2*r;r=1.4*r|0,s.width=o,s.height=a,n.fillStyle="#f00",n.fillRect(0,0,o,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,r);var h,l,c=n.getImageData(0,0,o,a).data,d=c.length,u=4*o,g=0,p=!1;for(h=0;r>h;h++){for(l=0;u>l;l+=4)if(255!==c[g+l]){p=!0;break}if(p)break;g+=u}for(i.ascent=r-h,g=d-u,p=!1,h=a;h>r;h--){for(l=0;u>l;l+=4)if(255!==c[g+l]){p=!0;break}if(p)break;g-=u}i.descent=h-r,i.descent+=6,i.fontSize=i.ascent+i.descent,t.Text.fontPropertiesCache[e]=i}return i},t.Text.prototype.wordWrap=function(e){for(var t="",i=e.split("\n"),s=0;s<i.length;s++){for(var n=this.style.wordWrapWidth,o=i[s].split(" "),r=0;r<o.length;r++){var a=this.context.measureText(o[r]).width,h=a+this.context.measureText(" ").width;0===r||h>n?(r>0&&(t+="\n"),t+=o[r],n=this.style.wordWrapWidth-a):(n-=h,t+=" "+o[r])}s<i.length-1&&(t+="\n")}return t},t.Text.prototype.getBounds=function(e){return this.dirty&&(this.updateText(),this.dirty=!1),t.Sprite.prototype.getBounds.call(this,e)},t.Text.prototype.destroy=function(e){this.context=null,this.canvas=null,this.texture.destroy(void 0===e?!0:e)},t.Text.fontPropertiesCache={},t.Text.fontPropertiesCanvas=document.createElement("canvas"),t.Text.fontPropertiesContext=t.Text.fontPropertiesCanvas.getContext("2d"),t.BitmapText=function(e,i){t.DisplayObjectContainer.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this.setText(e),this.setStyle(i),this.updateText(),this.dirty=!1},t.BitmapText.prototype=Object.create(t.DisplayObjectContainer.prototype),t.BitmapText.prototype.constructor=t.BitmapText,t.BitmapText.prototype.setText=function(e){this.text=e||" ",this.dirty=!0},t.BitmapText.prototype.setStyle=function(e){e=e||{},e.align=e.align||"left",this.style=e;var i=e.font.split(" ");this.fontName=i[i.length-1],this.fontSize=i.length>=2?parseInt(i[i.length-2],10):t.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=e.tint},t.BitmapText.prototype.updateText=function(){for(var e=t.BitmapText.fonts[this.fontName],i=new t.Point,s=null,n=[],o=0,r=[],a=0,h=this.fontSize/e.size,l=0;l<this.text.length;l++){var c=this.text.charCodeAt(l);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(l)))r.push(i.x),o=Math.max(o,i.x),a++,i.x=0,i.y+=e.lineHeight,s=null;else{var d=e.chars[c];d&&(s&&d.kerning[s]&&(i.x+=d.kerning[s]),n.push({texture:d.texture,line:a,charCode:c,position:new t.Point(i.x+d.xOffset,i.y+d.yOffset)}),i.x+=d.xAdvance,s=c)}}r.push(i.x),o=Math.max(o,i.x);var u=[];for(l=0;a>=l;l++){var g=0;"right"===this.style.align?g=o-r[l]:"center"===this.style.align&&(g=(o-r[l])/2),u.push(g)}var p=this.children.length,m=n.length,_=this.tint||16777215;for(l=0;m>l;l++){var f=p>l?this.children[l]:this._pool.pop();f?f.setTexture(n[l].texture):f=new t.Sprite(n[l].texture),f.position.x=(n[l].position.x+u[n[l].line])*h,f.position.y=n[l].position.y*h,f.scale.x=f.scale.y=h,f.tint=_,f.parent||this.addChild(f)}for(;this.children.length>m;){var v=this.getChildAt(this.children.length-1);this._pool.push(v),this.removeChild(v)}this.textWidth=o*h,this.textHeight=(i.y+e.lineHeight)*h},t.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),t.DisplayObjectContainer.prototype.updateTransform.call(this)},t.BitmapText.fonts={},t.InteractionData=function(){this.global=new t.Point,this.target=null,this.originalEvent=null},t.InteractionData.prototype.getLocalPosition=function(e,i,s){var n=e.worldTransform,o=s?s:this.global,r=n.a,a=n.c,h=n.tx,l=n.b,c=n.d,d=n.ty,u=1/(r*c+a*-l);return i=i||new t.Point,i.x=c*u*o.x+-a*u*o.y+(d*a-h*c)*u,i.y=r*u*o.y+-l*u*o.x+(-d*r+h*l)*u,i},t.InteractionData.prototype.constructor=t.InteractionData,t.InteractionManager=function(e){this.stage=e,this.mouse=new t.InteractionData,this.touches={},this.tempPoint=new t.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new t.Point},t.InteractionManager.prototype.constructor=t.InteractionManager,t.InteractionManager.prototype.collectInteractiveSprite=function(e,t){for(var i=e.children,s=i.length,n=s-1;n>=0;n--){var o=i[n];o._interactive?(t.interactiveChildren=!0,this.interactiveItems.push(o),o.children.length>0&&this.collectInteractiveSprite(o,o)):(o.__iParent=null,o.children.length>0&&this.collectInteractiveSprite(o,t))}},t.InteractionManager.prototype.setTarget=function(e){this.target=e,this.resolution=e.resolution,null===this.interactionDOMElement&&this.setTargetDomElement(e.view)},t.InteractionManager.prototype.setTargetDomElement=function(e){this.removeEvents(),window.navigator.msPointerEnabled&&(e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none"),this.interactionDOMElement=e,e.addEventListener("mousemove",this.onMouseMove,!0),e.addEventListener("mousedown",this.onMouseDown,!0),e.addEventListener("mouseout",this.onMouseOut,!0),e.addEventListener("touchstart",this.onTouchStart,!0),e.addEventListener("touchend",this.onTouchEnd,!0),e.addEventListener("touchleave",this.onTouchCancel,!0),e.addEventListener("touchcancel",this.onTouchCancel,!0),e.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0)},t.InteractionManager.prototype.removeEvents=function(){this.interactionDOMElement&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]="",this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchleave",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onTouchCancel,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0))},t.InteractionManager.prototype.update=function(){if(this.target){var e=Date.now(),i=e-this.last;if(i=i*t.INTERACTION_FREQUENCY/1e3,!(1>i)){this.last=e;var s=0;this.dirty&&this.rebuildInteractiveGraph();var n=this.interactiveItems.length,o="inherit",r=!1;for(s=0;n>s;s++){var a=this.interactiveItems[s];a.__hit=this.hitTest(a,this.mouse),this.mouse.target=a,a.__hit&&!r?(a.buttonMode&&(o=a.defaultCursor),a.interactiveChildren||(r=!0),a.__isOver||(a.mouseover&&a.mouseover(this.mouse),a.__isOver=!0)):a.__isOver&&(a.mouseout&&a.mouseout(this.mouse),a.__isOver=!1)}this.currentCursorStyle!==o&&(this.currentCursorStyle=o,this.interactionDOMElement.style.cursor=o)}}},t.InteractionManager.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var e=this.interactiveItems.length,t=0;e>t;t++)this.interactiveItems[t].interactiveChildren=!1;this.interactiveItems=[],this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},t.InteractionManager.prototype.onMouseMove=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;var t=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(e.clientX-t.left)*(this.target.width/t.width)/this.resolution,this.mouse.global.y=(e.clientY-t.top)*(this.target.height/t.height)/this.resolution;for(var i=this.interactiveItems.length,s=0;i>s;s++){var n=this.interactiveItems[s];n.mousemove&&n.mousemove(this.mouse)}},t.InteractionManager.prototype.onMouseDown=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e,t.AUTO_PREVENT_DEFAULT&&this.mouse.originalEvent.preventDefault();for(var i=this.interactiveItems.length,s=this.mouse.originalEvent,n=2===s.button||3===s.which,o=n?"rightdown":"mousedown",r=n?"rightclick":"click",a=n?"__rightIsDown":"__mouseIsDown",h=n?"__isRightDown":"__isDown",l=0;i>l;l++){var c=this.interactiveItems[l];if((c[o]||c[r])&&(c[a]=!0,c.__hit=this.hitTest(c,this.mouse),c.__hit&&(c[o]&&c[o](this.mouse),c[h]=!0,!c.interactiveChildren)))break}},t.InteractionManager.prototype.onMouseOut=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;var t=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var i=0;t>i;i++){var s=this.interactiveItems[i];s.__isOver&&(this.mouse.target=s,s.mouseout&&s.mouseout(this.mouse),s.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},t.InteractionManager.prototype.onMouseUp=function(e){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=e;for(var t=this.interactiveItems.length,i=!1,s=this.mouse.originalEvent,n=2===s.button||3===s.which,o=n?"rightup":"mouseup",r=n?"rightclick":"click",a=n?"rightupoutside":"mouseupoutside",h=n?"__isRightDown":"__isDown",l=0;t>l;l++){var c=this.interactiveItems[l];(c[r]||c[o]||c[a])&&(c.__hit=this.hitTest(c,this.mouse),c.__hit&&!i?(c[o]&&c[o](this.mouse),c[h]&&c[r]&&c[r](this.mouse),c.interactiveChildren||(i=!0)):c[h]&&c[a]&&c[a](this.mouse),c[h]=!1)}},t.InteractionManager.prototype.hitTest=function(e,i){var s=i.global;if(!e.worldVisible)return!1;e.worldTransform.applyInverse(s,this._tempPoint);var n,o=this._tempPoint.x,r=this._tempPoint.y;if(i.target=e,e.hitArea&&e.hitArea.contains)return e.hitArea.contains(o,r);if(e instanceof t.Sprite){var a,h=e.texture.frame.width,l=e.texture.frame.height,c=-h*e.anchor.x;if(o>c&&c+h>o&&(a=-l*e.anchor.y,r>a&&a+l>r))return!0}else if(e instanceof t.Graphics){var d=e.graphicsData;for(n=0;n<d.length;n++){var u=d[n];if(u.fill&&u.shape&&u.shape.contains(o,r))return!0}}var g=e.children.length;for(n=0;g>n;n++){var p=e.children[n],m=this.hitTest(p,i);if(m)return i.target=e,!0}return!1},t.InteractionManager.prototype.onTouchMove=function(e){this.dirty&&this.rebuildInteractiveGraph();for(var t,i,s=this.interactionDOMElement.getBoundingClientRect(),n=e.changedTouches,o=n.length,r=this.target.width/s.width,a=this.target.height/s.height,h=navigator.isCocoonJS&&!s.left&&!s.top&&!e.target.style.width&&!e.target.style.height,l=0;o>l;l++)i=n[l],h?(i.globalX=i.clientX,i.globalY=i.clientY):(i.globalX=(i.clientX-s.left)*r/this.resolution,i.globalY=(i.clientY-s.top)*a/this.resolution);for(var c=0;o>c;c++){i=n[c],t=this.touches[i.identifier],t.originalEvent=e,h?(t.global.x=i.clientX,t.global.y=i.clientY):(i.globalX=t.global.x=(i.clientX-s.left)*r/this.resolution,i.globalY=t.global.y=(i.clientY-s.top)*a/this.resolution);for(var d=0;d<this.interactiveItems.length;d++){var u=this.interactiveItems[d];u.touchmove&&u.__touchData&&u.__touchData[i.identifier]&&u.touchmove(t)}}},t.InteractionManager.prototype.onTouchStart=function(e){this.dirty&&this.rebuildInteractiveGraph();var i=this.interactionDOMElement.getBoundingClientRect();t.AUTO_PREVENT_DEFAULT&&e.preventDefault();for(var s,n=e.changedTouches,o=n.length,r=this.target.width/i.width,a=this.target.height/i.height,h=navigator.isCocoonJS&&!i.left&&!i.top&&!e.target.style.width&&!e.target.style.height,l=0;o>l;l++)s=n[l],h?(s.globalX=s.clientX,s.globalY=s.clientY):(s.globalX=(s.clientX-i.left)*r/this.resolution,s.globalY=(s.clientY-i.top)*a/this.resolution);for(var c=0;o>c;c++){s=n[c];var d=this.pool.pop();d||(d=new t.InteractionData),d.originalEvent=e,this.touches[s.identifier]=d,h?(d.global.x=s.clientX,d.global.y=s.clientY):(d.global.x=(s.clientX-i.left)*r/this.resolution,d.global.y=(s.clientY-i.top)*a/this.resolution);for(var u=this.interactiveItems.length,g=0;u>g;g++){var p=this.interactiveItems[g];if((p.touchstart||p.tap)&&(p.__hit=this.hitTest(p,d),p.__hit&&(p.touchstart&&p.touchstart(d),p.__isDown=!0,p.__touchData=p.__touchData||{},p.__touchData[s.identifier]=d,!p.interactiveChildren)))break}}},t.InteractionManager.prototype.onTouchEnd=function(e){this.dirty&&this.rebuildInteractiveGraph();for(var t,i=this.interactionDOMElement.getBoundingClientRect(),s=e.changedTouches,n=s.length,o=this.target.width/i.width,r=this.target.height/i.height,a=navigator.isCocoonJS&&!i.left&&!i.top&&!e.target.style.width&&!e.target.style.height,h=0;n>h;h++)t=s[h],a?(t.globalX=t.clientX,t.globalY=t.clientY):(t.globalX=(t.clientX-i.left)*o/this.resolution,t.globalY=(t.clientY-i.top)*r/this.resolution);for(var l=0;n>l;l++){t=s[l];var c=this.touches[t.identifier],d=!1;a?(c.global.x=t.clientX,c.global.y=t.clientY):(c.global.x=(t.clientX-i.left)*o/this.resolution,c.global.y=(t.clientY-i.top)*r/this.resolution);for(var u=this.interactiveItems.length,g=0;u>g;g++){var p=this.interactiveItems[g];p.__touchData&&p.__touchData[t.identifier]&&(p.__hit=this.hitTest(p,p.__touchData[t.identifier]),c.originalEvent=e,(p.touchend||p.tap)&&(p.__hit&&!d?(p.touchend&&p.touchend(c),p.__isDown&&p.tap&&p.tap(c),p.interactiveChildren||(d=!0)):p.__isDown&&p.touchendoutside&&p.touchendoutside(c),p.__isDown=!1),p.__touchData[t.identifier]=null)}this.pool.push(c),this.touches[t.identifier]=null}},t.InteractionManager.prototype.onTouchCancel=function(e){this.dirty&&this.rebuildInteractiveGraph();for(var t,i=this.interactionDOMElement.getBoundingClientRect(),s=e.changedTouches,n=s.length,o=this.target.width/i.width,r=this.target.height/i.height,a=navigator.isCocoonJS&&!i.left&&!i.top&&!e.target.style.width&&!e.target.style.height,h=0;n>h;h++)t=s[h],a?(t.globalX=t.clientX,t.globalY=t.clientY):(t.globalX=(t.clientX-i.left)*o/this.resolution,t.globalY=(t.clientY-i.top)*r/this.resolution);for(var l=0;n>l;l++){t=s[l];var c=this.touches[t.identifier],d=!1;a?(c.global.x=t.clientX,c.global.y=t.clientY):(c.global.x=(t.clientX-i.left)*o/this.resolution,c.global.y=(t.clientY-i.top)*r/this.resolution);for(var u=this.interactiveItems.length,g=0;u>g;g++){var p=this.interactiveItems[g];p.__touchData&&p.__touchData[t.identifier]&&(p.__hit=this.hitTest(p,p.__touchData[t.identifier]),c.originalEvent=e,p.touchcancel&&!d&&(p.touchcancel(c),p.interactiveChildren||(d=!0)),p.__isDown=!1,p.__touchData[t.identifier]=null)}this.pool.push(c),this.touches[t.identifier]=null}},t.Stage=function(e){t.DisplayObjectContainer.call(this),this.worldTransform=new t.Matrix,this.interactive=!0,this.interactionManager=new t.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new t.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(e)},t.Stage.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Stage.prototype.constructor=t.Stage,t.Stage.prototype.setInteractionDelegate=function(e){this.interactionManager.setTargetDomElement(e)},t.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0,t=this.children.length;t>e;e++)this.children[e].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},t.Stage.prototype.setBackgroundColor=function(e){this.backgroundColor=e||0,this.backgroundColorSplit=t.hex2rgb(this.backgroundColor);var i=this.backgroundColor.toString(16);i="000000".substr(0,6-i.length)+i,this.backgroundColorString="#"+i},t.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global},function(e){for(var t=0,i=["ms","moz","webkit","o"],s=0;s<i.length&&!e.requestAnimationFrame;++s)e.requestAnimationFrame=e[i[s]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[s]+"CancelAnimationFrame"]||e[i[s]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(i){var s=(new Date).getTime(),n=Math.max(0,16-(s-t)),o=e.setTimeout(function(){i(s+n)},n);return t=s+n,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),e.requestAnimFrame=e.requestAnimationFrame}(this),t.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},t.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){return function(e){function t(){for(var s=arguments.length,o=new Array(s);s--;)o[s]=arguments[s];return o=n.concat(o),i.apply(this instanceof t?this:e,o)}var i=this,s=arguments.length-1,n=[];if(s>0)for(n.length=s;s--;)n[s]=arguments[s+1];if("function"!=typeof i)throw new TypeError;return t.prototype=function o(e){return e&&(o.prototype=e),this instanceof o?void 0:new o}(i.prototype),t}}()),t.AjaxRequest=function(){var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var t=0;t<e.length;t++)try{return new window.ActiveXObject(e[t])}catch(i){}},t.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;
var e=document.createElement("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="#000",t.fillRect(0,0,1,1),t.globalCompositeOperation="multiply",t.fillStyle="#fff",t.fillRect(0,0,1,1),0===t.getImageData(0,0,1,1).data[0]},t.getNextPowerOfTwo=function(e){if(e>0&&0===(e&e-1))return e;for(var t=1;e>t;)t<<=1;return t},t.isPowerOfTwo=function(e,t){return e>0&&0===(e&e-1)&&t>0&&0===(t&t-1)},t.EventTarget={call:function(e){e&&(e=e.prototype||e,t.EventTarget.mixin(e))},mixin:function(e){e.listeners=function(e){return this._listeners=this._listeners||{},this._listeners[e]?this._listeners[e].slice():[]},e.emit=e.dispatchEvent=function(e,i){if(this._listeners=this._listeners||{},"object"==typeof e&&(i=e,e=e.type),i&&i.__isEventObject===!0||(i=new t.Event(this,e,i)),this._listeners&&this._listeners[e]){var s,n=this._listeners[e].slice(0),o=n.length,r=n[0];for(s=0;o>s;r=n[++s])if(r.call(this,i),i.stoppedImmediate)return this;if(i.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,e,i),this},e.on=e.addEventListener=function(e,t){return this._listeners=this._listeners||{},(this._listeners[e]=this._listeners[e]||[]).push(t),this},e.once=function(e,t){function i(){t.apply(s.off(e,i),arguments)}this._listeners=this._listeners||{};var s=this;return i._originalHandler=t,this.on(e,i)},e.off=e.removeEventListener=function(e,t){if(this._listeners=this._listeners||{},!this._listeners[e])return this;for(var i=this._listeners[e],s=t?i.length:0;s-->0;)(i[s]===t||i[s]._originalHandler===t)&&i.splice(s,1);return 0===i.length&&delete this._listeners[e],this},e.removeAllListeners=function(e){return this._listeners=this._listeners||{},this._listeners[e]?(delete this._listeners[e],this):this}}},t.Event=function(e,t,i){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=e,this.type=t,this.data=i,this.content=i,this.timeStamp=Date.now()},t.Event.prototype.stopPropagation=function(){this.stopped=!0},t.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0},t.autoDetectRenderer=function(e,i,s){e||(e=800),i||(i=600);var n=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}();return n?new t.WebGLRenderer(e,i,s):new t.CanvasRenderer(e,i,s)},t.autoDetectRecommendedRenderer=function(e,i,s){e||(e=800),i||(i=600);var n=function(){try{var e=document.createElement("canvas");return!!window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(t){return!1}}(),o=/Android/i.test(navigator.userAgent);return n&&!o?new t.WebGLRenderer(e,i,s):new t.CanvasRenderer(e,i,s)},t.PolyK={},t.PolyK.Triangulate=function(e){var i=!0,s=e.length>>1;if(3>s)return[];for(var n=[],o=[],r=0;s>r;r++)o.push(r);r=0;for(var a=s;a>3;){var h=o[(r+0)%a],l=o[(r+1)%a],c=o[(r+2)%a],d=e[2*h],u=e[2*h+1],g=e[2*l],p=e[2*l+1],m=e[2*c],_=e[2*c+1],f=!1;if(t.PolyK._convex(d,u,g,p,m,_,i)){f=!0;for(var v=0;a>v;v++){var E=o[v];if(E!==h&&E!==l&&E!==c&&t.PolyK._PointInTriangle(e[2*E],e[2*E+1],d,u,g,p,m,_)){f=!1;break}}}if(f)n.push(h,l,c),o.splice((r+1)%a,1),a--,r=0;else if(r++>3*a){if(!i)return null;for(n=[],o=[],r=0;s>r;r++)o.push(r);r=0,a=s,i=!1}}return n.push(o[0],o[1],o[2]),n},t.PolyK._PointInTriangle=function(e,t,i,s,n,o,r,a){var h=r-i,l=a-s,c=n-i,d=o-s,u=e-i,g=t-s,p=h*h+l*l,m=h*c+l*d,_=h*u+l*g,f=c*c+d*d,v=c*u+d*g,E=1/(p*f-m*m),y=(f*_-m*v)*E,T=(p*v-m*_)*E;return y>=0&&T>=0&&1>y+T},t.PolyK._convex=function(e,t,i,s,n,o,r){return(t-s)*(n-i)+(i-e)*(o-s)>=0===r},t.initDefaultShaders=function(){},t.CompileVertexShader=function(e,i){return t._CompileShader(e,i,e.VERTEX_SHADER)},t.CompileFragmentShader=function(e,i){return t._CompileShader(e,i,e.FRAGMENT_SHADER)},t._CompileShader=function(e,t,i){var s=t.join("\n"),n=e.createShader(i);return e.shaderSource(n,s),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(window.console.log(e.getShaderInfoLog(n)),null)},t.compileProgram=function(e,i,s){var n=t.CompileFragmentShader(e,s),o=t.CompileVertexShader(e,i),r=e.createProgram();return e.attachShader(r,o),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||window.console.log("Could not initialise shaders"),r},t.PixiShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},t.PixiShader.prototype.constructor=t.PixiShader,t.PixiShader.prototype.init=function(){var e=this.gl,i=t.compileProgram(e,this.vertexSrc||t.PixiShader.defaultVertexSrc,this.fragmentSrc);e.useProgram(i),this.uSampler=e.getUniformLocation(i,"uSampler"),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.dimensions=e.getUniformLocation(i,"dimensions"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var s in this.uniforms)this.uniforms[s].uniformLocation=e.getUniformLocation(i,s);this.initUniforms(),this.program=i},t.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var i in this.uniforms){e=this.uniforms[i];var s=e.type;"sampler2D"===s?(e._init=!1,null!==e.value&&this.initSampler2D(e)):"mat2"===s||"mat3"===s||"mat4"===s?(e.glMatrix=!0,e.glValueLength=1,"mat2"===s?e.glFunc=t.uniformMatrix2fv:"mat3"===s?e.glFunc=t.uniformMatrix3fv:"mat4"===s&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+s],e.glValueLength="2f"===s||"2i"===s?2:"3f"===s||"3i"===s?3:"4f"===s||"4i"===s?4:1)}},t.PixiShader.prototype.initSampler2D=function(e){if(e.value&&e.value.baseTexture&&e.value.baseTexture.hasLoaded){var t=this.gl;if(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),e.textureData){var i=e.textureData,s=i.magFilter?i.magFilter:t.LINEAR,n=i.minFilter?i.minFilter:t.LINEAR,o=i.wrapS?i.wrapS:t.CLAMP_TO_EDGE,r=i.wrapT?i.wrapT:t.CLAMP_TO_EDGE,a=i.luminance?t.LUMINANCE:t.RGBA;if(i.repeat&&(o=t.REPEAT,r=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var h=i.width?i.width:512,l=i.height?i.height:2,c=i.border?i.border:0;t.texImage2D(t.TEXTURE_2D,0,a,h,l,c,a,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,a,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,r)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++}},t.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var e,i=this.gl;for(var s in this.uniforms)e=this.uniforms[s],1===e.glValueLength?e.glMatrix===!0?e.glFunc.call(i,e.uniformLocation,e.transpose,e.value):e.glFunc.call(i,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(i,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(i,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(i,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):"sampler2D"===e.type&&(e._init?(i.activeTexture(i["TEXTURE"+this.textureCount]),e.value.baseTexture._dirty[i.id]?t.instances[i.id].updateTexture(e.value.baseTexture):i.bindTexture(i.TEXTURE_2D,e.value.baseTexture._glTextures[i.id]),i.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},t.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},t.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],t.PixiFastShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},t.PixiFastShader.prototype.constructor=t.PixiFastShader,t.PixiFastShader.prototype.init=function(){var e=this.gl,i=t.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(i),this.uSampler=e.getUniformLocation(i,"uSampler"),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.dimensions=e.getUniformLocation(i,"dimensions"),this.uMatrix=e.getUniformLocation(i,"uMatrix"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(i,"aPositionCoord"),this.aScale=e.getAttribLocation(i,"aScale"),this.aRotation=e.getAttribLocation(i,"aRotation"),this.aTextureCoord=e.getAttribLocation(i,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(i,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=i},t.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},t.StripShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},t.StripShader.prototype.constructor=t.StripShader,t.StripShader.prototype.init=function(){var e=this.gl,i=t.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(i),this.uSampler=e.getUniformLocation(i,"uSampler"),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.colorAttribute=e.getAttribLocation(i,"aColor"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(i,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=e.getUniformLocation(i,"translationMatrix"),this.alpha=e.getUniformLocation(i,"alpha"),this.program=i},t.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},t.PrimitiveShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},t.PrimitiveShader.prototype.constructor=t.PrimitiveShader,t.PrimitiveShader.prototype.init=function(){var e=this.gl,i=t.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(i),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.tintColor=e.getUniformLocation(i,"tint"),this.flipY=e.getUniformLocation(i,"flipY"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(i,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(i,"translationMatrix"),this.alpha=e.getUniformLocation(i,"alpha"),this.program=i},t.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},t.ComplexPrimitiveShader=function(e){this._UID=t._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},t.ComplexPrimitiveShader.prototype.constructor=t.ComplexPrimitiveShader,t.ComplexPrimitiveShader.prototype.init=function(){var e=this.gl,i=t.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(i),this.projectionVector=e.getUniformLocation(i,"projectionVector"),this.offsetVector=e.getUniformLocation(i,"offsetVector"),this.tintColor=e.getUniformLocation(i,"tint"),this.color=e.getUniformLocation(i,"color"),this.flipY=e.getUniformLocation(i,"flipY"),this.aVertexPosition=e.getAttribLocation(i,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(i,"translationMatrix"),this.alpha=e.getUniformLocation(i,"alpha"),this.program=i},t.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},t.WebGLGraphics=function(){},t.WebGLGraphics.renderGraphics=function(e,i){var s,n=i.gl,o=i.projection,r=i.offset,a=i.shaderManager.primitiveShader;e.dirty&&t.WebGLGraphics.updateGraphics(e,n);for(var h=e._webGL[n.id],l=0;l<h.data.length;l++)1===h.data[l].mode?(s=h.data[l],i.stencilManager.pushStencil(e,s,i),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(s.indices.length-4)),i.stencilManager.popStencil(e,s,i)):(s=h.data[l],i.shaderManager.setShader(a),a=i.shaderManager.primitiveShader,n.uniformMatrix3fv(a.translationMatrix,!1,e.worldTransform.toArray(!0)),n.uniform1f(a.flipY,1),n.uniform2f(a.projectionVector,o.x,-o.y),n.uniform2f(a.offsetVector,-r.x,-r.y),n.uniform3fv(a.tintColor,t.hex2rgb(e.tint)),n.uniform1f(a.alpha,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,s.buffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(a.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,s.indices.length,n.UNSIGNED_SHORT,0))},t.WebGLGraphics.updateGraphics=function(e,i){var s=e._webGL[i.id];s||(s=e._webGL[i.id]={lastIndex:0,data:[],gl:i}),e.dirty=!1;var n;if(e.clearDirty){for(e.clearDirty=!1,n=0;n<s.data.length;n++){var o=s.data[n];o.reset(),t.WebGLGraphics.graphicsDataPool.push(o)}s.data=[],s.lastIndex=0}var r;for(n=s.lastIndex;n<e.graphicsData.length;n++){var a=e.graphicsData[n];if(a.type===t.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<12){r=t.WebGLGraphics.switchMode(s,0);var h=t.WebGLGraphics.buildPoly(a,r);h||(r=t.WebGLGraphics.switchMode(s,1),t.WebGLGraphics.buildComplexPoly(a,r))}else r=t.WebGLGraphics.switchMode(s,1),t.WebGLGraphics.buildComplexPoly(a,r);a.lineWidth>0&&(r=t.WebGLGraphics.switchMode(s,0),t.WebGLGraphics.buildLine(a,r))}else r=t.WebGLGraphics.switchMode(s,0),a.type===t.Graphics.RECT?t.WebGLGraphics.buildRectangle(a,r):a.type===t.Graphics.CIRC||a.type===t.Graphics.ELIP?t.WebGLGraphics.buildCircle(a,r):a.type===t.Graphics.RREC&&t.WebGLGraphics.buildRoundedRectangle(a,r);s.lastIndex++}for(n=0;n<s.data.length;n++)r=s.data[n],r.dirty&&r.upload()},t.WebGLGraphics.switchMode=function(e,i){var s;return e.data.length?(s=e.data[e.data.length-1],(s.mode!==i||1===i)&&(s=t.WebGLGraphics.graphicsDataPool.pop()||new t.WebGLGraphicsData(e.gl),s.mode=i,e.data.push(s))):(s=t.WebGLGraphics.graphicsDataPool.pop()||new t.WebGLGraphicsData(e.gl),s.mode=i,e.data.push(s)),s.dirty=!0,s},t.WebGLGraphics.buildRectangle=function(e,i){var s=e.shape,n=s.x,o=s.y,r=s.width,a=s.height;if(e.fill){var h=t.hex2rgb(e.fillColor),l=e.fillAlpha,c=h[0]*l,d=h[1]*l,u=h[2]*l,g=i.points,p=i.indices,m=g.length/6;g.push(n,o),g.push(c,d,u,l),g.push(n+r,o),g.push(c,d,u,l),g.push(n,o+a),g.push(c,d,u,l),g.push(n+r,o+a),g.push(c,d,u,l),p.push(m,m,m+1,m+2,m+3,m+3)}if(e.lineWidth){var _=e.points;e.points=[n,o,n+r,o,n+r,o+a,n,o+a,n,o],t.WebGLGraphics.buildLine(e,i),e.points=_}},t.WebGLGraphics.buildRoundedRectangle=function(e,i){var s=e.shape,n=s.x,o=s.y,r=s.width,a=s.height,h=s.radius,l=[];if(l.push(n,o+h),l=l.concat(t.WebGLGraphics.quadraticBezierCurve(n,o+a-h,n,o+a,n+h,o+a)),l=l.concat(t.WebGLGraphics.quadraticBezierCurve(n+r-h,o+a,n+r,o+a,n+r,o+a-h)),l=l.concat(t.WebGLGraphics.quadraticBezierCurve(n+r,o+h,n+r,o,n+r-h,o)),l=l.concat(t.WebGLGraphics.quadraticBezierCurve(n+h,o,n,o,n,o+h)),e.fill){var c=t.hex2rgb(e.fillColor),d=e.fillAlpha,u=c[0]*d,g=c[1]*d,p=c[2]*d,m=i.points,_=i.indices,f=m.length/6,v=t.PolyK.Triangulate(l),E=0;for(E=0;E<v.length;E+=3)_.push(v[E]+f),_.push(v[E]+f),_.push(v[E+1]+f),_.push(v[E+2]+f),_.push(v[E+2]+f);for(E=0;E<l.length;E++)m.push(l[E],l[++E],u,g,p,d)}if(e.lineWidth){var y=e.points;e.points=l,t.WebGLGraphics.buildLine(e,i),e.points=y}},t.WebGLGraphics.quadraticBezierCurve=function(e,t,i,s,n,o){function r(e,t,i){var s=t-e;return e+s*i}for(var a,h,l,c,d,u,g=20,p=[],m=0,_=0;g>=_;_++)m=_/g,a=r(e,i,m),h=r(t,s,m),l=r(i,n,m),c=r(s,o,m),d=r(a,l,m),u=r(h,c,m),p.push(d,u);return p},t.WebGLGraphics.buildCircle=function(e,i){var s,n,o=e.shape,r=o.x,a=o.y;e.type===t.Graphics.CIRC?(s=o.radius,n=o.radius):(s=o.width,n=o.height);var h=40,l=2*Math.PI/h,c=0;if(e.fill){var d=t.hex2rgb(e.fillColor),u=e.fillAlpha,g=d[0]*u,p=d[1]*u,m=d[2]*u,_=i.points,f=i.indices,v=_.length/6;for(f.push(v),c=0;h+1>c;c++)_.push(r,a,g,p,m,u),_.push(r+Math.sin(l*c)*s,a+Math.cos(l*c)*n,g,p,m,u),f.push(v++,v++);f.push(v-1)}if(e.lineWidth){var E=e.points;for(e.points=[],c=0;h+1>c;c++)e.points.push(r+Math.sin(l*c)*s,a+Math.cos(l*c)*n);t.WebGLGraphics.buildLine(e,i),e.points=E}},t.WebGLGraphics.buildLine=function(e,i){var s=0,n=e.points;if(0!==n.length){if(e.lineWidth%2)for(s=0;s<n.length;s++)n[s]+=.5;var o=new t.Point(n[0],n[1]),r=new t.Point(n[n.length-2],n[n.length-1]);if(o.x===r.x&&o.y===r.y){n=n.slice(),n.pop(),n.pop(),r=new t.Point(n[n.length-2],n[n.length-1]);var a=r.x+.5*(o.x-r.x),h=r.y+.5*(o.y-r.y);n.unshift(a,h),n.push(a,h)}var l,c,d,u,g,p,m,_,f,v,E,y,T,S,C,w,b,A,L,x,M,I,O,R=i.points,N=i.indices,P=n.length/2,D=n.length,k=R.length/6,B=e.lineWidth/2,U=t.hex2rgb(e.lineColor),H=e.lineAlpha,G=U[0]*H,V=U[1]*H,F=U[2]*H;for(d=n[0],u=n[1],g=n[2],p=n[3],f=-(u-p),v=d-g,O=Math.sqrt(f*f+v*v),f/=O,v/=O,f*=B,v*=B,R.push(d-f,u-v,G,V,F,H),R.push(d+f,u+v,G,V,F,H),s=1;P-1>s;s++)d=n[2*(s-1)],u=n[2*(s-1)+1],g=n[2*s],p=n[2*s+1],m=n[2*(s+1)],_=n[2*(s+1)+1],f=-(u-p),v=d-g,O=Math.sqrt(f*f+v*v),f/=O,v/=O,f*=B,v*=B,E=-(p-_),y=g-m,O=Math.sqrt(E*E+y*y),E/=O,y/=O,E*=B,y*=B,C=-v+u-(-v+p),w=-f+g-(-f+d),b=(-f+d)*(-v+p)-(-f+g)*(-v+u),A=-y+_-(-y+p),L=-E+g-(-E+m),x=(-E+m)*(-y+p)-(-E+g)*(-y+_),M=C*L-A*w,Math.abs(M)<.1?(M+=10.1,R.push(g-f,p-v,G,V,F,H),R.push(g+f,p+v,G,V,F,H)):(l=(w*x-L*b)/M,c=(A*b-C*x)/M,I=(l-g)*(l-g)+(c-p)+(c-p),I>19600?(T=f-E,S=v-y,O=Math.sqrt(T*T+S*S),T/=O,S/=O,T*=B,S*=B,R.push(g-T,p-S),R.push(G,V,F,H),R.push(g+T,p+S),R.push(G,V,F,H),R.push(g-T,p-S),R.push(G,V,F,H),D++):(R.push(l,c),R.push(G,V,F,H),R.push(g-(l-g),p-(c-p)),R.push(G,V,F,H)));for(d=n[2*(P-2)],u=n[2*(P-2)+1],g=n[2*(P-1)],p=n[2*(P-1)+1],f=-(u-p),v=d-g,O=Math.sqrt(f*f+v*v),f/=O,v/=O,f*=B,v*=B,R.push(g-f,p-v),R.push(G,V,F,H),R.push(g+f,p+v),R.push(G,V,F,H),N.push(k),s=0;D>s;s++)N.push(k++);N.push(k-1)}},t.WebGLGraphics.buildComplexPoly=function(e,i){var s=e.points.slice();if(!(s.length<6)){var n=i.indices;i.points=s,i.alpha=e.fillAlpha,i.color=t.hex2rgb(e.fillColor);for(var o,r,a=1/0,h=-1/0,l=1/0,c=-1/0,d=0;d<s.length;d+=2)o=s[d],r=s[d+1],a=a>o?o:a,h=o>h?o:h,l=l>r?r:l,c=r>c?r:c;s.push(a,l,h,l,h,c,a,c);var u=s.length/2;for(d=0;u>d;d++)n.push(d)}},t.WebGLGraphics.buildPoly=function(e,i){var s=e.points;if(!(s.length<6)){var n=i.points,o=i.indices,r=s.length/2,a=t.hex2rgb(e.fillColor),h=e.fillAlpha,l=a[0]*h,c=a[1]*h,d=a[2]*h,u=t.PolyK.Triangulate(s);if(!u)return!1;var g=n.length/6,p=0;for(p=0;p<u.length;p+=3)o.push(u[p]+g),o.push(u[p]+g),o.push(u[p+1]+g),o.push(u[p+2]+g),o.push(u[p+2]+g);for(p=0;r>p;p++)n.push(s[2*p],s[2*p+1],l,c,d,h);return!0}},t.WebGLGraphics.graphicsDataPool=[],t.WebGLGraphicsData=function(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},t.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},t.WebGLGraphicsData.prototype.upload=function(){var e=this.gl;this.glPoints=new t.Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndicies=new t.Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndicies,e.STATIC_DRAW),this.dirty=!1},t.glContexts=[],t.instances=[],t.WebGLRenderer=function(e,i,s){if(s)for(var n in t.defaultRenderOptions)"undefined"==typeof s[n]&&(s[n]=t.defaultRenderOptions[n]);else s=t.defaultRenderOptions;t.defaultRenderer||(t.sayHello("webGL"),t.defaultRenderer=this),this.type=t.WEBGL_RENDERER,this.resolution=s.resolution,this.transparent=s.transparent,this.autoResize=s.autoResize||!1,this.preserveDrawingBuffer=s.preserveDrawingBuffer,this.clearBeforeRender=s.clearBeforeRender,this.width=e||800,this.height=i||600,this.view=s.view||document.createElement("canvas"),this.contextLostBound=this.handleContextLost.bind(this),this.contextRestoredBound=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLostBound,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredBound,!1),this._contextOptions={alpha:this.transparent,antialias:s.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:s.preserveDrawingBuffer},this.projection=new t.Point,this.offset=new t.Point(0,0),this.shaderManager=new t.WebGLShaderManager,this.spriteBatch=new t.WebGLSpriteBatch,this.maskManager=new t.WebGLMaskManager,this.filterManager=new t.WebGLFilterManager,this.stencilManager=new t.WebGLStencilManager,this.blendModeManager=new t.WebGLBlendModeManager,this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,this.renderSession.renderer=this,this.renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},t.WebGLRenderer.prototype.constructor=t.WebGLRenderer,t.WebGLRenderer.prototype.initContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=e,!e)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=e.id=t.WebGLRenderer.glContextId++,t.glContexts[this.glContextId]=e,t.instances[this.glContextId]=this,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.shaderManager.setContext(e),this.spriteBatch.setContext(e),this.maskManager.setContext(e),this.filterManager.setContext(e),this.blendModeManager.setContext(e),this.stencilManager.setContext(e),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},t.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){this.__stage!==e&&(e.interactive&&e.interactionManager.removeEvents(),this.__stage=e),e.updateTransform();var t=this.gl;e._interactive?e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)):e._interactiveEventsAdded&&(e._interactiveEventsAdded=!1,e.interactionManager.setTarget(this)),t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?t.clearColor(0,0,0,0):t.clearColor(e.backgroundColorSplit[0],e.backgroundColorSplit[1],e.backgroundColorSplit[2],1),t.clear(t.COLOR_BUFFER_BIT)),this.renderDisplayObject(e,this.projection)}},t.WebGLRenderer.prototype.renderDisplayObject=function(e,i,s){this.renderSession.blendModeManager.setBlendMode(t.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=s?-1:1,this.renderSession.projection=i,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,s),e._renderWebGL(this.renderSession),this.spriteBatch.end()},t.WebGLRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},t.WebGLRenderer.prototype.updateTexture=function(e){if(e.hasLoaded){var i=this.gl;return e._glTextures[i.id]||(e._glTextures[i.id]=i.createTexture()),i.bindTexture(i.TEXTURE_2D,e._glTextures[i.id]),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e.source),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e.scaleMode===t.scaleModes.LINEAR?i.LINEAR:i.NEAREST),e.mipmap&&t.isPowerOfTwo(e.width,e.height)?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,e.scaleMode===t.scaleModes.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST),i.generateMipmap(i.TEXTURE_2D)):i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,e.scaleMode===t.scaleModes.LINEAR?i.LINEAR:i.NEAREST),e._powerOf2?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE)),e._dirty[i.id]=!1,e._glTextures[i.id]}},t.WebGLRenderer.prototype.handleContextLost=function(e){e.preventDefault(),this.contextLost=!0},t.WebGLRenderer.prototype.handleContextRestored=function(){this.initContext();for(var e in t.TextureCache){var i=t.TextureCache[e].baseTexture;i._glTextures=[]}this.contextLost=!1},t.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLostBound),this.view.removeEventListener("webglcontextrestored",this.contextRestoredBound),t.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},t.WebGLRenderer.prototype.mapBlendModes=function(){var e=this.gl;t.blendModesWebGL||(t.blendModesWebGL=[],t.blendModesWebGL[t.blendModes.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],t.blendModesWebGL[t.blendModes.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.SCREEN]=[e.SRC_ALPHA,e.ONE],t.blendModesWebGL[t.blendModes.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t.blendModesWebGL[t.blendModes.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA])},t.WebGLRenderer.glContextId=0,t.WebGLBlendModeManager=function(){this.currentBlendMode=99999},t.WebGLBlendModeManager.prototype.constructor=t.WebGLBlendModeManager,t.WebGLBlendModeManager.prototype.setContext=function(e){this.gl=e},t.WebGLBlendModeManager.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var i=t.blendModesWebGL[this.currentBlendMode];return this.gl.blendFunc(i[0],i[1]),!0},t.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},t.WebGLMaskManager=function(){},t.WebGLMaskManager.prototype.constructor=t.WebGLMaskManager,t.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},t.WebGLMaskManager.prototype.pushMask=function(e,i){var s=i.gl;e.dirty&&t.WebGLGraphics.updateGraphics(e,s),e._webGL[s.id].data.length&&i.stencilManager.pushStencil(e,e._webGL[s.id].data[0],i)},t.WebGLMaskManager.prototype.popMask=function(e,t){var i=this.gl;t.stencilManager.popStencil(e,e._webGL[i.id].data[0],t)},t.WebGLMaskManager.prototype.destroy=function(){this.gl=null},t.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},t.WebGLStencilManager.prototype.setContext=function(e){this.gl=e},t.WebGLStencilManager.prototype.pushStencil=function(e,t,i){var s=this.gl;this.bindGraphics(e,t,i),0===this.stencilStack.length&&(s.enable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(t);
var n=this.count;s.colorMask(!1,!1,!1,!1),s.stencilFunc(s.ALWAYS,0,255),s.stencilOp(s.KEEP,s.KEEP,s.INVERT),1===t.mode?(s.drawElements(s.TRIANGLE_FAN,t.indices.length-4,s.UNSIGNED_SHORT,0),this.reverse?(s.stencilFunc(s.EQUAL,255-n,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)):(s.stencilFunc(s.EQUAL,n,255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(t.indices.length-4)),this.reverse?s.stencilFunc(s.EQUAL,255-(n+1),255):s.stencilFunc(s.EQUAL,n+1,255),this.reverse=!this.reverse):(this.reverse?(s.stencilFunc(s.EQUAL,n,255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)):(s.stencilFunc(s.EQUAL,255-n,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),s.drawElements(s.TRIANGLE_STRIP,t.indices.length,s.UNSIGNED_SHORT,0),this.reverse?s.stencilFunc(s.EQUAL,n+1,255):s.stencilFunc(s.EQUAL,255-(n+1),255)),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),this.count++},t.WebGLStencilManager.prototype.bindGraphics=function(e,i,s){this._currentGraphics=e;var n,o=this.gl,r=s.projection,a=s.offset;1===i.mode?(n=s.shaderManager.complexPrimitiveShader,s.shaderManager.setShader(n),o.uniform1f(n.flipY,s.flipY),o.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),o.uniform2f(n.projectionVector,r.x,-r.y),o.uniform2f(n.offsetVector,-a.x,-a.y),o.uniform3fv(n.tintColor,t.hex2rgb(e.tint)),o.uniform3fv(n.color,i.color),o.uniform1f(n.alpha,e.worldAlpha*i.alpha),o.bindBuffer(o.ARRAY_BUFFER,i.buffer),o.vertexAttribPointer(n.aVertexPosition,2,o.FLOAT,!1,8,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,i.indexBuffer)):(n=s.shaderManager.primitiveShader,s.shaderManager.setShader(n),o.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),o.uniform1f(n.flipY,s.flipY),o.uniform2f(n.projectionVector,r.x,-r.y),o.uniform2f(n.offsetVector,-a.x,-a.y),o.uniform3fv(n.tintColor,t.hex2rgb(e.tint)),o.uniform1f(n.alpha,e.worldAlpha),o.bindBuffer(o.ARRAY_BUFFER,i.buffer),o.vertexAttribPointer(n.aVertexPosition,2,o.FLOAT,!1,24,0),o.vertexAttribPointer(n.colorAttribute,4,o.FLOAT,!1,24,8),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,i.indexBuffer))},t.WebGLStencilManager.prototype.popStencil=function(e,t,i){var s=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)s.disable(s.STENCIL_TEST);else{var n=this.count;this.bindGraphics(e,t,i),s.colorMask(!1,!1,!1,!1),1===t.mode?(this.reverse=!this.reverse,this.reverse?(s.stencilFunc(s.EQUAL,255-(n+1),255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)):(s.stencilFunc(s.EQUAL,n+1,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(t.indices.length-4)),s.stencilFunc(s.ALWAYS,0,255),s.stencilOp(s.KEEP,s.KEEP,s.INVERT),s.drawElements(s.TRIANGLE_FAN,t.indices.length-4,s.UNSIGNED_SHORT,0),this.reverse?s.stencilFunc(s.EQUAL,n,255):s.stencilFunc(s.EQUAL,255-n,255)):(this.reverse?(s.stencilFunc(s.EQUAL,n+1,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)):(s.stencilFunc(s.EQUAL,255-(n+1),255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)),s.drawElements(s.TRIANGLE_STRIP,t.indices.length,s.UNSIGNED_SHORT,0),this.reverse?s.stencilFunc(s.EQUAL,n,255):s.stencilFunc(s.EQUAL,255-n,255)),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP)}},t.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},t.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[]},t.WebGLShaderManager.prototype.constructor=t.WebGLShaderManager,t.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new t.PrimitiveShader(e),this.complexPrimitiveShader=new t.ComplexPrimitiveShader(e),this.defaultShader=new t.PixiShader(e),this.fastShader=new t.PixiFastShader(e),this.stripShader=new t.StripShader(e),this.setShader(this.defaultShader)},t.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var i=e[t];this.tempAttribState[i]=!0}var s=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?s.enableVertexAttribArray(t):s.disableVertexAttribArray(t))},t.WebGLShaderManager.prototype.setShader=function(e){return this._currentId===e._UID?!1:(this._currentId=e._UID,this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},t.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},t.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var e=4*this.size*4*this.vertSize,i=6*this.size;this.vertices=new t.ArrayBuffer(e),this.positions=new t.Float32Array(this.vertices),this.colors=new t.Uint32Array(this.vertices),this.indices=new t.Uint16Array(i),this.lastIndexCount=0;for(var s=0,n=0;i>s;s+=6,n+=4)this.indices[s+0]=n+0,this.indices[s+1]=n+1,this.indices[s+2]=n+2,this.indices[s+3]=n+0,this.indices[s+4]=n+2,this.indices[s+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new t.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},t.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999;var i=new t.PixiShader(e);i.fragmentSrc=this.defaultShader.fragmentSrc,i.uniforms={},i.init(),this.defaultShader.shaders[e.id]=i},t.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},t.WebGLSpriteBatch.prototype.end=function(){this.flush()},t.WebGLSpriteBatch.prototype.render=function(e){var t=e.texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture);var i=t._uvs;if(i){var s,n,o,r,a=e.anchor.x,h=e.anchor.y;if(t.trim){var l=t.trim;n=l.x-a*l.width,s=n+t.crop.width,r=l.y-h*l.height,o=r+t.crop.height}else s=t.frame.width*(1-a),n=t.frame.width*-a,o=t.frame.height*(1-h),r=t.frame.height*-h;var c=4*this.currentBatchSize*this.vertSize,d=t.baseTexture.resolution,u=e.worldTransform,g=u.a/d,p=u.b/d,m=u.c/d,_=u.d/d,f=u.tx,v=u.ty,E=this.colors,y=this.positions;this.renderSession.roundPixels?(y[c]=g*n+m*r+f|0,y[c+1]=_*r+p*n+v|0,y[c+5]=g*s+m*r+f|0,y[c+6]=_*r+p*s+v|0,y[c+10]=g*s+m*o+f|0,y[c+11]=_*o+p*s+v|0,y[c+15]=g*n+m*o+f|0,y[c+16]=_*o+p*n+v|0):(y[c]=g*n+m*r+f,y[c+1]=_*r+p*n+v,y[c+5]=g*s+m*r+f,y[c+6]=_*r+p*s+v,y[c+10]=g*s+m*o+f,y[c+11]=_*o+p*s+v,y[c+15]=g*n+m*o+f,y[c+16]=_*o+p*n+v),y[c+2]=i.x0,y[c+3]=i.y0,y[c+7]=i.x1,y[c+8]=i.y1,y[c+12]=i.x2,y[c+13]=i.y2,y[c+17]=i.x3,y[c+18]=i.y3;var T=e.tint;E[c+4]=E[c+9]=E[c+14]=E[c+19]=(T>>16)+(65280&T)+((255&T)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},t.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var i=e.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=i.baseTexture),e._uvs||(e._uvs=new t.TextureUvs);var s=e._uvs;e.tilePosition.x%=i.baseTexture.width*e.tileScaleOffset.x,e.tilePosition.y%=i.baseTexture.height*e.tileScaleOffset.y;var n=e.tilePosition.x/(i.baseTexture.width*e.tileScaleOffset.x),o=e.tilePosition.y/(i.baseTexture.height*e.tileScaleOffset.y),r=e.width/i.baseTexture.width/(e.tileScale.x*e.tileScaleOffset.x),a=e.height/i.baseTexture.height/(e.tileScale.y*e.tileScaleOffset.y);s.x0=0-n,s.y0=0-o,s.x1=1*r-n,s.y1=0-o,s.x2=1*r-n,s.y2=1*a-o,s.x3=0-n,s.y3=1*a-o;var h=e.tint,l=(h>>16)+(65280&h)+((255&h)<<16)+(255*e.alpha<<24),c=this.positions,d=this.colors,u=e.width,g=e.height,p=e.anchor.x,m=e.anchor.y,_=u*(1-p),f=u*-p,v=g*(1-m),E=g*-m,y=4*this.currentBatchSize*this.vertSize,T=i.baseTexture.resolution,S=e.worldTransform,C=S.a/T,w=S.b/T,b=S.c/T,A=S.d/T,L=S.tx,x=S.ty;c[y++]=C*f+b*E+L,c[y++]=A*E+w*f+x,c[y++]=s.x0,c[y++]=s.y0,d[y++]=l,c[y++]=C*_+b*E+L,c[y++]=A*E+w*_+x,c[y++]=s.x1,c[y++]=s.y1,d[y++]=l,c[y++]=C*_+b*v+L,c[y++]=A*v+w*_+x,c[y++]=s.x2,c[y++]=s.y2,d[y++]=l,c[y++]=C*f+b*v+L,c[y++]=A*v+w*f+x,c[y++]=s.x3,c[y++]=s.y3,d[y++]=l,this.sprites[this.currentBatchSize++]=e},t.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e,i=this.gl;if(this.dirty){this.dirty=!1,i.activeTexture(i.TEXTURE0),i.bindBuffer(i.ARRAY_BUFFER,this.vertexBuffer),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e=this.defaultShader.shaders[i.id];var s=4*this.vertSize;i.vertexAttribPointer(e.aVertexPosition,2,i.FLOAT,!1,s,0),i.vertexAttribPointer(e.aTextureCoord,2,i.FLOAT,!1,s,8),i.vertexAttribPointer(e.colorAttribute,4,i.UNSIGNED_BYTE,!0,s,16)}if(this.currentBatchSize>.5*this.size)i.bufferSubData(i.ARRAY_BUFFER,0,this.vertices);else{var n=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);i.bufferSubData(i.ARRAY_BUFFER,0,n)}for(var o,r,a,h,l=0,c=0,d=null,u=this.renderSession.blendModeManager.currentBlendMode,g=null,p=!1,m=!1,_=0,f=this.currentBatchSize;f>_;_++){if(h=this.sprites[_],o=h.texture.baseTexture,r=h.blendMode,a=h.shader||this.defaultShader,p=u!==r,m=g!==a,(d!==o||p||m)&&(this.renderBatch(d,l,c),c=_,l=0,d=o,p&&(u=r,this.renderSession.blendModeManager.setBlendMode(u)),m)){g=a,e=g.shaders[i.id],e||(e=new t.PixiShader(i),e.fragmentSrc=g.fragmentSrc,e.uniforms=g.uniforms,e.init(),g.shaders[i.id]=e),this.renderSession.shaderManager.setShader(e),e.dirty&&e.syncUniforms();var v=this.renderSession.projection;i.uniform2f(e.projectionVector,v.x,v.y);var E=this.renderSession.offset;i.uniform2f(e.offsetVector,E.x,E.y)}l++}this.renderBatch(d,l,c),this.currentBatchSize=0}},t.WebGLSpriteBatch.prototype.renderBatch=function(e,t,i){if(0!==t){var s=this.gl;e._dirty[s.id]?this.renderSession.renderer.updateTexture(e):s.bindTexture(s.TEXTURE_2D,e._glTextures[s.id]),s.drawElements(s.TRIANGLES,6*t,s.UNSIGNED_SHORT,6*i*2),this.renderSession.drawCount++}},t.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},t.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},t.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},t.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var i=4*this.size*this.vertSize,s=6*this.maxSize;this.vertices=new t.Float32Array(i),this.indices=new t.Uint16Array(s),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var n=0,o=0;s>n;n+=6,o+=4)this.indices[n+0]=o+0,this.indices[n+1]=o+1,this.indices[n+2]=o+2,this.indices[n+3]=o+0,this.indices[n+4]=o+2,this.indices[n+5]=o+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(e)},t.WebGLFastSpriteBatch.prototype.constructor=t.WebGLFastSpriteBatch,t.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW)},t.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=e.worldTransform.toArray(!0),this.start()},t.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},t.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,i=t[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var s=0,n=t.length;n>s;s++)this.renderSprite(t[s]);this.flush()}},t.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(e.visible&&(e.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=e.texture.baseTexture,e.texture._uvs))){var t,i,s,n,o,r,a,h,l=this.vertices;if(t=e.texture._uvs,i=e.texture.frame.width,s=e.texture.frame.height,e.texture.trim){var c=e.texture.trim;o=c.x-e.anchor.x*c.width,n=o+e.texture.crop.width,a=c.y-e.anchor.y*c.height,r=a+e.texture.crop.height}else n=e.texture.frame.width*(1-e.anchor.x),o=e.texture.frame.width*-e.anchor.x,r=e.texture.frame.height*(1-e.anchor.y),a=e.texture.frame.height*-e.anchor.y;h=4*this.currentBatchSize*this.vertSize,l[h++]=o,l[h++]=a,l[h++]=e.position.x,l[h++]=e.position.y,l[h++]=e.scale.x,l[h++]=e.scale.y,l[h++]=e.rotation,l[h++]=t.x0,l[h++]=t.y1,l[h++]=e.alpha,l[h++]=n,l[h++]=a,l[h++]=e.position.x,l[h++]=e.position.y,l[h++]=e.scale.x,l[h++]=e.scale.y,l[h++]=e.rotation,l[h++]=t.x1,l[h++]=t.y1,l[h++]=e.alpha,l[h++]=n,l[h++]=r,l[h++]=e.position.x,l[h++]=e.position.y,l[h++]=e.scale.x,l[h++]=e.scale.y,l[h++]=e.rotation,l[h++]=t.x2,l[h++]=t.y2,l[h++]=e.alpha,l[h++]=o,l[h++]=r,l[h++]=e.position.x,l[h++]=e.position.y,l[h++]=e.scale.x,l[h++]=e.scale.y,l[h++]=e.rotation,l[h++]=t.x3,l[h++]=t.y3,l[h++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},t.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(this.currentBaseTexture._glTextures[e.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},t.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},t.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,i,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,i,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,i,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,i,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,i,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,i,36)},t.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},t.WebGLFilterManager.prototype.constructor=t.WebGLFilterManager,t.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},t.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=t},t.WebGLFilterManager.prototype.pushFilter=function(e){var i=this.gl,s=this.renderSession.projection,n=this.renderSession.offset;e._filterArea=e.target.filterArea||e.target.getBounds(),this.filterStack.push(e);var o=e.filterPasses[0];this.offsetX+=e._filterArea.x,this.offsetY+=e._filterArea.y;var r=this.texturePool.pop();r?r.resize(this.width,this.height):r=new t.FilterTexture(this.gl,this.width,this.height),i.bindTexture(i.TEXTURE_2D,r.texture);var a=e._filterArea,h=o.padding;a.x-=h,a.y-=h,a.width+=2*h,a.height+=2*h,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),i.bindFramebuffer(i.FRAMEBUFFER,r.frameBuffer),i.viewport(0,0,a.width,a.height),s.x=a.width/2,s.y=-a.height/2,n.x=-a.x,n.y=-a.y,i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),e._glFilterTexture=r},t.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,i=this.filterStack.pop(),s=i._filterArea,n=i._glFilterTexture,o=this.renderSession.projection,r=this.renderSession.offset;if(i.filterPasses.length>1){e.viewport(0,0,s.width,s.height),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=s.height,this.vertexArray[2]=s.width,this.vertexArray[3]=s.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=s.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=s.width/this.width,this.uvArray[5]=s.height/this.height,this.uvArray[6]=s.width/this.width,this.uvArray[7]=s.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var a=n,h=this.texturePool.pop();h||(h=new t.FilterTexture(this.gl,this.width,this.height)),h.resize(this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,h.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var l=0;l<i.filterPasses.length-1;l++){var c=i.filterPasses[l];e.bindFramebuffer(e.FRAMEBUFFER,h.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.texture),this.applyFilterPass(c,s,s.width,s.height);var d=a;a=h,h=d}e.enable(e.BLEND),n=a,this.texturePool.push(h)}var u=i.filterPasses[i.filterPasses.length-1];this.offsetX-=s.x,this.offsetY-=s.y;var g=this.width,p=this.height,m=0,_=0,f=this.buffer;if(0===this.filterStack.length)e.colorMask(!0,!0,!0,!0);else{var v=this.filterStack[this.filterStack.length-1];s=v._filterArea,g=s.width,p=s.height,m=s.x,_=s.y,f=v._glFilterTexture.frameBuffer}o.x=g/2,o.y=-p/2,r.x=m,r.y=_,s=i._filterArea;var E=s.x-m,y=s.y-_;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=E,this.vertexArray[1]=y+s.height,this.vertexArray[2]=E+s.width,this.vertexArray[3]=y+s.height,this.vertexArray[4]=E,this.vertexArray[5]=y,this.vertexArray[6]=E+s.width,this.vertexArray[7]=y,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=s.width/this.width,this.uvArray[5]=s.height/this.height,this.uvArray[6]=s.width/this.width,this.uvArray[7]=s.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,g*this.renderSession.resolution,p*this.renderSession.resolution),e.bindFramebuffer(e.FRAMEBUFFER,f),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.texture),this.applyFilterPass(u,s,g,p),this.texturePool.push(n),i._glFilterTexture=null},t.WebGLFilterManager.prototype.applyFilterPass=function(e,i,s,n){var o=this.gl,r=e.shaders[o.id];r||(r=new t.PixiShader(o),r.fragmentSrc=e.fragmentSrc,r.uniforms=e.uniforms,r.init(),e.shaders[o.id]=r),this.renderSession.shaderManager.setShader(r),o.uniform2f(r.projectionVector,s/2,-n/2),o.uniform2f(r.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),r.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(r.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(r.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(r.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},t.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new t.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new t.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new t.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},t.WebGLFilterManager.prototype.destroy=function(){var e=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null,e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.uvBuffer),e.deleteBuffer(this.colorBuffer),e.deleteBuffer(this.indexBuffer)},t.FilterTexture=function(e,i,s,n){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),n=n||t.scaleModes.DEFAULT,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n===t.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n===t.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer),this.resize(i,s)},t.FilterTexture.prototype.constructor=t.FilterTexture,t.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},t.FilterTexture.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,t)}},t.FilterTexture.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},t.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},t.CanvasBuffer.prototype.constructor=t.CanvasBuffer,t.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},t.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},t.CanvasMaskManager=function(){},t.CanvasMaskManager.prototype.constructor=t.CanvasMaskManager,t.CanvasMaskManager.prototype.pushMask=function(e,i){var s=i.context;s.save();var n=e.alpha,o=e.worldTransform,r=i.resolution;s.setTransform(o.a*r,o.b*r,o.c*r,o.d*r,o.tx*r,o.ty*r),t.CanvasGraphics.renderGraphicsMask(e,s),s.clip(),e.worldAlpha=n},t.CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},t.CanvasTinter=function(){},t.CanvasTinter.getTintedTexture=function(e,i){var s=e.texture;i=t.CanvasTinter.roundColor(i);var n="#"+("00000"+(0|i).toString(16)).substr(-6);if(s.tintCache=s.tintCache||{},s.tintCache[n])return s.tintCache[n];var o=t.CanvasTinter.canvas||document.createElement("canvas");if(t.CanvasTinter.tintMethod(s,i,o),t.CanvasTinter.convertTintToImage){var r=new Image;r.src=o.toDataURL(),s.tintCache[n]=r}else s.tintCache[n]=o,t.CanvasTinter.canvas=null;return o},t.CanvasTinter.tintWithMultiply=function(e,t,i){var s=i.getContext("2d"),n=e.crop;i.width=n.width,i.height=n.height,s.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),s.fillRect(0,0,n.width,n.height),s.globalCompositeOperation="multiply",s.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),s.globalCompositeOperation="destination-atop",s.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},t.CanvasTinter.tintWithOverlay=function(e,t,i){var s=i.getContext("2d"),n=e.crop;i.width=n.width,i.height=n.height,s.globalCompositeOperation="copy",s.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),s.fillRect(0,0,n.width,n.height),s.globalCompositeOperation="destination-atop",s.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},t.CanvasTinter.tintWithPerPixel=function(e,i,s){var n=s.getContext("2d"),o=e.crop;s.width=o.width,s.height=o.height,n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var r=t.hex2rgb(i),a=r[0],h=r[1],l=r[2],c=n.getImageData(0,0,o.width,o.height),d=c.data,u=0;u<d.length;u+=4)d[u+0]*=a,d[u+1]*=h,d[u+2]*=l;n.putImageData(c,0,0)},t.CanvasTinter.roundColor=function(e){var i=t.CanvasTinter.cacheStepsPerColorChannel,s=t.hex2rgb(e);return s[0]=Math.min(255,s[0]/i*i),s[1]=Math.min(255,s[1]/i*i),s[2]=Math.min(255,s[2]/i*i),t.rgb2hex(s)},t.CanvasTinter.cacheStepsPerColorChannel=8,t.CanvasTinter.convertTintToImage=!1,t.CanvasTinter.canUseMultiply=t.canUseNewCanvasBlendModes(),t.CanvasTinter.tintMethod=t.CanvasTinter.canUseMultiply?t.CanvasTinter.tintWithMultiply:t.CanvasTinter.tintWithPerPixel,t.CanvasRenderer=function(e,i,s){if(s)for(var n in t.defaultRenderOptions)"undefined"==typeof s[n]&&(s[n]=t.defaultRenderOptions[n]);else s=t.defaultRenderOptions;t.defaultRenderer||(t.sayHello("Canvas"),t.defaultRenderer=this),this.type=t.CANVAS_RENDERER,this.resolution=s.resolution,this.clearBeforeRender=s.clearBeforeRender,this.transparent=s.transparent,this.autoResize=s.autoResize||!1,this.width=e||800,this.height=i||600,this.width*=this.resolution,this.height*=this.resolution,this.view=s.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width*this.resolution,this.view.height=this.height*this.resolution,this.count=0,this.maskManager=new t.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null,roundPixels:!1},this.mapBlendModes(),this.resize(e,i),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},t.CanvasRenderer.prototype.constructor=t.CanvasRenderer,t.CanvasRenderer.prototype.render=function(e){e.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=t.blendModes.NORMAL,this.context.globalCompositeOperation=t.blendModesCanvas[t.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=e.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e),e.interactive&&(e._interactiveEventsAdded||(e._interactiveEventsAdded=!0,e.interactionManager.setTarget(this)))},t.CanvasRenderer.prototype.destroy=function(e){"undefined"==typeof e&&(e=!0),e&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},t.CanvasRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},t.CanvasRenderer.prototype.renderDisplayObject=function(e,t){this.renderSession.context=t||this.context,this.renderSession.resolution=this.resolution,e._renderCanvas(this.renderSession)},t.CanvasRenderer.prototype.mapBlendModes=function(){t.blendModesCanvas||(t.blendModesCanvas=[],t.canUseNewCanvasBlendModes()?(t.blendModesCanvas[t.blendModes.NORMAL]="source-over",t.blendModesCanvas[t.blendModes.ADD]="lighter",t.blendModesCanvas[t.blendModes.MULTIPLY]="multiply",t.blendModesCanvas[t.blendModes.SCREEN]="screen",t.blendModesCanvas[t.blendModes.OVERLAY]="overlay",t.blendModesCanvas[t.blendModes.DARKEN]="darken",t.blendModesCanvas[t.blendModes.LIGHTEN]="lighten",t.blendModesCanvas[t.blendModes.COLOR_DODGE]="color-dodge",t.blendModesCanvas[t.blendModes.COLOR_BURN]="color-burn",t.blendModesCanvas[t.blendModes.HARD_LIGHT]="hard-light",t.blendModesCanvas[t.blendModes.SOFT_LIGHT]="soft-light",t.blendModesCanvas[t.blendModes.DIFFERENCE]="difference",t.blendModesCanvas[t.blendModes.EXCLUSION]="exclusion",t.blendModesCanvas[t.blendModes.HUE]="hue",t.blendModesCanvas[t.blendModes.SATURATION]="saturation",t.blendModesCanvas[t.blendModes.COLOR]="color",t.blendModesCanvas[t.blendModes.LUMINOSITY]="luminosity"):(t.blendModesCanvas[t.blendModes.NORMAL]="source-over",t.blendModesCanvas[t.blendModes.ADD]="lighter",t.blendModesCanvas[t.blendModes.MULTIPLY]="source-over",t.blendModesCanvas[t.blendModes.SCREEN]="source-over",t.blendModesCanvas[t.blendModes.OVERLAY]="source-over",t.blendModesCanvas[t.blendModes.DARKEN]="source-over",t.blendModesCanvas[t.blendModes.LIGHTEN]="source-over",t.blendModesCanvas[t.blendModes.COLOR_DODGE]="source-over",t.blendModesCanvas[t.blendModes.COLOR_BURN]="source-over",t.blendModesCanvas[t.blendModes.HARD_LIGHT]="source-over",t.blendModesCanvas[t.blendModes.SOFT_LIGHT]="source-over",t.blendModesCanvas[t.blendModes.DIFFERENCE]="source-over",t.blendModesCanvas[t.blendModes.EXCLUSION]="source-over",t.blendModesCanvas[t.blendModes.HUE]="source-over",t.blendModesCanvas[t.blendModes.SATURATION]="source-over",t.blendModesCanvas[t.blendModes.COLOR]="source-over",t.blendModesCanvas[t.blendModes.LUMINOSITY]="source-over"))},t.CanvasGraphics=function(){},t.CanvasGraphics.renderGraphics=function(e,i){var s=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var n=0;n<e.graphicsData.length;n++){var o=e.graphicsData[n],r=o.shape,a=o._fillTint,h=o._lineTint;if(i.lineWidth=o.lineWidth,o.type===t.Graphics.POLY){i.beginPath();var l=r.points;i.moveTo(l[0],l[1]);for(var c=1;c<l.length/2;c++)i.lineTo(l[2*c],l[2*c+1]);r.closed&&i.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&i.closePath(),o.fill&&(i.globalAlpha=o.fillAlpha*s,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fill()),o.lineWidth&&(i.globalAlpha=o.lineAlpha*s,i.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.stroke())}else if(o.type===t.Graphics.RECT)(o.fillColor||0===o.fillColor)&&(i.globalAlpha=o.fillAlpha*s,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fillRect(r.x,r.y,r.width,r.height)),o.lineWidth&&(i.globalAlpha=o.lineAlpha*s,i.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.strokeRect(r.x,r.y,r.width,r.height));else if(o.type===t.Graphics.CIRC)i.beginPath(),i.arc(r.x,r.y,r.radius,0,2*Math.PI),i.closePath(),o.fill&&(i.globalAlpha=o.fillAlpha*s,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fill()),o.lineWidth&&(i.globalAlpha=o.lineAlpha*s,i.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.stroke());else if(o.type===t.Graphics.ELIP){var d=2*r.width,u=2*r.height,g=r.x-d/2,p=r.y-u/2;i.beginPath();var m=.5522848,_=d/2*m,f=u/2*m,v=g+d,E=p+u,y=g+d/2,T=p+u/2;
i.moveTo(g,T),i.bezierCurveTo(g,T-f,y-_,p,y,p),i.bezierCurveTo(y+_,p,v,T-f,v,T),i.bezierCurveTo(v,T+f,y+_,E,y,E),i.bezierCurveTo(y-_,E,g,T+f,g,T),i.closePath(),o.fill&&(i.globalAlpha=o.fillAlpha*s,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fill()),o.lineWidth&&(i.globalAlpha=o.lineAlpha*s,i.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.stroke())}else if(o.type===t.Graphics.RREC){var S=r.x,C=r.y,w=r.width,b=r.height,A=r.radius,L=Math.min(w,b)/2|0;A=A>L?L:A,i.beginPath(),i.moveTo(S,C+A),i.lineTo(S,C+b-A),i.quadraticCurveTo(S,C+b,S+A,C+b),i.lineTo(S+w-A,C+b),i.quadraticCurveTo(S+w,C+b,S+w,C+b-A),i.lineTo(S+w,C+A),i.quadraticCurveTo(S+w,C,S+w-A,C),i.lineTo(S+A,C),i.quadraticCurveTo(S,C,S,C+A),i.closePath(),(o.fillColor||0===o.fillColor)&&(i.globalAlpha=o.fillAlpha*s,i.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),i.fill()),o.lineWidth&&(i.globalAlpha=o.lineAlpha*s,i.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),i.stroke())}}},t.CanvasGraphics.renderGraphicsMask=function(e,i){var s=e.graphicsData.length;if(0!==s){s>1&&(s=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var n=0;1>n;n++){var o=e.graphicsData[n],r=o.shape;if(o.type===t.Graphics.POLY){i.beginPath();var a=r.points;i.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)i.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&i.closePath()}else if(o.type===t.Graphics.RECT)i.beginPath(),i.rect(r.x,r.y,r.width,r.height),i.closePath();else if(o.type===t.Graphics.CIRC)i.beginPath(),i.arc(r.x,r.y,r.radius,0,2*Math.PI),i.closePath();else if(o.type===t.Graphics.ELIP){var l=2*r.width,c=2*r.height,d=r.x-l/2,u=r.y-c/2;i.beginPath();var g=.5522848,p=l/2*g,m=c/2*g,_=d+l,f=u+c,v=d+l/2,E=u+c/2;i.moveTo(d,E),i.bezierCurveTo(d,E-m,v-p,u,v,u),i.bezierCurveTo(v+p,u,_,E-m,_,E),i.bezierCurveTo(_,E+m,v+p,f,v,f),i.bezierCurveTo(v-p,f,d,E+m,d,E),i.closePath()}else if(o.type===t.Graphics.RREC){var y=r.points,T=y[0],S=y[1],C=y[2],w=y[3],b=y[4],A=Math.min(C,w)/2|0;b=b>A?A:b,i.beginPath(),i.moveTo(T,S+b),i.lineTo(T,S+w-b),i.quadraticCurveTo(T,S+w,T+b,S+w),i.lineTo(T+C-b,S+w),i.quadraticCurveTo(T+C,S+w,T+C,S+w-b),i.lineTo(T+C,S+b),i.quadraticCurveTo(T+C,S,T+C-b,S),i.lineTo(T+b,S),i.quadraticCurveTo(T,S,T,S+b),i.closePath()}}}},t.CanvasGraphics.updateGraphicsTint=function(e){if(16777215!==e.tint)for(var t=(e.tint>>16&255)/255,i=(e.tint>>8&255)/255,s=(255&e.tint)/255,n=0;n<e.graphicsData.length;n++){var o=e.graphicsData[n],r=0|o.fillColor,a=0|o.lineColor;o._fillTint=((r>>16&255)/255*t*255<<16)+((r>>8&255)/255*i*255<<8)+(255&r)/255*s*255,o._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*s*255}},t.Graphics=function(){t.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=t.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new t.Rectangle(0,0,1,1),this.dirty=!0,this.webGLDirty=!1,this.cachedSpriteDirty=!1},t.Graphics.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Graphics.prototype.constructor=t.Graphics,Object.defineProperty(t.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),t.Graphics.prototype.lineStyle=function(e,i,s){if(this.lineWidth=e||0,this.lineColor=i||0,this.lineAlpha=arguments.length<3?1:s,this.currentPath){if(this.currentPath.shape.points.length)return this.drawShape(new t.Polygon(this.currentPath.shape.points.slice(-2))),this;this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha}return this},t.Graphics.prototype.moveTo=function(e,i){return this.drawShape(new t.Polygon([e,i])),this},t.Graphics.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty=!0,this},t.Graphics.prototype.quadraticCurveTo=function(e,t,i,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n,o,r=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],l=a[a.length-1],c=0,d=1;r>=d;d++)c=d/r,n=h+(e-h)*c,o=l+(t-l)*c,a.push(n+(e+(i-e)*c-n)*c,o+(t+(s-t)*c-o)*c);return this.dirty=!0,this},t.Graphics.prototype.bezierCurveTo=function(e,t,i,s,n,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var r,a,h,l,c,d=20,u=this.currentPath.shape.points,g=u[u.length-2],p=u[u.length-1],m=0,_=1;d>=_;_++)m=_/d,r=1-m,a=r*r,h=a*r,l=m*m,c=l*m,u.push(h*g+3*a*m*e+3*r*l*i+c*n,h*p+3*a*m*t+3*r*l*s+c*o);return this.dirty=!0,this},t.Graphics.prototype.arcTo=function(e,t,i,s,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,r=o[o.length-2],a=o[o.length-1],h=a-t,l=r-e,c=s-t,d=i-e,u=Math.abs(h*d-l*c);if(1e-8>u||0===n)(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t);else{var g=h*h+l*l,p=c*c+d*d,m=h*c+l*d,_=n*Math.sqrt(g)/u,f=n*Math.sqrt(p)/u,v=_*m/g,E=f*m/p,y=_*d+f*l,T=_*c+f*h,S=l*(f+v),C=h*(f+v),w=d*(_+E),b=c*(_+E),A=Math.atan2(C-T,S-y),L=Math.atan2(b-T,w-y);this.arc(y+e,T+t,n,A,L,l*c>d*h)}return this.dirty=!0,this},t.Graphics.prototype.arc=function(e,t,i,s,n,o){var r,a=e+Math.cos(s)*i,h=t+Math.sin(s)*i;if(this.currentPath?(r=this.currentPath.shape.points,0===r.length?r.push(a,h):(r[r.length-2]!==a||r[r.length-1]!==h)&&r.push(a,h)):(this.moveTo(a,h),r=this.currentPath.shape.points),s===n)return this;!o&&s>=n?n+=2*Math.PI:o&&n>=s&&(s+=2*Math.PI);var l=o?-1*(s-n):n-s,c=Math.abs(l)/(2*Math.PI)*40;if(0===l)return this;for(var d=l/(2*c),u=2*d,g=Math.cos(d),p=Math.sin(d),m=c-1,_=m%1/m,f=0;m>=f;f++){var v=f+_*f,E=d+s+u*v,y=Math.cos(E),T=-Math.sin(E);r.push((g*y+p*T)*i+e,(g*-T+p*y)*i+t)}return this.dirty=!0,this},t.Graphics.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.Graphics.prototype.drawRect=function(e,i,s,n){return this.drawShape(new t.Rectangle(e,i,s,n)),this},t.Graphics.prototype.drawRoundedRect=function(e,i,s,n,o){return this.drawShape(new t.RoundedRectangle(e,i,s,n,o)),this},t.Graphics.prototype.drawCircle=function(e,i,s){return this.drawShape(new t.Circle(e,i,s)),this},t.Graphics.prototype.drawEllipse=function(e,i,s,n){return this.drawShape(new t.Ellipse(e,i,s,n)),this},t.Graphics.prototype.drawPolygon=function(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.drawShape(new t.Polygon(e)),this},t.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},t.Graphics.prototype.generateTexture=function(e,i){e=e||1;var s=this.getBounds(),n=new t.CanvasBuffer(s.width*e,s.height*e),o=t.Texture.fromCanvas(n.canvas,i);return o.baseTexture.resolution=e,n.context.scale(e,e),n.context.translate(-s.x,-s.y),t.CanvasGraphics.renderGraphics(this,n.context),o},t.Graphics.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void t.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);if(e.spriteBatch.stop(),e.blendModeManager.setBlendMode(this.blendMode),this._mask&&e.maskManager.pushMask(this._mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock),this.blendMode!==e.spriteBatch.currentBlendMode){e.spriteBatch.currentBlendMode=this.blendMode;var i=t.blendModesWebGL[e.spriteBatch.currentBlendMode];e.spriteBatch.gl.blendFunc(i[0],i[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),t.WebGLGraphics.renderGraphics(this,e),this.children.length){e.spriteBatch.start();for(var s=0,n=this.children.length;n>s;s++)this.children[s]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this.mask,e),e.drawCount++,e.spriteBatch.start()}},t.Graphics.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void t.Sprite.prototype._renderCanvas.call(this._cachedSprite,e);var i=e.context,s=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,i.globalCompositeOperation=t.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e);var n=e.resolution;i.setTransform(s.a*n,s.b*n,s.c*n,s.d*n,s.tx*n,s.ty*n),t.CanvasGraphics.renderGraphics(this,i);for(var o=0,r=this.children.length;r>o;o++)this.children[o]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.Graphics.prototype.getBounds=function(e){if(this.isMask)return t.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var i=this._localBounds,s=i.x,n=i.width+i.x,o=i.y,r=i.height+i.y,a=e||this.worldTransform,h=a.a,l=a.b,c=a.c,d=a.d,u=a.tx,g=a.ty,p=h*n+c*r+u,m=d*r+l*n+g,_=h*s+c*r+u,f=d*r+l*s+g,v=h*s+c*o+u,E=d*o+l*s+g,y=h*n+c*o+u,T=d*o+l*n+g,S=p,C=m,w=p,b=m;return w=w>_?_:w,w=w>v?v:w,w=w>y?y:w,b=b>f?f:b,b=b>E?E:b,b=b>T?T:b,S=_>S?_:S,S=v>S?v:S,S=y>S?y:S,C=f>C?f:C,C=E>C?E:C,C=T>C?T:C,this._bounds.x=w,this._bounds.width=S-w,this._bounds.y=b,this._bounds.height=C-b,this._bounds},t.Graphics.prototype.updateLocalBounds=function(){var e=1/0,i=-1/0,s=1/0,n=-1/0;if(this.graphicsData.length)for(var o,r,a,h,l,c,d=0;d<this.graphicsData.length;d++){var u=this.graphicsData[d],g=u.type,p=u.lineWidth;if(o=u.shape,g===t.Graphics.RECT||g===t.Graphics.RREC)a=o.x-p/2,h=o.y-p/2,l=o.width+p,c=o.height+p,e=e>a?a:e,i=a+l>i?a+l:i,s=s>h?h:s,n=h+c>n?h+c:n;else if(g===t.Graphics.CIRC)a=o.x,h=o.y,l=o.radius+p/2,c=o.radius+p/2,e=e>a-l?a-l:e,i=a+l>i?a+l:i,s=s>h-c?h-c:s,n=h+c>n?h+c:n;else if(g===t.Graphics.ELIP)a=o.x,h=o.y,l=o.width+p/2,c=o.height+p/2,e=e>a-l?a-l:e,i=a+l>i?a+l:i,s=s>h-c?h-c:s,n=h+c>n?h+c:n;else{r=o.points;for(var m=0;m<r.length;m+=2)a=r[m],h=r[m+1],e=e>a-p?a-p:e,i=a+p>i?a+p:i,s=s>h-p?h-p:s,n=h+p>n?h+p:n}}else e=0,i=0,s=0,n=0;var _=this.boundsPadding;this._localBounds.x=e-_,this._localBounds.width=i-e+2*_,this._localBounds.y=s-_,this._localBounds.height=n-s+2*_},t.Graphics.prototype._generateCachedSprite=function(){var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(e.width,e.height);else{var i=new t.CanvasBuffer(e.width,e.height),s=t.Texture.fromCanvas(i.canvas);this._cachedSprite=new t.Sprite(s),this._cachedSprite.buffer=i,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,t.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},t.Graphics.prototype.updateCachedSpriteTexture=function(){var e=this._cachedSprite,t=e.texture,i=e.buffer.canvas;t.baseTexture.width=i.width,t.baseTexture.height=i.height,t.crop.width=t.frame.width=i.width,t.crop.height=t.frame.height=i.height,e._width=i.width,e._height=i.height,t.baseTexture.dirty()},t.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},t.Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var i=new t.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(i),i.type===t.Graphics.POLY&&(i.shape.closed=this.filling,this.currentPath=i),this.dirty=!0,i},t.GraphicsData=function(e,t,i,s,n,o,r){this.lineWidth=e,this.lineColor=t,this.lineAlpha=i,this._lineTint=t,this.fillColor=s,this.fillAlpha=n,this._fillTint=s,this.fill=o,this.shape=r,this.type=r.type},t.Graphics.POLY=0,t.Graphics.RECT=1,t.Graphics.CIRC=2,t.Graphics.ELIP=3,t.Graphics.RREC=4,t.Polygon.prototype.type=t.Graphics.POLY,t.Rectangle.prototype.type=t.Graphics.RECT,t.Circle.prototype.type=t.Graphics.CIRC,t.Ellipse.prototype.type=t.Graphics.ELIP,t.RoundedRectangle.prototype.type=t.Graphics.RREC,t.Strip=function(e){t.DisplayObjectContainer.call(this),this.texture=e,this.uvs=new t.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new t.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new t.Float32Array([1,1,1,1]),this.indices=new t.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=t.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=t.Strip.DrawModes.TRIANGLE_STRIP},t.Strip.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Strip.prototype.constructor=t.Strip,t.Strip.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||(e.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(e),e.shaderManager.setShader(e.shaderManager.stripShader),this._renderStrip(e),e.spriteBatch.start())},t.Strip.prototype._initWebGL=function(e){var t=e.gl;this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._uvBuffer=t.createBuffer(),this._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},t.Strip.prototype._renderStrip=function(e){var i=e.gl,s=e.projection,n=e.offset,o=e.shaderManager.stripShader,r=this.drawMode===t.Strip.DrawModes.TRIANGLE_STRIP?i.TRIANGLE_STRIP:i.TRIANGLES;e.blendModeManager.setBlendMode(this.blendMode),i.uniformMatrix3fv(o.translationMatrix,!1,this.worldTransform.toArray(!0)),i.uniform2f(o.projectionVector,s.x,-s.y),i.uniform2f(o.offsetVector,-n.x,-n.y),i.uniform1f(o.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,this.vertices,i.STATIC_DRAW),i.vertexAttribPointer(o.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._uvBuffer),i.bufferData(i.ARRAY_BUFFER,this.uvs,i.STATIC_DRAW),i.vertexAttribPointer(o.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),this.texture.baseTexture._dirty[i.id]?e.renderer.updateTexture(this.texture.baseTexture):i.bindTexture(i.TEXTURE_2D,this.texture.baseTexture._glTextures[i.id]),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,this.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,this._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.vertices),i.vertexAttribPointer(o.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,this._uvBuffer),i.vertexAttribPointer(o.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),this.texture.baseTexture._dirty[i.id]?e.renderer.updateTexture(this.texture.baseTexture):i.bindTexture(i.TEXTURE_2D,this.texture.baseTexture._glTextures[i.id]),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),i.drawElements(r,this.indices.length,i.UNSIGNED_SHORT,0)},t.Strip.prototype._renderCanvas=function(e){var i=e.context,s=this.worldTransform;e.roundPixels?i.setTransform(s.a,s.b,s.c,s.d,0|s.tx,0|s.ty):i.setTransform(s.a,s.b,s.c,s.d,s.tx,s.ty),this.drawMode===t.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(i):this._renderCanvasTriangles(i)},t.Strip.prototype._renderCanvasTriangleStrip=function(e){var t=this.vertices,i=this.uvs,s=t.length/2;this.count++;for(var n=0;s-2>n;n++){var o=2*n;this._renderCanvasDrawTriangle(e,t,i,o,o+2,o+4)}},t.Strip.prototype._renderCanvasTriangles=function(e){var t=this.vertices,i=this.uvs,s=this.indices,n=s.length;this.count++;for(var o=0;n>o;o+=3){var r=2*s[o],a=2*s[o+1],h=2*s[o+2];this._renderCanvasDrawTriangle(e,t,i,r,a,h)}},t.Strip.prototype._renderCanvasDrawTriangle=function(e,t,i,s,n,o){var r=this.texture.baseTexture.source,a=this.texture.width,h=this.texture.height,l=t[s],c=t[n],d=t[o],u=t[s+1],g=t[n+1],p=t[o+1],m=i[s]*a,_=i[n]*a,f=i[o]*a,v=i[s+1]*h,E=i[n+1]*h,y=i[o+1]*h;if(this.canvasPadding>0){var T=this.canvasPadding/this.worldTransform.a,S=this.canvasPadding/this.worldTransform.d,C=(l+c+d)/3,w=(u+g+p)/3,b=l-C,A=u-w,L=Math.sqrt(b*b+A*A);l=C+b/L*(L+T),u=w+A/L*(L+S),b=c-C,A=g-w,L=Math.sqrt(b*b+A*A),c=C+b/L*(L+T),g=w+A/L*(L+S),b=d-C,A=p-w,L=Math.sqrt(b*b+A*A),d=C+b/L*(L+T),p=w+A/L*(L+S)}e.save(),e.beginPath(),e.moveTo(l,u),e.lineTo(c,g),e.lineTo(d,p),e.closePath(),e.clip();var x=m*E+v*f+_*y-E*f-v*_-m*y,M=l*E+v*d+c*y-E*d-v*c-l*y,I=m*c+l*f+_*d-c*f-l*_-m*d,O=m*E*d+v*c*f+l*_*y-l*E*f-v*_*d-m*c*y,R=u*E+v*p+g*y-E*p-v*g-u*y,N=m*g+u*f+_*p-g*f-u*_-m*p,P=m*E*p+v*g*f+u*_*y-u*E*f-v*_*p-m*g*y;e.transform(M/x,R/x,I/x,N/x,O/x,P/x),e.drawImage(r,0,0),e.restore()},t.Strip.prototype.renderStripFlat=function(e){var t=this.context,i=e.vertices,s=i.length/2;this.count++,t.beginPath();for(var n=1;s-2>n;n++){var o=2*n,r=i[o],a=i[o+2],h=i[o+4],l=i[o+1],c=i[o+3],d=i[o+5];t.moveTo(r,l),t.lineTo(a,c),t.lineTo(h,d)}t.fillStyle="#FF0000",t.fill(),t.closePath()},t.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},t.Strip.prototype.getBounds=function(e){for(var i=e||this.worldTransform,s=i.a,n=i.b,o=i.c,r=i.d,a=i.tx,h=i.ty,l=-1/0,c=-1/0,d=1/0,u=1/0,g=this.vertices,p=0,m=g.length;m>p;p+=2){var _=g[p],f=g[p+1],v=s*_+o*f+a,E=r*f+n*_+h;d=d>v?v:d,u=u>E?E:u,l=v>l?v:l,c=E>c?E:c}if(d===-1/0||1/0===c)return t.EmptyRectangle;var y=this._bounds;return y.x=d,y.width=l-d,y.y=u,y.height=c-u,this._currentBounds=y,y},t.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},t.Rope=function(e,i){t.Strip.call(this,e),this.points=i,this.vertices=new t.Float32Array(4*i.length),this.uvs=new t.Float32Array(4*i.length),this.colors=new t.Float32Array(2*i.length),this.indices=new t.Uint16Array(2*i.length),this.refresh()},t.Rope.prototype=Object.create(t.Strip.prototype),t.Rope.prototype.constructor=t.Rope,t.Rope.prototype.refresh=function(){var e=this.points;if(!(e.length<1)){var t=this.uvs,i=e[0],s=this.indices,n=this.colors;this.count-=.2,t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,s[0]=0,s[1]=1;for(var o,r,a,h=e.length,l=1;h>l;l++)o=e[l],r=4*l,a=l/(h-1),l%2?(t[r]=a,t[r+1]=0,t[r+2]=a,t[r+3]=1):(t[r]=a,t[r+1]=0,t[r+2]=a,t[r+3]=1),r=2*l,n[r]=1,n[r+1]=1,r=2*l,s[r]=r,s[r+1]=r+1,i=o}},t.Rope.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){var i,s=e[0],n={x:0,y:0};this.count-=.2;for(var o,r,a,h,l,c=this.vertices,d=e.length,u=0;d>u;u++)o=e[u],r=4*u,i=u<e.length-1?e[u+1]:o,n.y=-(i.x-s.x),n.x=i.y-s.y,a=10*(1-u/(d-1)),a>1&&(a=1),h=Math.sqrt(n.x*n.x+n.y*n.y),l=this.texture.height/2,n.x/=h,n.y/=h,n.x*=l,n.y*=l,c[r]=o.x+n.x,c[r+1]=o.y+n.y,c[r+2]=o.x-n.x,c[r+3]=o.y-n.y,s=o;t.DisplayObjectContainer.prototype.updateTransform.call(this)}},t.Rope.prototype.setTexture=function(e){this.texture=e},t.TilingSprite=function(e,i,s){t.Sprite.call(this,e),this._width=i||100,this._height=s||100,this.tileScale=new t.Point(1,1),this.tileScaleOffset=new t.Point(1,1),this.tilePosition=new t.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=t.blendModes.NORMAL},t.TilingSprite.prototype=Object.create(t.Sprite.prototype),t.TilingSprite.prototype.constructor=t.TilingSprite,Object.defineProperty(t.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(t.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),t.TilingSprite.prototype.setTexture=function(e){this.texture!==e&&(this.texture=e,this.refreshTexture=!0,this.cachedTint=16777215)},t.TilingSprite.prototype._renderWebGL=function(e){if(this.visible!==!1&&0!==this.alpha){var t,i;for(this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(e.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)):e.spriteBatch.renderTilingSprite(this),t=0,i=this.children.length;i>t;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this._mask,e),e.spriteBatch.start()}},t.TilingSprite.prototype._renderCanvas=function(e){if(this.visible!==!1&&0!==this.alpha){var i=e.context;this._mask&&e.maskManager.pushMask(this._mask,e),i.globalAlpha=this.worldAlpha;var s,n,o=this.worldTransform,r=e.resolution;if(i.setTransform(o.a*r,o.b*r,o.c*r,o.d*r,o.tx*r,o.ty*r),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=i.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,i.globalCompositeOperation=t.blendModesCanvas[e.currentBlendMode]);var a=this.tilePosition,h=this.tileScale;for(a.x%=this.tilingTexture.baseTexture.width,a.y%=this.tilingTexture.baseTexture.height,i.scale(h.x,h.y),i.translate(a.x+this.anchor.x*-this._width,a.y+this.anchor.y*-this._height),i.fillStyle=this.__tilePattern,i.fillRect(-a.x,-a.y,this._width/h.x,this._height/h.y),i.scale(1/h.x,1/h.y),i.translate(-a.x+this.anchor.x*this._width,-a.y+this.anchor.y*this._height),this._mask&&e.maskManager.popMask(e),s=0,n=this.children.length;n>s;s++)this.children[s]._renderCanvas(e)}},t.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,i=e*(1-this.anchor.x),s=e*-this.anchor.x,n=t*(1-this.anchor.y),o=t*-this.anchor.y,r=this.worldTransform,a=r.a,h=r.b,l=r.c,c=r.d,d=r.tx,u=r.ty,g=a*s+l*o+d,p=c*o+h*s+u,m=a*i+l*o+d,_=c*o+h*i+u,f=a*i+l*n+d,v=c*n+h*i+u,E=a*s+l*n+d,y=c*n+h*s+u,T=-1/0,S=-1/0,C=1/0,w=1/0;C=C>g?g:C,C=C>m?m:C,C=C>f?f:C,C=C>E?E:C,w=w>p?p:w,w=w>_?_:w,w=w>v?v:w,w=w>y?y:w,T=g>T?g:T,T=m>T?m:T,T=f>T?f:T,T=E>T?E:T,S=p>S?p:S,S=_>S?_:S,S=v>S?v:S,S=y>S?y:S;var b=this._bounds;return b.x=C,b.width=T-C,b.y=w,b.height=S-w,this._currentBounds=b,b},t.TilingSprite.prototype.onTextureUpdate=function(){},t.TilingSprite.prototype.generateTilingTexture=function(e){if(this.texture.baseTexture.hasLoaded){var i,s,n=this.originalTexture||this.texture,o=n.frame,r=o.width!==n.baseTexture.width||o.height!==n.baseTexture.height,a=!1;if(e?(i=t.getNextPowerOfTwo(o.width),s=t.getNextPowerOfTwo(o.height),(o.width!==i||o.height!==s||n.baseTexture.width!==i||n.baseTexture.height||s)&&(a=!0)):r&&(n.trim?(i=n.trim.width,s=n.trim.height):(i=o.width,s=o.height),a=!0),a){var h;this.tilingTexture&&this.tilingTexture.isTiling?(h=this.tilingTexture.canvasBuffer,h.resize(i,s),this.tilingTexture.baseTexture.width=i,this.tilingTexture.baseTexture.height=s,this.tilingTexture.needsUpdate=!0):(h=new t.CanvasBuffer(i,s),this.tilingTexture=t.Texture.fromCanvas(h.canvas),this.tilingTexture.canvasBuffer=h,this.tilingTexture.isTiling=!0),h.context.drawImage(n.baseTexture.source,n.crop.x,n.crop.y,n.crop.width,n.crop.height,0,0,i,s),this.tileScaleOffset.x=o.width/i,this.tileScaleOffset.y=o.height/s}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=n;this.refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}},t.TilingSprite.prototype.destroy=function(){t.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture&&(this.tilingTexture.destroy(!0),this.tilingTexture=null)};var i={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};i.BoneData=function(e,t){this.name=e,this.parent=t},i.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},i.SlotData=function(e,t){this.name=e,this.boneData=t},i.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},i.IkConstraintData=function(e){this.name=e,this.bones=[]},i.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},i.Bone=function(e,t,i){this.data=e,this.skeleton=t,this.parent=i,this.setToSetupPose()},i.Bone.yDown=!1,i.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var e=this.parent;if(e)this.worldX=this.x*e.m00+this.y*e.m01+e.worldX,this.worldY=this.x*e.m10+this.y*e.m11+e.worldY,this.data.inheritScale?(this.worldScaleX=e.worldScaleX*this.scaleX,this.worldScaleY=e.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?e.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=e.worldFlipX!=this.flipX,this.worldFlipY=e.worldFlipY!=this.flipY;else{var t=this.skeleton.flipX,s=this.skeleton.flipY;this.worldX=t?-this.x:this.x,this.worldY=s!=i.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=t!=this.flipX,this.worldFlipY=s!=this.flipY}var n=this.worldRotation*i.degRad,o=Math.cos(n),r=Math.sin(n);this.worldFlipX?(this.m00=-o*this.worldScaleX,this.m01=r*this.worldScaleY):(this.m00=o*this.worldScaleX,this.m01=-r*this.worldScaleY),this.worldFlipY!=i.Bone.yDown?(this.m10=-r*this.worldScaleX,this.m11=-o*this.worldScaleY):(this.m10=r*this.worldScaleX,this.m11=o*this.worldScaleY)},setToSetupPose:function(){var e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.rotationIK=this.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.flipX=e.flipX,this.flipY=e.flipY},worldToLocal:function(e){var t=e[0]-this.worldX,s=e[1]-this.worldY,n=this.m00,o=this.m10,r=this.m01,a=this.m11;this.worldFlipX!=(this.worldFlipY!=i.Bone.yDown)&&(n=-n,a=-a);var h=1/(n*a-r*o);e[0]=t*n*h-s*r*h,e[1]=s*a*h-t*o*h},localToWorld:function(e){var t=e[0],i=e[1];e[0]=t*this.m00+i*this.m01+this.worldX,e[1]=t*this.m10+i*this.m11+this.worldY}},i.Slot=function(e,t){this.data=e,this.bone=t,this.setToSetupPose()},i.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(e){this.attachment=e,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(e){this._attachmentTime=this.bone.skeleton.time-e},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var e=this.data;this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;for(var t=this.bone.skeleton.data.slots,i=0,s=t.length;s>i;i++)if(t[i]==e){this.setAttachment(e.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(i,e.attachmentName):null);break}}},i.IkConstraint=function(e,t){this.data=e,this.mix=e.mix,this.bendDirection=e.bendDirection,this.bones=[];for(var i=0,s=e.bones.length;s>i;i++)this.bones.push(t.findBone(e.bones[i].name));this.target=t.findBone(e.target.name)},i.IkConstraint.prototype={apply:function(){var e=this.target,t=this.bones;switch(t.length){case 1:i.IkConstraint.apply1(t[0],e.worldX,e.worldY,this.mix);break;case 2:i.IkConstraint.apply2(t[0],t[1],e.worldX,e.worldY,this.bendDirection,this.mix)}}},i.IkConstraint.apply1=function(e,t,s,n){var o=e.data.inheritRotation&&e.parent?e.parent.worldRotation:0,r=e.rotation,a=Math.atan2(s-e.worldY,t-e.worldX)*i.radDeg-o;e.rotationIK=r+(a-r)*n},i.IkConstraint.apply2=function(e,t,s,n,o,r){var a=t.rotation,h=e.rotation;if(!r)return t.rotationIK=a,void(e.rotationIK=h);var l,c,d=i.temp,u=e.parent;u?(d[0]=s,d[1]=n,u.worldToLocal(d),s=(d[0]-e.x)*u.worldScaleX,n=(d[1]-e.y)*u.worldScaleY):(s-=e.x,n-=e.y),t.parent==e?(l=t.x,c=t.y):(d[0]=t.x,d[1]=t.y,t.parent.localToWorld(d),e.worldToLocal(d),l=d[0],c=d[1]);var g=l*e.worldScaleX,p=c*e.worldScaleY,m=Math.atan2(p,g),_=Math.sqrt(g*g+p*p),f=t.data.length*t.worldScaleX,v=2*_*f;if(1e-4>v)return void(t.rotationIK=a+(Math.atan2(n,s)*i.radDeg-h-a)*r);var E=(s*s+n*n-_*_-f*f)/v;-1>E?E=-1:E>1&&(E=1);var y=Math.acos(E)*o,T=_+f*E,S=f*Math.sin(y),C=Math.atan2(n*T-s*S,s*T+n*S),w=(C-m)*i.radDeg-h;w>180?w-=360:-180>w&&(w+=360),e.rotationIK=h+w*r,w=(y+m)*i.radDeg-a,w>180?w-=360:-180>w&&(w+=360),t.rotationIK=a+(w+e.worldRotation-t.parent.worldRotation)*r},i.Skin=function(e){this.name=e,this.attachments={}},i.Skin.prototype={addAttachment:function(e,t,i){this.attachments[e+":"+t]=i},getAttachment:function(e,t){return this.attachments[e+":"+t]},_attachAll:function(e,t){for(var i in t.attachments){var s=i.indexOf(":"),n=parseInt(i.substring(0,s)),o=i.substring(s+1),r=e.slots[n];if(r.attachment&&r.attachment.name==o){var a=this.getAttachment(n,o);a&&r.setAttachment(a)}}}},i.Animation=function(e,t,i){this.name=e,this.timelines=t,this.duration=i},i.Animation.prototype={apply:function(e,t,i,s,n){s&&0!=this.duration&&(i%=this.duration,t%=this.duration);for(var o=this.timelines,r=0,a=o.length;a>r;r++)o[r].apply(e,t,i,n,1)},mix:function(e,t,i,s,n,o){s&&0!=this.duration&&(i%=this.duration,t%=this.duration);for(var r=this.timelines,a=0,h=r.length;h>a;a++)r[a].apply(e,t,i,n,o)}},i.Animation.binarySearch=function(e,t,i){var s=0,n=Math.floor(e.length/i)-2;if(!n)return i;for(var o=n>>>1;;){if(e[(o+1)*i]<=t?s=o+1:n=o,s==n)return(s+1)*i;o=s+n>>>1}},i.Animation.binarySearch1=function(e,t){var i=0,s=e.length-2;if(!s)return 1;for(var n=s>>>1;;){if(e[n+1]<=t?i=n+1:s=n,i==s)return i+1;n=i+s>>>1}},i.Animation.linearSearch=function(e,t,i){for(var s=0,n=e.length-i;n>=s;s+=i)if(e[s]>t)return s;return-1},i.Curves=function(){this.curves=[]},i.Curves.prototype={setLinear:function(e){this.curves[19*e]=0},setStepped:function(e){this.curves[19*e]=1},setCurve:function(e,t,i,s,n){var o=.1,r=o*o,a=r*o,h=3*o,l=3*r,c=6*r,d=6*a,u=2*-t+s,g=2*-i+n,p=3*(t-s)+1,m=3*(i-n)+1,_=t*h+u*l+p*a,f=i*h+g*l+m*a,v=u*c+p*d,E=g*c+m*d,y=p*d,T=m*d,S=19*e,C=this.curves;C[S++]=2;for(var w=_,b=f,A=S+19-1;A>S;S+=2)C[S]=w,C[S+1]=b,_+=v,f+=E,v+=y,E+=T,w+=_,b+=f},getCurvePercent:function(e,t){t=0>t?0:t>1?1:t;var i=this.curves,s=19*e,n=i[s];if(0===n)return t;if(1==n)return 0;s++;for(var o=0,r=s,a=s+19-1;a>s;s+=2)if(o=i[s],o>=t){var h,l;return s==r?(h=0,l=0):(h=i[s-2],l=i[s-1]),l+(i[s+1]-l)*(t-h)/(o-h)}var c=i[s-1];return c+(1-c)*(t-o)/(1-o)}},i.RotateTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=2*e},i.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,i){e*=2,this.frames[e]=t,this.frames[e+1]=i},apply:function(e,t,s,n,o){var r=this.frames;if(!(s<r[0])){var a=e.bones[this.boneIndex];if(s>=r[r.length-2]){for(var h=a.data.rotation+r[r.length-1]-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return void(a.rotation+=h*o)}var l=i.Animation.binarySearch(r,s,2),c=r[l-1],d=r[l],u=1-(s-d)/(r[l-2]-d);u=this.curves.getCurvePercent(l/2-1,u);for(var h=r[l+1]-c;h>180;)h-=360;for(;-180>h;)h+=360;for(h=a.data.rotation+(c+h*u)-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;a.rotation+=h*o}}},i.TranslateTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=3*e},i.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3
},setFrame:function(e,t,i,s){e*=3,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s},apply:function(e,t,s,n,o){var r=this.frames;if(!(s<r[0])){var a=e.bones[this.boneIndex];if(s>=r[r.length-3])return a.x+=(a.data.x+r[r.length-2]-a.x)*o,void(a.y+=(a.data.y+r[r.length-1]-a.y)*o);var h=i.Animation.binarySearch(r,s,3),l=r[h-2],c=r[h-1],d=r[h],u=1-(s-d)/(r[h+-3]-d);u=this.curves.getCurvePercent(h/3-1,u),a.x+=(a.data.x+l+(r[h+1]-l)*u-a.x)*o,a.y+=(a.data.y+c+(r[h+2]-c)*u-a.y)*o}}},i.ScaleTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=3*e},i.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,i,s){e*=3,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s},apply:function(e,t,s,n,o){var r=this.frames;if(!(s<r[0])){var a=e.bones[this.boneIndex];if(s>=r[r.length-3])return a.scaleX+=(a.data.scaleX*r[r.length-2]-a.scaleX)*o,void(a.scaleY+=(a.data.scaleY*r[r.length-1]-a.scaleY)*o);var h=i.Animation.binarySearch(r,s,3),l=r[h-2],c=r[h-1],d=r[h],u=1-(s-d)/(r[h+-3]-d);u=this.curves.getCurvePercent(h/3-1,u),a.scaleX+=(a.data.scaleX*(l+(r[h+1]-l)*u)-a.scaleX)*o,a.scaleY+=(a.data.scaleY*(c+(r[h+2]-c)*u)-a.scaleY)*o}}},i.ColorTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=5*e},i.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(e,t,i,s,n,o){e*=5,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s,this.frames[e+3]=n,this.frames[e+4]=o},apply:function(e,t,s,n,o){var r=this.frames;if(!(s<r[0])){var a,h,l,c;if(s>=r[r.length-5]){var d=r.length-1;a=r[d-3],h=r[d-2],l=r[d-1],c=r[d]}else{var u=i.Animation.binarySearch(r,s,5),g=r[u-4],p=r[u-3],m=r[u-2],_=r[u-1],f=r[u],v=1-(s-f)/(r[u-5]-f);v=this.curves.getCurvePercent(u/5-1,v),a=g+(r[u+1]-g)*v,h=p+(r[u+2]-p)*v,l=m+(r[u+3]-m)*v,c=_+(r[u+4]-_)*v}var E=e.slots[this.slotIndex];1>o?(E.r+=(a-E.r)*o,E.g+=(h-E.g)*o,E.b+=(l-E.b)*o,E.a+=(c-E.a)*o):(E.r=a,E.g=h,E.b=l,E.a=c)}}},i.AttachmentTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=e,this.attachmentNames=[],this.attachmentNames.length=e},i.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,i){this.frames[e]=t,this.attachmentNames[e]=i},apply:function(e,t,s){var n=this.frames;if(s<n[0])return void(t>s&&this.apply(e,t,Number.MAX_VALUE,null,0));t>s&&(t=-1);var o=s>=n[n.length-1]?n.length-1:i.Animation.binarySearch1(n,s)-1;if(!(n[o]<t)){var r=this.attachmentNames[o];e.slots[this.slotIndex].setAttachment(r?e.getAttachmentBySlotIndex(this.slotIndex,r):null)}}},i.EventTimeline=function(e){this.frames=[],this.frames.length=e,this.events=[],this.events.length=e},i.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,t,i){this.frames[e]=t,this.events[e]=i},apply:function(e,t,s,n,o){if(n){var r=this.frames,a=r.length;if(t>s)this.apply(e,t,Number.MAX_VALUE,n,o),t=-1;else if(t>=r[a-1])return;if(!(s<r[0])){var h;if(t<r[0])h=0;else{h=i.Animation.binarySearch1(r,t);for(var l=r[h];h>0&&r[h-1]==l;)h--}for(var c=this.events;a>h&&s>=r[h];h++)n.push(c[h])}}}},i.DrawOrderTimeline=function(e){this.frames=[],this.frames.length=e,this.drawOrders=[],this.drawOrders.length=e},i.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(e,t,i){this.frames[e]=t,this.drawOrders[e]=i},apply:function(e,t,s){var n=this.frames;if(!(s<n[0])){var o;o=s>=n[n.length-1]?n.length-1:i.Animation.binarySearch1(n,s)-1;var r=e.drawOrder,a=(e.slots,this.drawOrders[o]);if(a)for(var h=0,l=a.length;l>h;h++)r[h]=a[h]}}},i.FfdTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=e,this.frameVertices=[],this.frameVertices.length=e},i.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(e,t,i){this.frames[e]=t,this.frameVertices[e]=i},apply:function(e,t,s,n,o){var r=e.slots[this.slotIndex];if(r.attachment==this.attachment){var a=this.frames;if(!(s<a[0])){var h=this.frameVertices,l=h[0].length,c=r.attachmentVertices;if(c.length!=l&&(o=1),c.length=l,s>=a[a.length-1]){var d=h[a.length-1];if(1>o)for(var u=0;l>u;u++)c[u]+=(d[u]-c[u])*o;else for(var u=0;l>u;u++)c[u]=d[u]}else{var g=i.Animation.binarySearch1(a,s),p=a[g],m=1-(s-p)/(a[g-1]-p);m=this.curves.getCurvePercent(g-1,0>m?0:m>1?1:m);var _=h[g-1],f=h[g];if(1>o)for(var u=0;l>u;u++){var v=_[u];c[u]+=(v+(f[u]-v)*m-c[u])*o}else for(var u=0;l>u;u++){var v=_[u];c[u]=v+(f[u]-v)*m}}}}}},i.IkConstraintTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=3*e},i.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(e,t,i,s){e*=3,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=s},apply:function(e,t,s,n,o){var r=this.frames;if(!(s<r[0])){var a=e.ikConstraints[this.ikConstraintIndex];if(s>=r[r.length-3])return a.mix+=(r[r.length-2]-a.mix)*o,void(a.bendDirection=r[r.length-1]);var h=i.Animation.binarySearch(r,s,3),l=r[h+-2],c=r[h],d=1-(s-c)/(r[h+-3]-c);d=this.curves.getCurvePercent(h/3-1,d);var u=l+(r[h+1]-l)*d;a.mix+=(u-a.mix)*o,a.bendDirection=r[h+-1]}}},i.FlipXTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=2*e},i.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,i){e*=2,this.frames[e]=t,this.frames[e+1]=i?1:0},apply:function(e,t,s){var n=this.frames;if(s<n[0])return void(t>s&&this.apply(e,t,Number.MAX_VALUE,null,0));t>s&&(t=-1);var o=(s>=n[n.length-2]?n.length:i.Animation.binarySearch(n,s,2))-2;n[o]<t||(e.bones[boneIndex].flipX=0!=n[o+1])}},i.FlipYTimeline=function(e){this.curves=new i.Curves(e),this.frames=[],this.frames.length=2*e},i.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(e,t,i){e*=2,this.frames[e]=t,this.frames[e+1]=i?1:0},apply:function(e,t,s){var n=this.frames;if(s<n[0])return void(t>s&&this.apply(e,t,Number.MAX_VALUE,null,0));t>s&&(t=-1);var o=(s>=n[n.length-2]?n.length:i.Animation.binarySearch(n,s,2))-2;n[o]<t||(e.bones[boneIndex].flipY=0!=n[o+1])}},i.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},i.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(e){for(var t=this.bones,i=0,s=t.length;s>i;i++)if(t[i].name==e)return t[i];return null},findBoneIndex:function(e){for(var t=this.bones,i=0,s=t.length;s>i;i++)if(t[i].name==e)return i;return-1},findSlot:function(e){for(var t=this.slots,i=0,s=t.length;s>i;i++)if(t[i].name==e)return slot[i];return null},findSlotIndex:function(e){for(var t=this.slots,i=0,s=t.length;s>i;i++)if(t[i].name==e)return i;return-1},findSkin:function(e){for(var t=this.skins,i=0,s=t.length;s>i;i++)if(t[i].name==e)return t[i];return null},findEvent:function(e){for(var t=this.events,i=0,s=t.length;s>i;i++)if(t[i].name==e)return t[i];return null},findAnimation:function(e){for(var t=this.animations,i=0,s=t.length;s>i;i++)if(t[i].name==e)return t[i];return null},findIkConstraint:function(e){for(var t=this.ikConstraints,i=0,s=t.length;s>i;i++)if(t[i].name==e)return t[i];return null}},i.Skeleton=function(e){this.data=e,this.bones=[];for(var t=0,s=e.bones.length;s>t;t++){var n=e.bones[t],o=n.parent?this.bones[e.bones.indexOf(n.parent)]:null;this.bones.push(new i.Bone(n,this,o))}this.slots=[],this.drawOrder=[];for(var t=0,s=e.slots.length;s>t;t++){var r=e.slots[t],a=this.bones[e.bones.indexOf(r.boneData)],h=new i.Slot(r,a);this.slots.push(h),this.drawOrder.push(t)}this.ikConstraints=[];for(var t=0,s=e.ikConstraints.length;s>t;t++)this.ikConstraints.push(new i.IkConstraint(e.ikConstraints[t],this));this.boneCache=[],this.updateCache()},i.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var e=this.ikConstraints,t=e.length,i=t+1,s=this.boneCache;s.length>i&&(s.length=i);for(var n=0,o=s.length;o>n;n++)s[n].length=0;for(;s.length<i;)s[s.length]=[];var r=s[0],a=this.bones;e:for(var n=0,o=a.length;o>n;n++){var h=a[n],l=h;do{for(var c=0;t>c;c++)for(var d=e[c],u=d.bones[0],g=d.bones[d.bones.length-1];;){if(l==g){s[c].push(h),s[c+1].push(h);continue e}if(g==u)break;g=g.parent}l=l.parent}while(l);r[r.length]=h}},updateWorldTransform:function(){for(var e=this.bones,t=0,i=e.length;i>t;t++){var s=e[t];s.rotationIK=s.rotation}for(var t=0,n=this.boneCache.length-1;;){for(var o=this.boneCache[t],r=0,a=o.length;a>r;r++)o[r].updateWorldTransform();if(t==n)break;this.ikConstraints[t].apply(),t++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var e=this.bones,t=0,i=e.length;i>t;t++)e[t].setToSetupPose();for(var s=this.ikConstraints,t=0,i=s.length;i>t;t++){var n=s[t];n.bendDirection=n.data.bendDirection,n.mix=n.data.mix}},setSlotsToSetupPose:function(){for(var e=this.slots,t=0,i=e.length;i>t;t++)e[t].setToSetupPose(t);this.resetDrawOrder()},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(e){for(var t=this.bones,i=0,s=t.length;s>i;i++)if(t[i].data.name==e)return t[i];return null},findBoneIndex:function(e){for(var t=this.bones,i=0,s=t.length;s>i;i++)if(t[i].data.name==e)return i;return-1},findSlot:function(e){for(var t=this.slots,i=0,s=t.length;s>i;i++)if(t[i].data.name==e)return t[i];return null},findSlotIndex:function(e){for(var t=this.slots,i=0,s=t.length;s>i;i++)if(t[i].data.name==e)return i;return-1},setSkinByName:function(e){var t=this.data.findSkin(e);if(!t)throw"Skin not found: "+e;this.setSkin(t)},setSkin:function(e){if(e)if(this.skin)e._attachAll(this,this.skin);else for(var t=this.slots,i=0,s=t.length;s>i;i++){var n=t[i],o=n.data.attachmentName;if(o){var r=e.getAttachment(i,o);r&&n.setAttachment(r)}}this.skin=e},getAttachmentBySlotName:function(e,t){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(e),t)},getAttachmentBySlotIndex:function(e,t){if(this.skin){var i=this.skin.getAttachment(e,t);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null},setAttachment:function(e,t){for(var i=this.slots,s=0,n=i.length;n>s;s++){var o=i[s];if(o.data.name==e){var r=null;if(t&&(r=this.getAttachmentBySlotIndex(s,t),!r))throw"Attachment not found: "+t+", for slot: "+e;return void o.setAttachment(r)}}throw"Slot not found: "+e},findIkConstraint:function(e){for(var t=this.ikConstraints,i=0,s=t.length;s>i;i++)if(t[i].data.name==e)return t[i];return null},update:function(e){this.time+=e},resetDrawOrder:function(){for(var e=0,t=this.drawOrder.length;t>e;e++)this.drawOrder[e]=e}},i.EventData=function(e){this.name=e},i.EventData.prototype={intValue:0,floatValue:0,stringValue:null},i.Event=function(e){this.data=e},i.Event.prototype={intValue:0,floatValue:0,stringValue:null},i.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},i.RegionAttachment=function(e){this.name=e,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},i.RegionAttachment.prototype={type:i.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(e,t,i,s,n){var o=this.uvs;n?(o[2]=e,o[3]=s,o[4]=e,o[5]=t,o[6]=i,o[7]=t,o[0]=i,o[1]=s):(o[0]=e,o[1]=s,o[2]=e,o[3]=t,o[4]=i,o[5]=t,o[6]=i,o[7]=s)},updateOffset:function(){var e=this.width/this.regionOriginalWidth*this.scaleX,t=this.height/this.regionOriginalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.regionOffsetX*e,n=-this.height/2*this.scaleY+this.regionOffsetY*t,o=s+this.regionWidth*e,r=n+this.regionHeight*t,a=this.rotation*i.degRad,h=Math.cos(a),l=Math.sin(a),c=s*h+this.x,d=s*l,u=n*h+this.y,g=n*l,p=o*h+this.x,m=o*l,_=r*h+this.y,f=r*l,v=this.offset;v[0]=c-g,v[1]=u+d,v[2]=c-f,v[3]=_+d,v[4]=p-f,v[5]=_+m,v[6]=p-g,v[7]=u+m},computeVertices:function(e,t,i,s){e+=i.worldX,t+=i.worldY;var n=i.m00,o=i.m01,r=i.m10,a=i.m11,h=this.offset;s[0]=h[0]*n+h[1]*o+e,s[1]=h[0]*r+h[1]*a+t,s[2]=h[2]*n+h[3]*o+e,s[3]=h[2]*r+h[3]*a+t,s[4]=h[4]*n+h[5]*o+e,s[5]=h[4]*r+h[5]*a+t,s[6]=h[6]*n+h[7]*o+e,s[7]=h[6]*r+h[7]*a+t}},i.MeshAttachment=function(e){this.name=e},i.MeshAttachment.prototype={type:i.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var e=this.regionU2-this.regionU,t=this.regionV2-this.regionV,s=this.regionUVs.length;if(this.uvs&&this.uvs.length==s||(this.uvs=new i.Float32Array(s)),this.regionRotate)for(var n=0;s>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*e,this.uvs[n+1]=this.regionV+t-this.regionUVs[n]*t;else for(var n=0;s>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*e,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*t},computeWorldVertices:function(e,t,i,s){var n=i.bone;e+=n.worldX,t+=n.worldY;var o=n.m00,r=n.m01,a=n.m10,h=n.m11,l=this.vertices,c=l.length;i.attachmentVertices.length==c&&(l=i.attachmentVertices);for(var d=0;c>d;d+=2){var u=l[d],g=l[d+1];s[d]=u*o+g*r+e,s[d+1]=u*a+g*h+t}}},i.SkinnedMeshAttachment=function(e){this.name=e},i.SkinnedMeshAttachment.prototype={type:i.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var e=this.regionU2-this.regionU,t=this.regionV2-this.regionV,s=this.regionUVs.length;if(this.uvs&&this.uvs.length==s||(this.uvs=new i.Float32Array(s)),this.regionRotate)for(var n=0;s>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*e,this.uvs[n+1]=this.regionV+t-this.regionUVs[n]*t;else for(var n=0;s>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*e,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*t},computeWorldVertices:function(e,t,i,s){var n,o,r,a,h,l,c,d=i.bone.skeleton.bones,u=this.weights,g=this.bones,p=0,m=0,_=0,f=0,v=g.length;if(i.attachmentVertices.length)for(var E=i.attachmentVertices;v>m;p+=2){for(o=0,r=0,n=g[m++]+m;n>m;m++,_+=3,f+=2)a=d[g[m]],h=u[_]+E[f],l=u[_+1]+E[f+1],c=u[_+2],o+=(h*a.m00+l*a.m01+a.worldX)*c,r+=(h*a.m10+l*a.m11+a.worldY)*c;s[p]=o+e,s[p+1]=r+t}else for(;v>m;p+=2){for(o=0,r=0,n=g[m++]+m;n>m;m++,_+=3)a=d[g[m]],h=u[_],l=u[_+1],c=u[_+2],o+=(h*a.m00+l*a.m01+a.worldX)*c,r+=(h*a.m10+l*a.m11+a.worldY)*c;s[p]=o+e,s[p+1]=r+t}}},i.BoundingBoxAttachment=function(e){this.name=e,this.vertices=[]},i.BoundingBoxAttachment.prototype={type:i.AttachmentType.boundingbox,computeWorldVertices:function(e,t,i,s){e+=i.worldX,t+=i.worldY;for(var n=i.m00,o=i.m01,r=i.m10,a=i.m11,h=this.vertices,l=0,c=h.length;c>l;l+=2){var d=h[l],u=h[l+1];s[l]=d*n+u*o+e,s[l+1]=d*r+u*a+t}}},i.AnimationStateData=function(e){this.skeletonData=e,this.animationToMixTime={}},i.AnimationStateData.prototype={defaultMix:0,setMixByName:function(e,t,i){var s=this.skeletonData.findAnimation(e);if(!s)throw"Animation not found: "+e;var n=this.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;this.setMix(s,n,i)},setMix:function(e,t,i){this.animationToMixTime[e.name+":"+t.name]=i},getMix:function(e,t){var i=e.name+":"+t.name;return this.animationToMixTime.hasOwnProperty(i)?this.animationToMixTime[i]:this.defaultMix}},i.TrackEntry=function(){},i.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},i.AnimationState=function(e){this.data=e,this.tracks=[],this.events=[]},i.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(e){e*=this.timeScale;for(var t=0;t<this.tracks.length;t++){var i=this.tracks[t];if(i){if(i.time+=e*i.timeScale,i.previous){var s=e*i.previous.timeScale;i.previous.time+=s,i.mixTime+=s}var n=i.next;n?(n.time=i.lastTime-n.delay,n.time>=0&&this.setCurrent(t,n)):!i.loop&&i.lastTime>=i.endTime&&this.clearTrack(t)}}},apply:function(e){e.resetDrawOrder();for(var t=0;t<this.tracks.length;t++){var i=this.tracks[t];if(i){this.events.length=0;var s=i.time,n=i.lastTime,o=i.endTime,r=i.loop;!r&&s>o&&(s=o);var a=i.previous;if(a){var h=a.time;!a.loop&&h>a.endTime&&(h=a.endTime),a.animation.apply(e,h,h,a.loop,null);var l=i.mixTime/i.mixDuration*i.mix;l>=1&&(l=1,i.previous=null),i.animation.mix(e,i.lastTime,s,r,this.events,l)}else 1==i.mix?i.animation.apply(e,i.lastTime,s,r,this.events):i.animation.mix(e,i.lastTime,s,r,this.events,i.mix);for(var c=0,d=this.events.length;d>c;c++){var u=this.events[c];i.onEvent&&i.onEvent(t,u),this.onEvent&&this.onEvent(t,u)}if(r?n%o>s%o:o>n&&s>=o){var g=Math.floor(s/o);i.onComplete&&i.onComplete(t,g),this.onComplete&&this.onComplete(t,g)}i.lastTime=i.time}}},clearTracks:function(){for(var e=0,t=this.tracks.length;t>e;e++)this.clearTrack(e);this.tracks.length=0},clearTrack:function(e){if(!(e>=this.tracks.length)){var t=this.tracks[e];t&&(t.onEnd&&t.onEnd(e),this.onEnd&&this.onEnd(e),this.tracks[e]=null)}},_expandToIndex:function(e){if(e<this.tracks.length)return this.tracks[e];for(;e>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(e,t){var i=this._expandToIndex(e);if(i){var s=i.previous;i.previous=null,i.onEnd&&i.onEnd(e),this.onEnd&&this.onEnd(e),t.mixDuration=this.data.getMix(i.animation,t.animation),t.mixDuration>0&&(t.mixTime=0,t.previous=s&&i.mixTime/i.mixDuration<.5?s:i)}this.tracks[e]=t,t.onStart&&t.onStart(e),this.onStart&&this.onStart(e)},setAnimationByName:function(e,t,i){var s=this.data.skeletonData.findAnimation(t);if(!s)throw"Animation not found: "+t;return this.setAnimation(e,s,i)},setAnimation:function(e,t,s){var n=new i.TrackEntry;return n.animation=t,n.loop=s,n.endTime=t.duration,this.setCurrent(e,n),n},addAnimationByName:function(e,t,i,s){var n=this.data.skeletonData.findAnimation(t);if(!n)throw"Animation not found: "+t;return this.addAnimation(e,n,i,s)},addAnimation:function(e,t,s,n){var o=new i.TrackEntry;o.animation=t,o.loop=s,o.endTime=t.duration;var r=this._expandToIndex(e);if(r){for(;r.next;)r=r.next;r.next=o}else this.tracks[e]=o;return 0>=n&&(r?n+=r.endTime-this.data.getMix(r.animation,t):n=0),o.delay=n,o},getCurrent:function(e){return e>=this.tracks.length?null:this.tracks[e]}},i.SkeletonJson=function(e){this.attachmentLoader=e},i.SkeletonJson.prototype={scale:1,readSkeletonData:function(e,t){var s=new i.SkeletonData;s.name=t;var n=e.skeleton;n&&(s.hash=n.hash,s.version=n.spine,s.width=n.width||0,s.height=n.height||0);for(var o=e.bones,r=0,a=o.length;a>r;r++){var h=o[r],l=null;if(h.parent&&(l=s.findBone(h.parent),!l))throw"Parent bone not found: "+h.parent;var c=new i.BoneData(h.name,l);c.length=(h.length||0)*this.scale,c.x=(h.x||0)*this.scale,c.y=(h.y||0)*this.scale,c.rotation=h.rotation||0,c.scaleX=h.hasOwnProperty("scaleX")?h.scaleX:1,c.scaleY=h.hasOwnProperty("scaleY")?h.scaleY:1,c.inheritScale=h.hasOwnProperty("inheritScale")?h.inheritScale:!0,c.inheritRotation=h.hasOwnProperty("inheritRotation")?h.inheritRotation:!0,s.bones.push(c)}var d=e.ik;if(d)for(var r=0,a=d.length;a>r;r++){for(var u=d[r],g=new i.IkConstraintData(u.name),o=u.bones,p=0,m=o.length;m>p;p++){var _=s.findBone(o[p]);if(!_)throw"IK bone not found: "+o[p];g.bones.push(_)}if(g.target=s.findBone(u.target),!g.target)throw"Target bone not found: "+u.target;g.bendDirection=!u.hasOwnProperty("bendPositive")||u.bendPositive?1:-1,g.mix=u.hasOwnProperty("mix")?u.mix:1,s.ikConstraints.push(g)}for(var f=e.slots,r=0,a=f.length;a>r;r++){var v=f[r],c=s.findBone(v.bone);if(!c)throw"Slot bone not found: "+v.bone;var E=new i.SlotData(v.name,c),y=v.color;y&&(E.r=this.toColor(y,0),E.g=this.toColor(y,1),E.b=this.toColor(y,2),E.a=this.toColor(y,3)),E.attachmentName=v.attachment,E.additiveBlending=v.additive&&"true"==v.additive,s.slots.push(E)}var T=e.skins;for(var S in T)if(T.hasOwnProperty(S)){var C=T[S],w=new i.Skin(S);for(var b in C)if(C.hasOwnProperty(b)){var A=s.findSlotIndex(b),L=C[b];for(var x in L)if(L.hasOwnProperty(x)){var M=this.readAttachment(w,x,L[x]);M&&w.addAttachment(A,x,M)}}s.skins.push(w),"default"==w.name&&(s.defaultSkin=w)}var I=e.events;for(var O in I)if(I.hasOwnProperty(O)){var R=I[O],N=new i.EventData(O);N.intValue=R["int"]||0,N.floatValue=R["float"]||0,N.stringValue=R.string||null,s.events.push(N)}var P=e.animations;for(var D in P)P.hasOwnProperty(D)&&this.readAnimation(D,P[D],s);return s},readAttachment:function(e,t,s){t=s.name||t;var n=i.AttachmentType[s.type||"region"],o=s.path||t,r=this.scale;if(n==i.AttachmentType.region){var a=this.attachmentLoader.newRegionAttachment(e,t,o);if(!a)return null;a.path=o,a.x=(s.x||0)*r,a.y=(s.y||0)*r,a.scaleX=s.hasOwnProperty("scaleX")?s.scaleX:1,a.scaleY=s.hasOwnProperty("scaleY")?s.scaleY:1,a.rotation=s.rotation||0,a.width=(s.width||0)*r,a.height=(s.height||0)*r;var h=s.color;return h&&(a.r=this.toColor(h,0),a.g=this.toColor(h,1),a.b=this.toColor(h,2),a.a=this.toColor(h,3)),a.updateOffset(),a}if(n==i.AttachmentType.mesh){var l=this.attachmentLoader.newMeshAttachment(e,t,o);return l?(l.path=o,l.vertices=this.getFloatArray(s,"vertices",r),l.triangles=this.getIntArray(s,"triangles"),l.regionUVs=this.getFloatArray(s,"uvs",1),l.updateUVs(),h=s.color,h&&(l.r=this.toColor(h,0),l.g=this.toColor(h,1),l.b=this.toColor(h,2),l.a=this.toColor(h,3)),l.hullLength=2*(s.hull||0),s.edges&&(l.edges=this.getIntArray(s,"edges")),l.width=(s.width||0)*r,l.height=(s.height||0)*r,l):null}if(n==i.AttachmentType.skinnedmesh){var l=this.attachmentLoader.newSkinnedMeshAttachment(e,t,o);if(!l)return null;l.path=o;for(var c=this.getFloatArray(s,"uvs",1),d=this.getFloatArray(s,"vertices",1),u=[],g=[],p=0,m=d.length;m>p;){var _=0|d[p++];g[g.length]=_;for(var f=p+4*_;f>p;)g[g.length]=d[p],u[u.length]=d[p+1]*r,u[u.length]=d[p+2]*r,u[u.length]=d[p+3],p+=4}return l.bones=g,l.weights=u,l.triangles=this.getIntArray(s,"triangles"),l.regionUVs=c,l.updateUVs(),h=s.color,h&&(l.r=this.toColor(h,0),l.g=this.toColor(h,1),l.b=this.toColor(h,2),l.a=this.toColor(h,3)),l.hullLength=2*(s.hull||0),s.edges&&(l.edges=this.getIntArray(s,"edges")),l.width=(s.width||0)*r,l.height=(s.height||0)*r,l}if(n==i.AttachmentType.boundingbox){for(var v=this.attachmentLoader.newBoundingBoxAttachment(e,t),d=s.vertices,p=0,m=d.length;m>p;p++)v.vertices.push(d[p]*r);return v}throw"Unknown attachment type: "+n},readAnimation:function(e,t,s){var n=[],o=0,r=t.slots;for(var a in r)if(r.hasOwnProperty(a)){var h=r[a],l=s.findSlotIndex(a);for(var c in h)if(h.hasOwnProperty(c)){var d=h[c];if("color"==c){var u=new i.ColorTimeline(d.length);u.slotIndex=l;for(var g=0,p=0,m=d.length;m>p;p++){var _=d[p],f=_.color,v=this.toColor(f,0),E=this.toColor(f,1),y=this.toColor(f,2),T=this.toColor(f,3);u.setFrame(g,_.time,v,E,y,T),this.readCurve(u,g,_),g++}n.push(u),o=Math.max(o,u.frames[5*u.getFrameCount()-5])}else{if("attachment"!=c)throw"Invalid timeline type for a slot: "+c+" ("+a+")";var u=new i.AttachmentTimeline(d.length);u.slotIndex=l;for(var g=0,p=0,m=d.length;m>p;p++){var _=d[p];u.setFrame(g++,_.time,_.name)}n.push(u),o=Math.max(o,u.frames[u.getFrameCount()-1])}}}var S=t.bones;for(var C in S)if(S.hasOwnProperty(C)){var w=s.findBoneIndex(C);if(-1==w)throw"Bone not found: "+C;var b=S[C];for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];if("rotate"==c){var u=new i.RotateTimeline(d.length);u.boneIndex=w;for(var g=0,p=0,m=d.length;m>p;p++){var _=d[p];u.setFrame(g,_.time,_.angle),this.readCurve(u,g,_),g++}n.push(u),o=Math.max(o,u.frames[2*u.getFrameCount()-2])}else if("translate"==c||"scale"==c){var u,A=1;"scale"==c?u=new i.ScaleTimeline(d.length):(u=new i.TranslateTimeline(d.length),A=this.scale),u.boneIndex=w;for(var g=0,p=0,m=d.length;m>p;p++){var _=d[p],L=(_.x||0)*A,x=(_.y||0)*A;u.setFrame(g,_.time,L,x),this.readCurve(u,g,_),g++}n.push(u),o=Math.max(o,u.frames[3*u.getFrameCount()-3])}else{if("flipX"!=c&&"flipY"!=c)throw"Invalid timeline type for a bone: "+c+" ("+C+")";var L="flipX"==c,u=L?new i.FlipXTimeline(d.length):new i.FlipYTimeline(d.length);u.boneIndex=w;for(var M=L?"x":"y",g=0,p=0,m=d.length;m>p;p++){var _=d[p];u.setFrame(g,_.time,_[M]||!1),g++}n.push(u),o=Math.max(o,u.frames[2*u.getFrameCount()-2])}}}var I=t.ik;for(var O in I)if(I.hasOwnProperty(O)){var R=s.findIkConstraint(O),d=I[O],u=new i.IkConstraintTimeline(d.length);u.ikConstraintIndex=s.ikConstraints.indexOf(R);for(var g=0,p=0,m=d.length;m>p;p++){var _=d[p],N=_.hasOwnProperty("mix")?_.mix:1,P=!_.hasOwnProperty("bendPositive")||_.bendPositive?1:-1;u.setFrame(g,_.time,N,P),this.readCurve(u,g,_),g++}n.push(u),o=Math.max(o,u.frames[3*u.frameCount-3])}var D=t.ffd;for(var k in D){var B=s.findSkin(k),h=D[k];for(a in h){var l=s.findSlotIndex(a),U=h[a];for(var H in U){var d=U[H],u=new i.FfdTimeline(d.length),G=B.getAttachment(l,H);if(!G)throw"FFD attachment not found: "+H;u.slotIndex=l,u.attachment=G;var V,F=G.type==i.AttachmentType.mesh;V=F?G.vertices.length:G.weights.length/3*2;for(var g=0,p=0,m=d.length;m>p;p++){var W,_=d[p];if(_.vertices){var j=_.vertices,W=[];W.length=V;var Y=_.offset||0,X=j.length;if(1==this.scale)for(var q=0;X>q;q++)W[q+Y]=j[q];else for(var q=0;X>q;q++)W[q+Y]=j[q]*this.scale;if(F)for(var K=G.vertices,q=0,X=W.length;X>q;q++)W[q]+=K[q]}else F?W=G.vertices:(W=[],W.length=V);u.setFrame(g,_.time,W),this.readCurve(u,g,_),g++}n[n.length]=u,o=Math.max(o,u.frames[u.frameCount-1])}}}var z=t.drawOrder;if(z||(z=t.draworder),z){for(var u=new i.DrawOrderTimeline(z.length),Q=s.slots.length,g=0,p=0,m=z.length;m>p;p++){var J=z[p],Z=null;if(J.offsets){Z=[],Z.length=Q;for(var q=Q-1;q>=0;q--)Z[q]=-1;var $=J.offsets,et=[];et.length=Q-$.length;for(var tt=0,it=0,q=0,X=$.length;X>q;q++){var st=$[q],l=s.findSlotIndex(st.slot);if(-1==l)throw"Slot not found: "+st.slot;for(;tt!=l;)et[it++]=tt++;Z[tt+st.offset]=tt++}for(;Q>tt;)et[it++]=tt++;for(var q=Q-1;q>=0;q--)-1==Z[q]&&(Z[q]=et[--it])}u.setFrame(g++,J.time,Z)}n.push(u),o=Math.max(o,u.frames[u.getFrameCount()-1])}var nt=t.events;if(nt){for(var u=new i.EventTimeline(nt.length),g=0,p=0,m=nt.length;m>p;p++){var ot=nt[p],rt=s.findEvent(ot.name);if(!rt)throw"Event not found: "+ot.name;var at=new i.Event(rt);at.intValue=ot.hasOwnProperty("int")?ot["int"]:rt.intValue,at.floatValue=ot.hasOwnProperty("float")?ot["float"]:rt.floatValue,at.stringValue=ot.hasOwnProperty("string")?ot.string:rt.stringValue,u.setFrame(g++,ot.time,at)}n.push(u),o=Math.max(o,u.frames[u.getFrameCount()-1])}s.animations.push(new i.Animation(e,n,o))},readCurve:function(e,t,i){var s=i.curve;s?"stepped"==s?e.curves.setStepped(t):s instanceof Array&&e.curves.setCurve(t,s[0],s[1],s[2],s[3]):e.curves.setLinear(t)},toColor:function(e,t){if(8!=e.length)throw"Color hexidecimal length must be 8, recieved: "+e;return parseInt(e.substring(2*t,2*t+2),16)/255},getFloatArray:function(e,t,s){var n=e[t],o=new i.Float32Array(n.length),r=0,a=n.length;if(1==s)for(;a>r;r++)o[r]=n[r];else for(;a>r;r++)o[r]=n[r]*s;return o},getIntArray:function(e,t){for(var s=e[t],n=new i.Uint16Array(s.length),o=0,r=s.length;r>o;o++)n[o]=0|s[o];return n}},i.Atlas=function(e,t){this.textureLoader=t,this.pages=[],this.regions=[];var s=new i.AtlasReader(e),n=[];n.length=4;for(var o=null;;){var r=s.readLine();if(null===r)break;if(r=s.trim(r),r.length)if(o){var a=new i.AtlasRegion;a.name=r,a.page=o,a.rotate="true"==s.readValue(),s.readTuple(n);var h=parseInt(n[0]),l=parseInt(n[1]);s.readTuple(n);var c=parseInt(n[0]),d=parseInt(n[1]);a.u=h/o.width,a.v=l/o.height,a.rotate?(a.u2=(h+d)/o.width,a.v2=(l+c)/o.height):(a.u2=(h+c)/o.width,a.v2=(l+d)/o.height),a.x=h,a.y=l,a.width=Math.abs(c),a.height=Math.abs(d),4==s.readTuple(n)&&(a.splits=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],4==s.readTuple(n)&&(a.pads=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s.readTuple(n))),a.originalWidth=parseInt(n[0]),a.originalHeight=parseInt(n[1]),s.readTuple(n),a.offsetX=parseInt(n[0]),a.offsetY=parseInt(n[1]),a.index=parseInt(s.readValue()),this.regions.push(a)}else{o=new i.AtlasPage,o.name=r,2==s.readTuple(n)&&(o.width=parseInt(n[0]),o.height=parseInt(n[1]),s.readTuple(n)),o.format=i.Atlas.Format[n[0]],s.readTuple(n),o.minFilter=i.Atlas.TextureFilter[n[0]],o.magFilter=i.Atlas.TextureFilter[n[1]];var u=s.readValue();o.uWrap=i.Atlas.TextureWrap.clampToEdge,o.vWrap=i.Atlas.TextureWrap.clampToEdge,"x"==u?o.uWrap=i.Atlas.TextureWrap.repeat:"y"==u?o.vWrap=i.Atlas.TextureWrap.repeat:"xy"==u&&(o.uWrap=o.vWrap=i.Atlas.TextureWrap.repeat),t.load(o,r,this),this.pages.push(o)}else o=null}},i.Atlas.prototype={findRegion:function(e){for(var t=this.regions,i=0,s=t.length;s>i;i++)if(t[i].name==e)return t[i];return null},dispose:function(){for(var e=this.pages,t=0,i=e.length;i>t;t++)this.textureLoader.unload(e[t].rendererObject)},updateUVs:function(e){for(var t=this.regions,i=0,s=t.length;s>i;i++){var n=t[i];n.page==e&&(n.u=n.x/e.width,n.v=n.y/e.height,n.rotate?(n.u2=(n.x+n.height)/e.width,n.v2=(n.y+n.width)/e.height):(n.u2=(n.x+n.width)/e.width,n.v2=(n.y+n.height)/e.height))}}},i.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},i.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},i.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},i.AtlasPage=function(){},i.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},i.AtlasRegion=function(){},i.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},i.AtlasReader=function(e){this.lines=e.split(/\r\n|\r|\n/)},i.AtlasReader.prototype={index:0,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var e=this.readLine(),t=e.indexOf(":");if(-1==t)throw"Invalid line: "+e;return this.trim(e.substring(t+1))},readTuple:function(e){var t=this.readLine(),i=t.indexOf(":");if(-1==i)throw"Invalid line: "+t;for(var s=0,n=i+1;3>s;s++){var o=t.indexOf(",",n);if(-1==o)break;e[s]=this.trim(t.substr(n,o-n)),n=o+1}return e[s]=this.trim(t.substring(n)),s+1}},i.AtlasAttachmentLoader=function(e){this.atlas=e},i.AtlasAttachmentLoader.prototype={newRegionAttachment:function(e,t,s){var n=this.atlas.findRegion(s);if(!n)throw"Region not found in atlas: "+s+" (region attachment: "+t+")";var o=new i.RegionAttachment(t);return o.rendererObject=n,o.setUVs(n.u,n.v,n.u2,n.v2,n.rotate),o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o},newMeshAttachment:function(e,t,s){var n=this.atlas.findRegion(s);if(!n)throw"Region not found in atlas: "+s+" (mesh attachment: "+t+")";var o=new i.MeshAttachment(t);return o.rendererObject=n,o.regionU=n.u,o.regionV=n.v,o.regionU2=n.u2,o.regionV2=n.v2,o.regionRotate=n.rotate,o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o},newSkinnedMeshAttachment:function(e,t,s){var n=this.atlas.findRegion(s);if(!n)throw"Region not found in atlas: "+s+" (skinned mesh attachment: "+t+")";var o=new i.SkinnedMeshAttachment(t);return o.rendererObject=n,o.regionU=n.u,o.regionV=n.v,o.regionU2=n.u2,o.regionV2=n.v2,o.regionRotate=n.rotate,o.regionOffsetX=n.offsetX,o.regionOffsetY=n.offsetY,o.regionWidth=n.width,o.regionHeight=n.height,o.regionOriginalWidth=n.originalWidth,o.regionOriginalHeight=n.originalHeight,o
},newBoundingBoxAttachment:function(e,t){return new i.BoundingBoxAttachment(t)}},i.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},i.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(e,t){var s=e.slots,n=s.length,o=e.x,r=e.y,a=this.boundingBoxes,h=this.polygonPool,l=this.polygons;a.length=0;for(var c=0,d=l.length;d>c;c++)h.push(l[c]);l.length=0;for(var c=0;n>c;c++){var u=s[c],g=u.attachment;if(g.type==i.AttachmentType.boundingbox){a.push(g);var p,m=h.length;m>0?(p=h[m-1],h.splice(m-1,1)):p=[],l.push(p),p.length=g.vertices.length,g.computeWorldVertices(o,r,u.bone,p)}}t&&this.aabbCompute()},aabbCompute:function(){for(var e=this.polygons,t=Number.MAX_VALUE,i=Number.MAX_VALUE,s=Number.MIN_VALUE,n=Number.MIN_VALUE,o=0,r=e.length;r>o;o++)for(var a=e[o],h=0,l=a.length;l>h;h+=2){var c=a[h],d=a[h+1];t=Math.min(t,c),i=Math.min(i,d),s=Math.max(s,c),n=Math.max(n,d)}this.minX=t,this.minY=i,this.maxX=s,this.maxY=n},aabbContainsPoint:function(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY},aabbIntersectsSegment:function(e,t,i,s){var n=this.minX,o=this.minY,r=this.maxX,a=this.maxY;if(n>=e&&n>=i||o>=t&&o>=s||e>=r&&i>=r||t>=a&&s>=a)return!1;var h=(s-t)/(i-e),l=h*(n-e)+t;if(l>o&&a>l)return!0;if(l=h*(r-e)+t,l>o&&a>l)return!0;var c=(o-t)/h+e;return c>n&&r>c?!0:(c=(a-t)/h+e,c>n&&r>c?!0:!1)},aabbIntersectsSkeleton:function(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY},containsPoint:function(e,t){for(var i=this.polygons,s=0,n=i.length;n>s;s++)if(this.polygonContainsPoint(i[s],e,t))return this.boundingBoxes[s];return null},intersectsSegment:function(e,t,i,s){for(var n=this.polygons,o=0,r=n.length;r>o;o++)if(n[o].intersectsSegment(e,t,i,s))return this.boundingBoxes[o];return null},polygonContainsPoint:function(e,t,i){for(var s=e.length,n=s-2,o=!1,r=0;s>r;r+=2){var a=e[r+1],h=e[n+1];if(i>a&&h>=i||i>h&&a>=i){var l=e[r];l+(i-a)/(h-a)*(e[n]-l)<t&&(o=!o)}n=r}return o},polygonIntersectsSegment:function(e,t,i,s,n){for(var o=e.length,r=t-s,a=i-n,h=t*n-i*s,l=e[o-2],c=e[o-1],d=0;o>d;d+=2){var u=e[d],g=e[d+1],p=l*g-c*u,m=l-u,_=c-g,f=r*_-a*m,v=(h*m-r*p)/f;if((v>=l&&u>=v||v>=u&&l>=v)&&(v>=t&&s>=v||v>=s&&t>=v)){var E=(h*_-a*p)/f;if((E>=c&&g>=E||E>=g&&c>=E)&&(E>=i&&n>=E||E>=n&&i>=E))return!0}l=u,c=g}return!1},getPolygon:function(e){var t=this.boundingBoxes.indexOf(e);return-1==t?null:this.polygons[t]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},i.Bone.yDown=!0,t.AnimCache={},t.SpineTextureLoader=function(e,i){t.EventTarget.call(this),this.basePath=e,this.crossorigin=i,this.loadingCount=0},t.SpineTextureLoader.prototype=t.SpineTextureLoader,t.SpineTextureLoader.prototype.load=function(e,i){if(e.rendererObject=t.BaseTexture.fromImage(this.basePath+"/"+i,this.crossorigin),!e.rendererObject.hasLoaded){var s=this;++s.loadingCount,e.rendererObject.addEventListener("loaded",function(){--s.loadingCount,s.dispatchEvent({type:"loadedBaseTexture",content:s})})}},t.SpineTextureLoader.prototype.unload=function(e){e.destroy(!0)},t.Spine=function(e){if(t.DisplayObjectContainer.call(this),this.spineData=t.AnimCache[e],!this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: "+e);this.skeleton=new i.Skeleton(this.spineData),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(this.spineData),this.state=new i.AnimationState(this.stateData),this.slotContainers=[];for(var s=0,n=this.skeleton.slots.length;n>s;s++){var o=this.skeleton.slots[s],r=o.attachment,a=new t.DisplayObjectContainer;if(this.slotContainers.push(a),this.addChild(a),r instanceof i.RegionAttachment){var h=r.rendererObject.name,l=this.createSprite(o,r);o.currentSprite=l,o.currentSpriteName=h,a.addChild(l)}else{if(!(r instanceof i.MeshAttachment))continue;var c=this.createMesh(o,r);o.currentMesh=c,o.currentMeshName=r.name,a.addChild(c)}}this.autoUpdate=!0},t.Spine.prototype=Object.create(t.DisplayObjectContainer.prototype),t.Spine.prototype.constructor=t.Spine,Object.defineProperty(t.Spine.prototype,"autoUpdate",{get:function(){return this.updateTransform===t.Spine.prototype.autoUpdateTransform},set:function(e){this.updateTransform=e?t.Spine.prototype.autoUpdateTransform:t.DisplayObjectContainer.prototype.updateTransform}}),t.Spine.prototype.update=function(e){this.state.update(e),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var s=this.skeleton.drawOrder,n=this.skeleton.slots,o=0,r=s.length;r>o;o++)this.children[o]=this.slotContainers[s[o]];for(o=0,r=n.length;r>o;o++){var a=n[o],h=a.attachment,l=this.slotContainers[o];if(h){var c=h.type;if(c===i.AttachmentType.region){if(h.rendererObject&&(!a.currentSpriteName||a.currentSpriteName!==h.name)){var d=h.rendererObject.name;if(void 0!==a.currentSprite&&(a.currentSprite.visible=!1),a.sprites=a.sprites||{},void 0!==a.sprites[d])a.sprites[d].visible=!0;else{var u=this.createSprite(a,h);l.addChild(u)}a.currentSprite=a.sprites[d],a.currentSpriteName=d}var g=a.bone;l.position.x=g.worldX+h.x*g.m00+h.y*g.m01,l.position.y=g.worldY+h.x*g.m10+h.y*g.m11,l.scale.x=g.worldScaleX,l.scale.y=g.worldScaleY,l.rotation=-(a.bone.worldRotation*i.degRad),a.currentSprite.tint=t.rgb2hex([a.r,a.g,a.b])}else{if(c!==i.AttachmentType.skinnedmesh){l.visible=!1;continue}if(!a.currentMeshName||a.currentMeshName!==h.name){var p=h.name;if(void 0!==a.currentMesh&&(a.currentMesh.visible=!1),a.meshes=a.meshes||{},void 0!==a.meshes[p])a.meshes[p].visible=!0;else{var m=this.createMesh(a,h);l.addChild(m)}a.currentMesh=a.meshes[p],a.currentMeshName=p}h.computeWorldVertices(a.bone.skeleton.x,a.bone.skeleton.y,a,a.currentMesh.vertices)}l.visible=!0,l.alpha=a.a}else l.visible=!1}},t.Spine.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var e=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(e),t.DisplayObjectContainer.prototype.updateTransform.call(this)},t.Spine.prototype.createSprite=function(e,s){var n=s.rendererObject,o=n.page.rendererObject,r=new t.Rectangle(n.x,n.y,n.rotate?n.height:n.width,n.rotate?n.width:n.height),a=new t.Texture(o,r),h=new t.Sprite(a),l=n.rotate?.5*Math.PI:0;return h.scale.set(n.width/n.originalWidth,n.height/n.originalHeight),h.rotation=l-s.rotation*i.degRad,h.anchor.x=h.anchor.y=.5,e.sprites=e.sprites||{},e.sprites[n.name]=h,h},t.Spine.prototype.createMesh=function(e,i){var s=i.rendererObject,n=s.page.rendererObject,o=new t.Texture(n),r=new t.Strip(o);return r.drawMode=t.Strip.DrawModes.TRIANGLES,r.canvasPadding=1.5,r.vertices=new t.Float32Array(i.uvs.length),r.uvs=i.uvs,r.indices=i.triangles,e.meshes=e.meshes||{},e.meshes[i.name]=r,r},t.BaseTextureCache={},t.BaseTextureCacheIdGenerator=0,t.BaseTexture=function(e,i){if(this.resolution=1,this.width=100,this.height=100,this.scaleMode=i||t.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=e,this._UID=t._UID++,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],e){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty();else{var s=this;this.source.onload=function(){s.hasLoaded=!0,s.width=s.source.naturalWidth||s.source.width,s.height=s.source.naturalHeight||s.source.height,s.dirty(),s.dispatchEvent({type:"loaded",content:s})},this.source.onerror=function(){s.dispatchEvent({type:"error",content:s})}}this.imageUrl=null,this._powerOf2=!1}},t.BaseTexture.prototype.constructor=t.BaseTexture,t.EventTarget.mixin(t.BaseTexture.prototype),t.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete t.BaseTextureCache[this.imageUrl],delete t.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete t.BaseTextureCache[this.source._pixiId],this.source=null,this.unloadFromGPU()},t.BaseTexture.prototype.updateSourceImage=function(e){this.hasLoaded=!1,this.source.src=null,this.source.src=e},t.BaseTexture.prototype.dirty=function(){for(var e=0;e<this._glTextures.length;e++)this._dirty[e]=!0},t.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var e=this._glTextures.length-1;e>=0;e--){var i=this._glTextures[e],s=t.glContexts[e];s&&i&&s.deleteTexture(i)}this._glTextures.length=0,this.dirty()},t.BaseTexture.fromImage=function(e,i,s){var n=t.BaseTextureCache[e];if(void 0===i&&-1===e.indexOf("data:")&&(i=!0),!n){var o=new Image;i&&(o.crossOrigin=""),o.src=e,n=new t.BaseTexture(o,s),n.imageUrl=e,t.BaseTextureCache[e]=n,-1!==e.indexOf(t.RETINA_PREFIX+".")&&(n.resolution=2)}return n},t.BaseTexture.fromCanvas=function(e,i){e._pixiId||(e._pixiId="canvas_"+t.TextureCacheIdGenerator++);var s=t.BaseTextureCache[e._pixiId];return s||(s=new t.BaseTexture(e,i),t.BaseTextureCache[e._pixiId]=s),s},t.TextureCache={},t.FrameCache={},t.TextureCacheIdGenerator=0,t.Texture=function(e,i,s,n){this.noFrame=!1,i||(this.noFrame=!0,i=new t.Rectangle(0,0,1,1)),e instanceof t.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=i,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=s||new t.Rectangle(0,0,1,1),e.hasLoaded?(this.noFrame&&(i=new t.Rectangle(0,0,e.width,e.height)),this.setFrame(i)):e.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))},t.Texture.prototype.constructor=t.Texture,t.EventTarget.mixin(t.Texture.prototype),t.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;e.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new t.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame),this.dispatchEvent({type:"update",content:this})},t.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy(),this.valid=!1},t.Texture.prototype.setFrame=function(e){if(this.noFrame=!1,this.frame=e,this.width=e.width,this.height=e.height,this.crop.x=e.x,this.crop.y=e.y,this.crop.width=e.width,this.crop.height=e.height,!this.trim&&(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=e&&e.width&&e.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs()},t.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new t.TextureUvs);var e=this.crop,i=this.baseTexture.width,s=this.baseTexture.height;this._uvs.x0=e.x/i,this._uvs.y0=e.y/s,this._uvs.x1=(e.x+e.width)/i,this._uvs.y1=e.y/s,this._uvs.x2=(e.x+e.width)/i,this._uvs.y2=(e.y+e.height)/s,this._uvs.x3=e.x/i,this._uvs.y3=(e.y+e.height)/s},t.Texture.fromImage=function(e,i,s){var n=t.TextureCache[e];return n||(n=new t.Texture(t.BaseTexture.fromImage(e,i,s)),t.TextureCache[e]=n),n},t.Texture.fromFrame=function(e){var i=t.TextureCache[e];if(!i)throw new Error('The frameId "'+e+'" does not exist in the texture cache ');return i},t.Texture.fromCanvas=function(e,i){var s=t.BaseTexture.fromCanvas(e,i);return new t.Texture(s)},t.Texture.addTextureToCache=function(e,i){t.TextureCache[i]=e},t.Texture.removeTextureFromCache=function(e){var i=t.TextureCache[e];return delete t.TextureCache[e],delete t.BaseTextureCache[e],i},t.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},t.Texture.emptyTexture=new t.Texture(new t.BaseTexture),t.RenderTexture=function(e,i,s,n,o){if(this.width=e||100,this.height=i||100,this.resolution=o||1,this.frame=new t.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new t.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new t.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=n||t.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,t.Texture.call(this,this.baseTexture,new t.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution)),this.renderer=s||t.defaultRenderer,this.renderer.type===t.WEBGL_RENDERER){var r=this.renderer.gl;this.baseTexture._dirty[r.id]=!1,this.textureBuffer=new t.FilterTexture(r,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[r.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new t.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new t.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()},t.RenderTexture.prototype=Object.create(t.Texture.prototype),t.RenderTexture.prototype.constructor=t.RenderTexture,t.RenderTexture.prototype.resize=function(e,i,s){(e!==this.width||i!==this.height)&&(this.valid=e>0&&i>0,this.width=e,this.height=i,this.frame.width=this.crop.width=e*this.resolution,this.frame.height=this.crop.height=i*this.resolution,s&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===t.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},t.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===t.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},t.RenderTexture.prototype.renderWebGL=function(e,t,i){if(this.valid){var s=e.worldTransform;s.identity(),s.translate(0,2*this.projection.y),t&&s.append(t),s.scale(1,-1),e.worldAlpha=1;for(var n=e.children,o=0,r=n.length;r>o;o++)n[o].updateTransform();var a=this.renderer.gl;a.viewport(0,0,this.width*this.resolution,this.height*this.resolution),a.bindFramebuffer(a.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer),this.renderer.spriteBatch.dirty=!0}},t.RenderTexture.prototype.renderCanvas=function(e,t,i){if(this.valid){var s=e.worldTransform;s.identity(),t&&s.append(t),e.worldAlpha=1;for(var n=e.children,o=0,r=n.length;r>o;o++)n[o].updateTransform();i&&this.textureBuffer.clear();var a=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,a),this.renderer.resolution=h}},t.RenderTexture.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},t.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},t.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===t.WEBGL_RENDERER){var e=this.renderer.gl,i=this.textureBuffer.width,s=this.textureBuffer.height,n=new Uint8Array(4*i*s);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,i,s,e.RGBA,e.UNSIGNED_BYTE,n),e.bindFramebuffer(e.FRAMEBUFFER,null);var o=new t.CanvasBuffer(i,s),r=o.context.getImageData(0,0,i,s);return r.data.set(n),o.context.putImageData(r,0,0),o.canvas}return this.textureBuffer.canvas},t.RenderTexture.tempMatrix=new t.Matrix,t.VideoTexture=function(e,i){if(!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),t.BaseTexture.call(this,e,i),this.autoUpdate=!1,this.updateBound=this._onUpdate.bind(this),e.complete||(this._onCanPlay=this.onCanPlay.bind(this),e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("play",this.onPlayStart.bind(this)),e.addEventListener("pause",this.onPlayStop.bind(this)))},t.VideoTexture.prototype=Object.create(t.BaseTexture.prototype),t.VideoTexture.constructor=t.VideoTexture,t.VideoTexture.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this.updateBound),this.dirty())},t.VideoTexture.prototype.onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this.updateBound),this.autoUpdate=!0)},t.VideoTexture.prototype.onPlayStop=function(){this.autoUpdate=!1},t.VideoTexture.prototype.onCanPlay=function(){"canplaythrough"===event.type&&(this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.dispatchEvent({type:"loaded",content:this}))))},t.VideoTexture.prototype.destroy=function(){this.source&&this.source._pixiId&&(t.BaseTextureCache[this.source._pixiId]=null,delete t.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),t.BaseTexture.prototype.destroy.call(this)},t.VideoTexture.baseTextureFromVideo=function(e,i){e._pixiId||(e._pixiId="video_"+t.TextureCacheIdGenerator++);var s=t.BaseTextureCache[e._pixiId];return s||(s=new t.VideoTexture(e,i),t.BaseTextureCache[e._pixiId]=s),s},t.VideoTexture.textureFromVideo=function(e,i){var s=t.VideoTexture.baseTextureFromVideo(e,i);return new t.Texture(s)},t.VideoTexture.fromUrl=function(e,i){var s=document.createElement("video");return s.src=e,s.autoPlay=!0,s.play(),t.VideoTexture.textureFromVideo(s,i)},t.AssetLoader=function(e,i){this.assetURLs=e,this.crossorigin=i,this.loadersByType={jpg:t.ImageLoader,jpeg:t.ImageLoader,png:t.ImageLoader,gif:t.ImageLoader,webp:t.ImageLoader,json:t.JsonLoader,atlas:t.AtlasLoader,anim:t.SpineLoader,xml:t.BitmapFontLoader,fnt:t.BitmapFontLoader}},t.EventTarget.mixin(t.AssetLoader.prototype),t.AssetLoader.prototype.constructor=t.AssetLoader,t.AssetLoader.prototype._getDataType=function(e){var t="data:",i=e.slice(0,t.length).toLowerCase();if(i===t){var s=e.slice(t.length),n=s.indexOf(",");if(-1===n)return null;var o=s.slice(0,n).split(";")[0];return o&&"text/plain"!==o.toLowerCase()?o.split("/").pop().toLowerCase():"txt"}return null},t.AssetLoader.prototype.load=function(){function e(e){t.onAssetLoaded(e.data.content)}var t=this;this.loadCount=this.assetURLs.length;for(var i=0;i<this.assetURLs.length;i++){var s=this.assetURLs[i],n=this._getDataType(s);n||(n=s.split("?").shift().split(".").pop().toLowerCase());var o=this.loadersByType[n];if(!o)throw new Error(n+" is an unsupported file type");var r=new o(s,this.crossorigin);r.on("loaded",e),r.load()}},t.AssetLoader.prototype.onAssetLoaded=function(e){this.loadCount--,this.emit("onProgress",{content:this,loader:e,loaded:this.assetURLs.length-this.loadCount,total:this.assetURLs.length}),this.onProgress&&this.onProgress(e),this.loadCount||(this.emit("onComplete",{content:this}),this.onComplete&&this.onComplete())},t.JsonLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.loaded=!1},t.JsonLoader.prototype.constructor=t.JsonLoader,t.EventTarget.mixin(t.JsonLoader.prototype),t.JsonLoader.prototype.load=function(){window.XDomainRequest&&this.crossorigin?(this.ajaxRequest=new window.XDomainRequest,this.ajaxRequest.timeout=3e3,this.ajaxRequest.onerror=this.onError.bind(this),this.ajaxRequest.ontimeout=this.onError.bind(this),this.ajaxRequest.onprogress=function(){},this.ajaxRequest.onload=this.onJSONLoaded.bind(this)):(this.ajaxRequest=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),this.ajaxRequest.onreadystatechange=this.onReadyStateChanged.bind(this)),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.send()},t.JsonLoader.prototype.onReadyStateChanged=function(){4!==this.ajaxRequest.readyState||200!==this.ajaxRequest.status&&-1!==window.location.href.indexOf("http")||this.onJSONLoaded()},t.JsonLoader.prototype.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();if(this.json=JSON.parse(this.ajaxRequest.responseText),this.json.frames&&this.json.meta&&this.json.meta.image){var e=this.json.meta.image;-1===e.indexOf("data:")&&(e=this.baseUrl+e);var s=new t.ImageLoader(e,this.crossorigin),n=this.json.frames;this.texture=s.texture.baseTexture,s.addEventListener("loaded",this.onLoaded.bind(this));for(var o in n){var r=n[o].frame;if(r){var a=new t.Rectangle(r.x,r.y,r.w,r.h),h=a.clone(),l=null;if(n[o].trimmed){var c=n[o].sourceSize,d=n[o].spriteSourceSize;l=new t.Rectangle(d.x,d.y,c.w,c.h)}t.TextureCache[o]=new t.Texture(this.texture,a,h,l)}}s.load()}else if(this.json.bones)if(t.AnimCache[this.url])this.onLoaded();else{var u=this.url.substr(0,this.url.lastIndexOf("."))+".atlas",g=new t.JsonLoader(u,this.crossorigin),p=this;g.onJSONLoaded=function(){if(!this.ajaxRequest.responseText)return void this.onError();var e=new t.SpineTextureLoader(this.url.substring(0,this.url.lastIndexOf("/"))),s=new i.Atlas(this.ajaxRequest.responseText,e),n=new i.AtlasAttachmentLoader(s),o=new i.SkeletonJson(n),r=o.readSkeletonData(p.json);t.AnimCache[p.url]=r,p.spine=r,p.spineAtlas=s,p.spineAtlasLoader=g,e.loadingCount>0?e.addEventListener("loadedBaseTexture",function(e){e.content.content.loadingCount<=0&&p.onLoaded()}):p.onLoaded()},g.load()}else this.onLoaded()},t.JsonLoader.prototype.onLoaded=function(){this.loaded=!0,this.dispatchEvent({type:"loaded",content:this})},t.JsonLoader.prototype.onError=function(){this.dispatchEvent({type:"error",content:this})},t.AtlasLoader=function(e,t){this.url=e,this.baseUrl=e.replace(/[^\/]*$/,""),this.crossorigin=t,this.loaded=!1},t.AtlasLoader.constructor=t.AtlasLoader,t.EventTarget.mixin(t.AtlasLoader.prototype),t.AtlasLoader.prototype.load=function(){this.ajaxRequest=new t.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onAtlasLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/json"),this.ajaxRequest.send(null)},t.AtlasLoader.prototype.onAtlasLoaded=function(){if(4===this.ajaxRequest.readyState)if(200===this.ajaxRequest.status||-1===window.location.href.indexOf("http")){this.atlas={meta:{image:[]},frames:[]};var e=this.ajaxRequest.responseText.split(/\r?\n/),i=-3,s=0,n=null,o=!1,r=0,a=0,h=this.onLoaded.bind(this);for(r=0;r<e.length;r++)if(e[r]=e[r].replace(/^\s+|\s+$/g,""),""===e[r]&&(o=r+1),e[r].length>0){if(o===r)this.atlas.meta.image.push(e[r]),s=this.atlas.meta.image.length-1,this.atlas.frames.push({}),i=-3;else if(i>0)if(i%7===1)null!=n&&(this.atlas.frames[s][n.name]=n),n={name:e[r],frame:{}};else{var l=e[r].split(" ");if(i%7===3)n.frame.x=Number(l[1].replace(",","")),n.frame.y=Number(l[2]);else if(i%7===4)n.frame.w=Number(l[1].replace(",","")),n.frame.h=Number(l[2]);else if(i%7===5){var c={x:0,y:0,w:Number(l[1].replace(",","")),h:Number(l[2])};c.w>n.frame.w||c.h>n.frame.h?(n.trimmed=!0,n.realSize=c):n.trimmed=!1}}i++}if(null!=n&&(this.atlas.frames[s][n.name]=n),this.atlas.meta.image.length>0){for(this.images=[],a=0;a<this.atlas.meta.image.length;a++){var d=this.baseUrl+this.atlas.meta.image[a],u=this.atlas.frames[a];this.images.push(new t.ImageLoader(d,this.crossorigin));for(r in u){var g=u[r].frame;g&&(t.TextureCache[r]=new t.Texture(this.images[a].texture.baseTexture,{x:g.x,y:g.y,width:g.w,height:g.h}),u[r].trimmed&&(t.TextureCache[r].realSize=u[r].realSize,t.TextureCache[r].trim.x=0,t.TextureCache[r].trim.y=0))}}for(this.currentImageId=0,a=0;a<this.images.length;a++)this.images[a].on("loaded",h);this.images[this.currentImageId].load()}else this.onLoaded()}else this.onError()},t.AtlasLoader.prototype.onLoaded=function(){this.images.length-1>this.currentImageId?(this.currentImageId++,this.images[this.currentImageId].load()):(this.loaded=!0,this.emit("loaded",{content:this}))},t.AtlasLoader.prototype.onError=function(){this.emit("error",{content:this})},t.SpriteSheetLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null,this.frames={}},t.SpriteSheetLoader.prototype.constructor=t.SpriteSheetLoader,t.EventTarget.mixin(t.SpriteSheetLoader.prototype),t.SpriteSheetLoader.prototype.load=function(){var e=this,i=new t.JsonLoader(this.url,this.crossorigin);i.on("loaded",function(t){e.json=t.data.content.json,e.onLoaded()}),i.load()},t.SpriteSheetLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},t.ImageLoader=function(e,i){this.texture=t.Texture.fromImage(e,i),this.frames=[]},t.ImageLoader.prototype.constructor=t.ImageLoader,t.EventTarget.mixin(t.ImageLoader.prototype),t.ImageLoader.prototype.load=function(){this.texture.baseTexture.hasLoaded?this.onLoaded():this.texture.baseTexture.on("loaded",this.onLoaded.bind(this))},t.ImageLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},t.ImageLoader.prototype.loadFramedSpriteSheet=function(e,i,s){this.frames=[];for(var n=Math.floor(this.texture.width/e),o=Math.floor(this.texture.height/i),r=0,a=0;o>a;a++)for(var h=0;n>h;h++,r++){var l=new t.Texture(this.texture.baseTexture,{x:h*e,y:a*i,width:e,height:i});this.frames.push(l),s&&(t.TextureCache[s+"-"+r]=l)}this.load()},t.BitmapFontLoader=function(e,t){this.url=e,this.crossorigin=t,this.baseUrl=e.replace(/[^\/]*$/,""),this.texture=null},t.BitmapFontLoader.prototype.constructor=t.BitmapFontLoader,t.EventTarget.mixin(t.BitmapFontLoader.prototype),t.BitmapFontLoader.prototype.load=function(){this.ajaxRequest=new t.AjaxRequest,this.ajaxRequest.onreadystatechange=this.onXMLLoaded.bind(this),this.ajaxRequest.open("GET",this.url,!0),this.ajaxRequest.overrideMimeType&&this.ajaxRequest.overrideMimeType("application/xml"),this.ajaxRequest.send(null)},t.BitmapFontLoader.prototype.onXMLLoaded=function(){if(4===this.ajaxRequest.readyState&&(200===this.ajaxRequest.status||-1===window.location.protocol.indexOf("http"))){var e=this.ajaxRequest.responseXML;if(!e||/MSIE 9/i.test(navigator.userAgent)||navigator.isCocoonJS)if("function"==typeof window.DOMParser){var i=new DOMParser;e=i.parseFromString(this.ajaxRequest.responseText,"text/xml")}else{var s=document.createElement("div");s.innerHTML=this.ajaxRequest.responseText,e=s}var n=this.baseUrl+e.getElementsByTagName("page")[0].getAttribute("file"),o=new t.ImageLoader(n,this.crossorigin);this.texture=o.texture.baseTexture;var r={},a=e.getElementsByTagName("info")[0],h=e.getElementsByTagName("common")[0];r.font=a.getAttribute("face"),r.size=parseInt(a.getAttribute("size"),10),r.lineHeight=parseInt(h.getAttribute("lineHeight"),10),r.chars={};for(var l=e.getElementsByTagName("char"),c=0;c<l.length;c++){var d=parseInt(l[c].getAttribute("id"),10),u=new t.Rectangle(parseInt(l[c].getAttribute("x"),10),parseInt(l[c].getAttribute("y"),10),parseInt(l[c].getAttribute("width"),10),parseInt(l[c].getAttribute("height"),10));r.chars[d]={xOffset:parseInt(l[c].getAttribute("xoffset"),10),yOffset:parseInt(l[c].getAttribute("yoffset"),10),xAdvance:parseInt(l[c].getAttribute("xadvance"),10),kerning:{},texture:t.TextureCache[d]=new t.Texture(this.texture,u)}}var g=e.getElementsByTagName("kerning");for(c=0;c<g.length;c++){var p=parseInt(g[c].getAttribute("first"),10),m=parseInt(g[c].getAttribute("second"),10),_=parseInt(g[c].getAttribute("amount"),10);r.chars[m].kerning[p]=_}t.BitmapText.fonts[r.font]=r,o.addEventListener("loaded",this.onLoaded.bind(this)),o.load()}},t.BitmapFontLoader.prototype.onLoaded=function(){this.emit("loaded",{content:this})},t.SpineLoader=function(e,t){this.url=e,this.crossorigin=t,this.loaded=!1},t.SpineLoader.prototype.constructor=t.SpineLoader,t.EventTarget.mixin(t.SpineLoader.prototype),t.SpineLoader.prototype.load=function(){var e=this,i=new t.JsonLoader(this.url,this.crossorigin);i.on("loaded",function(t){e.json=t.data.content.json,e.onLoaded()}),i.load()},t.SpineLoader.prototype.onLoaded=function(){this.loaded=!0,this.emit("loaded",{content:this})},t.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},t.AbstractFilter.prototype.constructor=t.AbstractFilter,t.AbstractFilter.prototype.syncUniforms=function(){for(var e=0,t=this.shaders.length;t>e;e++)this.shaders[e].dirty=!0},t.AlphaMaskFilter=function(e){t.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={mask:{type:"sampler2D",value:e},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mask.value.x=e.width,this.uniforms.mask.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D mask;","uniform sampler2D uSampler;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   mapCords *= dimensions.xy / mapDimensions;","   vec4 original =  texture2D(uSampler, vTextureCoord);","   float maskAlpha =  texture2D(mask, mapCords).r;","   original *= maskAlpha;","   gl_FragColor =  original;","}"]},t.AlphaMaskFilter.prototype=Object.create(t.AbstractFilter.prototype),t.AlphaMaskFilter.prototype.constructor=t.AlphaMaskFilter,t.AlphaMaskFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.mask.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.mask.value.height,this.uniforms.mask.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(t.AlphaMaskFilter.prototype,"map",{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}}),t.ColorMatrixFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform mat4 matrix;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;","}"]},t.ColorMatrixFilter.prototype=Object.create(t.AbstractFilter.prototype),t.ColorMatrixFilter.prototype.constructor=t.ColorMatrixFilter,Object.defineProperty(t.ColorMatrixFilter.prototype,"matrix",{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=e}}),t.GrayFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={gray:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float gray;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);","}"]},t.GrayFilter.prototype=Object.create(t.AbstractFilter.prototype),t.GrayFilter.prototype.constructor=t.GrayFilter,Object.defineProperty(t.GrayFilter.prototype,"gray",{get:function(){return this.uniforms.gray.value},set:function(e){this.uniforms.gray.value=e}}),t.DisplacementFilter=function(e){t.AbstractFilter.call(this),this.passes=[this],e.baseTexture._powerOf2=!0,this.uniforms={displacementMap:{type:"sampler2D",value:e},scale:{type:"2f",value:{x:30,y:30}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}},e.baseTexture.hasLoaded?(this.uniforms.mapDimensions.value.x=e.width,this.uniforms.mapDimensions.value.y=e.height):(this.boundLoadedFunction=this.onTextureLoaded.bind(this),e.baseTexture.on("loaded",this.boundLoadedFunction)),this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D displacementMap;","uniform sampler2D uSampler;","uniform vec2 scale;","uniform vec2 offset;","uniform vec4 dimensions;","uniform vec2 mapDimensions;","void main(void) {","   vec2 mapCords = vTextureCoord.xy;","   mapCords += (dimensions.zw + offset)/ dimensions.xy ;","   mapCords.y *= -1.0;","   mapCords.y += 1.0;","   vec2 matSample = texture2D(displacementMap, mapCords).xy;","   matSample -= 0.5;","   matSample *= scale;","   matSample /= mapDimensions;","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);","   vec2 cord = vTextureCoord;","}"]
},t.DisplacementFilter.prototype=Object.create(t.AbstractFilter.prototype),t.DisplacementFilter.prototype.constructor=t.DisplacementFilter,t.DisplacementFilter.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height,this.uniforms.displacementMap.value.baseTexture.off("loaded",this.boundLoadedFunction)},Object.defineProperty(t.DisplacementFilter.prototype,"map",{get:function(){return this.uniforms.displacementMap.value},set:function(e){this.uniforms.displacementMap.value=e}}),Object.defineProperty(t.DisplacementFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}}),Object.defineProperty(t.DisplacementFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}),t.PixelateFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:0},dimensions:{type:"4fv",value:new t.Float32Array([1e4,100,10,10])},pixelSize:{type:"2f",value:{x:10,y:10}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 testDim;","uniform vec4 dimensions;","uniform vec2 pixelSize;","uniform sampler2D uSampler;","void main(void) {","   vec2 coord = vTextureCoord;","   vec2 size = dimensions.xy/pixelSize;","   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;","   gl_FragColor = texture2D(uSampler, color);","}"]},t.PixelateFilter.prototype=Object.create(t.AbstractFilter.prototype),t.PixelateFilter.prototype.constructor=t.PixelateFilter,Object.defineProperty(t.PixelateFilter.prototype,"size",{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.dirty=!0,this.uniforms.pixelSize.value=e}}),t.BlurXFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;","   gl_FragColor = sum;","}"]},t.BlurXFilter.prototype=Object.create(t.AbstractFilter.prototype),t.BlurXFilter.prototype.constructor=t.BlurXFilter,Object.defineProperty(t.BlurXFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.dirty=!0,this.uniforms.blur.value=1/7e3*e}}),t.BlurYFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","   vec4 sum = vec4(0.0);","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;","   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;","   gl_FragColor = sum;","}"]},t.BlurYFilter.prototype=Object.create(t.AbstractFilter.prototype),t.BlurYFilter.prototype.constructor=t.BlurYFilter,Object.defineProperty(t.BlurYFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),t.BlurFilter=function(){this.blurXFilter=new t.BlurXFilter,this.blurYFilter=new t.BlurYFilter,this.passes=[this.blurXFilter,this.blurYFilter]},t.BlurFilter.prototype=Object.create(t.AbstractFilter.prototype),t.BlurFilter.prototype.constructor=t.BlurFilter,Object.defineProperty(t.BlurFilter.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}}),Object.defineProperty(t.BlurFilter.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}}),Object.defineProperty(t.BlurFilter.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}),t.InvertFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={invert:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float invert;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);","}"]},t.InvertFilter.prototype=Object.create(t.AbstractFilter.prototype),t.InvertFilter.prototype.constructor=t.InvertFilter,Object.defineProperty(t.InvertFilter.prototype,"invert",{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}),t.SepiaFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={sepia:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float sepia;","uniform sampler2D uSampler;","const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);","}"]},t.SepiaFilter.prototype=Object.create(t.AbstractFilter.prototype),t.SepiaFilter.prototype.constructor=t.SepiaFilter,Object.defineProperty(t.SepiaFilter.prototype,"sepia",{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}),t.TwistFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"2f",value:{x:.5,y:.5}}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float radius;","uniform float angle;","uniform vec2 offset;","void main(void) {","   vec2 coord = vTextureCoord - offset;","   float distance = length(coord);","   if (distance < radius) {","       float ratio = (radius - distance) / radius;","       float angleMod = ratio * ratio * angle;","       float s = sin(angleMod);","       float c = cos(angleMod);","       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);","   }","   gl_FragColor = texture2D(uSampler, coord+offset);","}"]},t.TwistFilter.prototype=Object.create(t.AbstractFilter.prototype),t.TwistFilter.prototype.constructor=t.TwistFilter,Object.defineProperty(t.TwistFilter.prototype,"offset",{get:function(){return this.uniforms.offset.value},set:function(e){this.dirty=!0,this.uniforms.offset.value=e}}),Object.defineProperty(t.TwistFilter.prototype,"radius",{get:function(){return this.uniforms.radius.value},set:function(e){this.dirty=!0,this.uniforms.radius.value=e}}),Object.defineProperty(t.TwistFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),t.ColorStepFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={step:{type:"1f",value:5}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float step;","void main(void) {","   vec4 color = texture2D(uSampler, vTextureCoord);","   color = floor(color * step) / step;","   gl_FragColor = color;","}"]},t.ColorStepFilter.prototype=Object.create(t.AbstractFilter.prototype),t.ColorStepFilter.prototype.constructor=t.ColorStepFilter,Object.defineProperty(t.ColorStepFilter.prototype,"step",{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}),t.DotScreenFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec4 dimensions;","uniform sampler2D uSampler;","uniform float angle;","uniform float scale;","float pattern() {","   float s = sin(angle), c = cos(angle);","   vec2 tex = vTextureCoord * dimensions.xy;","   vec2 point = vec2(","       c * tex.x - s * tex.y,","       s * tex.x + c * tex.y","   ) * scale;","   return (sin(point.x) * sin(point.y)) * 4.0;","}","void main() {","   vec4 color = texture2D(uSampler, vTextureCoord);","   float average = (color.r + color.g + color.b) / 3.0;","   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);","}"]},t.DotScreenFilter.prototype=Object.create(t.AbstractFilter.prototype),t.DotScreenFilter.prototype.constructor=t.DotScreenFilter,Object.defineProperty(t.DotScreenFilter.prototype,"scale",{get:function(){return this.uniforms.scale.value},set:function(e){this.dirty=!0,this.uniforms.scale.value=e}}),Object.defineProperty(t.DotScreenFilter.prototype,"angle",{get:function(){return this.uniforms.angle.value},set:function(e){this.dirty=!0,this.uniforms.angle.value=e}}),t.CrossHatchFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={blur:{type:"1f",value:1/512}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform float blur;","uniform sampler2D uSampler;","void main(void) {","    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);","    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);","    if (lum < 1.00) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.75) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.50) {","        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","    if (lum < 0.3) {","        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);","        }","    }","}"]},t.CrossHatchFilter.prototype=Object.create(t.AbstractFilter.prototype),t.CrossHatchFilter.prototype.constructor=t.CrossHatchFilter,Object.defineProperty(t.CrossHatchFilter.prototype,"blur",{get:function(){return this.uniforms.blur.value/(1/7e3)},set:function(e){this.uniforms.blur.value=1/7e3*e}}),t.RGBSplitFilter=function(){t.AbstractFilter.call(this),this.passes=[this],this.uniforms={red:{type:"2f",value:{x:5,y:0}},green:{type:"2f",value:{x:0,y:0}},blue:{type:"2f",value:{x:-5,y:0}},dimensions:{type:"4fv",value:[0,0,0,0]},onef:{type:"1f",value:1}},this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform vec2 red;","uniform vec2 green;","uniform vec2 blue;","uniform vec4 dimensions;","uniform float onef;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;","   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;","   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;","   gl_FragColor.a = onef;","}"]},t.RGBSplitFilter.prototype=Object.create(t.AbstractFilter.prototype),t.RGBSplitFilter.prototype.constructor=t.RGBSplitFilter,Object.defineProperty(t.RGBSplitFilter.prototype,"onef",{get:function(){return this.uniforms.onef.value},set:function(e){this.uniforms.onef.value=e}}),Object.defineProperty(t.RGBSplitFilter.prototype,"red",{get:function(){return this.uniforms.red.value},set:function(e){this.uniforms.red.value=e}}),Object.defineProperty(t.RGBSplitFilter.prototype,"green",{get:function(){return this.uniforms.green.value},set:function(e){this.uniforms.green.value=e}}),Object.defineProperty(t.RGBSplitFilter.prototype,"blue",{get:function(){return this.uniforms.blue.value},set:function(e){this.uniforms.blue.value=e}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.PIXI=t):"undefined"!=typeof define&&define.amd?define("pixi",t):e.PIXI=t}.call(this),define("util/pixijs_preload_plugin",["underscore","createjs","pixi"],function(e,t,i){"use strict";function s(e){this.AbstractLoader_constructor(e,!0,t.AbstractLoader.XML)}var n=t.extend(s,t.AbstractLoader),o=s;n.canLoadItem=function(e){return e.type===t.AbstractLoader.XML},n._createRequest=function(){this._request=new i.BitmapFontLoader(this._item.src,this._item.crossOrigin)},n.load=function(){this._createRequest(),this._request.on("loaded",e.bind(this._onLoaded,this));var i=new t.Event("initialize");i.loader=this._request,this.dispatchEvent(i),this._request.load()},n._onLoaded=function(){var e=this.resultFormatter&&this.resultFormatter(this),t=this;e instanceof Function?e(function(e){t._result=e,t._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete())},n.destroy=function(){this._request&&this._request.removeAllListeners(),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},t.promote(s,"AbstractLoader");var r=function(){};return o=r,o.getPreloadHandlers=function(){return{callback:o.preloadHandler,types:["image"],extensions:["jpg","jpeg","png","gif","fnt","xml"]}},o.preloadHandler=function(i,n){if(i.pixijs){var r;switch(i.type){case t.AbstractLoader.IMAGE:r=new t.ImageLoader(i,n.preferXHR),r.on("complete",e.bind(o.fileLoadHandler,o));break;case t.AbstractLoader.XML:r=new s(i),r.on("complete",e.bind(o.fileLoadHandler,o));break;default:throw new Error("Not handler for type: "+i.type)}return r}return!0},o.fileLoadHandler=function(e){var t=e.target,i=t.getItem();i.pixijs&&"image"===i.type&&this._handleImage(i,e)},o._handleImage=function(t,s){var n=t.pixijs.ns,o=s.result,r=new i.BaseTexture(o);if(t.pixijs.sprites){var a;e.each(t.pixijs.sprites,function(e){a=i.TextureCache[n+e.id]=new i.Texture(r,{x:e.x,y:e.y,width:e.width,height:e.height}),e.trim&&(a.trim=new i.Rectangle(e.trim.offsetX,e.trim.offsetY,e.trim.origWidth,e.trim.origHeight))},this)}},r}),define("util/ie_sound_preload_plugin",["underscore","config"],function(e,t){"use strict";var i=function(){},s=i;return s.getPreloadHandlers=function(){return{callback:s.preloadHandler,types:["sound"],extensions:["mp3","wav","ogg"]}},s.preloadHandler=function(i){return 0!==t.SOUND_PRIORTY_RANGE&&(e.isUndefined(i.priority)||i.priority>t.SOUND_PRIORTY_RANGE)?!1:!0},i}),function(){function e(e){var i=!1;return function(){if(i)throw new Error("Callback was already called.");i=!0,e.apply(t,arguments)}}var t,i,s={};t=this,null!=t&&(i=t.async),s.noConflict=function(){return t.async=i,s};var n=function(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i+=1)t(e[i],i,e)},o=function(e,t){if(e.map)return e.map(t);var i=[];return n(e,function(e,s,n){i.push(t(e,s,n))}),i},r=function(e,t,i){return e.reduce?e.reduce(t,i):(n(e,function(e,s,n){i=t(i,e,s,n)}),i)},a=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t};"undefined"!=typeof process&&process.nextTick?(s.nextTick=process.nextTick,s.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(e){setImmediate(e)},s.setImmediate=s.nextTick):(s.nextTick=function(e){setTimeout(e,0)},s.setImmediate=s.nextTick),s.each=function(t,i,s){if(s=s||function(){},!t.length)return s();var o=0;n(t,function(n){i(n,e(function(e){e?(s(e),s=function(){}):(o+=1,o>=t.length&&s(null))}))})},s.forEach=s.each,s.eachSeries=function(e,t,i){if(i=i||function(){},!e.length)return i();var s=0,n=function(){t(e[s],function(t){t?(i(t),i=function(){}):(s+=1,s>=e.length?i(null):n())})};n()},s.forEachSeries=s.eachSeries,s.eachLimit=function(e,t,i,s){var n=h(t);n.apply(null,[e,i,s])},s.forEachLimit=s.eachLimit;var h=function(e){return function(t,i,s){if(s=s||function(){},!t.length||0>=e)return s();var n=0,o=0,r=0;!function a(){if(n>=t.length)return s();for(;e>r&&o<t.length;)o+=1,r+=1,i(t[o-1],function(e){e?(s(e),s=function(){}):(n+=1,r-=1,n>=t.length?s():a())})}()}},l=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.each].concat(t))}},c=function(e,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,[h(e)].concat(i))}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[s.eachSeries].concat(t))}},u=function(e,t,i,s){var n=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i,s){n[e.index]=s,t(i)})},function(e){s(e,n)})};s.map=l(u),s.mapSeries=d(u),s.mapLimit=function(e,t,i,s){return g(t)(e,i,s)};var g=function(e){return c(e,u)};s.reduce=function(e,t,i,n){s.eachSeries(e,function(e,s){i(t,e,function(e,i){t=i,s(e)})},function(e){n(e,t)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(e,t,i,n){var r=o(e,function(e){return e}).reverse();s.reduce(r,t,i,n)},s.foldr=s.reduceRight;var p=function(e,t,i,s){var n=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i){i&&n.push(e),t()})},function(){s(o(n.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.filter=l(p),s.filterSeries=d(p),s.select=s.filter,s.selectSeries=s.filterSeries;var m=function(e,t,i,s){var n=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){i(e.value,function(i){i||n.push(e),t()})},function(){s(o(n.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};s.reject=l(m),s.rejectSeries=d(m);var _=function(e,t,i,s){e(t,function(e,t){i(e,function(i){i?(s(e),s=function(){}):t()})},function(){s()})};s.detect=l(_),s.detectSeries=d(_),s.some=function(e,t,i){s.each(e,function(e,s){t(e,function(e){e&&(i(!0),i=function(){}),s()})},function(){i(!1)})},s.any=s.some,s.every=function(e,t,i){s.each(e,function(e,s){t(e,function(e){e||(i(!1),i=function(){}),s()})},function(){i(!0)})},s.all=s.every,s.sortBy=function(e,t,i){s.map(e,function(e,i){t(e,function(t,s){t?i(t):i(null,{value:e,criteria:s})})},function(e,t){if(e)return i(e);var s=function(e,t){var i=e.criteria,s=t.criteria;return s>i?-1:i>s?1:0};i(null,o(t.sort(s),function(e){return e.value}))})},s.auto=function(e,t){t=t||function(){};var i=a(e);if(!i.length)return t(null);var o={},h=[],l=function(e){h.unshift(e)},c=function(e){for(var t=0;t<h.length;t+=1)if(h[t]===e)return void h.splice(t,1)},d=function(){n(h.slice(0),function(e){e()})};l(function(){a(o).length===i.length&&(t(null,o),t=function(){})}),n(i,function(i){var h=e[i]instanceof Function?[e[i]]:e[i],u=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var h={};n(a(o),function(e){h[e]=o[e]}),h[i]=r,t(e,h),t=function(){}}else o[i]=r,s.setImmediate(d)},g=h.slice(0,Math.abs(h.length-1))||[],p=function(){return r(g,function(e,t){return e&&o.hasOwnProperty(t)},!0)&&!o.hasOwnProperty(i)};if(p())h[h.length-1](u,o);else{var m=function(){p()&&(c(m),h[h.length-1](u,o))};l(m)}})},s.waterfall=function(e,t){if(t=t||function(){},e.constructor!==Array){var i=new Error("First argument to waterfall must be an array of functions");return t(i)}if(!e.length)return t();var n=function(e){return function(i){if(i)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),r=e.next();o.push(r?n(r):t),s.setImmediate(function(){e.apply(null,o)})}}};n(s.iterator(e))()};var f=function(e,t,i){if(i=i||function(){},t.constructor===Array)e.map(t,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},i);else{var s={};e.each(a(t),function(e,i){t[e](function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),s[e]=n,i(t)})},function(e){i(e,s)})}};s.parallel=function(e,t){f({map:s.map,each:s.each},e,t)},s.parallelLimit=function(e,t,i){f({map:g(t),each:h(t)},e,i)},s.series=function(e,t){if(t=t||function(){},e.constructor===Array)s.mapSeries(e,function(e,t){e&&e(function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t.call(null,e,i)})},t);else{var i={};s.eachSeries(a(e),function(t,s){e[t](function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),i[t]=n,s(e)})},function(e){t(e,i)})}},s.iterator=function(e){var t=function(i){var s=function(){return e.length&&e[i].apply(null,arguments),s.next()};return s.next=function(){return i<e.length-1?t(i+1):null},s};return t(0)},s.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var v=function(e,t,i,s){var n=[];e(t,function(e,t){i(e,function(e,i){n=n.concat(i||[]),t(e)})},function(e){s(e,n)})};s.concat=l(v),s.concatSeries=d(v),s.whilst=function(e,t,i){e()?t(function(n){return n?i(n):void s.whilst(e,t,i)}):i()},s.doWhilst=function(e,t,i){e(function(n){return n?i(n):void(t()?s.doWhilst(e,t,i):i())})},s.until=function(e,t,i){e()?i():t(function(n){return n?i(n):void s.until(e,t,i)})},s.doUntil=function(e,t,i){e(function(n){return n?i(n):void(t()?i():s.doUntil(e,t,i))})},s.queue=function(t,i){function o(e,t,o,r){t.constructor!==Array&&(t=[t]),n(t,function(t){var n={data:t,callback:"function"==typeof r?r:null};o?e.tasks.unshift(n):e.tasks.push(n),e.saturated&&e.tasks.length===i&&e.saturated(),s.setImmediate(e.process)})}void 0===i&&(i=1);var r=0,a={tasks:[],concurrency:i,saturated:null,empty:null,drain:null,push:function(e,t){o(a,e,!1,t)},unshift:function(e,t){o(a,e,!0,t)},process:function(){if(r<a.concurrency&&a.tasks.length){var i=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),r+=1;var s=function(){r-=1,i.callback&&i.callback.apply(i,arguments),a.drain&&a.tasks.length+r===0&&a.drain(),a.process()},n=e(s);t(i.data,n)}},length:function(){return a.tasks.length},running:function(){return r}};return a},s.cargo=function(e,t){var i=!1,r=[],a={tasks:r,payload:t,saturated:null,empty:null,drain:null,push:function(e,i){e.constructor!==Array&&(e=[e]),n(e,function(e){r.push({data:e,callback:"function"==typeof i?i:null}),a.saturated&&r.length===t&&a.saturated()}),s.setImmediate(a.process)},process:function h(){if(!i){if(0===r.length)return void(a.drain&&a.drain());var s="number"==typeof t?r.splice(0,t):r.splice(0),l=o(s,function(e){return e.data});a.empty&&a.empty(),i=!0,e(l,function(){i=!1;var e=arguments;n(s,function(t){t.callback&&t.callback.apply(null,e)}),h()})}},length:function(){return r.length},running:function(){return i}};return a};var E=function(e){return function(t){var i=Array.prototype.slice.call(arguments,1);t.apply(null,i.concat([function(t){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&n(i,function(t){console[e](t)}))}]))}};s.log=E("log"),s.dir=E("dir"),s.memoize=function(e,t){var i={},s={};t=t||function(e){return e};var n=function(){var n=Array.prototype.slice.call(arguments),o=n.pop(),r=t.apply(null,n);r in i?o.apply(null,i[r]):r in s?s[r].push(o):(s[r]=[o],e.apply(null,n.concat([function(){i[r]=arguments;var e=s[r];delete s[r];for(var t=0,n=e.length;n>t;t++)e[t].apply(null,arguments)}])))};return n.memo=i,n.unmemoized=e,n},s.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},s.times=function(e,t,i){for(var n=[],o=0;e>o;o++)n.push(o);return s.map(n,t,i)},s.timesSeries=function(e,t,i){for(var n=[],o=0;e>o;o++)n.push(o);return s.mapSeries(n,t,i)},s.compose=function(){var e=Array.prototype.reverse.call(arguments);return function(){var t=this,i=Array.prototype.slice.call(arguments),n=i.pop();s.reduce(e,i,function(e,i,s){i.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);s(e,t)}]))},function(e,i){n.apply(t,[e].concat(i))})}};var y=function(e,t){var i=function(){var i=this,s=Array.prototype.slice.call(arguments),n=s.pop();return e(t,function(e,t){e.apply(i,s.concat([t]))},n)};if(arguments.length>2){var s=Array.prototype.slice.call(arguments,2);return i.apply(this,s)}return i};s.applyEach=l(y),s.applyEachSeries=d(y),s.forever=function(e,t){function i(s){if(s){if(t)return t(s);throw s}e(i)}i()},"undefined"!=typeof define&&define.amd?define("libs/async",[],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:t.async=s}(),define("model/loader_collection",["console","underscore","jquery","backbone","config","createjs","util/multitype_preload_plugin","util/createjs_preload_plugin","util/pixijs_preload_plugin","util/ie_sound_preload_plugin","libs/async"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=s.Collection.extend({loadDone:!1,loaders:{},list:null,initialize:function(){o.SoundJS.alternateExtensions=["ogg"],this.list=[],this.on("add",this.onAdded,this),this.on("change:loaded",this.onLoaded,this)},loadManifest:function(e,i){t.each(e,function(e){e.src&&-1===e.src.indexOf(n.CDN)&&(e.src=n.CDN+e.src),e.group=i}),this.add(e)},createLoader:function(e){if(!this.loaders[e]){var i=new o.LoadQueue(!1);i.installPlugin(r.use([l,o.Sound,a,h])),i.setMaxConnections(4),i.maintainScriptOrder=!1,i.addEventListener("loadstart",t.bind(this.onQueueStart,this)),i.addEventListener("fileload",t.bind(this.onFileLoaded,this)),i.addEventListener("complete",t.bind(this.onComplete,this)),i.addEventListener("progress",t.bind(this.onProgress,this)),i.addEventListener("error",t.bind(this.onError,this)),i.addEventListener("fileerror",t.bind(this.onError,this)),this.loaders[e]=i}return this.loaders[e]},onQueueStart:function(e){var i;t.each(this.loaders,function(t,s){t===e.target&&(i=s)},this),i&&t.extend(e,{group:i}),this.trigger("queue_starts",e)},onLoaded:function(e,t){if(!t)throw new Error("Load set to false")},onProgress:function(e){this.trigger("progress",e)},onAdded:function(e,i,s){e.has("id")||e.set({id:e.get("src")}),e.has("loadTimeout ")||e.set({loadTimeout:1e3}),t.isUndefined(s.group)||e.set({group:s.group}),e.has("group")||e.set({group:"main"}),e.set({loaded:!1},{silent:!0});var n=this.getLoader(e.get("group"));n||(n=this.createLoader(e.get("group")));var r=e.toJSON(),a=(new o.LoadItem).set(r);n.loadFile(a,!1)},getLoader:function(e){return this.loaders[e]},onFileLoaded:function(e){this.get(e.item.id).set(t.extend(e.item,{loaded:!0})),this.trigger("loaded",e)},onComplete:function(e){var i;t.each(this.loaders,function(t,s){t===e.target&&(i=s)},this),i&&t.extend(e,{group:i}),this.trigger("complete",e)},setPaused:function(e,i){t.isUndefined(i)&&(i="main");var s=this.getLoader(i);s&&s.setPaused(e)},stop:function(e){t.isUndefined(e)&&(e="main");var i=this.getLoader(e);i&&(i.close(),i.reset())},removeGroup:function(e){if(t.isUndefined(e))throw new Error(" No group defined");var i=this.getLoader(e);if(i){var s=t.indexOf(this.list,i),n=this.where({group:e});t.each(n,function(e){o.Sound.removeSound(e.get("src")),this.trigger("sound_removed_from_loader",e.get("id"))},this),i.close(),i.removeAll(),i.removeAllEventListeners(),i.destroy(),this.list.splice(s,1),delete this.loaders[e],i=null,this.remove(n),this.trigger("group_removed",e),this.processList()}},start:function(e){t.isUndefined(e)&&(e="main");var i=this.getLoader(e);i?(this.list.push(i),this.processList()):this.onComplete({group:e})},processList:function(){if(this.list=t.uniq(this.list,!0),this.list.length>0){var e=this,i=this.list.shift(),s=i.on("complete",function(){i.off("complete",s),i=null,e.processList()});i.load()}},hasLoaded:function(e){var t=!0;if(e){var s=this.getLoader(e);t=s?s.loaded:!1}else i.each(this.loaders,function(e,i){var s=i.loaded;s||(t=!1)});return t},getResult:function(e){var t;return i.each(this.loaders,function(i,s){var n=s.getResult(e);n&&(t=n)}),t},onError:function(t){e.error(t),this.get(t.item.id).set({loaded:!0,error:!0}),this.trigger("load_error",t)}}),d=new c;return d}),define("events/sound_events",[],function(){var e={PLAY_SOUND:"PLAY_SOUND",PAUSE_SOUND:"PAUSE_SOUND",STOP_SOUND:"STOP_SOUND",SET_SOUND_VOLUME:"SET_SOUND_VOLUME",SET_GROUP_VOLUME:"SET_GROUP_VOLUME",SOUND_COMPLETE:"SOUND_COMPLETE",TOGGLE_MUTE:"TOGGLE_MUTE",SET_GLOBAL_VOLUME:"SET_GLOBAL_VOLUME"};return e}),define("data/game_tracking_data",[],function(){return{TRACK_IDS:{FLOODLIGHT_FACEBOOK:"FLOODLIGHT_FACEBOOK",FLOODLIGHT_TWITTER:"FLOODLIGHT_TWITTER",GAME_EMBED_OVERLAY:"GAME_EMBED_OVERLAY",GAME_RESULTS_SCREEN:"GAME_RESULTS_SCREEN",GAME_QUIT_LEVEL:"GAME_QUIT_LEVEL",GAME_COMPLETE:"GAME_COMPLETE",LEVEL_COMPLETE_CONTINUE_BTN:"LEVEL_COMPLETE_CONTINUE_BTN",GAME_EMBED_CODE_COPY:"GAME_EMBED_CODE_COPY",GAME_COUPON_OFFERED:"GAME_COUPON_OFFERED",GAME_COUPON_COLLECTED:"GAME_COUPON_COLLECTED",LEVEL_SELECT:"LEVEL_SELECT",LEVEL_SKIP_CUTSCENE:"LEVEL_SKIP_CUTSCENE",LEVEL_PAUSE:"LEVEL_PAUSE",LEVEL_PLAYED:"LEVEL_PLAYED",LEVEL_COMPLETE:"LEVEL_COMPLETE",LEVEL_WIN:"LEVEL_WIN",LEVEL_LOSE:"LEVEL_LOSE",MEDAL_GOLD:"MEDAL_GOLD",MEDAL_SILVER:"MEDAL_SILVER",MEDAL_BRONZE:"MEDAL_BRONZE",MEDAL_FAIL:"MEDAL_FAIL",FIRST_TRY_WIN:"FIRST_TRY_WIN",FIRST_TRY_LOSE:"FIRST_TRY_LOSE",PRE_WIN_LEVEL_PLAYED:"PRE_WIN_LEVEL_PLAYED",POST_WIN_LEVEL_PLAYED:"POST_WIN_LEVEL_PLAYED",EMBED_PLAY_MORE:"EMBED_PLAY_MORE"},TRACKS:{FLOODLIGHT_FACEBOOK:{flood_src:"4361204",flood_type:"KFC9823",flood_cat:"fy15_007"},FLOODLIGHT_TWITTER:{flood_src:"4361204",flood_type:"KFC9823",flood_cat:"fy15_008"},GAME_EMBED_OVERLAY:{pageevent:"Page",pagetrackurl:"game_embed_overlay"},GAME_RESULTS_SCREEN:{pageevent:"Page",pagetrackurl:"game_results"},GAME_QUIT_LEVEL:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"Game-Quit",eventlabel:"--levelIndex--"},GAME_COMPLETE:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"Game-Complete",eventlabel:null},LEVEL_COMPLETE_CONTINUE_BTN:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"Level-Complete-Continue",eventlabel:"--levelIndex--"},GAME_EMBED_CODE_COPY:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"embed-copy-click",eventlabel:null},GAME_COUPON_OFFERED:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"game-coupon",eventlabel:"offered"},GAME_COUPON_COLLECTED:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"game-coupon",eventlabel:"redeemed"},LEVEL_SELECT:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"game complete-level-select",eventlabel:"--levelIndex--"},LEVEL_SKIP_CUTSCENE:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"Cut-scene-skip",eventlabel:"--levelIndex--"},LEVEL_PAUSE:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"pause_level",eventlabel:"--levelIndex--"},LEVEL_PLAYED:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"level_played",eventlabel:"--levelIndex--"},LEVEL_COMPLETE:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"level_resolved",eventlabel:"--levelIndex--"},LEVEL_WIN:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"level_win",eventlabel:"--levelIndex--"},LEVEL_LOSE:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"level_lose",eventlabel:"--levelIndex--"},MEDAL_GOLD:{pageevent:"Event",eventcategory:"ColonelQuest-Medals",eventaction:"Medal Gold",eventlabel:"--levelIndex--"},MEDAL_SILVER:{pageevent:"Event",eventcategory:"ColonelQuest-Medals",eventaction:"Medal Silver",eventlabel:"--levelIndex--"},MEDAL_BRONZE:{pageevent:"Event",eventcategory:"ColonelQuest-Medals",eventaction:"Medal Bronze",eventlabel:"--levelIndex--"},MEDAL_FAIL:{pageevent:"Event",eventcategory:"ColonelQuest-Medals",eventaction:"Medal Fail",eventlabel:"--levelIndex--"},FIRST_TRY_WIN:{pageevent:"Event",eventcategory:"ColonelQuest-1stTrySuccess",eventaction:"1st_try win",eventlabel:"--levelIndex--"},FIRST_TRY_LOSE:{pageevent:"Event",eventcategory:"ColonelQuest-1stTrySuccess",eventaction:"1st_try lose",eventlabel:"--levelIndex--"},PRE_WIN_LEVEL_PLAYED:{pageevent:"Event",eventcategory:"ColonelQuest-PlaysBeforeWin",eventaction:"--pre_win_play_count--",eventlabel:"--levelIndex--"},POST_WIN_LEVEL_PLAYED:{pageevent:"Event",eventcategory:"ColonelQuest-PlaysAfterWin",eventaction:"--post_win_play_count--",eventlabel:"--levelIndex--"},EMBED_PLAY_MORE:{pageevent:"Event",eventcategory:"ColonelQuest",eventaction:"play_more_button",eventlabel:"Level 5 Embed"}}}
}),define("view/common/communicator",["jquery","underscore","backbone","config","data/game_tracking_data"],function(e,t,i,s,n){var o={GAME_TRACK_IDS:null,EVENTS:{LOADER:{ADD_TO_QUEUE:"EVENTS.LOADER.ADD_TO_QUEUE",START_QUEUE:"EVENTS.LOADER.START_QUEUE"},APP:{GO_FULLSCREEN:"EVENTS.APP.GO_FULLSCREEN",ROOT_NODE_SET:"EVENTS.APP.ROOT_NODE_SET",RESIZE:"EVENTS.APP.RESIZE"},TRACKING:"TRACKING",GAME_TRACKING:"GAME_TRACKING",FLOODLIGHT_TRACKING:"FLOODLIGHT_TRACKING",SITE:{SOUNDS:{MOBILE:{HALL:{HALL_MUSIC:{src:s.CDN+"/audio/hall/hall_music_long.mp3"},WELCOME:{src:s.CDN+"/audio/hall/random1_stepright.mp3"},HALL_AMBIENCE:{priority:1,src:s.CDN+"/audio/hall/hall_ambience.wav"}}},CAROUSEL:{BIG_CURTAIN_RAISE:{src:s.CDN+"/audio/hall/big_curtain_raise.mp3"},BUCKET_SLIDES_01:{src:s.CDN+"/audio/hall/bucket_slides_01.mp3"},COLONEL_TRACK_ELEMENT_01:{src:s.CDN+"/audio/hall/colonel_track_element_01.wav"},COLONEL_TRACK_ELEMENT_02:{src:s.CDN+"/audio/hall/colonel_track_element_02.wav"},COLONEL_TRACK_ELEMENT_03:{src:s.CDN+"/audio/hall/colonel_track_element_03.wav"},COLONEL_TRACK_ELEMENT_04:{src:s.CDN+"/audio/hall/colonel_track_element_04.wav"},COLONEL_TRACK_ELEMENT_05:{src:s.CDN+"/audio/hall/colonel_track_element_05.wav"},COLONEL_TRACK_ELEMENT_06:{src:s.CDN+"/audio/hall/colonel_track_element_06.wav"},COLONEL_TRACK_ELEMENT_SQUEEK:{src:s.CDN+"/audio/hall/colonel_track_element_squeek.mp3"},COLONELS_ROLLOVER_01:{priority:1,src:s.CDN+"/audio/hall/colonels_rollover_01.mp3"},COLONELS_ROLLOVER_01_LASTPOSE:{src:s.CDN+"/audio/hall/colonels_rollover_01_lastpose.mp3"},COLONELS_ROLLOVER_02:{priority:1,src:s.CDN+"/audio/hall/colonels_rollover_02.mp3"},COLONELS_ROLLOVER_02_LASTPOSE:{src:s.CDN+"/audio/hall/colonels_rollover_02_lastpose.mp3"},COLONELS_ROLLOVER_03:{priority:1,src:s.CDN+"/audio/hall/colonels_rollover_03.mp3"},COLONELS_ROLLOVER_03_LASTPOSE:{src:s.CDN+"/audio/hall/colonels_rollover_03_lastpose.mp3"},COLONELS_ROLLOVER_04:{priority:1,src:s.CDN+"/audio/hall/colonels_rollover_04.mp3"},COLONELS_ROLLOVER_04_LASTPOSE:{src:s.CDN+"/audio/hall/colonels_rollover_04_lastpose.mp3"},COLONELS_ROLLOVER_05:{priority:1,src:s.CDN+"/audio/hall/colonels_rollover_05.mp3"},COLONELS_ROLLOVER_06:{priority:1,src:s.CDN+"/audio/hall/colonels_rollover_06.mp3"},COLONELS_TRACK_STOP_01:{src:s.CDN+"/audio/hall/colonels_track_stop_01.mp3"},CONSOLE_EMERGES_01:{src:s.CDN+"/audio/hall/console_emerges_01.mp3"},HALL_AMBIENCE:{priority:1,src:s.CDN+"/audio/hall/hall_ambience.wav"},HALL_CLICK_HARD_01:{src:s.CDN+"/audio/hall/hall_click_hard_01.mp3"},HALL_CLICK_HARD_02:{src:s.CDN+"/audio/hall/hall_click_hard_02.mp3"},HALL_CLICK_HARD_03:{src:s.CDN+"/audio/hall/hall_click_hard_03.mp3"},HALL_CLICK_HARD_04:{src:s.CDN+"/audio/hall/hall_click_hard_04.mp3"},HALL_CLICK_HARD_05:{src:s.CDN+"/audio/hall/hall_click_hard_05.mp3"},HALL_CLICK_LIGHT_01:{src:s.CDN+"/audio/hall/hall_click_light_01.mp3"},HALL_CLICK_LIGHT_02:{src:s.CDN+"/audio/hall/hall_click_light_02.mp3"},HALL_CLICK_LIGHT_03:{src:s.CDN+"/audio/hall/hall_click_light_03.mp3"},HALL_CLICK_LIGHT_05:{src:s.CDN+"/audio/hall/hall_click_light_05.mp3"},MOVEMENT_CLOSE_01:{src:s.CDN+"/audio/hall/movement_close_01.mp3"},RATCHET_01:{src:s.CDN+"/audio/hall/ratchet_01.mp3"},ROOM_TONE_ELEMENT_01:{src:s.CDN+"/audio/hall/room_tone_element_01.mp3"},ROOM_TONE_ELEMENT_02:{src:s.CDN+"/audio/hall/room_tone_element_02.mp3"},ROOM_TONE_ELEMENT_03:{src:s.CDN+"/audio/hall/room_tone_element_03.mp3"},ROOM_TONE_ELEMENT_04:{src:s.CDN+"/audio/hall/room_tone_element_04.mp3"},ROOM_TONE_ELEMENT_05:{src:s.CDN+"/audio/hall/room_tone_element_05.mp3"},ROOM_TONE_ELEMENT_06:{src:s.CDN+"/audio/hall/room_tone_element_06.mp3"},ROOM_TONE_ELEMENT_07:{src:s.CDN+"/audio/hall/room_tone_element_07.mp3"},ROOM_TONE_ELEMENT_08:{src:s.CDN+"/audio/hall/room_tone_element_08.mp3"},ROOM_TONE_ELEMENT_09:{src:s.CDN+"/audio/hall/room_tone_element_09.mp3"},ROOM_TONE_ELEMENT_10:{src:s.CDN+"/audio/hall/room_tone_element_10.mp3"},ROOM_TONE_ELEMENT_11:{src:s.CDN+"/audio/hall/room_tone_element_11.mp3"},ROOM_TONE_ELEMENT_12:{src:s.CDN+"/audio/hall/room_tone_element_12.mp3"},ROOM_TONE_ELEMENT_13:{src:s.CDN+"/audio/hall/room_tone_element_13.mp3"},ROOM_TONE_ELEMENT_14:{src:s.CDN+"/audio/hall/room_tone_element_14.mp3"},ROPE_STRETCH:{src:s.CDN+"/audio/hall/rope_stretch.mp3"},SMALL_LIFT_01:{src:s.CDN+"/audio/hall/small_lift_01.mp3"},THUD_01:{src:s.CDN+"/audio/hall/thud_01.mp3"},WHOOSH_DOWN:{src:s.CDN+"/audio/hall/whoosh_down.mp3"},WHOOSH_UP:{src:s.CDN+"/audio/hall/whoosh_up.mp3"},LOADING:{src:s.CDN+"/audio/hall/loading_music_01.mp3"},LOADING_ALT:{src:s.CDN+"/audio/hall/loading_music_02.mp3"},HALL_MUSIC:{src:s.CDN+"/audio/hall/hall_music_long.mp3"},WELCOME:{src:s.CDN+"/audio/hall/random1_stepright.mp3"},WELCOME_2:{src:s.CDN+"/audio/hall/random2_welcometo.mp3"},SIGN_SQUEEK:{src:s.CDN+"/audio/hall/colonel_sign_squeek.mp3"}},EARLY_YEARS:{},GUN_FIGHT:{},MANDOLIN:{CRICKET_LOOP:{src:s.CDN+"/audio/mandolin/crickets_loop.mp3"},MANDOLIN_PREAMBLE:{priority:1,src:s.CDN+"/audio/mandolin/mandolin_preamble.mp3"},MANDOLIN_SONG:{priority:1,src:s.CDN+"/audio/mandolin/mandolin_song.mp3"},MANDOLIN_TUNING:{priority:1,src:s.CDN+"/audio/mandolin/mandolin_tuning.mp3"},RANDOM20_ENCORE:{priority:1,src:s.CDN+"/audio/mandolin/random20_encore.mp3"}},LOOSE_LIPPED:{LOOSE_LIPPED_COLONEL_SPEECH_BREAKS:{priority:1,src:s.CDN+"/audio/loose_lips/loose_lipped_colonel_speech_breaks.mp3"},COLONEL_GLITCH_01:{priority:1,src:s.CDN+"/audio/loose_lips/colonel_glitch_01.mp3"},COLONEL_GLITCH_02:{priority:1,src:s.CDN+"/audio/loose_lips/colonel_glitch_02.mp3"},COLONEL_GLITCH_03:{priority:1,src:s.CDN+"/audio/loose_lips/colonel_glitch_03.mp3"},COLONEL_GLITCH_04:{priority:1,src:s.CDN+"/audio/loose_lips/colonel_glitch_04.mp3"},COLONEL_GLITCH_05:{priority:1,src:s.CDN+"/audio/loose_lips/colonel_glitch_05.mp3"},COLONEL_GLITCH_06:{priority:1,src:s.CDN+"/audio/loose_lips/colonel_glitch_06.mp3"},COLONEL_GLITCH_07:{priority:1,src:s.CDN+"/audio/loose_lips/colonel_glitch_07.mp3"}},GAMES:{},DEPARTED:{}},EMBEDS:{SHOW_EMBED:"EVENTS.SITE.EMBEDS.SHOW_EMBED",HIDE_EMBED:"EVENTS.SITE.EMBEDS.HIDE_EMBED"},PAGE_TRANSITIONS:{SHOW_COMPLETE:"EVENTS.SITE.PAGE_TRANSITIONS.SHOW_COMPLETE",HIDE_COMPLETE:"EVENTS.SITE.PAGE_TRANSITIONS.HIDE_COMPLETE"},SHARE:{FACEBOOK:{SHARE_CURRENT_PAGE:"EVENTS.SITE.SHARE.FACEBOOK.SHARE_CURRENT_PAGE",EMBED_SHARE_CURRENT_PAGE:"EVENTS.SITE.SHARE.FACEBOOK.EMBED_SHARE_CURRENT_PAGE",SHARE_CURRENT_SLIDE:"EVENTS.SITE.SHARE.FACEBOOK.SHARE_CURRENT_SLIDE",SHARE_GAME_RESULTS:"EVENTS.SITE.SHARE.FACEBOOK.SHARE_GAME_RESULTS"},TWITTER:{SHARE_CURRENT_PAGE:"EVENTS.SITE.SHARE.TWITTER.SHARE_CURRENT_PAGE",EMBED_SHARE_CURRENT_PAGE:"EVENTS.SITE.SHARE.TWITTER.EMBED_SHARE_CURRENT_PAGE",SHARE_CURRENT_SLIDE:"EVENTS.SITE.SHARE.TWITTER.SHARE_CURRENT_SLIDE",SHARE_GAME_RESULTS:"EVENTS.SITE.SHARE.TWITTER.SHARE_GAME_RESULTS"}},EASEL:{RENDER_STATE:"EVENTS.SITE.EASEL.RENDER_STATE",STAGE_OBJECT_DEFINED:"EVENTS.SITE.EASEL.STAGE_OBJECT_DEFINED",STAGE_OBJECT_DARKEN:"EVENTS.SITE.EASEL.STAGE_OBJECT_DARKEN",STAGE_OBJECT_LIGHTEN:"EVENTS.SITE.EASEL.STAGE_OBJECT_LIGHTEN",SET_ANIMATION:"EVENTS.SITE.EASEL.SET_ANIMATION",SET_ASSET:"EVENTS.SITE.EASEL.SET_ASSET",SET_ASSET_DONE:"EVENTS.SITE.EASEL.SET_ASSET_DONE",ANIMATE_TO:"EVENTS.SITE.EASEL.ANIMATE_TO",SHOW_BACK_BUTTON:"EVENTS.SITE.EASEL.SHOW_BACK_BUTTON",HALL:{OPEN_CURTAINS:"EVENTS.SITE.EASEL.HALL.OPEN_CURTAINS",COLONELS_STOPPED_MOVING:"EVENTS.SITE.EASEL.HALL.COLONELS_STOPPED_MOVING",ANIMATION_COMPLETE:"EVENTS.SITE.EASEL.HALL.ANIMATION_COMPLETE",SHOW_START:"EVENTS.SITE.EASEL.HALL.SHOW_START",SLIDE_BUCKET:"EVENTS.SITE.EASEL.HALL.SLIDE_BUCKET",COLONEL_MOVES_TO_FRONT:"EVENTS.SITE.EASEL.HALL.COLONEL_MOVES_TO_FRONT",COLONEL_MOVES_TO_START_POS:"EVENTS.SITE.EASEL.HALL.COLONEL_MOVES_TO_START_POS",BUCKET_HITS_FLOOR:"EVENTS.SITE.EASEL.HALL.BUCKET_HITS_FLOOR",ROPE_STRETCH:"EVENTS.SITE.EASEL.HALL.ROPE_STRETCH",SMALL_LIFT:"EVENTS.SITE.EASEL.HALL.SMALL_LIFT",MOVE_CLOSE:"EVENTS.SITE.EASEL.HALL.MOVE_CLOSE",CONSOLE_FORWARD:"EVENTS.SITE.EASEL.HALL.CONSOLE_FORWARD",COLONEL_OUT_OF_ORDER:"EVENTS.SITE.EASEL.HALL.COLONEL_OUT_OF_ORDER",WELCOME:"EVENTS.SITE.EASEL.HALL.WELCOME",RACHET:"EVENTS.SITE.EASEL.HALL.RACHET",CLOSED_CURTAINS:"EVENTS.SITE.EASEL.HALL.CLOSED_CURTAINS"}},DESKTOP:{ANIMATION_INTERRUPTION:"EVENTS.SITE.DESKTOP.ANIMATION_INTERRUPTION",EARLY_YEARS:{SCUBBER_CLICKED:"EVENTS.SITE.DESKTOP.EARLY_YEARS.SCUBBER_CLICKED",NEXT_SLIDE:"EVENTS.SITE.DESKTOP.EARLY_YEARS.NEXT_SLIDE",PREVIOUS_SLIDE:"EVENTS.SITE.DESKTOP.EARLY_YEARS.PREVIOUS_SLIDE",TOTAL_SLIDES_SET:"EVENTS.SITE.DESKTOP.EARLY_YEARS.TOTAL_SLIDES_SET"},DEPARTED:{FETCH_STORE_LOCATIONS:"EVENTS.SITE.DESKTOP.DEPARTED.FETCH_STORE_LOCATIONS",STORES_UPDATE:"EVENTS.SITE.DESKTOP.DEPARTED.STORES_UPDATE",SEARCH:"EVENTS.SITE.DESKTOP.DEPARTED.SEARCH",PLAY_MAP_SOUND:"EVENTS.SITE.DESKTOP.DEPARTED.PLAY_MAP_SOUND",TRIGGER_SOUND:"EVENTS.SITE.DESKTOP.DEPARTED.TRIGGER_SOUND"},LOOSE_LIPS:{OUT_OF_ORDER:"EVENTS.SITE.DESKTOP.LOOSE_LIPS.OUT_OF_ORDER"},MANDOLIN:{MAIN_PLAY_COMPLETE:"EVENTS.SITE.DESKTOP.MANDOLIN.MAIN_PLAY_COMPLETE"},LEGAL:"EVENTS.SITE.DESKTOP.LEGAL",RESIZE:"EVENTS.SITE.DESKTOP.RESIZE"},MOBILE:{START_SITE:"EVENTS.SITE.MOBILE.START_SITE",RETURN_TO_CAROUSEL:"EVENTS.SITE.MOBILE.RETURN_TO_CAROUSEL",TOGGLE_MENU:"EVENTS.SITE.MOBILE.TOGGLE_MENU",SHOW_VIDEO:"EVENTS.SITE.MOBILE.SHOW_VIDEO",REMOVE_VIDEO:"EVENTS.SITE.MOBILE.REMOVE_VIDEO",SOUND_ACCEPT:"EVENTS.SITE.MOBILE.SOUND_ACCEPT",SOUND_REFUSE:"EVENTS.SITE.MOBILE.SOUND_REFUSE",LOOSE_LIPS:{OUT_OF_ORDER:"EVENTS.SITE.DESKTOP.LOOSE_LIPS.OUT_OF_ORDER"}}},GAME:{LOAD:"EVENTS.GAME.LOAD",LOAD_COMPLETE:"EVENTS.GAME.LOAD_COMPLETE",NEXT:"EVENTS.GAME.NEXT",START:"EVENTS.GAME.START",PAUSE:"EVENTS.GAME.PAUSE",RESTART:"EVENTS.GAME.RESTART",GOTO:"EVENTS.GAME.GOTO",DEBUG_WIN:"EVENTS.GAME.DEBUG_WIN",CLAIM_PRIZE:"CLAIM_PRIZE",PLAY_MORE:"PLAY_MORE",SCREENS:{SHELL:{RESULTS:"EVENTS.GAME.SCREENS.SHELL.RESULTS",PROGRESS:"EVENTS.GAME.SCREENS.SHELL.PROGRESS",CAREER:"EVENTS.GAME.SCREENS.SHELL.CAREER"},IN_GAME:{INTRO:"EVENTS.GAME.SCREENS.IN_GAME.INTRO",INSTRUCTIONS:"EVENTS.GAME.SCREENS.IN_GAME.INSTRUCTIONS",COUNTDOWN:"EVENTS.GAME.SCREENS.IN_GAME.COUNTDOWN",CUT_SCENE:"EVENTS.GAME.SCREENS.IN_GAME.CUT_SCENE"}},AUDIO:{REWARD:"EVENTS.GAME.AUDIO.REWARD",LOSE:"EVENTS.GAME.AUDIO.LOSE",MOUSEOVER:"EVENTS.GAME.AUDIO.MOUSEOVER",CLICK:"EVENTS.GAME.AUDIO.CLICK",CUTSCREEN_MUSIC:"EVENTS.GAME.AUDIO.CUTSCREEN_MUSIC",COUNTDOWN:{ONE:"EVENTS.GAME.AUDIO.COUNTDOWN.ONE",TWO:"EVENTS.GAME.AUDIO.COUNTDOWN.TWO",THREE:"EVENTS.GAME.AUDIO.COUNTDOWN.THREE",GO:"EVENTS.GAME.AUDIO.COUNTDOWN.GO"}}}}};return t.extend(o,i.Events),o.GAME_TRACK_IDS=n.TRACK_IDS,o}),define("text",["module"],function(e){"use strict";var t,i,s,n,o,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,h=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),d=l&&location.hostname,u=l&&(location.port||void 0),g={},p=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(h);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=r[t];try{e=new ActiveXObject(i)}catch(s){}if(e){r=[i];break}}return e},parseName:function(e){var t,i,s,n=!1,o=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!r||o>1)?(t=e.substring(0,o),i=e.substring(o+1,e.length)):t=e,s=i||t,o=s.indexOf("!"),-1!==o&&(n="strip"===s.substring(o+1),s=s.substring(0,o),i?i=s:t=s),{moduleName:t,ext:i,strip:n}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,s,n){var o,r,a,h=t.xdRegExp.exec(e);return h?(o=h[2],r=h[3],r=r.split(":"),a=r[1],r=r[0],!(o&&o!==i||r&&r.toLowerCase()!==s.toLowerCase()||(a||r)&&a!==n)):!0},finishLoad:function(e,i,s,n){s=i?t.strip(s):s,p.isBuild&&(g[e]=s),n(s)},load:function(e,i,s,n){if(n.isBuild&&!n.inlineText)return void s();p.isBuild=n.isBuild;var o=t.parseName(e),r=o.moduleName+(o.ext?"."+o.ext:""),a=i.toUrl(r),h=p.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void s():void(!l||h(a,c,d,u)?t.get(a,function(i){t.finishLoad(e,o.strip,i,s)},function(e){s.error&&s.error(e)}):i([r],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,s)}))},write:function(e,i,s){if(g.hasOwnProperty(i)){var n=t.jsEscape(g[i]);s.asModule(e+"!"+i,"define(function () { return '"+n+"';});\n")}},writeFile:function(e,i,s,n,o){var r=t.parseName(i),a=r.ext?"."+r.ext:"",h=r.moduleName+a,l=s.toUrl(r.moduleName+a)+".js";t.load(h,s,function(){var i=function(e){return n(l,e)};i.asModule=function(e,t){return n.asModule(e,l,t)},t.write(e,h,i,o)},o)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,s){try{var n=i.readFileSync(e,"utf8");0===n.indexOf("﻿")&&(n=n.substring(1)),t(n)}catch(o){s(o)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,i,s,n){var o,r=t.createXhr();if(r.open("GET",e,!0),n)for(o in n)n.hasOwnProperty(o)&&r.setRequestHeader(o.toLowerCase(),n[o]);p.onXhr&&p.onXhr(r,e),r.onreadystatechange=function(){var t,n;4===r.readyState&&(t=r.status,t>399&&600>t?(n=new Error(e+" HTTP status: "+t),n.xhr=r,s(n)):i(r.responseText),p.onXhrComplete&&p.onXhrComplete(r,e))},r.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,s,n="utf-8",o=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),n)),h="";try{for(i=new java.lang.StringBuffer,s=a.readLine(),s&&s.length()&&65279===s.charAt(0)&&(s=s.substring(1)),null!==s&&i.append(s);null!==(s=a.readLine());)i.append(r),i.append(s);h=String(i.toString())}finally{a.close()}t(h)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,n=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in s,t.get=function(e,t){var i,r,a,h={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{i=s["@mozilla.org/network/file-input-stream;1"].createInstance(n.nsIFileInputStream),i.init(a,1,0,!1),r=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(n.nsIConverterInputStream),r.init(i,"utf-8",i.available(),n.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),h),r.close(),i.close(),t(h.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),t}),define("text!model/../../data/EN.json",[],function(){return'{\n "404": "Whoops! Still getting used to the internet",\n "locale": "EN",\n "0.0": "",\n "site-title": "Colonel Sanders",\n "site-keywords": "Learn how the world\'s most famous Colonel went from sixth-grade dropout to legend.",\n "1.0": "",\n "shell-footer-button-about": "About",\n "shell-footer-button-legal": "Legal",\n "shell-footer-button-privacy": "Privacy",\n "shell-about-description": "ColonelSanders.com is the official Internet archive of the world’s most beloved chicken salesman, Colonel Harland Sanders.\\r\\n\\r\\nFor information on the world’s best chicken, visit kfc.com.",\n "shell-about-kfc-link": "http://www.kfc.com/",\n "shell-legal": "http://www.kfc.com/about/legal",\n "shell-privacy": "http://www.kfc.com/about/legal/privacy",\n "site-share-facebook-title": "The Hall of Colonels",\n "site-share-facebook-copy": "Learn the true story of how Colonel Sanders shot a man, delivered babies, and made the world\'s best chicken.",\n "site-share-twitter-body": "See the amazing life of the man behind the bucket! ",\n "shell-embed-title": "Copy Embed Code To Your Site",\n "shell-embed-share-title": "Or share this! ",\n "site-audio": "The Hall of Colonels works best with sound.",\n "mobile-audio-toggle": "The Hall of Colonels works best with sound.",\n "mobile-landscape-notofication": "Flip that device on its side!",\n "mobile-loading-copy": "We load our pages the same way we make chicken. The hard way.",\n "2.0": "",\n "desktop-hall-intro-copy": "HELP HARLAND SANDERS BECOME A COLONEL\\r\\n",\n "desktop-hall-title-early-years": "1918",\n "desktop-hall-title-gun-fight": "1930",\n "desktop-hall-title-mandolin": "1952",\n "desktop-hall-title-loose-lipped": "1964",\n "desktop-hall-title-games": "1978",\n "desktop-hall-title-departed": "1980",\n "3.0": "",\n "early-years-twitter-copy": "Learn how a sixth-grade dropout became a colonel.",\n "early-years-facebook-title": "Learn how a sixth-grade dropout became a colonel.",\n "early-years-facebook-description": "Learn how a sixth-grade dropout became a chicken fryin\' Kentucky Colonel.",\n "early-years-embed-copy": "Learn how a sixth-grade dropout became a colonel.",\n "early-years-copy-slide-0": "Learn how a sixth-grade dropout became a chicken fryin\' Kentucky Colonel.",\n "early-years-copy-slide-1": "At the age of 10 I became a farmhand, making $2 a month. That probably doesn’t seem like a lot to you, but in the 1800s that was nearly $4!",\n "early-years-copy-slide-2": "I quit school in sixth grade because I didn’t care much for math.\\r\\nSurprisingly, no one questioned this decision.",\n "early-years-copy-slide-3": "At 16 I lied about my age and enlisted in the army. I was stationed in Cuba, where I took care of mules and learned not to lie.",\n "early-years-copy-slide-4": "In the early 1920s I sold tires and became the top salesman in Kentucky and was fired. They said it was my temper. You can imagine my response.",\n "early-years-copy-slide-5": "I operated a steamboat ferry between Indiana and Louisville. No one knows why it ended because someone didn’t do a great job of recordkeeping.",\n "early-years-copy-slide-6": "",\n "mobile-early-years-copy-slide-1": "At the age of 10 I became a farmhand, making $2 a month. That probably doesn’t seem like a lot to you, but in the 1800s that was nearly $4!",\n "mobile-early-years-copy-slide-2": "I quit school in sixth grade because I didn’t care much for math.\\r\\nSurprisingly, no one questioned this decision.",\n "mobile-early-years-copy-slide-3": "At 16 I lied about my age and enlisted in the army. I was stationed in Cuba, where I took care of mules and learned not to lie.",\n "mobile-early-years-copy-slide-4": "In the early 1920s I sold tires and became the top salesman in Kentucky and was fired. They said it was my temper. You can imagine my response.",\n "mobile-early-years-copy-slide-5": "I operated a steamboat ferry between Indiana and Louisville. No one knows why it ended because someone didn’t do a great job of recordkeeping.",\n "4.0": "",\n "gun-fight-embed-button-title": "Share this!\\r\\n",\n "gun-fight-embed-copy": "Show your friends my amazing and historically accurate play!\\r\\n",\n "gun-fight-twitter-copy": "Check out this amazing an historically accurate play about the Colonel!",\n "gun-fight-facebook-title": "Watch Colonel Sanders bring a killer to justice!",\n "gun-fight-facebook-description": "An amazing and historically accurate play about the Colonel!",\n "5.0": "",\n "mandolin-embed-copy": "HEAR COLONEL SANDERS SING ABOUT GUNS AND BABIES",\n "mandolin-karaoke-copy": "I am the Colonel\\r\\nAnd here’s my story\\r\\nDropped out in sixth grade\\r\\nDelivered babies\\r\\nI was a lawyer\\r\\nI shot somebody\\r\\nAnd I made the best chicken you ever did eat and you can find it at KFC\\r\\n",\n "mandolin-twitter-copy": "Hear Colonel Sanders sing about guns and babies.",\n "mandolin-facebook-title": "Hear Colonel Sanders sing about guns and babies.",\n "mandolin-facebook-description": "Hear the abbreviated details of the wild life of Colonel Sanders in a very short song.",\n "6.0": "",\n "loose-lipped-out-of-order": "Out of Order",\n "loose-lipped-embed-copy": "LEARN THE COLONEL\'S SECRET RECIPE ",\n "loose-lipped-twitter-copy": "At last the Colonel\'s secret recipe has been revealed!",\n "loose-lipped-facebook-title": "At last the Colonel\'s secret recipe has been revealed!",\n "loose-lipped-facebook-description": "Pssst! Wanna hear a secret about the world\'s best fried chicken?",\n "7.0": "",\n "game-introduction-copy": "ColonelQuest (title)\\r\\nTrue stories from the adventures of Colonel Sanders\\r\\n \\r\\n\\r\\nPRESS START",\n "game-titles-game-1": "LEVEL 1: SIXTH GRADE DROPOUT",\n "game-cutscene-game-1 ": "School is important.*\\r\\nBut math is hard. And it doesn’t teach you how to make chicken. \\r\\n \\r\\nHelp young Colonel escape the classroom so he can support the family!\\r\\n \\r\\n*Seriously though, stay in school because cooking fried chicken isn’t easy.",\n "game-instructions-game-1": "Avoid the teacher or you’ll end up in detention!\\r\\nEscape the school to advance.\\r\\nBONUS: Escape the playground for a gold drumstick!\\r\\n\\r\\nPush Z to slide under tables and dodge teachers. Press M to jump tables.\\r\\n\\r\\n",\n "game-titles-game-2": "LEVEL 2: BABY BUSINESS",\n "game-cutscene-game-2": "Back in the Colonel\'s day, not everyone could afford a doctor.\\r\\nWho will deliver all the babies?\\r\\n \\r\\nA helpful (but technically unlicensed) Doctor Colonel, that’s who!",\n "game-instructions-game-2": "Catch as many babies as you can so the Colonel won’t get sued for malpractice!\\r\\nCatch 28 babies to win!\\r\\nCatch them all for a gold drumstick!\\r\\n\\r\\nPress Z to move left. Press M to move right.",\n "game-titles-game-3": "LEVEL 3: BUSINESS CARD JAMBOREE",\n "game-cutscene-game-3 ": "Oh no! A train has crashed!\\r\\nThe railroad wants the victims to settle. Victims who have serious injuries. For $1.\\r\\n\\r\\nOne dollar???\\r\\n \\r\\nNot if Attorney Colonel gets there first!\\r\\n",\n "game-instructions-game-3": "Help the Colonel hand out business cards to help his clients.\\r\\nHand out cards to 25 clients to win!\\r\\nHand out cards to every client for a gold drumstick!\\r\\n\\r\\nPress Z to offer the Colonel’s services. Press M to jump over obstacles.",\n "game-titles-game-4": "LEVEL 4: COURTROOM BRAWL!\\r\\n",\n "game-cutscene-game-4 ": "Being a lawyer is a tough job.\\r\\nEspecially when a fight breaks out in court. And you are in the fight. And the person you are face-punching is your own client.\\r\\n \\r\\nHelp the Colonel say, “I object” the old-fashioned way!",\n "game-instructions-game-4": "Bang the gavel on that judge!\\r\\nDefeat the client to win!\\r\\nKO the client in under 30 seconds for a gold drumstick!\\r\\n\\r\\nPress Z to block. Press M to fight your client.",\n "game-titles-game-5": "LEVEL 5: GAS STATION SHOOTOUT\\r\\n",\n "game-cutscene-game-5 ": "Next, the Colonel opens a gas station.\\r\\nBut a rival station owner doesn’t like competition. And he’s looking for a fill-up - of armed conflict!\\r\\n \\r\\nLook out! He’s got a gun!",\n "game-instructions-game-5": "Defend your non-chicken-related coworkers… by any means necessary!\\r\\nDefeat the bad guy to win.\\r\\nNever miss a shot to get a gold drumstick!\\r\\n\\r\\nPress Z to duck and reload. Press M to shoot.",\n "game-titles-game-6": "LEVEL 6: CHICKEN TIME!\\r\\n",\n "game-cutscene-game-6 ": "The Colonel has had a lot of adventures.\\r\\nBut the hardest one has just begun. It involves building a restaurant empire from scratch with his secret recipe for perfect fried chicken.\\r\\n \\r\\nReady?\\r\\n",\n "game-instructions-game-6": "Help the Colonel feed the multitudes!\\r\\nEarn $20 to win!\\r\\nEarn $60 for a gold drumstick!\\r\\n\\r\\nPress Z to move down to your stations. Press M to make chicken and feed hungry people who have never tasted the world’s best video-game fried chicken.",\n "game-titles-mobile-game-1": "School is important.*\\r\\nBut math is hard. And it doesn’t teach you how to make chicken. \\r\\n \\r\\nHelp young Colonel escape the classroom so he can support the family!\\r\\n \\r\\n*Seriously though, stay in school because cooking fried chicken isn’t easy.\\r\\n",\n "game-mobile-instruction-1": "Avoid the teacher or you’ll end up in detention!\\r\\nEscape the school to advance.\\r\\nBONUS: Escape the playground for a gold drumstick!\\r\\n\\r\\nPush left to slide and right to jump.",\n "game-titles-mobile-game-2": "Back in the Colonel\'s day, not everyone could afford a doctor.\\r\\nWho will deliver all the babies?\\r\\n \\r\\nA helpful (but technically unlicensed) Doctor Colonel, that’s who!\\r\\n",\n "game-mobile-instruction-2": "Catch as many babies as you can so the Colonel won’t get sued for malpractice!\\r\\nCatch them all for a gold drumstick!\\r\\n\\r\\nPush left or right to catch the babies.",\n "game-titles-mobile-game-3": "Oh no! A train has crashed!\\r\\nThe railroad wants the victims to settle. Victims who have serious injuries. For $1.\\r\\n\\r\\nOne dollar???\\r\\n \\r\\nNot if Attorney Colonel gets there first!",\n "game-mobile-instruction-3": "Help the Colonel hand out business cards to help his clients!\\r\\nHand out cards to X clients to win!\\r\\nHand out cards to every client for a gold drumstick!\\r\\n\\r\\nPress left to offer the Colonel’s services. Press right to jump over obstacles.",\n "game-titles-mobile-game-4": "Being a lawyer is a tough job.\\r\\nEspecially when a fight breaks out in court. And you are in the fight. And the person you are face-punching is your own client.\\r\\n \\r\\nHelp the Colonel say, “I object” the old fashioned way!",\n "game-mobile-instruction-4": "Bang the gavel on that judge!\\r\\nDefeat the client to win!\\r\\nKO the client in under 30 seconds for a gold drumstick!\\r\\n\\r\\nPress left to block and right to fight your client.",\n "game-titles-mobile-game-5": "Next, the Colonel opens a gas station.\\r\\nBut a rival station owner doesn’t like competition. And he’s looking for a fill-up - of armed conflict!\\r\\n \\r\\nLook out! He’s got a gun!",\n "game-mobile-instruction-5": "Defend your non-chicken related coworkers…by any means necessary!\\r\\nDefeat the bad guy to win.\\r\\nNever miss a shot to get a gold drumstick!\\r\\n\\r\\nPress left to duck & reload. Press right to shoot.",\n "game-titles-mobile-game-6": "The Colonel has had a lot of adventures.\\r\\nBut the hardest one has just begun. It involves building a restaurant empire from scratch with his secret recipe for perfect fried chicken.\\r\\n \\r\\nReady?",\n "game-mobile-instruction-6": "Help the Colonel feed the multitudes!\\r\\nEarn $20 to win!\\r\\nEarn $60 for a gold drumstick!\\r\\n\\r\\nPress left to move down to your stations. Press right to make chicken and feed hungry people who have never tasted the world’s best video-game fried chicken.",\n "game-win-message": "Winner Winner Original Recipe® Chicken Dinner\\r\\n",\n "game-win-results": "??",\n "game-lose-copy": "OPTION 1:\\r\\nTarnation!\\r\\nTry again\\r\\n\\r\\nOPTION 2:\\r\\nThe Colonel never gives up\\r\\nYou Lose.\\r\\n\\r\\nOPTION 3:\\r\\nBetter luck next time, Colonel.\\r\\n\\r\\nOPTION 4:\\r\\nEnjoy the taste of FAILURE",\n "game-lose-results": "??",\n "game-next-level": "OPTION 1: Congratulations! You’re on your way to becoming the world’s best chicken salesperson.\\r\\n\\r\\nOPTION 2: You did it!\\r\\n\\r\\nOPTION 3: \\r\\nEnjoy the taste of victory.\\r\\n(It’s finger lickin’ good.)\\r\\n\\r\\nOPTION 4: Yeehaw!\\r\\n\\r\\nOPTION 5: Great job! Have some chicken.\\r\\n\\r\\nOPTION 6: Nice work! Time for a bucket of victory!",\n "game-replay-copy": "Don’t give up. Colonels never quit.",\n "game-redeem-copy": "",\n "embed-game-copy": "Challenge your friends to beat your score. Loser buys the chicken!\\r\\n",\n "embed-game-cutcene": "The Colonel opens a gas station.\\r\\nBut a rival station owner doesn’t like competition. And he’s looking for a fill-up - of armed conflict!\\r\\n \\r\\nLook out! He’s got a gun!",\n "embed-game-facebook-title": "Save babies! Shoot bad guys! Fry chicken! Challenge your friends! ColonelQuest!",\n "embed-game-facebook-description": "Want to play a historically accurate video game about Colonel Sanders? Good, because now there is one.",\n "games-twitter-copy": "Save babies! Shoot bad guys! Fry chicken! Challenge your friends! ColonelQuest!",\n "games-facebook-title": "Save babies! Shoot bad guys! Fry chicken! Challenge your friends! ColonelQuest!",\n "games-facebook-description": "Want to play a historically accurate video game about Colonel Sanders? Good, because now there is one.",\n "share-game-score-copy": "Check out my score on ColonelQuest. I got [number of Bronze] Bronze, [number of Silver] Silver and [number of Gold] Gold!",\n "coupon-print-button": "Print",\n "coupon-save-button": "Download",\n "8.0": "",\n "departed-title": "",\n "departed-search-copy": "Find a KFC US store by zip code or city/state",\n "departed-learn": "Learn more \\r\\nabout my legacy",\n "departed-learn-copy": "Harland Sanders spent most of his life without wealth. Once he became successful late in life, he decided to share his fortune with those who needed it most. The trusts and charities that bear his name continue to donate millions to education and health care even today, and the March of Dimes / Colonel Harland Sanders Award is given annually to an individual whose lifetime body of research and education has made significant contributions to the genetic sciences.",\n "departed-learn-copy-quote1": "“I never had any desire to be the richest man in the cemetery.”",\n "departed-learn-copy-quote2": "",\n "departed-learn-copy-quote-attr": "- Colonel Harland Sanders",\n "departed-twitter-copy": "Find out where all of Colonel Sanders\'s money went!",\n "departed-facebook-title": "Find out where all of Colonel Sanders\'s money went!",\n "departed-facebook-description": "Learn more about how much good you can do with fried chicken money.",\n "9.0": "",\n "10.0": ""\n}'}),define("model/copy_model",["jquery","underscore","backbone","text!../../data/EN.json"],function(e,t,i,s){var n=i.Model.extend({defaults:{},initialize:function(){}});return new n(JSON.parse(s))}),define("controller/mobile/app_controller",["route/router","model/app_model","model/loader_collection","events/sound_events","view/common/communicator","createjs","model/copy_model"],function(e,t,i,s,n,o,r){var a={init:function(){i.on("complete",this.onLoaderComplete,this),e.on("page",this.onRouterPage,this),o.Ticker.setFPS(30),o.Ticker.timingMode=o.Ticker.RAF_SYNCHED,o.Ticker.addEventListener("tick",this.onAnimFrame),t.renderCreateJS(!0),n.on(n.EVENTS.APP.RESIZE,this.onResize,this),n.on(n.EVENTS.APP.GO_FULLSCREEN,this.onGoFullScreen,this),n.on(n.EVENTS.APP.ROOT_NODE_SET,this.onRootNodeSet,this),n.on(n.EVENTS.SITE.PAGE_TRANSITIONS.SHOW_COMPLETE,this.onPageShowComplete,this),n.on(n.EVENTS.SITE.PAGE_TRANSITIONS.HIDE_COMPLETE,this.onPageHideComplete,this),n.on(n.EVENTS.SITE.MOBILE.TOGGLE_MENU,this.onToggleMenu,this),n.on(n.EVENTS.SITE.MOBILE.RETURN_TO_CAROUSEL,this.onReturnToCarousel,this),n.on(n.EVENTS.SITE.MOBILE.SHOW_VIDEO,this.onShowVideo,this),n.on(n.EVENTS.SITE.MOBILE.REMOVE_VIDEO,this.onRemoveVideo,this),n.on(n.EVENTS.SITE.MOBILE.START_SITE,this.startSite,this),n.on(n.EVENTS.SITE.MOBILE.LOOSE_LIPS.OUT_OF_ORDER,this.onLooseLipsOutOfOrder,this),n.on(n.EVENTS.SITE.MOBILE.SOUND_ACCEPT,this.onSoundAccept,this),n.on(n.EVENTS.SITE.MOBILE.SOUND_REFUSE,this.onSoundRefuse,this),document.addEventListener("visibilitychange",this.onVisibilityChange,!1),this.onVisibilityChange()},onVisibilityChange:function(){t.set("visible",!document.hidden)},onResize:function(e,i){t.resize(e,i)},onGoFullScreen:function(e){t.setFullscreen(e?!0:!1)},onRootNodeSet:function(e){r.setCopyNode(e)},onPageShowComplete:function(){t.trigger("page_show_complete")},onPageHideComplete:function(){t.trigger("page_hide_complete")},onReturnToCarousel:function(){e.navigate(t.PAGES.CAROUSEL,{updateURL:!1})},onToggleMenu:function(e){var i=t.get("menu_visibility");
t.set("menu_section",i?null:e),t.set("menu_visibility",!i)},onShowVideo:function(e){t.showVideo(e)},onRemoveVideo:function(e){t.removeVideo(e)},onAnimFrame:function(){t.update()},onRouterPage:function(e,s){e!==t.PAGES.LOADER&&i.getLoader("main")&&!i.hasLoaded("main")?(t.set({postLoaderPage:e,postLoaderPageOptions:s}),t.set("page",t.PAGES.LOADER)):t.set({page:e,pageOptions:s})},startSite:function(){t.get("postLoaderPage")&&this.onRouterPage(t.get("postLoaderPage"),t.get("postLoaderPageOptions"))},onLooseLipsOutOfOrder:function(){t.set("loose_lips_out_of_order",!0)},onSoundAccept:function(){n.trigger(n.EVENTS.SITE.MOBILE.START_SITE)},onSoundRefuse:function(){n.trigger(s.TOGGLE_MUTE),n.trigger(n.EVENTS.SITE.MOBILE.START_SITE)}};return a.init(),a}),define("controller/mobile/loader_controller",["underscore","config","route/router","model/loader_collection","view/common/communicator","model/app_model"],function(e,t,i,s,n,o){"use strict";var r={init:function(){o.on("change:page",this.onPageChange,this),n.on(n.EVENTS.LOADER.ADD_TO_QUEUE,this.onAddToQueue,this),n.on(n.EVENTS.LOADER.START_QUEUE,this.onStartQueue,this)},onStartQueue:function(e){s.start(e)},onPageChange:function(e,t){if(t!==o.PAGES.LOADER){var i=e.previous("page");s.removeGroup(i)}},onAddToQueue:function(t){if(Array.isArray(t)){var i=t;e.each(i,function(t){Array.isArray(t.src)?e.each(t.src,function(e){this.addItemToCollection(e,t.group)},this):this.addItemToCollection(t,t.group)},this)}else Array.isArray(t.src)?e.each(t.src,function(e){this.addItemToCollection(e,t.group)},this):this.addItemToCollection(t,t.group)},addItemToCollection:function(e,i){e.src&&-1===e.src.indexOf(t.CDN)&&(e.src=t.CDN+e.src),e.group=i,s.add(e)},start:function(){s.start("main")}};return r.init(),r});var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var s=function(e){var t,i=[],s=e.length;for(t=0;t!==s;i.push(e[t++]));return i},n=function(e,t,s){i.call(this,e,t,s),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=n.prototype.render},o=1e-10,r=i._internals,a=r.isSelector,h=r.isArray,l=n.prototype=i.to({},.1,{}),c=[];n.version="1.13.1",l.constructor=n,l.kill()._gc=!1,n.killTweensOf=n.killDelayedCallsTo=i.killTweensOf,n.getTweensOf=i.getTweensOf,n.lagSmoothing=i.lagSmoothing,n.ticker=i.ticker,n.render=i.render,l.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},l.updateTo=function(e,t){var s,n=this.ratio;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(s in e)this.vars[s]=e[s];if(this._initted)if(t)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._time;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var r,a=1/(1-n),h=this._firstPT;h;)r=h.s+h.c,h.c*=a,h.s=r-h.c,h=h._next}return this},l.render=function(e,t,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var s,n,a,h,l,d,u,g,p=this._dirty?this.totalDuration():this._totalDuration,m=this._time,_=this._totalTime,f=this._cycle,v=this._duration,E=this._rawPrevTime;if(e>=p?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,n="onComplete"),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>E||E===o)&&E!==e&&(i=!0,E>o&&(n="onReverseComplete")),this._rawPrevTime=g=!t||e||E===e?e:o)):1e-7>e?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==_||0===v&&E>0&&E!==o)&&(n="onReverseComplete",s=this._reversed),0>e?(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(E>=0&&(i=!0),this._rawPrevTime=g=!t||e||E===e?e:o)):this._initted||(i=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(h=v+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:0>this._time&&(this._time=0)),this._easeType?(l=this._time/v,d=this._easeType,u=this._easePower,(1===d||3===d&&l>=.5)&&(l=1-l),3===d&&(l*=2),1===u?l*=l:2===u?l*=l*l:3===u?l*=l*l*l:4===u&&(l*=l*l*l*l),this.ratio=1===d?1-l:2===d?l:.5>this._time/v?l/2:1-l/2):this.ratio=this._ease.getRatio(this._time/v)),m===this._time&&!i&&f===this._cycle)return void(_!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=m,this._totalTime=_,this._rawPrevTime=E,this._cycle=f,r.lazyTweens.push(this),void(this._lazy=e);this._time&&!s?this.ratio=this._ease.getRatio(this._time/v):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==m&&e>=0&&(this._active=!0),0===_&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===v)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||c))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,i),t||(this._totalTime!==_||s)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c)),this._cycle!==f&&(t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||c)),n&&(!this._gc||i)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this.vars[n].apply(this.vars[n+"Scope"]||this,this.vars[n+"Params"]||c),0===v&&this._rawPrevTime===o&&g!==o&&(this._rawPrevTime=0))},n.to=function(e,t,i){return new n(e,t,i)},n.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new n(e,t,i)},n.fromTo=function(e,t,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new n(e,t,s)},n.staggerTo=n.allTo=function(e,t,o,r,l,d,u){r=r||0;var g,p,m,_,f=o.delay||0,v=[],E=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),l.apply(u||this,d||c)};for(h(e)||("string"==typeof e&&(e=i.selector(e)||e),a(e)&&(e=s(e))),g=e.length,m=0;g>m;m++){p={};for(_ in o)p[_]=o[_];p.delay=f,m===g-1&&l&&(p.onComplete=E),v[m]=new n(e[m],t,p),f+=r}return v},n.staggerFrom=n.allFrom=function(e,t,i,s,o,r,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,n.staggerTo(e,t,i,s,o,r,a)},n.staggerFromTo=n.allFromTo=function(e,t,i,s,o,r,a,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,n.staggerTo(e,t,s,o,r,a,h)},n.delayedCall=function(e,t,i,s,o){return new n(t,0,{delay:e,onComplete:t,onCompleteParams:i,onCompleteScope:s,onReverseComplete:t,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,useFrames:o,overwrite:0})},n.set=function(e,t){return new n(e,0,t)},n.isTweening=function(e){return i.getTweensOf(e,!0).length>0};var d=function(e,t){for(var s=[],n=0,o=e._first;o;)o instanceof i?s[n++]=o:(t&&(s[n++]=o),s=s.concat(d(o,t)),n=s.length),o=o._next;return s},u=n.getAllTweens=function(t){return d(e._rootTimeline,t).concat(d(e._rootFramesTimeline,t))};n.killAll=function(e,i,s,n){null==i&&(i=!0),null==s&&(s=!0);var o,r,a,h=u(0!=n),l=h.length,c=i&&s&&n;for(a=0;l>a;a++)r=h[a],(c||r instanceof t||(o=r.target===r.vars.onComplete)&&s||i&&!o)&&(e?r.totalTime(r._reversed?0:r.totalDuration()):r._enabled(!1,!1))},n.killChildTweensOf=function(e,t){if(null!=e){var o,l,c,d,u,g=r.tweenLookup;if("string"==typeof e&&(e=i.selector(e)||e),a(e)&&(e=s(e)),h(e))for(d=e.length;--d>-1;)n.killChildTweensOf(e[d],t);else{o=[];for(c in g)for(l=g[c].target.parentNode;l;)l===e&&(o=o.concat(g[c].tweens)),l=l.parentNode;for(u=o.length,d=0;u>d;d++)t&&o[d].totalTime(o[d].totalDuration()),o[d]._enabled(!1,!1)}}};var g=function(e,i,s,n){i=i!==!1,s=s!==!1,n=n!==!1;for(var o,r,a=u(n),h=i&&s&&n,l=a.length;--l>-1;)r=a[l],(h||r instanceof t||(o=r.target===r.vars.onComplete)&&s||i&&!o)&&r.paused(e)};return n.pauseAll=function(e,t,i){g(!0,e,t,i)},n.resumeAll=function(e,t,i){g(!1,e,t,i)},n.globalTimeScale=function(t){var s=e._rootTimeline,n=i.ticker.time;return arguments.length?(t=t||o,s._startTime=n-(n-s._startTime)*s._timeScale/t,s=e._rootFramesTimeline,n=i.ticker.frame,s._startTime=n-(n-s._startTime)*s._timeScale/t,s._timeScale=e._rootTimeline._timeScale=t,t):s._timeScale},l.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},l.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},l.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},n},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var s=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onSoundProgress;var i,s,n=this.vars;for(s in n)i=n[s],a(i)&&-1!==i.join("").indexOf("{self}")&&(n[s]=this._swapSelfInParams(i));a(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},n=1e-10,o=i._internals,r=o.isSelector,a=o.isArray,h=o.lazyTweens,l=o.lazyRender,c=[],d=_gsScope._gsDefine.globals,u=function(e){var t,i={};for(t in e)i[t]=e[t];return i},g=function(e,t,i,s){e._timeline.pause(e._startTime),t&&t.apply(s||e._timeline,i||c)},p=function(e){var t,i=[],s=e.length;for(t=0;t!==s;i.push(e[t++]));return i},m=s.prototype=new t;return s.version="1.13.1",m.constructor=s,m.kill()._gc=!1,m.to=function(e,t,s,n){var o=s.repeat&&d.TweenMax||i;return t?this.add(new o(e,t,s),n):this.set(e,s,n)},m.from=function(e,t,s,n){return this.add((s.repeat&&d.TweenMax||i).from(e,t,s),n)},m.fromTo=function(e,t,s,n,o){var r=n.repeat&&d.TweenMax||i;return t?this.add(r.fromTo(e,t,s,n),o):this.set(e,n,o)},m.staggerTo=function(e,t,n,o,a,h,l,c){var d,g=new s({onComplete:h,onCompleteParams:l,onCompleteScope:c,smoothChildTiming:this.smoothChildTiming});for("string"==typeof e&&(e=i.selector(e)||e),r(e)&&(e=p(e)),o=o||0,d=0;e.length>d;d++)n.startAt&&(n.startAt=u(n.startAt)),g.to(e[d],t,u(n),d*o);return this.add(g,a)},m.staggerFrom=function(e,t,i,s,n,o,r,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(e,t,i,s,n,o,r,a)},m.staggerFromTo=function(e,t,i,s,n,o,r,a,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(e,t,s,n,o,r,a,h)},m.call=function(e,t,s,n){return this.add(i.delayedCall(0,e,t,s),n)},m.set=function(e,t,s){return s=this._parseTimeOrLabel(s,0,!0),null==t.immediateRender&&(t.immediateRender=s===this._time&&!this._paused),this.add(new i(e,0,t),s)},s.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var n,o,r=new s(e),a=r._timeline;for(null==t&&(t=!0),a._remove(r,!0),r._startTime=0,r._rawPrevTime=r._time=r._totalTime=a._time,n=a._first;n;)o=n._next,t&&n instanceof i&&n.target===n.vars.onComplete||r.add(n,n._startTime-n._delay),n=o;return a.add(r,0),r},m.add=function(n,o,r,h){var l,c,d,u,g,p;if("number"!=typeof o&&(o=this._parseTimeOrLabel(o,0,!0,n)),!(n instanceof e)){if(n instanceof Array||n&&n.push&&a(n)){for(r=r||"normal",h=h||0,l=o,c=n.length,d=0;c>d;d++)a(u=n[d])&&(u=new s({tweens:u})),this.add(u,l),"string"!=typeof u&&"function"!=typeof u&&("sequence"===r?l=u._startTime+u.totalDuration()/u._timeScale:"start"===r&&(u._startTime-=u.delay())),l+=h;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,o);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(t.prototype.add.call(this,n,o),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(g=this,p=g.rawTime()>n._startTime;g._timeline;)p&&g._timeline.smoothChildTiming?g.totalTime(g._totalTime,!0):g._gc&&g._enabled(!0,!1),g=g._timeline;return this},m.remove=function(t){if(t instanceof e)return this._remove(t,!1);if(t instanceof Array||t&&t.push&&a(t)){for(var i=t.length;--i>-1;)this.remove(t[i]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},m._remove=function(e,i){t.prototype._remove.call(this,e,i);var s=this._last;return s?this._time>s._startTime+s._totalDuration/s._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},m.insert=m.insertMultiple=function(e,t,i,s){return this.add(e,t||0,i,s)},m.appendMultiple=function(e,t,i,s){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,s)},m.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},m.addPause=function(e,t,i,s){return this.call(g,["{self}",t,i,s],this,e)},m.removeLabel=function(e){return delete this._labels[e],this},m.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},m._parseTimeOrLabel=function(t,i,s,n){var o;if(n instanceof e&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&a(n)))for(o=n.length;--o>-1;)n[o]instanceof e&&n[o].timeline===this&&this.remove(n[o]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof t&&null==this._labels[i]?t-this.duration():0,s);if(i=i||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(o=t.indexOf("="),-1===o)return null==this._labels[t]?s?this._labels[t]=this.duration()+i:i:this._labels[t]+i;i=parseInt(t.charAt(o-1)+"1",10)*Number(t.substr(o+1)),t=o>1?this._parseTimeOrLabel(t.substr(0,o-1),0,s):this.duration()}return Number(t)+i},m.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),t!==!1)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(e,t){return this.play(e,t)},m.gotoAndStop=function(e,t){return this.pause(e,t)},m.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var s,o,r,a,d,u=this._dirty?this.totalDuration():this._totalDuration,g=this._time,p=this._startTime,m=this._timeScale,_=this._paused;if(e>=u?(this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||(o=!0,a="onComplete",0===this._duration&&(0===e||0>this._rawPrevTime||this._rawPrevTime===n)&&this._rawPrevTime!==e&&this._first&&(d=!0,this._rawPrevTime>n&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,e=u+1e-4):1e-7>e?(this._totalTime=this._time=0,(0!==g||0===this._duration&&this._rawPrevTime!==n&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(a="onReverseComplete",o=this._reversed),0>e?(this._active=!1,this._rawPrevTime>=0&&this._first&&(d=!0),this._rawPrevTime=e):(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,e=0,this._initted||(d=!0))):this._totalTime=this._time=this._rawPrevTime=e,this._time!==g&&this._first||i||d){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==g&&e>0&&(this._active=!0),0===g&&this.vars.onStart&&0!==this._time&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||c)),this._time>=g)for(s=this._first;s&&(r=s._next,!this._paused||_);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)),s=r;else for(s=this._last;s&&(r=s._prev,!this._paused||_);)(s._active||g>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)),s=r;this._onUpdate&&(t||(h.length&&l(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||c))),a&&(this._gc||(p===this._startTime||m!==this._timeScale)&&(0===this._time||u>=this.totalDuration())&&(o&&(h.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this.vars[a].apply(this.vars[a+"Scope"]||this,this.vars[a+"Params"]||c)))}},m._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof s&&e._hasPausedChild())return!0;e=e._next}return!1},m.getChildren=function(e,t,s,n){n=n||-9999999999;for(var o=[],r=this._first,a=0;r;)n>r._startTime||(r instanceof i?t!==!1&&(o[a++]=r):(s!==!1&&(o[a++]=r),e!==!1&&(o=o.concat(r.getChildren(!0,t,s)),a=o.length))),r=r._next;return o},m.getTweensOf=function(e,t){var s,n,o=this._gc,r=[],a=0;for(o&&this._enabled(!0,!0),s=i.getTweensOf(e),n=s.length;--n>-1;)(s[n].timeline===this||t&&this._contains(s[n]))&&(r[a++]=s[n]);return o&&this._enabled(!1,!0),r},m._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},m.shiftChildren=function(e,t,i){i=i||0;for(var s,n=this._first,o=this._labels;n;)n._startTime>=i&&(n._startTime+=e),n=n._next;if(t)for(s in o)o[s]>=i&&(o[s]+=e);return this._uncache(!0)},m._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),s=i.length,n=!1;--s>-1;)i[s]._kill(e,t)&&(n=!0);return n},m.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;--i>-1;)t[i]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return this},m._enabled=function(e,i){if(e===this._gc)for(var s=this._first;s;)s._enabled(e,!0),s=s._next;return t.prototype._enabled.call(this,e,i)},m.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,i,s=0,n=this._last,o=999999999999;n;)t=n._prev,n._dirty&&n.totalDuration(),n._startTime>o&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):o=n._startTime,0>n._startTime&&!n._paused&&(s-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),o=0),i=n._startTime+n._totalDuration/n._timeScale,i>s&&(s=i),n=t;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==e&&this.timeScale(this._totalDuration/e),this},m.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},m.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,i){var s=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},n=1e-10,o=[],r=t._internals,a=r.lazyTweens,h=r.lazyRender,l=new i(null,null,1,0),c=s.prototype=new e;return c.constructor=s,c.kill()._gc=!1,s.version="1.13.1",c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},c.addCallback=function(e,i,s,n){return this.add(t.delayedCall(0,e,s,n),i)},c.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),s=i.length,n=this._parseTimeOrLabel(t);--s>-1;)i[s]._startTime===n&&i[s]._enabled(!1,!1);return this},c.tweenTo=function(e,i){i=i||{};var s,n,r,a={ease:l,overwrite:i.delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(n in i)a[n]=i[n];return a.time=this._parseTimeOrLabel(e),s=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,r=new t(this,s,a),a.onStart=function(){r.target.paused(!0),r.vars.time!==r.target.time()&&s===r.duration()&&r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||r,i.onStartParams||o)},r},c.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],onCompleteScope:this},i.immediateRender=i.immediateRender!==!1;var s=this.tweenTo(t,i);return s.duration(Math.abs(s.vars.time-e)/this._timeScale||.001)},c.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var s,r,l,c,d,u,g=this._dirty?this.totalDuration():this._totalDuration,p=this._duration,m=this._time,_=this._totalTime,f=this._startTime,v=this._timeScale,E=this._rawPrevTime,y=this._paused,T=this._cycle;if(e>=g?(this._locked||(this._totalTime=g,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,c="onComplete",0===this._duration&&(0===e||0>E||E===n)&&E!==e&&this._first&&(d=!0,E>n&&(c="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:n,this._yoyo&&0!==(1&this._cycle)?this._time=e=0:(this._time=p,e=p+1e-4)):1e-7>e?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==m||0===p&&E!==n&&(E>0||0>e&&E>=0)&&!this._locked)&&(c="onReverseComplete",r=this._reversed),0>e?(this._active=!1,E>=0&&this._first&&(d=!0),this._rawPrevTime=e):(this._rawPrevTime=p||!t||e||this._rawPrevTime===e?e:n,e=0,this._initted||(d=!0))):(0===p&&0>E&&(d=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(u=p+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=p-this._time),this._time>p?(this._time=p,e=p+1e-4):0>this._time?this._time=e=0:e=this._time))),this._cycle!==T&&!this._locked){var S=this._yoyo&&0!==(1&T),C=S===(this._yoyo&&0!==(1&this._cycle)),w=this._totalTime,b=this._cycle,A=this._rawPrevTime,L=this._time;if(this._totalTime=T*p,T>this._cycle?S=!S:this._totalTime+=p,this._time=m,this._rawPrevTime=0===p?E-1e-4:E,this._cycle=T,this._locked=!0,m=S?0:p,this.render(m,t,0===p),t||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||o),C&&(m=S?p+1e-4:-1e-4,this.render(m,!0,!1)),this._locked=!1,this._paused&&!y)return;this._time=L,this._totalTime=w,this._cycle=b,this._rawPrevTime=A}if(!(this._time!==m&&this._first||i||d))return void(_!==this._totalTime&&this._onUpdate&&(t||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||o)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==_&&e>0&&(this._active=!0),0===_&&this.vars.onStart&&0!==this._totalTime&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||o)),this._time>=m)for(s=this._first;s&&(l=s._next,!this._paused||y);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)),s=l;else for(s=this._last;s&&(l=s._prev,!this._paused||y);)(s._active||m>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(e-s._startTime)*s._timeScale,t,i):s.render((e-s._startTime)*s._timeScale,t,i)),s=l;this._onUpdate&&(t||(a.length&&h(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||o))),c&&(this._locked||this._gc||(f===this._startTime||v!==this._timeScale)&&(0===this._time||g>=this.totalDuration())&&(r&&(a.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[c]&&this.vars[c].apply(this.vars[c+"Scope"]||this,this.vars[c+"Params"]||o)))},c.getActive=function(e,t,i){null==e&&(e=!0),null==t&&(t=!0),null==i&&(i=!1);var s,n,o=[],r=this.getChildren(e,t,i),a=0,h=r.length;for(s=0;h>s;s++)n=r[s],n.isActive()&&(o[a++]=n);return o},c.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,i=this.getLabelsArray(),s=i.length;for(t=0;s>t;t++)if(i[t].time>e)return i[t].name;return null},c.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;--i>-1;)if(e>t[i].time)return t[i].name;return null},c.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},c.progress=function(e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},c.totalProgress=function(e){return arguments.length?this.totalTime(this.totalDuration()*e,!1):this._totalTime/this.totalDuration()},c.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},c.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},c.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},c.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},c.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},c.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},s},!0),function(){var e=180/Math.PI,t=[],i=[],s=[],n={},o=function(e,t,i,s){this.a=e,this.b=t,this.c=i,this.d=s,this.da=s-e,this.ca=i-e,this.ba=t-e},r=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",a=function(e,t,i,s){var n={a:e},o={},r={},a={c:s},h=(e+t)/2,l=(t+i)/2,c=(i+s)/2,d=(h+l)/2,u=(l+c)/2,g=(u-d)/8;return n.b=h+(e-h)/4,o.b=d+g,n.c=o.a=(n.b+o.b)/2,o.c=r.a=(d+u)/2,r.b=u-g,a.b=c+(s-c)/4,r.c=a.a=(r.b+a.b)/2,[n,o,r,a]},h=function(e,n,o,r,h){var l,c,d,u,g,p,m,_,f,v,E,y,T,S=e.length-1,C=0,w=e[0].a;for(l=0;S>l;l++)g=e[C],c=g.a,d=g.d,u=e[C+1].d,h?(E=t[l],y=i[l],T=.25*(y+E)*n/(r?.5:s[l]||.5),p=d-(d-c)*(r?.5*n:0!==E?T/E:0),m=d+(u-d)*(r?.5*n:0!==y?T/y:0),_=d-(p+((m-p)*(3*E/(E+y)+.5)/4||0))):(p=d-.5*(d-c)*n,m=d+.5*(u-d)*n,_=d-(p+m)/2),p+=_,m+=_,g.c=f=p,g.b=0!==l?w:w=g.a+.6*(g.c-g.a),g.da=d-c,g.ca=f-c,g.ba=w-c,o?(v=a(c,w,f,d),e.splice(C,1,v[0],v[1],v[2],v[3]),C+=4):C++,w=m;g=e[C],g.b=w,g.c=w+.4*(g.d-w),g.da=g.d-g.a,g.ca=g.c-g.a,g.ba=w-g.a,o&&(v=a(g.a,w,g.c,g.d),e.splice(C,1,v[0],v[1],v[2],v[3]))},l=function(e,s,n,r){var a,h,l,c,d,u,g=[];if(r)for(e=[r].concat(e),h=e.length;--h>-1;)"string"==typeof(u=e[h][s])&&"="===u.charAt(1)&&(e[h][s]=r[s]+Number(u.charAt(0)+u.substr(2)));if(a=e.length-2,0>a)return g[0]=new o(e[0][s],0,0,e[-1>a?0:1][s]),g;for(h=0;a>h;h++)l=e[h][s],c=e[h+1][s],g[h]=new o(l,0,0,c),n&&(d=e[h+2][s],t[h]=(t[h]||0)+(c-l)*(c-l),i[h]=(i[h]||0)+(d-c)*(d-c));return g[h]=new o(e[h][s],0,0,e[h+1][s]),g},c=function(e,o,a,c,d,u){var g,p,m,_,f,v,E,y,T={},S=[],C=u||e[0];d="string"==typeof d?","+d+",":r,null==o&&(o=1);for(p in e[0])S.push(p);if(e.length>1){for(y=e[e.length-1],E=!0,g=S.length;--g>-1;)if(p=S[g],Math.abs(C[p]-y[p])>.05){E=!1;break}E&&(e=e.concat(),u&&e.unshift(u),e.push(e[1]),u=e[e.length-3])}for(t.length=i.length=s.length=0,g=S.length;--g>-1;)p=S[g],n[p]=-1!==d.indexOf(","+p+","),T[p]=l(e,p,n[p],u);for(g=t.length;--g>-1;)t[g]=Math.sqrt(t[g]),i[g]=Math.sqrt(i[g]);if(!c){for(g=S.length;--g>-1;)if(n[p])for(m=T[S[g]],v=m.length-1,_=0;v>_;_++)f=m[_+1].da/i[_]+m[_].da/t[_],s[_]=(s[_]||0)+f*f;for(g=s.length;--g>-1;)s[g]=Math.sqrt(s[g])}for(g=S.length,_=a?4:1;--g>-1;)p=S[g],m=T[p],h(m,o,a,c,n[p]),E&&(m.splice(0,_),m.splice(m.length-_,_));return T},d=function(e,t,i){t=t||"soft";var s,n,r,a,h,l,c,d,u,g,p,m={},_="cubic"===t?3:2,f="soft"===t,v=[];if(f&&i&&(e=[i].concat(e)),null==e||_+1>e.length)throw"invalid Bezier data";for(u in e[0])v.push(u);for(l=v.length;--l>-1;){for(u=v[l],m[u]=h=[],g=0,d=e.length,c=0;d>c;c++)s=null==i?e[c][u]:"string"==typeof(p=e[c][u])&&"="===p.charAt(1)?i[u]+Number(p.charAt(0)+p.substr(2)):Number(p),f&&c>1&&d-1>c&&(h[g++]=(s+h[g-2])/2),h[g++]=s;for(d=g-_+1,g=0,c=0;d>c;c+=_)s=h[c],n=h[c+1],r=h[c+2],a=2===_?0:h[c+3],h[g++]=p=3===_?new o(s,n,r,a):new o(s,(2*n+s)/3,(2*n+r)/3,r);h.length=g}return m},u=function(e,t,i){for(var s,n,o,r,a,h,l,c,d,u,g,p=1/i,m=e.length;--m>-1;)for(u=e[m],o=u.a,r=u.d-o,a=u.c-o,h=u.b-o,s=n=0,c=1;i>=c;c++)l=p*c,d=1-l,s=n-(n=(l*l*r+3*d*(l*a+d*h))*l),g=m*i+c-1,t[g]=(t[g]||0)+s*s},g=function(e,t){t=t>>0||6;var i,s,n,o,r=[],a=[],h=0,l=0,c=t-1,d=[],g=[];for(i in e)u(e[i],r,t);for(n=r.length,s=0;n>s;s++)h+=Math.sqrt(r[s]),o=s%t,g[o]=h,o===c&&(l+=h,o=s/t>>0,d[o]=g,a[o]=l,h=0,g=[]);return{length:l,lengths:a,segments:d}},p=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var s,n,o,r,a,h=t.values||[],l={},u=h[0],p=t.autoRotate||i.vars.orientToBezier;this._autoRotate=p?p instanceof Array?p:[["x","y","rotation",p===!0?0:Number(p)||0]]:null;for(s in u)this._props.push(s);for(o=this._props.length;--o>-1;)s=this._props[o],this._overwriteProps.push(s),n=this._func[s]="function"==typeof e[s],l[s]=n?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(e[s]),a||l[s]!==h[0][s]&&(a=l);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?c(h,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,a):d(h,t.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=g(this._beziers,this._timeRes);
this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(p=this._autoRotate)for(this._initialRotations=[],p[0]instanceof Array||(this._autoRotate=p=[p]),o=p.length;--o>-1;){for(r=0;3>r;r++)s=p[o][r],this._func[s]="function"==typeof e[s]?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]:!1;s=p[o][2],this._initialRotations[o]=this._func[s]?this._func[s].call(this._target):this._target[s]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(t){var i,s,n,o,r,a,h,l,c,d,u=this._segCount,g=this._func,p=this._target,m=t!==this._startRatio;if(this._timeRes){if(c=this._lengths,d=this._curSeg,t*=this._length,n=this._li,t>this._l2&&u-1>n){for(l=u-1;l>n&&t>=(this._l2=c[++n]););this._l1=c[n-1],this._li=n,this._curSeg=d=this._segments[n],this._s2=d[this._s1=this._si=0]}else if(this._l1>t&&n>0){for(;n>0&&(this._l1=c[--n])>=t;);0===n&&this._l1>t?this._l1=0:n++,this._l2=c[n],this._li=n,this._curSeg=d=this._segments[n],this._s1=d[(this._si=d.length-1)-1]||0,this._s2=d[this._si]}if(i=n,t-=this._l1,n=this._si,t>this._s2&&d.length-1>n){for(l=d.length-1;l>n&&t>=(this._s2=d[++n]););this._s1=d[n-1],this._si=n}else if(this._s1>t&&n>0){for(;n>0&&(this._s1=d[--n])>=t;);0===n&&this._s1>t?this._s1=0:n++,this._s2=d[n],this._si=n}a=(n+(t-this._s1)/(this._s2-this._s1))*this._prec}else i=0>t?0:t>=1?u-1:u*t>>0,a=(t-i*(1/u))*u;for(s=1-a,n=this._props.length;--n>-1;)o=this._props[n],r=this._beziers[o][i],h=(a*a*r.da+3*s*(a*r.ca+s*r.ba))*a+r.a,this._round[o]&&(h=Math.round(h)),g[o]?p[o](h):p[o]=h;if(this._autoRotate){var _,f,v,E,y,T,S,C=this._autoRotate;for(n=C.length;--n>-1;)o=C[n][2],T=C[n][3]||0,S=C[n][4]===!0?1:e,r=this._beziers[C[n][0]],_=this._beziers[C[n][1]],r&&_&&(r=r[i],_=_[i],f=r.a+(r.b-r.a)*a,E=r.b+(r.c-r.b)*a,f+=(E-f)*a,E+=(r.c+(r.d-r.c)*a-E)*a,v=_.a+(_.b-_.a)*a,y=_.b+(_.c-_.b)*a,v+=(y-v)*a,y+=(_.c+(_.d-_.c)*a-y)*a,h=m?Math.atan2(y-v,E-f)*S+T:this._initialRotations[n],g[o]?p[o](h):p[o]=h)}}}),m=p.prototype;p.bezierThrough=c,p.cubicToQuadratic=a,p._autoCSS=!0,p.quadraticToCubic=function(e,t,i){return new o(e,(2*t+e)/3,(2*t+i)/3,i)},p._cssRegister=function(){var e=_gsScope._gsDefine.globals.CSSPlugin;if(e){var t=e._internals,i=t._parseToProxy,s=t._setPluginRatio,n=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,o,r,a,h){t instanceof Array&&(t={values:t}),h=new p;var l,c,d,u=t.values,g=u.length-1,m=[],_={};if(0>g)return a;for(l=0;g>=l;l++)d=i(e,u[l],r,a,h,g!==l),m[l]=d.end;for(c in t)_[c]=t[c];return _.values=m,a=new n(e,"bezier",0,0,d.pt,2),a.data=d,a.plugin=h,a.setRatio=s,0===_.autoRotate&&(_.autoRotate=!0),!_.autoRotate||_.autoRotate instanceof Array||(l=_.autoRotate===!0?0:Number(_.autoRotate),_.autoRotate=null!=d.end.left?[["left","top","rotation",l,!1]]:null!=d.end.x?[["x","y","rotation",l,!1]]:!1),_.autoRotate&&(r._transform||r._enableTransforms(!1),d.autoRotate=r._target._gsTransform),h._onInitTween(d.proxy,_,r._tween),a}})}},m._roundProps=function(e,t){for(var i=this._overwriteProps,s=i.length;--s>-1;)(e[i[s]]||e.bezier||e.bezierThrough)&&(this._round[i[s]]=t)},m._kill=function(e){var t,i,s=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=s.length;--i>-1;)s[i]===t&&s.splice(i,1);return this._super._kill.call(this,e)}}(),_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var i,s,n,o,r=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=r.prototype.setRatio},a={},h=r.prototype=new e("css");h.constructor=r,r.version="1.13.1",r.API=2,r.defaultTransformPerspective=0,r.defaultSkewType="compensated",h="px",r.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var l,c,d,u,g,p,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,_=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,f=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,v=/[^\d\-\.]/g,E=/(?:\d|\-|\+|=|#|\.)*/g,y=/opacity *= *([^)]*)/i,T=/opacity:([^;]*)/i,S=/alpha\(opacity *=.+?\)/i,C=/^(rgb|hsl)/,w=/([A-Z])/g,b=/-([a-z])/gi,A=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,L=function(e,t){return t.toUpperCase()},x=/(?:Left|Right|Width)/i,M=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,I=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,O=/,(?=[^\)]*(?:\(|$))/gi,R=Math.PI/180,N=180/Math.PI,P={},D=document,k=D.createElement("div"),B=D.createElement("img"),U=r._internals={_specialProps:a},H=navigator.userAgent,G=function(){var e,t=H.indexOf("Android"),i=D.createElement("div");return d=-1!==H.indexOf("Safari")&&-1===H.indexOf("Chrome")&&(-1===t||Number(H.substr(t+8,1))>3),g=d&&6>Number(H.substr(H.indexOf("Version/")+8,1)),u=-1!==H.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(H)&&(p=parseFloat(RegExp.$1)),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",e=i.getElementsByTagName("a")[0],e?/^0.55/.test(e.style.opacity):!1}(),V=function(e){return y.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},F=function(e){window.console&&console.log(e)},W="",j="",Y=function(e,t){t=t||k;var i,s,n=t.style;if(void 0!==n[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===n[i[s]+e];);return s>=0?(j=3===s?"ms":i[s],W="-"+j.toLowerCase()+"-",j+e):null},X=D.defaultView?D.defaultView.getComputedStyle:function(){},q=r.getStyle=function(e,t,i,s,n){var o;return G||"opacity"!==t?(!s&&e.style[t]?o=e.style[t]:(i=i||X(e))?o=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(w,"-$1").toLowerCase()):e.currentStyle&&(o=e.currentStyle[t]),null==n||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:n):V(e)},K=U.convertToPixels=function(e,i,s,n,o){if("px"===n||!n)return s;if("auto"===n||!s)return 0;var a,h,l,c=x.test(i),d=e,u=k.style,g=0>s;if(g&&(s=-s),"%"===n&&-1!==i.indexOf("border"))a=s/100*(c?e.clientWidth:e.clientHeight);else{if(u.cssText="border:0 solid red;position:"+q(e,"position")+";line-height:0;","%"!==n&&d.appendChild)u[c?"borderLeftWidth":"borderTopWidth"]=s+n;else{if(d=e.parentNode||D.body,h=d._gsCache,l=t.ticker.frame,h&&c&&h.time===l)return h.width*s/100;u[c?"width":"height"]=s+n}d.appendChild(k),a=parseFloat(k[c?"offsetWidth":"offsetHeight"]),d.removeChild(k),c&&"%"===n&&r.cacheWidths!==!1&&(h=d._gsCache=d._gsCache||{},h.time=l,h.width=100*(a/s)),0!==a||o||(a=K(e,i,s,n,!0))}return g?-a:a},z=U.calculateOffset=function(e,t,i){if("absolute"!==q(e,"position",i))return 0;var s="left"===t?"Left":"Top",n=q(e,"margin"+s,i);return e["offset"+s]-(K(e,t,parseFloat(n),n.replace(E,""))||0)},Q=function(e,t){var i,s,n={};if(t=t||X(e,null))if(i=t.length)for(;--i>-1;)n[t[i].replace(b,L)]=t.getPropertyValue(t[i]);else for(i in t)n[i]=t[i];else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===n[i]&&(n[i.replace(b,L)]=t[i]);return G||(n.opacity=V(e)),s=wt(e,t,!1),n.rotation=s.rotation,n.skewX=s.skewX,n.scaleX=s.scaleX,n.scaleY=s.scaleY,n.x=s.x,n.y=s.y,St&&(n.z=s.z,n.rotationX=s.rotationX,n.rotationY=s.rotationY,n.scaleZ=s.scaleZ),n.filters&&delete n.filters,n},J=function(e,t,i,s,n){var o,r,a,h={},l=e.style;for(r in i)"cssText"!==r&&"length"!==r&&isNaN(r)&&(t[r]!==(o=i[r])||n&&n[r])&&-1===r.indexOf("Origin")&&("number"==typeof o||"string"==typeof o)&&(h[r]="auto"!==o||"left"!==r&&"top"!==r?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof t[r]||""===t[r].replace(v,"")?o:0:z(e,r),void 0!==l[r]&&(a=new dt(l,r,l[r],a)));if(s)for(r in s)"className"!==r&&(h[r]=s[r]);return{difs:h,firstMPT:a}},Z={width:["Left","Right"],height:["Top","Bottom"]},$=["marginLeft","marginRight","marginTop","marginBottom"],et=function(e,t,i){var s=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),n=Z[t],o=n.length;for(i=i||X(e,null);--o>-1;)s-=parseFloat(q(e,"padding"+n[o],i,!0))||0,s-=parseFloat(q(e,"border"+n[o]+"Width",i,!0))||0;return s},tt=function(e,t){(null==e||""===e||"auto"===e||"auto auto"===e)&&(e="0 0");var i=e.split(" "),s=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":i[0],n=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":i[1];return null==n?n="0":"center"===n&&(n="50%"),("center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("="))&&(s="50%"),t&&(t.oxp=-1!==s.indexOf("%"),t.oyp=-1!==n.indexOf("%"),t.oxr="="===s.charAt(1),t.oyr="="===n.charAt(1),t.ox=parseFloat(s.replace(v,"")),t.oy=parseFloat(n.replace(v,""))),s+" "+n+(i.length>2?" "+i[2]:"")},it=function(e,t){return"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)},st=function(e,t){return null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*Number(e.substr(2))+t:parseFloat(e)},nt=function(e,t,i,s){var n,o,r,a,h=1e-6;return null==e?a=t:"number"==typeof e?a=e:(n=360,o=e.split("_"),r=Number(o[0].replace(v,""))*(-1===e.indexOf("rad")?1:N)-("="===e.charAt(1)?0:t),o.length&&(s&&(s[i]=t+r),-1!==e.indexOf("short")&&(r%=n,r!==r%(n/2)&&(r=0>r?r+n:r-n)),-1!==e.indexOf("_cw")&&0>r?r=(r+9999999999*n)%n-(0|r/n)*n:-1!==e.indexOf("ccw")&&r>0&&(r=(r-9999999999*n)%n-(0|r/n)*n)),a=t+r),h>a&&a>-h&&(a=0),a},ot={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},rt=function(e,t,i){return e=0>e?e+1:e>1?e-1:e,0|255*(1>6*e?t+6*(i-t)*e:.5>e?i:2>3*e?t+6*(i-t)*(2/3-e):t)+.5},at=function(e){var t,i,s,n,o,r;return e&&""!==e?"number"==typeof e?[e>>16,255&e>>8,255&e]:(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),ot[e]?ot[e]:"#"===e.charAt(0)?(4===e.length&&(t=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+t+t+i+i+s+s),e=parseInt(e.substr(1),16),[e>>16,255&e>>8,255&e]):"hsl"===e.substr(0,3)?(e=e.match(m),n=Number(e[0])%360/360,o=Number(e[1])/100,r=Number(e[2])/100,i=.5>=r?r*(o+1):r+o-r*o,t=2*r-i,e.length>3&&(e[3]=Number(e[3])),e[0]=rt(n+1/3,t,i),e[1]=rt(n,t,i),e[2]=rt(n-1/3,t,i),e):(e=e.match(m)||ot.transparent,e[0]=Number(e[0]),e[1]=Number(e[1]),e[2]=Number(e[2]),e.length>3&&(e[3]=Number(e[3])),e)):ot.black},ht="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(h in ot)ht+="|"+h+"\\b";ht=RegExp(ht+")","gi");var lt=function(e,t,i,s){if(null==e)return function(e){return e};var n,o=t?(e.match(ht)||[""])[0]:"",r=e.split(o).join("").match(f)||[],a=e.substr(0,e.indexOf(r[0])),h=")"===e.charAt(e.length-1)?")":"",l=-1!==e.indexOf(" ")?" ":",",c=r.length,d=c>0?r[0].replace(m,""):"";return c?n=t?function(e){var t,u,g,p;if("number"==typeof e)e+=d;else if(s&&O.test(e)){for(p=e.replace(O,"|").split("|"),g=0;p.length>g;g++)p[g]=n(p[g]);return p.join(",")}if(t=(e.match(ht)||[o])[0],u=e.split(t).join("").match(f)||[],g=u.length,c>g--)for(;c>++g;)u[g]=i?u[0|(g-1)/2]:r[g];return a+u.join(l)+l+t+h+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,o,u;if("number"==typeof e)e+=d;else if(s&&O.test(e)){for(o=e.replace(O,"|").split("|"),u=0;o.length>u;u++)o[u]=n(o[u]);return o.join(",")}if(t=e.match(f)||[],u=t.length,c>u--)for(;c>++u;)t[u]=i?t[0|(u-1)/2]:r[u];return a+t.join(l)+h}:function(e){return e}},ct=function(e){return e=e.split(","),function(t,i,s,n,o,r,a){var h,l=(i+"").split(" ");for(a={},h=0;4>h;h++)a[e[h]]=l[h]=l[h]||l[(h-1)/2>>0];return n.parse(t,a,o,r)}},dt=(U._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,s,n,o=this.data,r=o.proxy,a=o.firstMPT,h=1e-6;a;)t=r[a.v],a.r?t=Math.round(t):h>t&&t>-h&&(t=0),a.t[a.p]=t,a=a._next;if(o.autoRotate&&(o.autoRotate.rotation=r.rotation),1===e)for(a=o.firstMPT;a;){if(i=a.t,i.type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,s=1;i.l>s;s++)n+=i["xn"+s]+i["xs"+(s+1)];i.e=n}}else i.e=i.s+i.xs0;a=a._next}},function(e,t,i,s,n){this.t=e,this.p=t,this.v=i,this.r=n,s&&(s._prev=this,this._next=s)}),ut=(U._parseToProxy=function(e,t,i,s,n,o){var r,a,h,l,c,d=s,u={},g={},p=i._transform,m=P;for(i._transform=null,P=t,s=c=i.parse(e,t,s,n),P=m,o&&(i._transform=p,d&&(d._prev=null,d._prev&&(d._prev._next=null)));s&&s!==d;){if(1>=s.type&&(a=s.p,g[a]=s.s+s.c,u[a]=s.s,o||(l=new dt(s,"s",a,l,s.r),s.c=0),1===s.type))for(r=s.l;--r>0;)h="xn"+r,a=s.p+"_"+h,g[a]=s.data[h],u[a]=s[h],o||(l=new dt(s,h,a,l,s.rxp[h]));s=s._next}return{proxy:u,end:g,firstMPT:l,pt:c}},U.CSSPropTween=function(e,t,s,n,r,a,h,l,c,d,u){this.t=e,this.p=t,this.s=s,this.c=n,this.n=h||t,e instanceof ut||o.push(this.n),this.r=l,this.type=a||0,c&&(this.pr=c,i=!0),this.b=void 0===d?s:d,this.e=void 0===u?s+n:u,r&&(this._next=r,r._prev=this)}),gt=r.parseComplex=function(e,t,i,s,n,o,r,a,h,c){i=i||o||"",r=new ut(e,t,0,0,r,c?2:1,null,!1,a,i,s),s+="";var d,u,g,p,f,v,E,y,T,S,w,b,A=i.split(", ").join(",").split(" "),L=s.split(", ").join(",").split(" "),x=A.length,M=l!==!1;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(A=A.join(" ").replace(O,", ").split(" "),L=L.join(" ").replace(O,", ").split(" "),x=A.length),x!==L.length&&(A=(o||"").split(" "),x=A.length),r.plugin=h,r.setRatio=c,d=0;x>d;d++)if(p=A[d],f=L[d],y=parseFloat(p),y||0===y)r.appendXtra("",y,it(f,y),f.replace(_,""),M&&-1!==f.indexOf("px"),!0);else if(n&&("#"===p.charAt(0)||ot[p]||C.test(p)))b=","===f.charAt(f.length-1)?"),":")",p=at(p),f=at(f),T=p.length+f.length>6,T&&!G&&0===f[3]?(r["xs"+r.l]+=r.l?" transparent":"transparent",r.e=r.e.split(L[d]).join("transparent")):(G||(T=!1),r.appendXtra(T?"rgba(":"rgb(",p[0],f[0]-p[0],",",!0,!0).appendXtra("",p[1],f[1]-p[1],",",!0).appendXtra("",p[2],f[2]-p[2],T?",":b,!0),T&&(p=4>p.length?1:p[3],r.appendXtra("",p,(4>f.length?1:f[3])-p,b,!1)));else if(v=p.match(m)){if(E=f.match(_),!E||E.length!==v.length)return r;for(g=0,u=0;v.length>u;u++)w=v[u],S=p.indexOf(w,g),r.appendXtra(p.substr(g,S-g),Number(w),it(E[u],w),"",M&&"px"===p.substr(S+w.length,2),0===u),g=S+w.length;r["xs"+r.l]+=p.substr(g)}else r["xs"+r.l]+=r.l?" "+p:p;if(-1!==s.indexOf("=")&&r.data){for(b=r.xs0+r.data.s,d=1;r.l>d;d++)b+=r["xs"+d]+r.data["xn"+d];r.e=b+r["xs"+d]}return r.l||(r.type=-1,r.xs0=r.e),r.xfirst||r},pt=9;for(h=ut.prototype,h.l=h.pr=0;--pt>0;)h["xn"+pt]=0,h["xs"+pt]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(e,t,i,s,n,o){var r=this,a=r.l;return r["xs"+a]+=o&&a?" "+e:e||"",i||0===a||r.plugin?(r.l++,r.type=r.setRatio?2:1,r["xs"+r.l]=s||"",a>0?(r.data["xn"+a]=t+i,r.rxp["xn"+a]=n,r["xn"+a]=t,r.plugin||(r.xfirst=new ut(r,"xn"+a,t,i,r.xfirst||r,0,r.n,n,r.pr),r.xfirst.xs0=0),r):(r.data={s:t+i},r.rxp={},r.s=t,r.c=i,r.r=n,r)):(r["xs"+a]+=t+(s||""),r)};var mt=function(e,t){t=t||{},this.p=t.prefix?Y(e)||e:e,a[e]=a[this.p]=this,this.format=t.formatter||lt(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},_t=U._registerComplexSpecialProp=function(e,t,i){"object"!=typeof t&&(t={parser:i});var s,n,o=e.split(","),r=t.defaultValue;for(i=i||[r],s=0;o.length>s;s++)t.prefix=0===s&&t.prefix,t.defaultValue=i[s]||r,n=new mt(o[s],t)},ft=function(e){if(!a[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";_t(e,{parser:function(e,i,s,n,o,r,h){var l=(_gsScope.GreenSockGlobals||_gsScope).com.greensock.plugins[t];return l?(l._cssRegister(),a[s].parse(e,i,s,n,o,r,h)):(F("Error: "+t+" js file not loaded."),o)}})}};h=mt.prototype,h.parseComplex=function(e,t,i,s,n,o){var r,a,h,l,c,d,u=this.keyword;if(this.multi&&(O.test(i)||O.test(t)?(a=t.replace(O,"|").split("|"),h=i.replace(O,"|").split("|")):u&&(a=[t],h=[i])),h){for(l=h.length>a.length?h.length:a.length,r=0;l>r;r++)t=a[r]=a[r]||this.dflt,i=h[r]=h[r]||this.dflt,u&&(c=t.indexOf(u),d=i.indexOf(u),c!==d&&(i=-1===d?h:a,i[r]+=" "+u));t=a.join(", "),i=h.join(", ")}return gt(e,this.p,t,i,this.clrs,this.dflt,s,this.pr,n,o)},h.parse=function(e,t,i,s,o,r){return this.parseComplex(e.style,this.format(q(e,this.p,n,!1,this.dflt)),this.format(t),o,r)},r.registerSpecialProp=function(e,t,i){_t(e,{parser:function(e,s,n,o,r,a){var h=new ut(e,n,0,0,r,2,n,!1,i);return h.plugin=a,h.setRatio=t(e,s,o._tween,n),h},priority:i})};var vt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Et=Y("transform"),yt=W+"transform",Tt=Y("transformOrigin"),St=null!==Y("perspective"),Ct=U.Transform=function(){this.skewY=0},wt=U.getTransform=function(e,t,i,s){if(e._gsTransform&&i&&!s)return e._gsTransform;var n,o,a,h,l,c,d,u,g,p,m,_,f,v=i?e._gsTransform||new Ct:new Ct,E=0>v.scaleX,y=2e-5,T=1e5,S=179.99,C=S*R,w=St?parseFloat(q(e,Tt,t,!1,"0 0 0").split(" ")[2])||v.zOrigin||0:0;if(Et?n=q(e,yt,t,!0):e.currentStyle&&(n=e.currentStyle.filter.match(M),n=n&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),v.x||0,v.y||0].join(","):""),n&&"none"!==n&&"matrix(1, 0, 0, 1, 0, 0)"!==n){for(o=(n||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],a=o.length;--a>-1;)h=Number(o[a]),o[a]=(l=h-(h|=0))?(0|l*T+(0>l?-.5:.5))/T+h:h;if(16===o.length){var b=o[8],A=o[9],L=o[10],x=o[12],I=o[13],O=o[14];if(v.zOrigin&&(O=-v.zOrigin,x=b*O-o[12],I=A*O-o[13],O=L*O+v.zOrigin-o[14]),!i||s||null==v.rotationX){var P,D,k,B,U,H,G,V=o[0],F=o[1],W=o[2],j=o[3],Y=o[4],X=o[5],K=o[6],z=o[7],Q=o[11],J=Math.atan2(K,L),Z=-C>J||J>C;v.rotationX=J*N,J&&(B=Math.cos(-J),U=Math.sin(-J),P=Y*B+b*U,D=X*B+A*U,k=K*B+L*U,b=Y*-U+b*B,A=X*-U+A*B,L=K*-U+L*B,Q=z*-U+Q*B,Y=P,X=D,K=k),J=Math.atan2(b,V),v.rotationY=J*N,J&&(H=-C>J||J>C,B=Math.cos(-J),U=Math.sin(-J),P=V*B-b*U,D=F*B-A*U,k=W*B-L*U,A=F*U+A*B,L=W*U+L*B,Q=j*U+Q*B,V=P,F=D,W=k),J=Math.atan2(F,X),v.rotation=J*N,J&&(G=-C>J||J>C,B=Math.cos(-J),U=Math.sin(-J),V=V*B+Y*U,D=F*B+X*U,X=F*-U+X*B,K=W*-U+K*B,F=D),G&&Z?v.rotation=v.rotationX=0:G&&H?v.rotation=v.rotationY=0:H&&Z&&(v.rotationY=v.rotationX=0),v.scaleX=(0|Math.sqrt(V*V+F*F)*T+.5)/T,v.scaleY=(0|Math.sqrt(X*X+A*A)*T+.5)/T,v.scaleZ=(0|Math.sqrt(K*K+L*L)*T+.5)/T,v.skewX=0,v.perspective=Q?1/(0>Q?-Q:Q):0,v.x=x,v.y=I,v.z=O}}else if(!(St&&!s&&o.length&&v.x===o[4]&&v.y===o[5]&&(v.rotationX||v.rotationY)||void 0!==v.x&&"none"===q(e,"display",t))){var $=o.length>=6,et=$?o[0]:1,tt=o[1]||0,it=o[2]||0,st=$?o[3]:1;v.x=o[4]||0,v.y=o[5]||0,c=Math.sqrt(et*et+tt*tt),d=Math.sqrt(st*st+it*it),u=et||tt?Math.atan2(tt,et)*N:v.rotation||0,g=it||st?Math.atan2(it,st)*N+u:v.skewX||0,p=c-Math.abs(v.scaleX||0),m=d-Math.abs(v.scaleY||0),Math.abs(g)>90&&270>Math.abs(g)&&(E?(c*=-1,g+=0>=u?180:-180,u+=0>=u?180:-180):(d*=-1,g+=0>=g?180:-180)),_=(u-v.rotation)%180,f=(g-v.skewX)%180,(void 0===v.skewX||p>y||-y>p||m>y||-y>m||_>-S&&S>_&&!1|_*T||f>-S&&S>f&&!1|f*T)&&(v.scaleX=c,v.scaleY=d,v.rotation=u,v.skewX=g),St&&(v.rotationX=v.rotationY=v.z=0,v.perspective=parseFloat(r.defaultTransformPerspective)||0,v.scaleZ=1)}v.zOrigin=w;for(a in v)y>v[a]&&v[a]>-y&&(v[a]=0)}else v={x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,perspective:0,rotation:0,rotationX:0,rotationY:0,zOrigin:0};return i&&(e._gsTransform=v),v.xPercent=v.yPercent=0,v},bt=function(e){var t,i,s=this.data,n=-s.rotation*R,o=n+s.skewX*R,r=1e5,a=(0|Math.cos(n)*s.scaleX*r)/r,h=(0|Math.sin(n)*s.scaleX*r)/r,l=(0|Math.sin(o)*-s.scaleY*r)/r,c=(0|Math.cos(o)*s.scaleY*r)/r,d=this.t.style,u=this.t.currentStyle;if(u){i=h,h=-l,l=-i,t=u.filter,d.filter="";var g,m,_=this.t.offsetWidth,f=this.t.offsetHeight,v="absolute"!==u.position,T="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+h+", M21="+l+", M22="+c,S=s.x+_*s.xPercent/100,C=s.y+f*s.yPercent/100;if(null!=s.ox&&(g=(s.oxp?.01*_*s.ox:s.ox)-_/2,m=(s.oyp?.01*f*s.oy:s.oy)-f/2,S+=g-(g*a+m*h),C+=m-(g*l+m*c)),v?(g=_/2,m=f/2,T+=", Dx="+(g-(g*a+m*h)+S)+", Dy="+(m-(g*l+m*c)+C)+")"):T+=", sizingMethod='auto expand')",d.filter=-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?t.replace(I,T):T+" "+t,(0===e||1===e)&&1===a&&0===h&&0===l&&1===c&&(v&&-1===T.indexOf("Dx=0, Dy=0")||y.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf("gradient("&&t.indexOf("Alpha"))&&d.removeAttribute("filter")),!v){var w,b,A,L=8>p?1:-1;for(g=s.ieOffsetX||0,m=s.ieOffsetY||0,s.ieOffsetX=Math.round((_-((0>a?-a:a)*_+(0>h?-h:h)*f))/2+S),s.ieOffsetY=Math.round((f-((0>c?-c:c)*f+(0>l?-l:l)*_))/2+C),pt=0;4>pt;pt++)b=$[pt],w=u[b],i=-1!==w.indexOf("px")?parseFloat(w):K(this.t,b,parseFloat(w),w.replace(E,""))||0,A=i!==s[b]?2>pt?-s.ieOffsetX:-s.ieOffsetY:2>pt?g-s.ieOffsetX:m-s.ieOffsetY,d[b]=(s[b]=Math.round(i-A*(0===pt||2===pt?1:L)))+"px"}}},At=U.set3DTransformRatio=function(e){var t,i,s,n,o,r,a,h,l,c,d,g,p,m,_,f,v,E,y,T,S,C,w,b=this.data,A=this.t.style,L=b.rotation*R,x=b.scaleX,M=b.scaleY,I=b.scaleZ,O=b.x,N=b.y,P=b.z,D=b.perspective;if(!(1!==e&&0!==e||"auto"!==b.force3D||b.rotationY||b.rotationX||1!==I||D||P))return void Lt.call(this,e);if(u){var k=1e-4;k>x&&x>-k&&(x=I=2e-5),k>M&&M>-k&&(M=I=2e-5),!D||b.z||b.rotationX||b.rotationY||(D=0)}if(L||b.skewX)E=Math.cos(L),y=Math.sin(L),t=E,o=y,b.skewX&&(L-=b.skewX*R,E=Math.cos(L),y=Math.sin(L),"simple"===b.skewType&&(T=Math.tan(b.skewX*R),T=Math.sqrt(1+T*T),E*=T,y*=T)),i=-y,r=E;else{if(!(b.rotationY||b.rotationX||1!==I||D))return void(A[Et]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) translate3d(":"translate3d(")+O+"px,"+N+"px,"+P+"px)"+(1!==x||1!==M?" scale("+x+","+M+")":""));t=r=1,i=o=0}d=1,s=n=a=h=l=c=g=p=m=0,_=D?-1/D:0,f=b.zOrigin,v=1e5,L=b.rotationY*R,L&&(E=Math.cos(L),y=Math.sin(L),l=d*-y,p=_*-y,s=t*y,a=o*y,d*=E,_*=E,t*=E,o*=E),L=b.rotationX*R,L&&(E=Math.cos(L),y=Math.sin(L),T=i*E+s*y,S=r*E+a*y,C=c*E+d*y,w=m*E+_*y,s=i*-y+s*E,a=r*-y+a*E,d=c*-y+d*E,_=m*-y+_*E,i=T,r=S,c=C,m=w),1!==I&&(s*=I,a*=I,d*=I,_*=I),1!==M&&(i*=M,r*=M,c*=M,m*=M),1!==x&&(t*=x,o*=x,l*=x,p*=x),f&&(g-=f,n=s*g,h=a*g,g=d*g+f),n=(T=(n+=O)-(n|=0))?(0|T*v+(0>T?-.5:.5))/v+n:n,h=(T=(h+=N)-(h|=0))?(0|T*v+(0>T?-.5:.5))/v+h:h,g=(T=(g+=P)-(g|=0))?(0|T*v+(0>T?-.5:.5))/v+g:g,A[Et]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix3d(":"matrix3d(")+[(0|t*v)/v,(0|o*v)/v,(0|l*v)/v,(0|p*v)/v,(0|i*v)/v,(0|r*v)/v,(0|c*v)/v,(0|m*v)/v,(0|s*v)/v,(0|a*v)/v,(0|d*v)/v,(0|_*v)/v,n,h,g,D?1+-g/D:1].join(",")+")"},Lt=U.set2DTransformRatio=function(e){var t,i,s,n,o,r=this.data,a=this.t,h=a.style,l=r.x,c=r.y;return r.rotationX||r.rotationY||r.z||r.force3D===!0||"auto"===r.force3D&&1!==e&&0!==e?(this.setRatio=At,void At.call(this,e)):void(r.rotation||r.skewX?(t=r.rotation*R,i=t-r.skewX*R,s=1e5,n=r.scaleX*s,o=r.scaleY*s,h[Et]=(r.xPercent||r.yPercent?"translate("+r.xPercent+"%,"+r.yPercent+"%) matrix(":"matrix(")+(0|Math.cos(t)*n)/s+","+(0|Math.sin(t)*n)/s+","+(0|Math.sin(i)*-o)/s+","+(0|Math.cos(i)*o)/s+","+l+","+c+")"):h[Et]=(r.xPercent||r.yPercent?"translate("+r.xPercent+"%,"+r.yPercent+"%) matrix(":"matrix(")+r.scaleX+",0,0,"+r.scaleY+","+l+","+c+")")};_t("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(e,t,i,s,o,a,h){if(s._transform)return o;var l,c,d,u,g,p,m,_=s._transform=wt(e,n,!0,h.parseTransform),f=e.style,v=1e-6,E=vt.length,y=h,T={};if("string"==typeof y.transform&&Et)d=k.style,d[Et]=y.transform,d.display="block",d.position="absolute",D.body.appendChild(k),l=wt(k,null,!1),D.body.removeChild(k);else if("object"==typeof y){if(l={scaleX:st(null!=y.scaleX?y.scaleX:y.scale,_.scaleX),scaleY:st(null!=y.scaleY?y.scaleY:y.scale,_.scaleY),scaleZ:st(y.scaleZ,_.scaleZ),x:st(y.x,_.x),y:st(y.y,_.y),z:st(y.z,_.z),xPercent:st(y.xPercent,_.xPercent),yPercent:st(y.yPercent,_.yPercent),perspective:st(y.transformPerspective,_.perspective)},m=y.directionalRotation,null!=m)if("object"==typeof m)for(d in m)y[d]=m[d];else y.rotation=m;"string"==typeof y.x&&-1!==y.x.indexOf("%")&&(l.x=0,l.xPercent=st(y.x,_.xPercent)),"string"==typeof y.y&&-1!==y.y.indexOf("%")&&(l.y=0,l.yPercent=st(y.y,_.yPercent)),l.rotation=nt("rotation"in y?y.rotation:"shortRotation"in y?y.shortRotation+"_short":"rotationZ"in y?y.rotationZ:_.rotation,_.rotation,"rotation",T),St&&(l.rotationX=nt("rotationX"in y?y.rotationX:"shortRotationX"in y?y.shortRotationX+"_short":_.rotationX||0,_.rotationX,"rotationX",T),l.rotationY=nt("rotationY"in y?y.rotationY:"shortRotationY"in y?y.shortRotationY+"_short":_.rotationY||0,_.rotationY,"rotationY",T)),l.skewX=null==y.skewX?_.skewX:nt(y.skewX,_.skewX),l.skewY=null==y.skewY?_.skewY:nt(y.skewY,_.skewY),(c=l.skewY-_.skewY)&&(l.skewX+=c,l.rotation+=c)}for(St&&null!=y.force3D&&(_.force3D=y.force3D,p=!0),_.skewType=y.skewType||_.skewType||r.defaultSkewType,g=_.force3D||_.z||_.rotationX||_.rotationY||l.z||l.rotationX||l.rotationY||l.perspective,g||null==y.scale||(l.scaleZ=1);--E>-1;)i=vt[E],u=l[i]-_[i],(u>v||-v>u||null!=P[i])&&(p=!0,o=new ut(_,i,_[i],u,o),i in T&&(o.e=T[i]),o.xs0=0,o.plugin=a,s._overwriteProps.push(o.n));return u=y.transformOrigin,(u||St&&g&&_.zOrigin)&&(Et?(p=!0,i=Tt,u=(u||q(e,i,n,!1,"50% 50%"))+"",o=new ut(f,i,0,0,o,-1,"transformOrigin"),o.b=f[i],o.plugin=a,St?(d=_.zOrigin,u=u.split(" "),_.zOrigin=(u.length>2&&(0===d||"0px"!==u[2])?parseFloat(u[2]):d)||0,o.xs0=o.e=u[0]+" "+(u[1]||"50%")+" 0px",o=new ut(_,"zOrigin",0,0,o,-1,o.n),o.b=d,o.xs0=o.e=_.zOrigin):o.xs0=o.e=u):tt(u+"",_)),p&&(s._transformType=g||3===this._transformType?3:2),o},prefix:!0}),_t("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),_t("borderRadius",{defaultValue:"0px",parser:function(e,t,i,o,r){t=this.format(t);var a,h,l,c,d,u,g,p,m,_,f,v,E,y,T,S,C=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],w=e.style;for(m=parseFloat(e.offsetWidth),_=parseFloat(e.offsetHeight),a=t.split(" "),h=0;C.length>h;h++)this.p.indexOf("border")&&(C[h]=Y(C[h])),d=c=q(e,C[h],n,!1,"0px"),-1!==d.indexOf(" ")&&(c=d.split(" "),d=c[0],c=c[1]),u=l=a[h],g=parseFloat(d),v=d.substr((g+"").length),E="="===u.charAt(1),E?(p=parseInt(u.charAt(0)+"1",10),u=u.substr(2),p*=parseFloat(u),f=u.substr((p+"").length-(0>p?1:0))||""):(p=parseFloat(u),f=u.substr((p+"").length)),""===f&&(f=s[i]||v),f!==v&&(y=K(e,"borderLeft",g,v),T=K(e,"borderTop",g,v),"%"===f?(d=100*(y/m)+"%",c=100*(T/_)+"%"):"em"===f?(S=K(e,"borderLeft",1,"em"),d=y/S+"em",c=T/S+"em"):(d=y+"px",c=T+"px"),E&&(u=parseFloat(d)+p+f,l=parseFloat(c)+p+f)),r=gt(w,C[h],d+" "+c,u+" "+l,!1,"0px",r);return r},prefix:!0,formatter:lt("0px 0px 0px 0px",!1,!0)}),_t("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,s,o,r){var a,h,l,c,d,u,g="background-position",m=n||X(e,null),_=this.format((m?p?m.getPropertyValue(g+"-x")+" "+m.getPropertyValue(g+"-y"):m.getPropertyValue(g):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),f=this.format(t);if(-1!==_.indexOf("%")!=(-1!==f.indexOf("%"))&&(u=q(e,"backgroundImage").replace(A,""),u&&"none"!==u)){for(a=_.split(" "),h=f.split(" "),B.setAttribute("src",u),l=2;--l>-1;)_=a[l],c=-1!==_.indexOf("%"),c!==(-1!==h[l].indexOf("%"))&&(d=0===l?e.offsetWidth-B.width:e.offsetHeight-B.height,a[l]=c?parseFloat(_)/100*d+"px":100*(parseFloat(_)/d)+"%");_=a.join(" ")}return this.parseComplex(e.style,_,f,o,r)},formatter:tt}),_t("backgroundSize",{defaultValue:"0 0",formatter:tt}),_t("perspective",{defaultValue:"0px",prefix:!0}),_t("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),_t("transformStyle",{prefix:!0}),_t("backfaceVisibility",{prefix:!0}),_t("userSelect",{prefix:!0}),_t("margin",{parser:ct("marginTop,marginRight,marginBottom,marginLeft")}),_t("padding",{parser:ct("paddingTop,paddingRight,paddingBottom,paddingLeft")}),_t("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,s,o,r){var a,h,l;return 9>p?(h=e.currentStyle,l=8>p?" ":",",a="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",t=this.format(t).split(",").join(l)):(a=this.format(q(e,this.p,n,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,a,t,o,r)}}),_t("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),_t("autoRound,strictUnits",{parser:function(e,t,i,s,n){return n}}),_t("border",{defaultValue:"0px solid #000",parser:function(e,t,i,s,o,r){return this.parseComplex(e.style,this.format(q(e,"borderTopWidth",n,!1,"0px")+" "+q(e,"borderTopStyle",n,!1,"solid")+" "+q(e,"borderTopColor",n,!1,"#000")),this.format(t),o,r)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ht)||["#000"])[0]}}),_t("borderWidth",{parser:ct("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),_t("float,cssFloat,styleFloat",{parser:function(e,t,i,s,n){var o=e.style,r="cssFloat"in o?"cssFloat":"styleFloat";return new ut(o,r,0,0,n,-1,i,!1,0,o[r],t)}});var xt=function(e){var t,i=this.t,s=i.filter||q(this.data,"filter"),n=0|this.s+this.c*e;100===n&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")&&-1===s.indexOf("oader(")?(i.removeAttribute("filter"),t=!q(this.data,"filter")):(i.filter=s.replace(S,""),t=!0)),t||(this.xn1&&(i.filter=s=s||"alpha(opacity="+n+")"),-1===s.indexOf("pacity")?0===n&&this.xn1||(i.filter=s+" alpha(opacity="+n+")"):i.filter=s.replace(y,"opacity="+n))};_t("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,s,o,r){var a=parseFloat(q(e,"opacity",n,!1,"1")),h=e.style,l="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+a),l&&1===a&&"hidden"===q(e,"visibility",n)&&0!==t&&(a=0),G?o=new ut(h,"opacity",a,t-a,o):(o=new ut(h,"opacity",100*a,100*(t-a),o),o.xn1=l?1:0,h.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=e,o.plugin=r,o.setRatio=xt),l&&(o=new ut(h,"visibility",0,0,o,-1,null,!1,0,0!==a?"inherit":"hidden",0===t?"hidden":"inherit"),o.xs0="inherit",s._overwriteProps.push(o.n),s._overwriteProps.push(i)),o}});var Mt=function(e,t){t&&(e.removeProperty?("ms"===t.substr(0,2)&&(t="M"+t.substr(1)),e.removeProperty(t.replace(w,"-$1").toLowerCase())):e.removeAttribute(t))},It=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:Mt(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};_t("className",{parser:function(e,t,s,o,r,a,h){var l,c,d,u,g,p=e.getAttribute("class")||"",m=e.style.cssText;if(r=o._classNamePT=new ut(e,s,0,0,r,2),r.setRatio=It,r.pr=-11,i=!0,r.b=p,c=Q(e,n),d=e._gsClassPT){for(u={},g=d.data;g;)u[g.p]=1,g=g._next;d.setRatio(1)}return e._gsClassPT=r,r.e="="!==t.charAt(1)?t:p.replace(RegExp("\\s*\\b"+t.substr(2)+"\\b"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),o._tween._duration&&(e.setAttribute("class",r.e),l=J(e,c,Q(e),h,u),e.setAttribute("class",p),r.data=l.firstMPT,e.style.cssText=m,r=r.xfirst=o.parse(e,l.difs,r,a)),r}});var Ot=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,s,n,o=this.t.style,r=a.transform.parse;if("all"===this.e)o.cssText="",n=!0;else for(t=this.e.split(","),s=t.length;--s>-1;)i=t[s],a[i]&&(a[i].parse===r?n=!0:i="transformOrigin"===i?Tt:a[i].p),Mt(o,i);n&&(Mt(o,Et),this.t._gsTransform&&delete this.t._gsTransform)}};for(_t("clearProps",{parser:function(e,t,s,n,o){return o=new ut(e,s,0,0,o,2),o.setRatio=Ot,o.e=t,o.pr=-10,o.data=n._tween,i=!0,o}}),h="bezier,throwProps,physicsProps,physics2D".split(","),pt=h.length;pt--;)ft(h[pt]);h=r.prototype,h._firstPT=null,h._onInitTween=function(e,t,a){if(!e.nodeType)return!1;this._target=e,this._tween=a,this._vars=t,l=t.autoRound,i=!1,s=t.suffixMap||r.suffixMap,n=X(e,""),o=this._overwriteProps;var h,u,p,m,_,f,v,E,y,S=e.style;if(c&&""===S.zIndex&&(h=q(e,"zIndex",n),("auto"===h||""===h)&&this._addLazySet(S,"zIndex",0)),"string"==typeof t&&(m=S.cssText,h=Q(e,n),S.cssText=m+";"+t,h=J(e,h,Q(e)).difs,!G&&T.test(t)&&(h.opacity=parseFloat(RegExp.$1)),t=h,S.cssText=m),this._firstPT=u=this.parse(e,t,null),this._transformType){for(y=3===this._transformType,Et?d&&(c=!0,""===S.zIndex&&(v=q(e,"zIndex",n),("auto"===v||""===v)&&this._addLazySet(S,"zIndex",0)),g&&this._addLazySet(S,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(y?"visible":"hidden"))):S.zoom=1,p=u;p&&p._next;)p=p._next;
E=new ut(e,"transform",0,0,null,2),this._linkCSSP(E,null,p),E.setRatio=y&&St?At:Et?Lt:bt,E.data=this._transform||wt(e,n,!0),o.pop()}if(i){for(;u;){for(f=u._next,p=m;p&&p.pr>u.pr;)p=p._next;(u._prev=p?p._prev:_)?u._prev._next=u:m=u,(u._next=p)?p._prev=u:_=u,u=f}this._firstPT=m}return!0},h.parse=function(e,t,i,o){var r,h,c,d,u,g,p,m,_,f,v=e.style;for(r in t)g=t[r],h=a[r],h?i=h.parse(e,g,r,this,i,o,t):(u=q(e,r,n)+"",_="string"==typeof g,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||_&&C.test(g)?(_||(g=at(g),g=(g.length>3?"rgba(":"rgb(")+g.join(",")+")"),i=gt(v,r,u,g,!0,"transparent",i,0,o)):!_||-1===g.indexOf(" ")&&-1===g.indexOf(",")?(c=parseFloat(u),p=c||0===c?u.substr((c+"").length):"",(""===u||"auto"===u)&&("width"===r||"height"===r?(c=et(e,r,n),p="px"):"left"===r||"top"===r?(c=z(e,r,n),p="px"):(c="opacity"!==r?0:1,p="")),f=_&&"="===g.charAt(1),f?(d=parseInt(g.charAt(0)+"1",10),g=g.substr(2),d*=parseFloat(g),m=g.replace(E,"")):(d=parseFloat(g),m=_?g.substr((d+"").length)||"":""),""===m&&(m=r in s?s[r]:p),g=d||0===d?(f?d+c:d)+m:t[r],p!==m&&""!==m&&(d||0===d)&&c&&(c=K(e,r,c,p),"%"===m?(c/=K(e,r,100,"%")/100,t.strictUnits!==!0&&(u=c+"%")):"em"===m?c/=K(e,r,1,"em"):"px"!==m&&(d=K(e,r,d,m),m="px"),f&&(d||0===d)&&(g=d+c+m)),f&&(d+=c),!c&&0!==c||!d&&0!==d?void 0!==v[r]&&(g||"NaN"!=g+""&&null!=g)?(i=new ut(v,r,d||c||0,0,i,-1,r,!1,0,u,g),i.xs0="none"!==g||"display"!==r&&-1===r.indexOf("Style")?g:u):F("invalid "+r+" tween value: "+t[r]):(i=new ut(v,r,c,d-c,i,0,r,l!==!1&&("px"===m||"zIndex"===r),0,u,g),i.xs0=m)):i=gt(v,r,u,g,!0,null,i,0,o)),o&&i&&!i.plugin&&(i.plugin=o);return i},h.setRatio=function(e){var t,i,s,n=this._firstPT,o=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;n;){if(t=n.c*e+n.s,n.r?t=Math.round(t):o>t&&t>-o&&(t=0),n.type)if(1===n.type)if(s=n.l,2===s)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2;else if(3===s)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===s)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===s)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+t+n.xs1,s=1;n.l>s;s++)i+=n["xn"+s]+n["xs"+(s+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(e);else n.t[n.p]=t+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(e),n=n._next;else for(;n;)2!==n.type?n.t[n.p]=n.e:n.setRatio(e),n=n._next},h._enableTransforms=function(e){this._transformType=e||3===this._transformType?3:2,this._transform=this._transform||wt(this._target,n,!0)};var Rt=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};h._addLazySet=function(e,t,i){var s=this._firstPT=new ut(e,t,0,0,this._firstPT,2);s.e=i,s.setRatio=Rt,s.data=this},h._linkCSSP=function(e,t,i,s){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,s=!0),i?i._next=e:s||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},h._kill=function(t){var i,s,n,o=t;if(t.autoAlpha||t.alpha){o={};for(s in t)o[s]=t[s];o.opacity=1,o.autoAlpha&&(o.visibility=1)}return t.className&&(i=this._classNamePT)&&(n=i.xfirst,n&&n._prev?this._linkCSSP(n._prev,i._next,n._prev._prev):n===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,n._prev),this._classNamePT=null),e.prototype._kill.call(this,o)};var Nt=function(e,t,i){var s,n,o,r;if(e.slice)for(n=e.length;--n>-1;)Nt(e[n],t,i);else for(s=e.childNodes,n=s.length;--n>-1;)o=s[n],r=o.type,o.style&&(t.push(Q(o)),i&&i.push(o)),1!==r&&9!==r&&11!==r||!o.childNodes.length||Nt(o,t,i)};return r.cascadeTo=function(e,i,s){var n,o,r,a=t.to(e,i,s),h=[a],l=[],c=[],d=[],u=t._internals.reservedProps;for(e=a._targets||a.target,Nt(e,l,d),a.render(i,!0),Nt(e,c),a.render(0,!0),a._enabled(!0),n=d.length;--n>-1;)if(o=J(d[n],l[n],c[n]),o.firstMPT){o=o.difs;for(r in s)u[r]&&(o[r]=s[r]);h.push(t.to(d[n],i,o))}return h},e.activate([r]),r},!0),function(){var e=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(e,t,i){return this._tween=i,!0}}),t=e.prototype;t._onInitAllProps=function(){for(var e,t,i,s=this._tween,n=s.vars.roundProps instanceof Array?s.vars.roundProps:s.vars.roundProps.split(","),o=n.length,r={},a=s._propLookup.roundProps;--o>-1;)r[n[o]]=1;for(o=n.length;--o>-1;)for(e=n[o],t=s._firstPT;t;)i=t._next,t.pg?t.t._roundProps(r,!0):t.n===e&&(this._add(t.t,e,t.s,t.c),i&&(i._prev=t._prev),t._prev?t._prev._next=i:s._firstPT===t&&(s._firstPT=i),t._next=t._prev=null,s._propLookup[e]=a),t=i;return!1},t._add=function(e,t,i,s){this._addTween(e,t,i,i+s,t,!0),this._overwriteProps.push(t)}}(),_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(e,t){var i,s,n;if("function"!=typeof e.setAttribute)return!1;this._target=e,this._proxy={},this._start={},this._end={};for(i in t)this._start[i]=this._proxy[i]=s=e.getAttribute(i),n=this._addTween(this._proxy,i,parseFloat(s),t[i],i),this._end[i]=n?n.s+n.c:t[i],this._overwriteProps.push(i);return!0},set:function(e){this._super.setRatio.call(this,e);for(var t,i=this._overwriteProps,s=i.length,n=1===e?this._end:e?this._proxy:this._start;--s>-1;)t=i[s],this._target.setAttribute(t,n[t]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t){"object"!=typeof t&&(t={rotation:t}),this.finals={};var i,s,n,o,r,a,h=t.useRadians===!0?2*Math.PI:360,l=1e-6;for(i in t)"useRadians"!==i&&(a=(t[i]+"").split("_"),s=a[0],n=parseFloat("function"!=typeof e[i]?e[i]:e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]()),o=this.finals[i]="string"==typeof s&&"="===s.charAt(1)?n+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,r=o-n,a.length&&(s=a.join("_"),-1!==s.indexOf("short")&&(r%=h,r!==r%(h/2)&&(r=0>r?r+h:r-h)),-1!==s.indexOf("_cw")&&0>r?r=(r+9999999999*h)%h-(0|r/h)*h:-1!==s.indexOf("ccw")&&r>0&&(r=(r-9999999999*h)%h-(0|r/h)*h)),(r>l||-l>r)&&(this._addTween(e,i,n,n+r,i),this._overwriteProps.push(i)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,i,s,n=_gsScope.GreenSockGlobals||_gsScope,o=n.com.greensock,r=2*Math.PI,a=Math.PI/2,h=o._class,l=function(t,i){var s=h("easing."+t,function(){},!0),n=s.prototype=new e;return n.constructor=s,n.getRatio=i,s},c=e.register||function(){},d=function(e,t,i,s){var n=h("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new s},!0);return c(n,e),n},u=function(e,t,i){this.t=e,this.v=t,i&&(this.next=i,i.prev=this,this.c=i.v-t,this.gap=i.t-e)},g=function(t,i){var s=h("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),n=s.prototype=new e;return n.constructor=s,n.getRatio=i,n.config=function(e){return new s(e)},s},p=d("Back",g("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),g("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),g("BackInOut",function(e){return 1>(e*=2)?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),m=h("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=i===!0},!0),_=m.prototype=new e;return _.constructor=m,_.getRatio=function(e){var t=e+(.5-e)*this._p;return this._p1>e?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},m.ease=new m(.7,.7),_.config=m.config=function(e,t,i){return new m(e,t,i)},t=h("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),_=t.prototype=new e,_.constructor=t,_.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},_.config=t.config=function(e){return new t(e)},i=h("easing.RoughEase",function(t){t=t||{};for(var i,s,n,o,r,a,h=t.taper||"none",l=[],c=0,d=0|(t.points||20),g=d,p=t.randomize!==!1,m=t.clamp===!0,_=t.template instanceof e?t.template:null,f="number"==typeof t.strength?.4*t.strength:.4;--g>-1;)i=p?Math.random():1/d*g,s=_?_.getRatio(i):i,"none"===h?n=f:"out"===h?(o=1-i,n=o*o*f):"in"===h?n=i*i*f:.5>i?(o=2*i,n=.5*o*o*f):(o=2*(1-i),n=.5*o*o*f),p?s+=Math.random()*n-.5*n:g%2?s+=.5*n:s-=.5*n,m&&(s>1?s=1:0>s&&(s=0)),l[c++]={x:i,y:s};for(l.sort(function(e,t){return e.x-t.x}),a=new u(1,1,null),g=d;--g>-1;)r=l[g],a=new u(r.x,r.y,a);this._prev=new u(0,0,0!==a.t?a:a.next)},!0),_=i.prototype=new e,_.constructor=i,_.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&t.t>=e;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},_.config=function(e){return new i(e)},i.ease=new i,d("Bounce",l("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),l("BounceIn",function(e){return 1/2.75>(e=1-e)?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),l("BounceInOut",function(e){var t=.5>e;return e=t?1-2*e:2*e-1,e=1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),d("Circ",l("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),l("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),l("CircInOut",function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),s=function(t,i,s){var n=h("easing."+t,function(e,t){this._p1=e||1,this._p2=t||s,this._p3=this._p2/r*(Math.asin(1/this._p1)||0)},!0),o=n.prototype=new e;return o.constructor=n,o.getRatio=i,o.config=function(e,t){return new n(e,t)},n},d("Elastic",s("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*r/this._p2)+1},.3),s("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*r/this._p2))},.3),s("ElasticInOut",function(e){return 1>(e*=2)?-.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*r/this._p2):.5*this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*r/this._p2)+1},.45)),d("Expo",l("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),l("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),l("ExpoInOut",function(e){return 1>(e*=2)?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),d("Sine",l("SineOut",function(e){return Math.sin(e*a)}),l("SineIn",function(e){return-Math.cos(e*a)+1}),l("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),h("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),c(n.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(t,"SteppedEase","ease,"),p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var i=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!i.TweenLite){var s,n,o,r,a,h=function(e){var t,s=e.split("."),n=i;for(t=0;s.length>t;t++)n[s[t]]=n=n[s[t]]||{};return n},l=h("com.greensock"),c=1e-10,d=function(e){var t,i=[],s=e.length;for(t=0;t!==s;i.push(e[t++]));return i},u=function(){},g=function(){var e=Object.prototype.toString,t=e.call([]);return function(i){return null!=i&&(i instanceof Array||"object"==typeof i&&!!i.push&&e.call(i)===t)}}(),p={},m=function(s,n,o,r){this.sc=p[s]?p[s].sc:[],p[s]=this,this.gsClass=null,this.func=o;var a=[];this.check=function(l){for(var c,d,u,g,_=n.length,f=_;--_>-1;)(c=p[n[_]]||new m(n[_],[])).gsClass?(a[_]=c.gsClass,f--):l&&c.sc.push(this);if(0===f&&o)for(d=("com.greensock."+s).split("."),u=d.pop(),g=h(d.join("."))[u]=this.gsClass=o.apply(o,a),r&&(i[u]=g,"function"==typeof define&&define.amd?define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+s.split(".").pop(),[],function(){return g}):s===t&&"undefined"!=typeof module&&module.exports&&(module.exports=g)),_=0;this.sc.length>_;_++)this.sc[_].check()},this.check(!0)},_=e._gsDefine=function(e,t,i,s){return new m(e,t,i,s)},f=l._class=function(e,t,i){return t=t||function(){},_(e,[],function(){return t},i),t};_.globals=i;var v=[0,0,1,1],E=[],y=f("easing.Ease",function(e,t,i,s){this._func=e,this._type=i||0,this._power=s||0,this._params=t?v.concat(t):v},!0),T=y.map={},S=y.register=function(e,t,i,s){for(var n,o,r,a,h=t.split(","),c=h.length,d=(i||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(o=h[c],n=s?f("easing."+o,null,!0):l.easing[o]||{},r=d.length;--r>-1;)a=d[r],T[o+"."+a]=T[a+o]=n[a]=e.getRatio?e:e[a]||new e};for(o=y.prototype,o._calcEnd=!1,o.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,s=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===t?1-s:2===t?s:.5>e?s/2:1-s/2},s=["Linear","Quad","Cubic","Quart","Quint,Strong"],n=s.length;--n>-1;)o=s[n]+",Power"+n,S(new y(null,null,1,n),o,"easeOut",!0),S(new y(null,null,2,n),o,"easeIn"+(0===n?",easeNone":"")),S(new y(null,null,3,n),o,"easeInOut");T.linear=l.easing.Linear.easeIn,T.swing=l.easing.Quad.easeInOut;var C=f("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});o=C.prototype,o.addEventListener=function(e,t,i,s,n){n=n||0;var o,h,l=this._listeners[e],c=0;for(null==l&&(this._listeners[e]=l=[]),h=l.length;--h>-1;)o=l[h],o.c===t&&o.s===i?l.splice(h,1):0===c&&n>o.pr&&(c=h+1);l.splice(c,0,{c:t,s:i,up:s,pr:n}),this!==r||a||r.wake()},o.removeEventListener=function(e,t){var i,s=this._listeners[e];if(s)for(i=s.length;--i>-1;)if(s[i].c===t)return void s.splice(i,1)},o.dispatchEvent=function(e){var t,i,s,n=this._listeners[e];if(n)for(t=n.length,i=this._eventTarget;--t>-1;)s=n[t],s.up?s.c.call(s.s||i,{type:e,target:i}):s.c.call(s.s||i)};var w=e.requestAnimationFrame,b=e.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},L=A();for(s=["ms","moz","webkit","o"],n=s.length;--n>-1&&!w;)w=e[s[n]+"RequestAnimationFrame"],b=e[s[n]+"CancelAnimationFrame"]||e[s[n]+"CancelRequestAnimationFrame"];f("Ticker",function(e,t){var i,s,n,o,h,l=this,d=A(),g=t!==!1&&w,p=500,m=33,_=function(e){var t,r,a=A()-L;a>p&&(d+=a-m),L+=a,l.time=(L-d)/1e3,t=l.time-h,(!i||t>0||e===!0)&&(l.frame++,h+=t+(t>=o?.004:o-t),r=!0),e!==!0&&(n=s(_)),r&&l.dispatchEvent("tick")};C.call(l),l.time=l.frame=0,l.tick=function(){_(!0)},l.lagSmoothing=function(e,t){p=e||1/c,m=Math.min(t,p,0)},l.sleep=function(){null!=n&&(g&&b?b(n):clearTimeout(n),s=u,n=null,l===r&&(a=!1))},l.wake=function(){null!==n?l.sleep():l.frame>10&&(L=A()-p+5),s=0===i?u:g&&w?w:function(e){return setTimeout(e,0|1e3*(h-l.time)+1)},l===r&&(a=!0),_(2)},l.fps=function(e){return arguments.length?(i=e,o=1/(i||60),h=this.time+o,void l.wake()):i},l.useRAF=function(e){return arguments.length?(l.sleep(),g=e,void l.fps(i)):g},l.fps(e),setTimeout(function(){g&&(!n||5>l.frame)&&l.useRAF(!1)},1500)}),o=l.Ticker.prototype=new l.events.EventDispatcher,o.constructor=l.Ticker;var x=f("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,W){a||r.wake();var i=this.vars.useFrames?F:W;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});r=x.ticker=new l.Ticker,o=x.prototype,o._dirty=o._gc=o._initted=o._paused=!1,o._totalTime=o._time=0,o._rawPrevTime=-1,o._next=o._last=o._onUpdate=o._timeline=o.timeline=null,o._paused=!1;var M=function(){a&&A()-L>2e3&&r.wake(),setTimeout(M,2e3)};M(),o.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},o.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},o.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},o.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},o.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},o.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},o.render=function(){},o.invalidate=function(){return this},o.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=i&&i+this.totalDuration()/this._timeScale>e},o._enabled=function(e,t){return a||r.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},o._kill=function(){return this._enabled(!1,!1)},o.kill=function(e,t){return this._kill(e,t),this},o._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},o._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();--t>-1;)"{self}"===e[t]&&(i[t]=this);return i},o.eventCallback=function(e,t,i,s){if("on"===(e||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[e];null==t?delete n[e]:(n[e]=t,n[e+"Params"]=g(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[e+"Scope"]=s),"onSoundProgress"===e&&(this._onUpdate=t)}return this},o.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},o.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},o.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},o.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},o.totalTime=function(e,t,i){if(a||r.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,n=this._timeline;if(e>s&&!i&&(e=s),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?s-e:e)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(this.render(e,t,!1),P.length&&j())}return this},o.progress=o.totalProgress=function(e,t){return arguments.length?this.totalTime(this.duration()*e,t):this._time/this.duration()},o.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},o.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||c,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,i=t||0===t?t:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},o.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},o.paused=function(e){if(!arguments.length)return this._paused;if(e!=this._paused&&this._timeline){a||e||r.wake();var t=this._timeline,i=t.rawTime(),s=i-this._pauseTime;!e&&t.smoothChildTiming&&(this._startTime+=s,this._uncache(!1)),this._pauseTime=e?i:null,this._paused=e,this._active=this.isActive(),!e&&0!==s&&this._initted&&this.duration()&&this.render(t.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!e&&this._enabled(!0,!1),this};var I=f("core.SimpleTimeline",function(e){x.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});o=I.prototype=new x,o.constructor=I,o.kill()._gc=!1,o._first=o._last=null,o._sortChildren=!1,o.add=o.insert=function(e,t){var i,s;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last,this._sortChildren)for(s=e._startTime;i&&i._startTime>s;)i=i._prev;return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._timeline&&this._uncache(!0),this},o._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,this._timeline&&this._uncache(!0)),this},o.render=function(e,t,i){var s,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;n;)s=n._next,(n._active||e>=n._startTime&&!n._paused)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=s},o.rawTime=function(){return a||r.wake(),this._totalTime};var O=f("TweenLite",function(t,i,s){if(x.call(this,i,s),this.render=O.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:O.selector(t)||t;var n,o,r,a=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?V[O.defaultOverwrite]:"number"==typeof h?h>>0:V[h],(a||t instanceof Array||t.push&&g(t))&&"number"!=typeof t[0])for(this._targets=r=d(t),this._propLookup=[],this._siblings=[],n=0;r.length>n;n++)o=r[n],o?"string"!=typeof o?o.length&&o!==e&&o[0]&&(o[0]===e||o[0].nodeType&&o[0].style&&!o.nodeType)?(r.splice(n--,1),this._targets=r=r.concat(d(o))):(this._siblings[n]=Y(o,this,!1),1===h&&this._siblings[n].length>1&&X(o,this,null,1,this._siblings[n])):(o=r[n--]=O.selector(o),"string"==typeof o&&r.splice(n+1,1)):r.splice(n--,1);else this._propLookup={},this._siblings=Y(t,this,!1),1===h&&this._siblings.length>1&&X(t,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-c,this.render(-this._delay))},!0),R=function(t){return t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},N=function(e,t){var i,s={};for(i in e)G[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!B[i]||B[i]&&B[i]._autoCSS)||(s[i]=e[i],delete e[i]);e.css=s};o=O.prototype=new x,o.constructor=O,o.kill()._gc=!1,o.ratio=0,o._firstPT=o._targets=o._overwrittenProps=o._startAt=null,o._notifyPluginsOfEnabled=o._lazy=!1,O.version="1.13.1",O.defaultEase=o._ease=new y(null,null,1,1),O.defaultOverwrite="auto",O.ticker=r,O.autoSleep=!0,O.lagSmoothing=function(e,t){r.lagSmoothing(e,t)},O.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(O.selector=i,i(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var P=[],D={},k=O._internals={isArray:g,isSelector:R,lazyTweens:P},B=O._plugins={},U=k.tweenLookup={},H=0,G=k.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onSoundProgress:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1},V={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},F=x._rootFramesTimeline=new I,W=x._rootTimeline=new I,j=k.lazyRender=function(){var e=P.length;for(D={};--e>-1;)s=P[e],s&&s._lazy!==!1&&(s.render(s._lazy,!1,!0),s._lazy=!1);P.length=0};W._startTime=r.time,F._startTime=r.frame,W._active=F._active=!0,setTimeout(j,1),x._updateRoot=O.render=function(){var e,t,i;if(P.length&&j(),W.render((r.time-W._startTime)*W._timeScale,!1,!1),F.render((r.frame-F._startTime)*F._timeScale,!1,!1),P.length&&j(),!(r.frame%120)){for(i in U){for(t=U[i].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete U[i]}if(i=W._first,(!i||i._paused)&&O.autoSleep&&!F._first&&1===r._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||r.sleep()}}},r.addEventListener("tick",x._updateRoot);var Y=function(e,t,i){var s,n,o=e._gsTweenID;if(U[o||(e._gsTweenID=o="t"+H++)]||(U[o]={target:e,tweens:[]}),t&&(s=U[o].tweens,s[n=s.length]=t,i))for(;--n>-1;)s[n]===t&&s.splice(n,1);return U[o].tweens},X=function(e,t,i,s,n){var o,r,a,h;if(1===s||s>=4){for(h=n.length,o=0;h>o;o++)if((a=n[o])!==t)a._gc||a._enabled(!1,!1)&&(r=!0);else if(5===s)break;return r}var l,d=t._startTime+c,u=[],g=0,p=0===t._duration;for(o=n.length;--o>-1;)(a=n[o])===t||a._gc||a._paused||(a._timeline!==t._timeline?(l=l||q(t,0,p),0===q(a,l,p)&&(u[g++]=a)):d>=a._startTime&&a._startTime+a.totalDuration()/a._timeScale>d&&((p||!a._initted)&&2e-10>=d-a._startTime||(u[g++]=a)));for(o=g;--o>-1;)a=u[o],2===s&&a._kill(i,e)&&(r=!0),(2!==s||!a._firstPT&&a._initted)&&a._enabled(!1,!1)&&(r=!0);return r},q=function(e,t,i){for(var s=e._timeline,n=s._timeScale,o=e._startTime;s._timeline;){if(o+=s._startTime,n*=s._timeScale,s._paused)return-100;s=s._timeline}return o/=n,o>t?o-t:i&&o===t||!e._initted&&2*c>o-t?c:(o+=e.totalDuration()/e._timeScale/n)>t+c?0:o-t-c};o._init=function(){var e,t,i,s,n,o=this.vars,r=this._overwrittenProps,a=this._duration,h=!!o.immediateRender,l=o.ease;if(o.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={};for(s in o.startAt)n[s]=o.startAt[s];if(n.overwrite=!1,n.immediateRender=!0,n.lazy=h&&o.lazy!==!1,n.startAt=n.delay=null,this._startAt=O.to(this.target,0,n),h)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(o.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{i={};for(s in o)G[s]&&"autoCSS"!==s||(i[s]=o[s]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&o.lazy!==!1,i.immediateRender=h,this._startAt=O.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1)}if(this._ease=l=l?l instanceof y?l:"function"==typeof l?new y(l,o.easeParams):T[l]||O.defaultEase:O.defaultEase,o.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(e=this._targets.length;--e>-1;)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],r?r[e]:null)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,r);if(t&&O._onPluginEvent("_onInitAllProps",this),r&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=o.onSoundProgress,this._initted=!0},o._initProps=function(t,i,s,n){var o,r,a,h,l,c;if(null==t)return!1;D[t._gsTweenID]&&j(),this.vars.css||t.style&&t!==e&&t.nodeType&&B.css&&this.vars.autoCSS!==!1&&N(this.vars,t);for(o in this.vars){if(c=this.vars[o],G[o])c&&(c instanceof Array||c.push&&g(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[o]=c=this._swapSelfInParams(c,this));else if(B[o]&&(h=new B[o])._onInitTween(t,this.vars[o],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:o,pg:!0,pr:h._priority},r=h._overwriteProps.length;--r>-1;)i[h._overwriteProps[r]]=this._firstPT;(h._priority||h._onInitAllProps)&&(a=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[o]=l={_next:this._firstPT,t:t,p:o,f:"function"==typeof t[o],n:o,pg:!1,pr:0},l.s=l.f?t[o.indexOf("set")||"function"!=typeof t["get"+o.substr(3)]?o:"get"+o.substr(3)]():parseFloat(t[o]),l.c="string"==typeof c&&"="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-l.s||0;l&&l._next&&(l._next._prev=l)}return n&&this._kill(n,t)?this._initProps(t,i,s,n):this._overwrite>1&&this._firstPT&&s.length>1&&X(t,this,i,this._overwrite,s)?(this._kill(i,t),this._initProps(t,i,s,n)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(D[t._gsTweenID]=!0),a)},o.render=function(e,t,i){var s,n,o,r,a=this._time,h=this._duration,l=this._rawPrevTime;if(e>=h)this._totalTime=this._time=h,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,n="onComplete"),0===h&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(0===e||0>l||l===c)&&l!==e&&(i=!0,l>c&&(n="onReverseComplete")),this._rawPrevTime=r=!t||e||l===e?e:c);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===h&&l>0&&l!==c)&&(n="onReverseComplete",s=this._reversed),0>e?(this._active=!1,0===h&&(this._initted||!this.vars.lazy||i)&&(l>=0&&(i=!0),this._rawPrevTime=r=!t||e||l===e?e:c)):this._initted||(i=!0);else if(this._totalTime=this._time=e,this._easeType){var d=e/h,u=this._easeType,g=this._easePower;(1===u||3===u&&d>=.5)&&(d=1-d),3===u&&(d*=2),1===g?d*=d:2===g?d*=d*d:3===g?d*=d*d*d:4===g&&(d*=d*d*d*d),this.ratio=1===u?1-d:2===u?d:.5>e/h?d/2:1-d/2}else this.ratio=this._ease.getRatio(e/h);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=l,P.push(this),void(this._lazy=e);this._time&&!s?this.ratio=this._ease.getRatio(this._time/h):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&e>=0&&(this._active=!0),0===a&&(this._startAt&&(e>=0?this._startAt.render(e,t,i):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._time||0===h)&&(t||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||E))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,i),t||(this._time!==a||s)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||E)),n&&(!this._gc||i)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this.vars[n].apply(this.vars[n+"Scope"]||this,this.vars[n+"Params"]||E),0===h&&this._rawPrevTime===c&&r!==c&&(this._rawPrevTime=0))}},o._kill=function(e,t){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:O.selector(t)||t;var i,s,n,o,r,a,h,l;if((g(t)||R(t))&&"number"!=typeof t[0])for(i=t.length;--i>-1;)this._kill(e,t[i])&&(a=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(t===this._targets[i]){r=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],s=this._overwrittenProps[i]=e?this._overwrittenProps[i]||{}:"all";break}}else{if(t!==this.target)return!1;r=this._propLookup,s=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(r){h=e||r,l=e!==s&&"all"!==s&&e!==r&&("object"!=typeof e||!e._tempKill);for(n in h)(o=r[n])&&(o.pg&&o.t._kill(h)&&(a=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete r[n]),l&&(s[n]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return a},o.invalidate=function(){return this._notifyPluginsOfEnabled&&O._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=this._lazy=!1,this._propLookup=this._targets?{}:[],this
},o._enabled=function(e,t){if(a||r.wake(),e&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=Y(s[i],this,!0);else this._siblings=Y(this.target,this,!0)}return x.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?O._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},O.to=function(e,t,i){return new O(e,t,i)},O.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new O(e,t,i)},O.fromTo=function(e,t,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new O(e,t,s)},O.delayedCall=function(e,t,i,s,n){return new O(t,0,{delay:e,onComplete:t,onCompleteParams:i,onCompleteScope:s,onReverseComplete:t,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,useFrames:n,overwrite:0})},O.set=function(e,t){return new O(e,0,t)},O.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:O.selector(e)||e;var i,s,n,o;if((g(e)||R(e))&&"number"!=typeof e[0]){for(i=e.length,s=[];--i>-1;)s=s.concat(O.getTweensOf(e[i],t));for(i=s.length;--i>-1;)for(o=s[i],n=i;--n>-1;)o===s[n]&&s.splice(i,1)}else for(s=Y(e).concat(),i=s.length;--i>-1;)(s[i]._gc||t&&!s[i].isActive())&&s.splice(i,1);return s},O.killTweensOf=O.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var s=O.getTweensOf(e,t),n=s.length;--n>-1;)s[n]._kill(i,e)};var K=f("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=K.prototype},!0);if(o=K.prototype,K.version="1.10.1",K.API=2,o._firstPT=null,o._addTween=function(e,t,i,s,n,o){var r,a;return null!=s&&(r="number"==typeof s||"="!==s.charAt(1)?Number(s)-i:parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:e,p:t,s:i,c:r,f:"function"==typeof e[t],n:n||t,r:o},a._next&&(a._next._prev=a),a):void 0},o.setRatio=function(e){for(var t,i=this._firstPT,s=1e-6;i;)t=i.c*e+i.s,i.r?t=Math.round(t):s>t&&t>-s&&(t=0),i.f?i.t[i.p](t):i.t[i.p]=t,i=i._next},o._kill=function(e){var t,i=this._overwriteProps,s=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;--t>-1;)null!=e[i[t]]&&i.splice(t,1);for(;s;)null!=e[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},o._roundProps=function(e,t){for(var i=this._firstPT;i;)(e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&(i.r=t),i=i._next},O._onPluginEvent=function(e,t){var i,s,n,o,r,a=t._firstPT;if("_onInitAllProps"===e){for(;a;){for(r=a._next,s=n;s&&s.pr>a.pr;)s=s._next;(a._prev=s?s._prev:o)?a._prev._next=a:n=a,(a._next=s)?s._prev=a:o=a,a=r}a=t._firstPT=n}for(;a;)a.pg&&"function"==typeof a.t[e]&&a.t[e]()&&(i=!0),a=a._next;return i},K.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===K.API&&(B[(new e[t])._propName]=e[t]);return!0},_.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,s=e.priority||0,n=e.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},r=f("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){K.call(this,i,s),this._overwriteProps=n||[]},e.global===!0),a=r.prototype=new K(i);a.constructor=r,r.API=e.API;for(t in o)"function"==typeof e[t]&&(a[o[t]]=e[t]);return r.version=e.version,K.activate([r]),r},s=e._gsQueue){for(n=0;s.length>n;n++)s[n]();for(o in p)p[o].func||e.console.log("GSAP encountered missing dependency: com.greensock."+o)}a=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax"),define("TweenMax",function(){}),define("model/sound_model",["jquery","events/sound_events","underscore","backbone","config","model/loader_collection","createjs","TweenMax"],function(e,t,i,s,n,o,r,a){var h=s.Model.extend({defaults:{volume:1},initialize:function(){this.sounds=new s.Collection,this.groups=new s.Model,this.instanceToIDLookup={},this.boundOnSoundComplete=i.bind(this.onSoundComplete,this),this.currentPlaying=[],o.on("loaded",this.onItemLoaded,this),r.Sound.alternateExtensions=["ogg"]},playSoundRequest:function(e){var t=e.id,i=e.config;e.setInstance(this.play(t,i))},onItemLoaded:function(e){"sound"===e.item.type&&(this.addToGroup(e.item,e.item.sound_group),this.sounds.add(e.item))},addToGroup:function(e,t){t=t||"main_sound_group";var i=this.getGroup(t);i.get("items").add(e)},setGroupVolume:function(e,t){var i=this.getGroup(e);i.set("volume",t)},onGroupVolumeChange:function(e){var t=this,i=e.get("items");i.each(function(i){for(var s=i.id,n=t.getSoundsByID(s),o=0;o<n.length;o++){var r=(n[o],e.get("volume"));t.setSoundVolume(s,r,0,0,!1)}})},getGroupBySound:function(e){for(var t in this.groups.attributes){var i=this.groups.attributes[t],s=i.get("items");if(s.get(e))return i}return null},getGroup:function(e,t){var i=this.groups.get(e);if(!i&&t!==!1){var n=new s.Collection([]),o=new s.Model({volume:1,pause:!1,items:n});o.on("change:volume",this.onGroupVolumeChange,this),this.groups.set(e,o)}return this.groups.get(e)},play:function(e,t){var s=e;if(e&&e.id&&(s=e.id),this.sounds.findWhere({id:s})||this.sounds.findWhere({src:s})){t=t||{};var n={interrupt:r.Sound.INTERRUPT_ANY,delay:0,offset:0,loop:0,volume:1,pan:0,time:0,sound_group:"main"};i.defaults(t,n),t.initial_volume=t.volume;var o=1,h=this.getGroupBySound(s);h&&(o=h.get("volume"));var l=t.volume*o;0===t.pan&&(t.pan=1e-4);var c=[s,t.interrupt,t.delay,t.offset,t.loop,l,t.pan],d=r.Sound.play.apply(r.Sound,c);return d.addEventListener("complete",this.boundOnSoundComplete),a.fromTo(d,t.time,{volume:0},{volume:l}),this.instanceToIDLookup[d]=s,this.currentPlaying.push(d),d}},onSoundComplete:function(e){e.currentTarget.removeEventListener("complete",this.boundOnSoundComplete);var i=this.instanceToIDLookup[e.currentTarget];this.trigger(t.SOUND_COMPLETE,i)},stop:function(e,t){var s=t||{};i.defaults(s,{time:0,delay:0});var n,o=[];if("string"==typeof e)n=e,o=n?this.getSoundsByID(n):this.currentPlaying;else{var r=e,h=r.soundInstance;h&&(o=[h])}for(var l=[],c=function(e){e.stop()},d=0;d<o.length;d++){var u=o[d],g=1,p=this.getGroupBySound(n);p&&(g=p.get("volume")),a.to(u,s.time,{delay:s.delay,volume:0,onComplete:c,onCompleteParams:[u]}),l.push(u)}this.removeFromPlaying(l)},pause:function(e,t){if(e)for(var i=this.getSoundsByID(e),s=0;s<i.length;s++){var n=i[s];t?n.pause():n.resume()}},setSoundVolume:function(e,t,s,n,o){(i.isUndefined(o)||null===o)&&(o=!0),(i.isUndefined(s)||null===s)&&(s=0),(i.isUndefined(n)||null===n)&&(n=0);for(var r=this.getSoundsByID(e),h=0;h<r.length;h++){var l=r[h],c=1,d=this.getGroupBySound(e);d&&(c=d.get("volume")),a.to(l,s,{delay:n,volume:c*t})}},setGlobalVolume:function(e){this.set("volume",e),r.Sound.setVolume(e)},setGlobalMute:function(e){var t=e?0:1;this.set("volume",t),r.Sound.setMute(e)},getProgress:function(e){var t=this.getSoundsByID(e),s=0;if(t.length>0){var n=i.last(t);s=n.getPosition()/n.getDuration()}return s},removeFromPlaying:function(e){i.each(this.currentPlaying,function(t){var s=i.indexOf(e,t);s>-1&&(s=i.indexOf(this.currentPlaying,t),this.currentPlaying.splice(s,1))},this)},removeSound:function(e){this.removeFromPlaying(this.getSoundsByID(e)),this.sounds.remove(this.sounds.where({id:e}))},getSoundsByID:function(e){var t=[],i=this.sounds.get(e);if(!i)return[];for(var s=this.sounds.get(e).get("src"),n=0;n<this.currentPlaying.length;n++){var o=this.currentPlaying[n];o.src===s&&t.push(o)}return t}});return new h}),define("controller/sound_controller",["route/router","model/app_model","view/common/communicator","model/loader_collection","model/sound_model","events/sound_events"],function(e,t,i,s,n,o){var r={init:function(){i.once("init",function(){n.setup()},this),i.on(o.PLAY_SOUND,this.onPlaySound,this),i.on(o.STOP_SOUND,this.onStopSound,this),i.on(o.PAUSE_SOUND,this.onPauseSound,this),i.on(o.SET_SOUND_VOLUME,this.onSetSoundVolume,this),i.on(o.SET_GLOBAL_VOLUME,this.onSetGlobalVolume,this),i.on(o.SET_GROUP_VOLUME,this.onSetGroupVolume,this),i.on(o.TOGGLE_MUTE,this.onToggleMute,this),t.on("change:visible",this.onAppVisible,this),s.on("sound_removed_from_loader",this.onSoundRemovedFromLoader,this)},onToggleMute:function(){var e=0===n.get("volume");n.setGlobalMute(!e)},onAppVisible:function(e,t){t||0===n.get("volume")?t&&n.get("muted")&&(n.set("muted",!1),n.setGlobalMute(!1)):(n.set("muted",!0),n.setGlobalMute(!0))},onSoundRemovedFromLoader:function(e){n.removeSound(e)},onPlaySound:function(e){if(!e.isCorrectClass)throw Error("Please use SoundRequest class to be played");n.playSoundRequest(e)},onStopSound:function(e,t){n.stop(e,t)},onSetSoundVolume:function(e,t){n.setSoundVolume(e,t)},onSetGlobalVolume:function(e){n.setGlobalVolume(e)},onSetGroupVolume:function(e,t){n.setGroupVolume(e,t)},onPauseSound:function(e,t){n.pause(e,t)}};return r.init(),r}),define("util/facebook",["config","underscore","backbone"],function(e,t,i){var s={SDK:null,ready:!1,onFBinit:function(){window.FB.init({appId:e.getFBID(),xfbml:!0,version:"v2.3"}),window.FB.Event.subscribe("edge.create",t.bind(this.onFBLike,this)),window.FB.Event.subscribe("comment.create",t.bind(this.onFBComment,this)),this.SDK=window.FB,this.ready=!0,this.trigger("fb_ready")},onFBComment:function(e){this.trigger("fb_comment",e)},onFBLike:function(e){this.trigger("fb_like",e)},ui:function(e,t){this.SDK.ui(e,t)},renderAllLikes:function(){this.SDK.XFBML.parse()}};return t.extend(s,i.Events),window.fbAsyncInit=t.bind(s.onFBinit,s),function(e,t,i){var s,n=e.getElementsByTagName(t)[0];e.getElementById(i)||(s=e.createElement(t),s.id=i,s.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(s,n))}(document,"script","facebook-jssdk"),s}),define("util/shareutil",["jquery","config","underscore","util/facebook"],function(e,t,i,s){return{tweet:function(e,t,i){e=e,i=i;var s=encodeURIComponent(t),n="http://twitter.com/intent/tweet?text="+encodeURIComponent(e)+"&url="+s;i&&i.length>0&&(n+="&related="+encodeURIComponent(i)),window.open(n,"tweetFollow","width=550,height=420,toolbar=no")||(window.location.href=n)},fbpost:function(e,t){var n={};n.method="feed",n=i.extend(n,e),s.SDK.ui(n,t)},gplusshare:function(e){window.open("https://plus.google.com/share?url="+e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},inviteFacebookFriends:function(e){s.SDK.ui({method:"apprequests",message:e})},shareSiteFacebook:function(e){window.open("https://www.facebook.com/sharer.php?u="+encodeURIComponent(e),"fbShare","width=550,height=420,toolbar=no")},followTwitter:function(e){window.open("https://twitter.com/intent/user?screen_name="+e,"tweetFollow","width=550,height=420,toolbar=no")},getUrl:function(e){return e?t.SITE_URL+"?url=features/"+e:t.SITE_URL}}}),define("model/slides_model",["jquery","underscore","backbone"],function(e,t,i){var s=i.Model.extend({defaults:{total_slides:0},setAudioMap:function(){},initialize:function(){}});return new s}),define("controller/share_controller",["underscore","jquery","util/shareutil","view/common/communicator","config","model/app_model","model/copy_model","model/slides_model","console"],function(e,t,i,s,n,o,r,a){var h={init:function(){s.on(s.EVENTS.SITE.SHARE.FACEBOOK.SHARE_GAME_RESULTS,this.onFacebookShareGame,this),s.on(s.EVENTS.SITE.SHARE.TWITTER.SHARE_GAME_RESULTS,this.onTwitterShareGame,this),s.on(s.EVENTS.SITE.SHARE.FACEBOOK.SHARE_CURRENT_PAGE,this.onFacebookShareCurrentPage,this),s.on(s.EVENTS.SITE.SHARE.TWITTER.SHARE_CURRENT_PAGE,this.onTwitterShareCurrentPage,this),s.on(s.EVENTS.SITE.SHARE.FACEBOOK.EMBED_SHARE_CURRENT_PAGE,this.onEmbedFacebookShareCurrentPage,this),s.on(s.EVENTS.SITE.SHARE.TWITTER.EMBED_SHARE_CURRENT_PAGE,this.onTwitterShareCurrentPage,this),s.on(s.EVENTS.SITE.SHARE.TWITTER.SHARE_CURRENT_SLIDE,this.onTwitterShareCurrentSlide,this),s.on(s.EVENTS.SITE.SHARE.FACEBOOK.SHARE_CURRENT_SLIDE,this.onFacebookShareCurrentSlide,this)},onTwitterShareCurrentSlide:function(){var e=window.location.href,t=o.get("page"),s=this.getTwitterCopyByPage(t),n=null;i.tweet(s,e,n)},getURL:function(){var e="";switch(n.ENV){case"dev":e=n.SITE_URL+"embed/index_dev.html";break;case"staging":e=n.SITE_URL+"embed/index_staging.html";break;case"live":e=n.SITE_URL+"embed/";break;default:e=n.SITE_URL+"embed/"}return e},getMedalDescription:function(e){var t=r.get("share-game-score-copy");return t=t.replace("[number of Gold]",""+e.gold),t=t.replace("[number of Silver]",""+e.silver),t=t.replace("[number of Bronze]",""+e.bronze)},onTwitterShareGame:function(e){var t=window.location.href,s=this.getMedalDescription(e),n=null;i.tweet(s,t,n)},onFacebookShareGame:function(e){var t=this.getMedalDescription(e),s=o.get("page"),n={},r=this.getImageURLByPage(s),a=window.location.href;n={method:"feed",link:a,picture:r,name:this.getFBTitleByPage(s),caption:a,description:t},i.fbpost(n,function(){})},onTwitterShareCurrentPage:function(){var e=o.get("page"),t=window.location.href,s=this.getTwitterCopyByPage(e),n=null;i.tweet(s,t,n)},getImageURLByPage:function(e){var t;switch(e){case o.PAGES.CAROUSEL:t="carousel.jpg";break;case o.PAGES.DEPARTED_COLONEL:t="departed_colonel.jpg";break;case o.PAGES.EARLY_YEARS:t="early_years.jpg";break;case o.PAGES.GAME:t="colonel_quest.jpg";break;case o.PAGES.GUN_FIGHT:t="gun_fight.jpg";break;case o.PAGES.LOOSE_LIPS:t="loose_lips.jpg";break;case o.PAGES.MANDOLIN:t="mandolin.jpg";break;default:t="carousel.jpg"}var i=n.SITE_URL+"/"+n.CDN+"/img/share/"+t;return i},getTwitterCopyByPage:function(e){var t,i;switch(e){case o.PAGES.CAROUSEL:i="site-share-twitter-body";break;case o.PAGES.EARLY_YEARS:i="early-years-twitter-copy";break;case o.PAGES.GUN_FIGHT:i="gun-fight-twitter-copy";break;case o.PAGES.MANDOLIN:i="mandolin-twitter-copy";break;case o.PAGES.LOOSE_LIPS:i="loose-lipped-twitter-copy";break;case o.PAGES.GAME:i="games-twitter-copy";break;case o.PAGES.DEPARTED_COLONEL:i="departed-twitter-copy";break;default:i="site-share-twitter-body"}return t=r.get(i)},getFBTitleByPage:function(e){var t,i;switch(e){case o.PAGES.CAROUSEL:i="site-share-facebook-title";break;case o.PAGES.EARLY_YEARS:i="early-years-facebook-title";break;case o.PAGES.GUN_FIGHT:i="gun-fight-facebook-title";break;case o.PAGES.MANDOLIN:i="mandolin-facebook-title";break;case o.PAGES.LOOSE_LIPS:i="loose-lipped-facebook-title";break;case o.PAGES.GAME:i="games-facebook-title";break;case o.PAGES.DEPARTED_COLONEL:i="departed-facebook-title";break;default:i="site-share-facebook-title"}return t=r.get(i)},getFBDescriptionByPage:function(e){var t,i;switch(e){case o.PAGES.CAROUSEL:i="site-share-facebook-copy";break;case o.PAGES.EARLY_YEARS:i="early-years-facebook-description";break;case o.PAGES.GUN_FIGHT:i="gun-fight-facebook-description";break;case o.PAGES.MANDOLIN:i="mandolin-facebook-description";break;case o.PAGES.LOOSE_LIPS:i="loose-lipped-facebook-description";break;case o.PAGES.GAME:i="games-facebook-description";break;case o.PAGES.DEPARTED_COLONEL:i="departed-facebook-description";break;default:i="site-share-facebook-copy"}return t=r.get(i)},getImageURLBySlide:function(e){var t="early_years_slide_"+e+".jpg",i=n.SITE_URL+"/"+n.CDN+"/img/share/"+t;return i},onFacebookShareCurrentSlide:function(){var e=o.get("page"),t=a.get("slide"),s=this.getImageURLBySlide(t),n=window.location.href,r={method:"feed",link:n,picture:s,name:this.getFBTitleByPage(e),caption:n,description:this.getFBDescriptionByPage(e)};i.fbpost(r,function(){})},openPopUp:function(e,t,i){var s=window.open(e,"name","height="+i+" ,width="+t+" , scrollbars=1");s&&s.focus()},onFacebookShareCurrentPage:function(){var e=o.get("page"),t={},s=this.getImageURLByPage(e),n=window.location.href;t={method:"feed",link:n,picture:s,name:this.getFBTitleByPage(e),caption:n,description:this.getFBDescriptionByPage(e)},i.fbpost(t,function(){})},onEmbedFacebookShareCurrentPage:function(){var e=o.get("page"),t={};if(n.HAS_EMBEDABLE_GAMES&&e===o.PAGES.GAME){var s=this.getURL();this.openPopUp("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(s),400,300)}else{var r=this.getImageURLByPage(e),a=window.location.href;t={method:"feed",link:a,picture:r,name:this.getFBTitleByPage(e),caption:a,description:this.getFBDescriptionByPage(e)},i.fbpost(t,function(){})}}};return h.init(),h}),define("text!model/../../data/coupons.json",[],function(){return'{\n	"5_Off_8pc_meal": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmQAAAEqCAIAAAA0ydtqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAZjFJREFUeNrsvQuYVcWVNnyaq9hNQ0AuBv3NgGK8AEF/okEN4RYVRuNHBBH9HRiuMyAGeYJRhG8mCERm0FHhG1BQxnHAIHG8jFw+uYwRiJeAQaIMCo6OEGkQAk03bdNA/+85q3tRVNXeZ5/Tp5s+3e/79NPPPvtSl1Wr1qpVu+rdOeXl5TGCIAiCIILRgCIgCIIgCDpLgiAIgqCzJAiCIAg6S4IgCIKgsyQIgiAIOkuCIAiCoLMkCIIgCDpLgiAIgqCzJAiCIAiCzpIgCIIg6CwJgiAIgs6SIAiCIOgsCYIgCILOkiAIgiCyDI3Se2zLli3e81dffTXv4T28h/fwHt5T++8xTzKyJAiCIIiqIifVjz+LT07JIRMEQRBE7UEajoyRJUEQBEHQWRIEQRBE1dCIIiAIgiDqFdJ4k8jIkiAIgiDoLAmCIAiCzpIgCIIg6CwJgiAIImPYkkBKj6S8wIc7LAmCIAhGlgRBEARB0FkSBEEQBJ0lQRAEQZxNZ5nGe1GCIAiCYGRJEARBEHSWBEEQBFGPQW5YgiAIon6B3LAEQRAEkXnQWRIEQRAEnSVBEARB0FkSBEEQRHSQG5YgCIIgGFkSBEEQBJ0lQRAEQdBZEgRBEESWIeV3lvJStP68uVyzZk1hYaF7fvDgwcXFxStXrpSf+fn5N954Iw7279//1ltvWScB3Lxx40ZJ6tJLL+3ataucf+mll+TAPOnm7k2/V69ebdu21Zs//PDDnTt3ys3du3fXS1Yi3mKbJZGTZkYmvOU0sXnz5r179+KgQ4cO3bp1y83N1UvIetu2bXLVe4NWQSQclIV5m1VZ66qIyKyLJJu0duHtIkAiH3zwgdumXuVBl+nYsaP5rBbAzVRbVs+EyD9ERb1XIfaePXu695ut4zaN936vSkdsa7NgAwYMkEtu26WnaSkpiWqa2+iu/L3SS0mxg3QyJePjVUJvQ7hVsFSRiIryFPH7BMrrDcaPHx8iN/NqUVERzixfvlzPrF69Wm7bvXt3586dzcfxoFzSM3gwJHe9H31SH8Gxpt+nT5+glnUT0cLgKTlTUFCgD06bNs3KyIS3nAJIYOjQoUHF2LRpkyUEAGdwXu8xpefNAuV0a2qVykxk0aJFVl1cMXrTSVpfpJxUMmZ9pSQKswAQmpWptqy3kEgWLZ6GiiogQzMFALoapKJehKh0xLY2C6b1nTt3rnsyVU1LVUn0ZIgaWNJDFmkrdpBOpmp8rGSDiudNASmLvaq3SMORcRq2Srjlllv0WMK1BQsWaG+RoA2jzptvvvmTTz6ppjJI+uvXr4/+SP/+/eVAn9q3b59e7dKlS3oleeCBB1588cWgqyNGjHCFgDM4Hz2LefPmeWs6ZMiQzz77zD2/dOnS6pA5RuujRo0KvwdDfrO+GP4H3Qmh4ebouSPZ0aNHV6X8kKGZAuKem266KbqKJlXpVNtaoy5vI6aqaakqSRrSQxZpVzZTOom6oEZJi+fF/PnzFy5cSAOeEugsqwS4Qx1Uvvzyy1Bf7aWPPPKIHGzcuLH6PKUMwDV9FAZjRu+w2kSvXr1MQ2laK5nJSaMYMPfogSEzZkFCwHlcjWijZ8yYEXR1w4YNXsOREftoAW1txoXeCGDXrl2WeQpJ0DsnHG6vq1gvpCBND7z//vtmXILquKGSiXCVTqOttfrhUoqiaWkoSRrQLNKobKZ0MqQuKB7kEP745MmT67PpvjoBOstqgTUrpeenTJmi8YGpvgMGDJCDjz76yJo9KygoMEPSKkLflABvv/02BpXr1q2DBw3pLaY7/Oqrr/DffDXivnszJ8SC3q+YkZPMPxcVFek0kVlIEQL+e6sQAvMRmShDFjoyCArdXnnllaSjjaS1c2NBOZg7d+6yZcsgc5TEGmRopdTxhJhInZAIgtTXnLtzt1QHqah51ZSYjpBUdLgE5UF1cGnYsGFBhQlX6TTa+s0334weVoZrWnpKkhSu/GWokZ5iJ9XJKC1rtpr7DsgshlkF87yOljD+eOmll6pjWMnIkjgN0+3p1BxsqL7eVxUcO3asvFdv27atLqupJsDhhazO6NSpkx6Lm9SO574Kigh1t+i6UjsUQH2PXkX6IgT817y8qxhcwCJYYxFkoTb94MGD3qeqY7rJDbxQEmuQodGSTnp/+umnVYwUkUXSaYNwoJyXXXaZdbJVq1bund5FQFFUOo22RhAGex0in+ialp6SRO9WQYVJSbEzopNaF9ROOrsO0C05mHCX9kDy7dq1GzJkCMwC/SWdZSwjqvlhAlbEBjMxbdo06+a7777bGjUDF154YXUUzJxTve+++yJaTLW5YtO1kP369XPvR5yBiod3pO3bt8uBa4tNZ9y6dWs9qccRx/vmOF2HAvn5+Va05xpic5I5vdpZgJPQuaygOWR3qnDPnj0haUYk31LxujO3QSoq2LFjB6KHxYsXa8E6dOggB9ddd536bNyQtAzhKp1eW+/atStcPhE1LT0liQhXsOlVNqlOBrWs+W5b66K1M8fHblALhYECTJ8+3Ro0m4qUKgMcnSXhn3nrloA7v3HTTTdZcybmIvVqfWEp3lrfmaGQjz32WJSnBg4cqDYUJkALecEFF7g3Y9SJioenfOjQoVrbduFvBKPUzoI5pBgxYoTraM0z3bt3l4O1a9emXcgqqqg4QtTUXJeEO+Xg+uuv11gZN6xZsyY8o+pQaRj3iGOms6Jp4mkeffRR7/RMxnUyqGWroiQYJEEB9G0rwl9xruZou/7sCUyDGzZlZ5nGe9E6j549e5qTYyEve6oJ6MNq7BDrRLH7GhPAhpq29ZJLLql7DRRl2UhK6Nq1q74fgue4+eabLX9pzij26NEjSliT8UKGY/Xq1RqI4MDcjYfBX1J/WR3eSAPW2qlCpqdBfw/fhFrzOpkSYC5mzpypo+2CggLoM+wA918ysqxeIDIzZ5AiLlfJINBvV61alZK/NFej6GJIpFCXekva71+jYPDgwbop0PWXqg/WK0ZdUlFj5fRi0aJF1ltzuH+4z7PoL+Epq3sOJoMIWXB7FnUyOp577jmzp8NfQp/pKeksM2Z5tyXgTr+sXLnS7OdJVzZWB6Dob7/9tppm+EuvXTaNox7r9JcuRbGAUScqfv/992dXk7Vu3TpoW3dGaodHzPjSHKCYM4rm7Kv3TdWgQYOqW0VjibcDuphz1KhR7s5OuE9ztefEiROTbj/IVJQTq5zaDd+yUhsAMW7atClk9VNGdDKoZc0p01SxPAE5dpdZEHSWmbS8XRNwp18s77h+/XpzVF5jY0kMD5955hmvjQ7q9nKgy+qCuqJwaIUPPPXNnBfe9ZYRr6Zkcy1EMS5RahcSX6rdmT9/vnognWSDMpgb2r788ks3kfTea7gFDlFRHSGplLxvv6zp5Y0bN6YRHqXa1nfccYceBw3XomtaGkoS0dPIto158+aZnjINxU7D4WnLmosh0qiLalo17T+mszwDabwXrdvYvHmzEhGoEXn99ddNRZcDcyd7xDG7djb1Z+aK8Ly8PNeAqgtM2hnU6Oi7NF0emQZ0SR78hNZOD5QVyHxVo8cROYPMqWONm90dGlU0TKni9ttv12MhQgqJ6c3t/2arRdwQAnmq0NJbXK1S0jWlrvvX46CdD+EqnWpb44za/SjtFa5paSiJPJteGJ2GYmdKJ7UuWjtT8bzUIuYAi2Y8VTSiCCJCVt67NkXf9KDDDxo0SBwPesv9998vqom+IZ0Hly655BL0H9ipQ4cOWZRU1khf0tfOps+aUaykj1IhXrniiivOP//8nTt3akdNGiq5C191eaQFBKk6fxhELG52zlGjRkEUKNXChQuV212vTpgwATIx62teVZjSlkzbt2+vZyZNmjRu3DhkEV5fWSocvpgivHbedunbty9yx80Yuzz11FN6VUoYsisA7bho0SI38kNq4YSFUgyzMO7IJkhFvTDXlE6fPv2iiy667LLLMPxasWKF1S4Il++77z6UHNGVpBmu0mm0Ney+TMN6r6akaRGVxE3ELGR0Eqs0KhtFJ1OaWkBSOMbgyTQOphySAgowY8aMuXPnZt2rlhoFidSrQqRu8o9D1ayfSjntnQINoTn2pm9B6M6DyJRjBjGNS6TuTVxJ1SNSjbvwzgslrQigvM9BddFMQyIwpa3XRKS+5rqVWOpE6t7qeC+peE02cLde0i4Wj7Yln3AidRmZKRF2RCJ1KZ5OGpvN7U1BszCrIy0VrtIR21ozhXCUld77nYCUNC2ikoTchsRDqNVdZv+UFDtEJ6N8R8Hivg/K12xcqwoqOjVQZjqmfEikTiL1TMKcbr322mvNLY+TJ0+WN1gY9JnmJiUgQffrFtKfhw8fHvIgcgz/kJYkbhod3ZmeNp588slUKxJLrMwM/xKTiaBViEOHDg0iRbr++utrQBMgSR2V61yrmmMzUvHGnZBASu+2H3nkkfS2LuhcBQLZcPZ2tGZQFuEqnUZb6yRHUqVNqmnRlSTotvDEM6LYGdFJ1CVIZ0IW6+rk7RtvvBE+2V63QW7YGkVxcfGcOXPULMprf5P9TidkZNmkmE4hqo7ODTty5EgM95TbGo/DTr399ts6CYMmR7ggV/Efx9HXdpqvcNL+2IjZezdt2iQdWCjdTTuCikAIZhCDY5zB+ehZQMjIQusrFnBRAkGPwOJnfO0fiq12Cgf4uXXrVmkRaIW+A1aKGdMHBL0sjLImVqQKCUTksHVhvjB74YUX5EXdsGHDtF1EwRASqV+5++67Rf1QTbX+4SqdalvL7t7oTH7hmhZRSXAbegpuk3y176RKRZmGYmdKJ6VSqopShfDFutpMGC3JpL1ugsL/6qbhzGrkhEz1eFHfPv5MEARBEIwsCYIgCILOkiAIgiAMpLEHMuWtI5yAJQiCIBhZEgRBEARBZ0kQBEEQdJYEQRAEcTadJblhCYIgCDpLgiAIgiDoLAmCIAgiFfCrIwRBEET9Qhp7IBlZEgRBEASdJUEQBEHQWRIEQRAEnSVBEARBZAzkhiUIgiAIRpYEQRAEQWdJEARBEHSWBEEQBFHXnSW5YQmCIAg6S4IgCIIg6CwJgiAIIhWQG5YgCIKoXyA3LEEQBEEwsqwRlH748dfdhrjnO5T/MdWkvp4wNYMFO2/ezLMlk1PFx8p2f162c9eJL/904rMv41Ka/6p7W5OhvXJat2zQqkWTLt9t2KF9025XNsg9N9W8itdsKHl9bQYL3+yWfrk39q7hLAiCoLMkIvtdn0dJH2fDWZ7Yf6Dohd+ULFxx6pN9SW8+/uJbclCiXmTaPbm3/2XTrpdHz7G88Ghm5XZOr2tqPguCIOoSOA1bvW4m26tQuHhpQbvexZPnRfGUXpTMeB5hOiJsxKZUCYIgagPIDVu7cHJfFjtL+LaDo36ukWLVI+yCN989b9Xixh0vomIQBMHIMutR9tkXJWt/672E8AiRVvGaDXUgZEyKw4/Oy5SnrPC+n+w7NPoXjC8JgshG8J2lEf18+HHh7PkhHgLhUWms4kVX0/E/qcNrOuLrX2Y8n/FkT6zfXrjw+Zb3j6OyEQTByDL7gHDn8GMLvu42JHosBcd5+KZ7i156LSxI3bkrSwVSOLG6VhIVT56H2J0ql3EFxlAPfxTFGYOz/Qcgk7Oob1IA/FXrhMpZryYjSz/kpWhdenOZ2ZdzdSOsTHs5T6T0X1nF4NKrhwduHYngW362WD4rb/CtehWDOYwz5LjJ0F5tls3Xxjq2ZIWpvc2m3dN8+B3mu+GvJ0zVpb/nbVuuK5PNLVKaHcZ/R4Y85BYPmTbtd13e0NvC9wIFPd50/E/O6XWN1si8zarp3pwr9RHZKxW0latRny5NB/bKve1m60U4JHls5driBctUmEDu3An5Y+/RwgcVwMxLC2DiwJ3jVdrNFz2UP3JYkBysAkhp8+7+aaO2bayaeuHNPbyaDTq3bzb2drOaIS2isOQfhKQVVzVDTdu8tljL4FUzRpZZiYy/nMt2wPhWrzOePI9vLj1dMffclo9P059HH35SX43jQD0lkP/gePWgh2+619LekhnP7+80EE40s8VDLkdHzSq46tb0IhiYUZhsGNwMNj2cBMRiVVbGvsjLdFSidThfxdzREKa0S5a+7jcpjy1wCyClLWjXOyMhoLeaGOPGs0i3japeca0pjGod7KGMoqrj5VxWz1zVwNChZOO7FLUnmOh6OeIJNXxFL/ymIjioPJAISULDeOwyOdAkFU6cWR3L0FCqI489XRWPi2Ao46VCZdULhox9cb5wYZU6+zdv/c7yCq5bgkkJaRe0b0YWhB96YGZQNdFGh6fOyayEo1TcGrGFv6LKRtT3BT7V93IuoWHZ5xJKP/hjDeRS9tHOGPlufGg5/WcFlVOmJQtX5I+951RxsRrfBp3b44wEFgg9TQ/arN8PTxUVFT31L2JDxddWcbq7xfJZjS+9OG4cvypACKsxYkRyDH289P0/ICrVTlGViTipabyCRUWF0x6XuAqVLdv9OcYQpR9+bI59pQBlO3fpPCQkaU6Epjy2XrDMPuO8U4jrtlGApld3O1VUjDLg2VN7DqB93WSbDO2lswWn45i83MBO+uHHJqWGVBNtFB80JF6gQAeKh29wlx9qi5ho2L5NRipuATJvurtbrd0qlsabxHrtLKv75Vw2wuzq1eiS33grxteW3g7Ztg0smhh3KCfisFOFRXq1+SMT5VVQ6bY/qurC1KrZapCX93VlwAHHUEVnCcMqUSz+l4z/iRpouOooLIbm4+osy96s0giy0YXf1neuJ8fdeaRyEhK+U7yy6VbFK+P+E3P/hJFHs7G35952c9qeErGUznlC5jIoQbKWkIUMsqJUhUUN27WBw0AZUBg4OW/uOa1bpkRxZVaz+aKHtJrljxzVYUHJ62tdZ6ktUh0V94S/o3/R5rXFjCzrAko3vX92C4BAoXH/2kWTVvb+9uiFh/WB8VK7ULp2U8QpXPS9iAY3BDpjmRQ5+c1rbRYuzh3Q72jnJ8UXSjhS0Vf7dNGY7OTe04O8ZoNuPF3grpfjNjVtsM5pGEcXaKyTOz473fQpNpw5IZxBhT++/b+MOCwvfuaDj06LJRGAChCOW8terBjoSOyh5GPrV1bpcd69f3WoMoIv2fxes57fPx0mdr9CN5hhiIA/WRvVrPd1QW2BUcheI1JMykFtVrNpj+/p8Tm9fnDESNOdACicPR+OWcsZtDopvYp7u3nRi6+YJaSzzFac9beVMBxnkRvd3w+jeTsM2z3jypHDSu597/CIh6LE6zJvVpWi1oDozkrrwKbnPzlVpj3N5Rvm8p8TX/4p6PGGl3W0lpakDbWtCAe1TaMPIMzHT1ucjhdWaTZowTJ5uwHnba4CbdzpO3IySKQZMBcLV6gEmnY7vZC1ZPV/mj7j3Fv6F3d+1uwC6FPx5VGJB1vcP6bqM5NnDFyM2dqkQfMZvXt8hit+ergwtNeJrTtFAhgrNFg+q274i/q7wKcGNqVlmEW9BsLKaIvo0GeCZmDQeZo/MjFSXlm7CbUGkHtjb8snNZt2T0ZixFRHTnEijvmvqumHW4K5r8rjeXf/tCpFgoOUNM0BAcYWGXGHYQ5j83tai3N6XYPstIEw5jYX2cJjnbdqsXdIgWJ/ffPI7FoKHr3ip2dZWrds+dwsM3CvhfUiN2y2xfVVG2VnHKeKiiOZ8mFhscW5A/pFmdQiwtF8zF3mYCt/wogzNKdy9ttF+cHDVtgBNSs93cRFaY9XGvXp0nrZk2m/88PjrZ75lTxuzlqbL2XT2PNg7hw1o2qzprHQ96yyB1RDdu9aVkRRZlhvLfUs2fiu+YIQseN582aW3T+mdMs2xMFmO8ZnL8+8ORawwCcEZ1az2Kzj6abv3N47IaSaE/HFQUoVr2jEN99tNm8mhnd1bKNB/Z2GjWgp4usPn5za6Px28kjJy2syuLMixOTVZpmEv6iQsWfSqDr+wilrtyfXAKw40nJRDTucNoXFC5bpu0xz5098cjIx42eqWdmOXdp8ppfyosXyWcjo0HV/XXH/ntT2oqhphl1ucklHc/pROlRFvLV2U6zy5dmJfQVJ02zW74eHJ83wOkXzfWHpO1u1pkIRkDdljJef0mRLKP3w4+KY7SzhhEy773rTY0tWmCnD5efknYv64g8pn3p0auHC5/Wp8sKjbiiW0rSBWc2Stb/VZ80dWU3v+LGn5/b7YUoZpVpxHRDgf8sHJpRt+iBTbwToLLMArV56UtWrYknbgx+bfTVEz+qkQDAKTqkzB8rn0BFqV/qutNuV8IVilaCKh6bPyb39L2XryGnLOPZ217PG3yHl58mGCl2hGkusk3RzkcWT8E9iJVPdjhJimuUVY8Ww6cW3DvdYIFtfDo94yPRh3vFlvBtOGXN4fcVWlsJpjzdbV7GxoWmP7x01LDtulj0VMhOIR44N7fWtJ/4u1eA46bZgVOHEEwc02UOjf4FGie+IvfaqRu3bJZ2wKT942H0r1CAvN+jtZlA1zY1wTa/rUXU1S7Xi1qC55ePTvNRLdJb1YoAvZ9qtW5aURKps9+ep5gX/Kk+F9JNqRdJQQ0bBycPx/Lyk95izhUSqgCVq/sjE0/sEZjxvTXmZbwcRYJlLZF29jS/XDA44kI6GFFXcp2iWX32wJGvFcyj/Ob1+EBhf3ti7qLJGcWacNRV7CoXVQWc13JpCe9MovMlpZc5kmlOs37z1O+ULlIIlKuUzKVd3c13O1858VQjdXdJqokEz8o2HlCruLafug6oLnS7VB9J4L5rVCFoHBP04b9vyKiYuQ35kcfixBV9d2u+rvO/Hv5Pcbcj+TgP35lxZ0PfOwsVLa5Id21ySXu15kWKwaoAGwn75e7W8OzC8QqtnfuV9iSU3t5w5JWxA3baNmZFJJ1QV5I+9J2SWwiq/p/pTTq8zKppzmlSo1aNTg5LFeVxNtZzWzDYCa0he/pqPuUtv02377v79M9z83AkZGQeHVBMDo/AGraaKB2lplLmouuks6wy8804uDk+aETShKrOyVSzG1xOmwjvG6VKd7RYYnx4dNSvuPidMrT1f0PROjqUnW6KKgP1qufopGEfzZLNp97R5e5kVWMBAx086zhVn2m19Lan5NpewZuq7MQguWy/6B0QelhdHzNR29xtJAyPcoBWP7+erXHjiTTa+iHf5LJxPY9GsyfSmM9tqATSX+DLdxLi23bplaBS0glWvOHfE6qcy9QmBoGo2X/RQm9cy84n1VCsehG898XdBA7XsQk55eXmqkWWsTqyJhfspaBdppsK/pzAZitdsUIawDPSNzu3Nt6fVBPPzFEGI8t2AoM9EWAjafJ10ijv88SiogSxqEjqBH0VDxLSdral+L+B95cVeZjUcffzkvgNnsaZSgFjiHW31bW4569XMRqThyOrvO8tGbduYL3LC3N7keY2vuDTVdwDumrcqWcNP9sH9YMTN/qAI+cKRuZ2glmeRqTgjemFqT7HNwLe6+niVX6/W/gKc9WpmI9KI9+r1V0eaDow6mY4YsTZ8WffQ6F9U6yLbIAKU6hsRs9MSBJEVqNfO0mSPTO6oBk88698iRxxcHV84MtOvyerIDBVBEASdZe2OLBOs0xFvjk+E3jwyur8MYe+sCo4+/CS/nEwQBEFnWaMwyamj+MvDU+dE9FXml3oyCKHLouISBEGkjTT2QKbsLK9OoC4Fl9G/ohBL7A48OOrnZze2O+tfFiMIgmBkWe/Q6tGpKW0DOuv+so7RExNBOLH/QOmHH+Mvg8qGpCTN+inSss++QN3r/Moy1Rx2ogyCdHfxZffnrVoc/3ROhK8wqr8s7PF8+ObLaqVzy9RHfYlaCPizwoXPlyxcYSpkk6G9zh1+u7l/KWirqHxDw90LW7xmw7ElK0zipCifVzRzcXfLmBtqdQNu0t267u7Vks3vKV07cH7Re9auRG9GKTmPohd+Y4q0UZ8uuePutNIJKnmQSC2Yj0fZoVu4eKnS86J92yyb73Zz735lFL7pwF65t91stR0059jKtcULlpkr9dxWjthAQQom37LOG3pbdX8WjZFlbQQ0Kf/J1HiwiifPO/zYgpAboPouu0rGRo5fFbDV6mpMUHDVrS6jU5xt/KZ7w1WuwsLOfxU27sCd4814FA/icYtiUD6vGH3NWsna31pnjj79b5kZ/L2z9YyMMvpWHhU8cMOdlkjhTlwppSTSDEwRLX3dbN/o8W6cDnfyvP2dBmIAZHrKg6N+jnJaa9pReNyZwSgz/iHrUbOgpWd9d0Btd5Z1lRsWY3YMnFOaj4W+Wl93c9MU7qsgl4lBX6tNz2IcJ384jsijmFnGA6L2oHDec2dEP3MnmMRpUDkEYREtmu4yin+gyveNxlhivdih0b+IrvCmQY9P9GXi8+bx70AtXHGGfc/cW3kkHjJpBCkVvfhKdCeRwY1b8dngM72aSS8XVVsmzlT/ffjReSF8y4cnzcjw/Mcn+4489nS96puchjVcV9fLU52PxTiu8baLw2dE4TLxhzFgXLONlF0WvWY9v9+025UFW29NWgB+DLKuQl9Iw1O2q/zyVMlNP9JZypN7PbrRYvks4eMtff8POrP3zVvvxj+mWHzs6MNPmlqnH8PSL3zpVzuSwvxElxtouojysQHEkZbCQwgnJozICCsN3JsmHmcDf25Wg7y8sp27dIIR4jr3lv5uXlpyV6SZaWhHeuZ3ST1mJNFwscT3OwunPS6OFlUr2/057A9cr7mUQfRBPtqlrex9dxPxaxCqYEhTWTzjQ6WA76Iwsqz7aNzxonZbX0uJJj+Ead2OMre+psTHMIX5Y+/xtEfuublT/jr5sI4fg6yrHdKY24g+6ScfnsRffuVXlGOJD9bHLdq2P5qhKlwdbsOwTN47IGxttenZ6FSO8cnMRKkQYgZFq9YA1P2zY6zKONLsd2mEWX6f9PIaPYanjI9HE98/MNfAe/PS0poizeBCBA2mtdbwZyETm/IhT2m73HF3nlaSxLev4dFNtxqvYNfL0azxj7f06QKz065gg3dMH6WBTAVDmqbo6tWeb0aWHnfVetE/HIz9POI3pIRVJ8p4EynjtnMH9MP9OfnNg16Pm192rWltiEaWmyk0bF+l0CFkz0+DvNzMTDZUfxYW9CuVaIgDt45seFnHiiF8pSsN+cpj7EwGwcb9r7EiUdPIxq1ewYZ0Pu6Y0PZjr78Z5WaTXNfLposCa0jUbNCNscpvt8HJZSSGM3sx3Mzp41v6GV9kDIsXTQcW5WOukcYcazboCCbv3r86VFnIkg2botDkxieWTuth/Nux5sf1TGIymdaqSgPZw/TiYyYpZvau8UljAySdZQb8Zfj8iddlhkUJxkfkg1BNEyAwzTXpLKs4z3Ze9U8BnVfjs0zQjZKha0Tx0BZWc8CVeoVWOHu+2HGJJivE2/HCWCiTVHryh7ZjwFc859mM1NeM6hC+nOpXJHXH/7KZX1SRYN0cOljLERqd3y782a8nTD3d1yoR5ft0UWC+lIULR3AptYZUzUDWEjuceixB4KxagUqJuXBZneHjrXeKTbpfEZR4UpgKpm4+pR3qjCzpL0/Pn2Tqywn1bUE2YeLwYwtCVA5BZ87q5m6s4D4CM2p+hDIjEJsObT/8aMXK0mbT7qnirl+dJkWBJazRaZWIYVY1wV27FN+9M6Bf1VOOL2jSYHraPRJSSwvG+bk2v2dGwKaRcQey+U9ODTIXp4qK7SqMz0yAru3V4v4x9csp0DyFOK3ony0t3bKNEiOqiOI1G/RFYPyzzAUbZJm0uU67cGLyYLdRny7nrVosgWOjC7992oAWFllWO6XinTu84gvAauubdPluktB823L9c6dMMMRUK9zggjZFL71WtnPXaT9q7Kyo+tSFtYZIXvVVZN2qRdKk4NXS+3a0C3NJ7alDR1BrM/q3dtGEy1aHTTJdn87cSWgDhShYm7eX1bfPBdJZJulsEfdfmm8R6jZkLigcpskjosPcEdSs3w/V1scXVlQu+4LRd/fMwbO2WD4Lfy1XP9V29xvt1p02ZA07tPe6HziqgqtuhaWO7jJhms1NUE3H/0RWSIbAXDbiehrEjmbkhLjZ3AWPMxH3yYRHw+ZYxOuTvC4fzgPy1J8nP/0iU1M+5poj2cFpLpXSJVRuE6NIpvxNf9+k+xWn00ws9oHnExeowyzvmCC8gRQQRatNpyfeT+3JegqkNPZApjwNW5eIYSMaiMLO7ZPu5UBfqgOVRZcrjb1aQ3mlsuS4HgImT1dbxCfuDD/nrsKAZw1amtG025UNKhU4PoP62ALZOlI47fH4VrkhDx3t/GSrl56MSAiVO+7OI5WTgc1uST4n6d0Lr3kljR3h0tw5SXe4lpPfPGgZi85wVgTlT8bfVmIwZ/on75op8R/FfSrYcJBI8fAN0ZcNuzuwkQtGPyf2H0j6Zqdk47tuRrIaNm/KmMPrK3ZuoAWbVW4uMlcFHh01q0F+3rkD+jVs36bohd+o7fKOCcIbSCGrYeGwRW5I09xEVF9ip/psj+JEkVu2JV2b07j/NaWfJHEh8Q6wLGOlOmvzDPl5yaOfCKvnrek+LzK1sLAuAfb0iGHy4Eus1bCx1FdVIFzQFbYSuBTH7C0f0effYILhXGEr44QJN/ZOygvjZWsTNjVEjfoSTsjn9AYtbcnCFflj77Gp7+a/ar2Ng0yC3JgWWEy87hFUNF/0UMhCJ9M5Fc15OrqzdIniGiMubNvGXEUsLHoVYfSXf1L/XfL62qCMcL6ocsm6uUFWPgihYonH6LEzCoABk/eFa0gDeaRx90+1kDjAz4zshc0W1Otp2FNFxdCqgr53hvd5d6VZteLEvlpNZRdlxZO5kD1Q8yK8KKpvgOlpufqp05qwfrvlGBCOt5z+s1STxXAQMYG/FTq3P2/V4ugTjOJ6xYtUNXQ2JkKFplX/dEBQ9Q/SCfNz0MoDZJQ39LbwiSWd+RTnVMVam8F0i/vHaJXNKA0tHkJ9Z0oe/luPWz06NWS2Js7GUOVpZOinqUgILutV9+Q7y3gfwPAqTi7sc5nx1+81uJsiHlnuSP7Cr5ooZ5O+gqro8KFvkuLftYjAgpZ0bUj9hNAuyiJJq8VbLJ/VetE/pDeWhy12aRdh+NJYpoEABUY5eowVpCQmxZ01EWru0ECYVVWt7ngRqmkNF0Se582bmdSFWM6pKtvwTYo7FMCSvNnoIZwMlv/W+V5ZwI9KWa2MZNvufsO7wjYNmEusEVzWK3rYnPLy8pQekJeidePNpUvqDz1rNuyWxpdd3CAv78RXBaWb3o++Mt47dxGnoVr72+jzFeiKBVclp7vDiLg6tgBC9fd3Gpj0tjjtyy+nBF3F6Nud7HIR8u2IoM8dRJwsioIayCIjzXGqqDiWmCbN1OoSKFjZ7s9jvvdSKYwv9x/I0vk3EWnD9m3q9vwhGujkvgNVbOW6jTQcGfdZ2lHm0bTiyJA3SfG3RJPnCbVjUt0tXPh8dGbazEeW0YIMDCCKr+vhjS1gjKLsbYgexdZnVMfSfDjdqhvQ7PU09WS3AxqoXr1NrCGpUgSZkWOCLSUEsrBCItemPb7nxgoYDBbOey5iIJspJhEXSiYSDsSOJYnlCerzEIiXfbQzCl9ohdmKvKiEIAiCzrKuBAFXXBo9cpVF3nGqqv4VPs8kkYqCnPzm1VWRHl0ikvy5ixJTULs+XUhUZMvzo/86/sEfKQciu9Ck+5VNr8i+9Qfkhj1raHZ9yqFefHf5J2k6myaXdKymikT0+lVE04HcZOnI5IrvZqPRIYh6Aq6GzQBy506oyTjJXUeXSZPd/craE4gTBEHQWdYdZJyx+iyGZY3atqkBbp00AnGCIAg6yyxGfGNTzS48y73t5mpNX/my60YgThAEYYHcsDUN+Sh5jYaV439S3cvfEfZFocNNP33j47QEQRCMLOt+TFnzVMLNx9xV7TpRSWlWLZ5y2j3cKE0QBJ1lNgFW2+UAixhQtivYUMMxpbjnmvE0Jj9nJrWtc/uWD0xgryMIIutQ37eO5N7YG3/FazaUvL426a5BREVNunxXPrVzFopas1O+rR6devDg4Yh7LiN6ypQ4uwmCILLYWdYlbljLZZ6Y/rPSD/54cs9XpWs3eZ1ECCFqdaP5oofyRw6r0TmHBC/z4UvmRWfHDUH8cxkzp9S3T6sTBMHIsi7Kom2bRgm+09Ie3/s6QxFV066XtyvY8M1bv/vmrXfT47tpOv4nzcfcdVbe88FfYnxQctOPip76l7RDTPlUYc1PWRMEQdBZZpkPlk/WxebNLP3w47Kdu45v/69Th46E+E5hwjun1zVna8rXRLOe38df2cz4h7JR8rJNHyT9ZhkcZMPLOqL8DTu0z9S3gQiCIM4i6vUnuoKgnzFyw8SM52V9RDOLPh6kH5CqbhERBEEwsqyNyMhnjCIie70LX0ASBFGP/AJFQBAEQRB0lgRBEARBZ0kQBEEQkUFuWIIgCIJgZEkQBEEQdJYEQRAEQWdJEARBEHXdWabxXpQgCIIgGFkSBEEQBJ0lQRAEQdRjkO6OIAiCqF9IYw8kI0uCIAiCoLMkCIIgCDpLgiAIgqCzJAiCIIiMgdywBEEQBMHIkiAIgiDoLAmCIAiCzpIgCIIg6rqzJDcsQRAEQWdJEARBEASdJUEQBEGkAnLDEgRBEPUL5IYlCIIgiMyjFjnL4uLizz77zDyDnzgZ/f5U79yfQKbK/+GHHyI15IWDkGJXK7wSS7WaaYgFVTbLoHJQaIJy3m0O78msg1sLVFyEYwqhJiGt6XYBq5VVc6qowOF9Nkhnqmgoqk+xo2eXdnUsiSUtZNoZEXXHWe7evfuxxx4zz2zYsKGgoCDoflzCDTh46aWXwhXIShm6KD8/SCAjhUeCK1as2Ldv36233vr++++nYWu0VOlZAXnWK7Ho1ZwwYUJ6YunWrZscrFmzZurUqbm5uZD54MGDn66EJIirV111FX6OHj1aK4uTd955586dO1F4HKTtMqXwmUVS1VKgFpdeeimqhur37dtXaoF2ueGGG1A1VY+MOL+U9OStBLSzWOfdvpa2Akfps8DmzZshVRxAVpkyFFbKQUivv7ui8yLt6qAuqFH0QkpGSStL1GVn6aJ3797t2rWTkZ2O0PUAl3ADfr788suwR9K9P0vAHBW6xg42AuYAt3VPICh9KzJwx5s6AMc9SLBLly55eXnr16/v0aNH27ZtzRskC8nFGlTqPVoqcwhpDfOtsEyLrc+KxMxIFwfeapq1k9twdf78+fiZ9P6gsTYcxpIlSxYtWgRniZ/9+/efV4kbb7wRz06cOHHVqlX4uW7dOqSA+5Hapk2b+vXrhyocOXIEz8LZmPU15WZJQwtjFt6VkpZfhvBWmmYTyKBeVchULUkzaMiP83PmzJGqLVu2bMqUKaiFtCkGB1dffbWoR6dOnawQ05WwFNLKy9RqS0/MQERjFLNSAuks+ojbfKI5OK8K7O0CZltIdlYVJB0plZZBZhfkqXfeeefLL7/E1TFjxrhdyat1Id3Zm3JQtxXFtjTHiiCD7Izmbs2R6E+pjrf55GfEmFsLaXZ/U0TIyKqsV0+8JfGKJanKWa1p1cv70+p0Vs9Ktd2rA2nsgUzZWV6dQM3UR8ZcAAKR119/HUMqRA8vvPDC7NmzMaqSASZG6xAx9Abixs9XEpCBJ6SPYTKM3aRJk8xkRck+/fRTGVwHpS/W/5e//CVsE86biqIp4z+OtQxIE1dxHidHjRqFA/zHMbK4+eabMT4tKioyawfXgsSRiDwupTLDtYULF+IGJCLKJJniwcWLF0sKKB7O6LMiMdyMEA0P3nfffRiBmtVE7RDiiHxQO9yAx3EzbtPC6/0os9wvQRsKICEgiuEO7ZEaHIZ6SuDgwYM6DStWHl6kY8eOclU86Nq1a5E4htL4KUHD8OHDN27cqDGEys0SKdKUwsMb4diUvCUljXpVnTRNqwlQQlQQl+DqoADarIgtJE3k6B3O48GBAwdq1WRkgJJou2g6qCyyQ6tBXGYLmloh1URIKnKTQgIic0tPUAuUSswN6gXhW5WyojFpdNTx4YcfdvuaitFsVrMLIDuICOcfeOAB2BpXqSQdkaSkI6qIhsaBjlQgW2kXqyu5Wud2OunOquRuykHdVhTb0hwzYA2xM0jH1AHrp6qZt/lQF6g36mVGkOEzAZLgiy++iNohwUcffRSJQOZy3qysZU9UT9ySBIkFdyJlsQPizCxDaram+jnTwpg/RbGtTocUROvQs+SG6O1ee5Adq2Exzh05ciSaHOoLtcMBFPrSSy/Fpa5du1522WUITXD8xhtvPP744zhAd7rtttvQ2LDOsFz5+fnoA5oabkbz4LwaPm/6gwcPhvWfMWMG4sUvvvhi5cqVOCP3QyM1ZRxDBaUMKAyu4jaoyKBBg1BC/McNt99+O3omsjArhfvbt2+/a9cuHEPptVTmPXfffTfKhpALuffq1QtRC+4sLCzUiZphw4b17NlTAik8K9WEs0FwgOxuueUWa0rn/vvvx/++fftCPpdccskTTzyBBFH4vXv3Su3wX8WCMsv9OTk5EEuQPAWIGnE/stYqbN26VeemxBfiQXdUK0GMmGDJzuyWKjdLpAjUWrdujXHb22+/LWoghYd7cKVkQdO0mkDkiUuQniiAqhbQoUMHDAWC5hgvvPBC8ycehF/RNoW4cAxX1KpVKySOqyNGjJBqSguaz957771yBjdA96DVCMS11Sw9gYeWYTsqO3bsWG+lTEClIR9RKrcWkqzqudxvdQEMC9BYED6OxQqbSqUPol64AWZ05syZ+Im6T548GVlDjbW93K4kPcXUOk3QVb+glNH9vd1WAKmamhPRzki7qw5YP4OaDw2hzbdp06ZU7d7QoUMx+oEcoEtyIAJBOS0xQiUsPbFKgjuDrBkAQ6FNAF9lGVJtTb3fsjBITX/Kewe3LtYN0dud07CpAcptHbgQu7AzgXHjxkEnoEDnn38+Tsr/NNJfv349vAgShGmWPiM4dOiQpoxj70t7RACiNNddd5235BgzwssifXPKy+29aohlUI/hm3kDquk+BT8hj+Bx0/vCRpumHFZGBoyw4OFi0UqFyHPVqlVwveiQOtNiTsOKp9y+fbs5aYMxZvfu3cXgwujIiBXlgQ1yy2CJFF0X9gIeFFUwnaJXSkH1cpvAdefikGBlVq9ejVGw9/UVnkLZzDNvvvkmDKXbLtAWVAE5PvLII0EtaJ5BdaxWc3OHIcPI/aOPPrr22muT6hVU2lSqpHC7AKwnIh5k6lUqUyZygGACfg5196bvdqWgPu6qX1DKQd1WEKQ54XbG0oEQlTCbT0ailqCiQydp9CAIXj2xVCtELGYTuIbU7ReuhdGfn3zySchoUm+I3u50lpkHbNOePXsGDBggIyCoFwyx2FbvSCcK+vTpA61CgjDfpuahq2jKOvlmdS0oBx7EALZ58+bexDEchhdBgUMWv+kEJgqwZcsW6C5GZ16DbtlucUvwRuZ8KSy4vP/AQadOnTA8x/jRGneHv00JkSeqjJ4AC2K+dDRx/fXX//rXv5awFVXG4F2GtBi8w3ihvTAQxhAVlbUiLa9IN2/eLAErcjTDXK+UpDw7duxIowmktO+88w480GuvvTZq1Chv1TAYl6rJ64A77rjD9VVSJFQBOUbXarPVXAcsrwnR3CiAyC28UghWVKnS6wKo3bRp05YuXepVKuvx3bt3wwgiYgh6d5O0KwWpX0jKQd1WEKQ54bB0IKlKCCAQUz7Vav2S6kmIWFSwELJrSJNaGPwUdYJqIRdvp9MboIEptXsWT8PKS9Fqem05PwE53rZtW3QjPmnSpGeeeebJJ58Uxe3Xrx/aGK3ywAMPuEZBFGvx4sVJvQ7ShOmXIc+jjz6q58eOHaspm+fdGw4ePDhz5kxvQIBYCmNbWUyBGy6++GIplTlbu2LFCjgVVAd2ECNrFAY62rJlSyTrrZFOpkHdZWIT0Z5K4IILLkCp8CwEBfnAUSHxSy65RIaKYknx1KBBg4ImhbzyNIFyonssXLhQZy/NYTKiT1RhyJAhnTt3RmglY1LYuyVLlkiy6DZeeboibdeuHey1/tTC49iS0vLlyzH8RzDqei+rCUJUq0WLFiJPBBOxxCpZc7oSVVu2bBnsr1RNiuqd5NR2GT58eMQXEKrVOJAqWHoCoW3atGngwIFRKiXygUpbKhSxC0jF4SQmTJiAYxhfS6lcbxFLLFSGJCEZGFBY6hEjRmjXs7pSyFs9S/1CUg7qtroUwNKciA1h6oD1MyQ0lOZDYSAo8RYYHVrTjPqGb/z48TK/mhRaWelEXj2JaM3MF6U4r2VWQxquybAwyE5/Ihdvp4O00Vgq86Tt7hXUWUZ5ivh9AuVE9SON1gkBBh/oilVJAVYYieAA1mHu3LlsIKLqSlW3AR+gPQUhV0FBQS0sJFpQ+nX1YXkCaTxVfUVKw5GR7o6ICgQriERlZDp9+nQKhCDCIROMEnKNGzcuZHUCYaG4uLjGtl1ERI5EMLVkGpYgCIIgaiHIDUsQBEEQdJaEDxYxUA3wskZhMLGIMavIUlszCCpklPoK6UmmiEskHUVm2zSzRMquEFKqXQ1wL1dffaOrR0rFqP2csdF5g+ksiai9NG2S2OgQfhA5DiLbzGxJLA5ML4QYU/O1+EtDoFSZurCwxhBE5pm0vsLtgmeD9nGnCshq0qRJysfr3RIane3WTTxiW6SqFRFZc83aXXXVVbIDpPp6WQaJo9PrDhZRcxCvjTZo2uS0NYYoFoDOMs1hZlLSQnfg6f1pRk5yMmnK3htiARyGUWhgzUcs4sRYJZmnGgUl/7TYUIPoIr31dctgYenSpa7dNNNx6WpjPnrYEMpHvcErRr2qtRNiTCvfoBbX8xZVpluAcDrW2JlfC4modRb1rp4McUVePuHCwkLhjw1RpHBmWhPjxo1TIoiRI0eaNLCSgrLdmhpiUgSHh32WHFxmXZOtV9I3+ULdThGdNdes3XPPPScbPZV2NajdLd7dEN22qJjNZg3X8KDvtJjScE2QO8Hj5TqWYuhPlacaIm1Q5dp1TUEUSlhT+KY+eMmHvRK2EgzK2muWax7ZzQ3rEgx6iRZN0kKFMF7iWVl4Zv5EsmbkpBSOLh1iOLOiBmEWGWYUGlireBZxIsaGQuZ56aWXorRK/mnRJ8aC6SIt1kdvGVw8/vjjGKqb2m/JzaWrdelhLbm5ZZYbYODMTdlIHGKU+1FU6ZMojIQvZr4LFixQslZrlKr5WlSZkAyqAA8kQ4qkdKxygxB9xSJQZXqpdy2qUq9r9/IJ41lt7iBFCmemNYEEzc+i5ebmIhEc4EEJ4CTTjRs3auIWRbC3P8p5qy28zLoiWPn4DG5G9xHhWK0gMNl33b5vNZNZO4yNZD8iegQ6I9KxpOc2R1AvM+daTCpmjaSDGKel1la+pkswGWhdExRLkMmpPgRxHUsxrJ86G2QyY0uyrukL4lzF4+gpYuKmT5+OR3CARyx9UDZgQLqqpR4qYavjuKZSgJ/SxCtXrozyOZdahNqz3Wf58uWyJwk9p3PnzrIBaNOmTbpNB+f79OmzLQEcoDH0Wd3DtHr1anlcfiJBPGjuBpMq4yfulPunTZuGpJCCJoWfVtbmxjLrTs0C/5EUDoYOHWpVzSqeil12OOEpYZhEalBNLS3Om4WUwuMG60DSR2klKSmMWwbvJk5LPiFyE+C8FgmXXLlZZZYm0xvM7VwoIe5HxXEbCo/scCzS1nzlpLufz81Xm0klI7KVYuAAWVhKpcB53CaSd3XD1TrdZopLOJas8biwtMsWdXf7mtuacoNWLUiRpLIos2QR3oNw5/hKaHZIB3U0xWJqCNJERaQYpqq71bTaAge4hIKJfPQGU+GlUm4rWJv8Qvq+t3a4R65qc1vSc5sjqJeZPcIsc5DN0S4gJ618zdJKBxEi2aQmyLpfbzMV2/ypCaqayQ1uF9aGtqy9Stg8wP2uPogEcI9ZQa/CmzVyTaV2SSm5WICz5W6yfp+lSzBoES3GKpmZlLRQoIyXwmeBx5MSYJrMhFGYFRXWneZwMogG1iqeBQzHEC/KtyNMShEvA62XLhLpQyA4UNbHiESLY8eOxUhWeUqTyg2VFWoeKZgrN6vMIdyYgwYN2rJlC4alqDKG7Rii4sCdGPGyLIUzppqSUTpWHAfRsa5atQoFmDNnDppP5gO9VJmqdRYxpkZ7iKV69OgRJLoofMJeRVIaUhigYcOGhXODoYQWfyFKOHHixClTplhULKohiFpQdzxoUQS71bTaAm2HMiPCc5l1LQZabyuk1Pet2iGsgd5KglIvV3pWcwT1MhOu8rutr11ASMzNN4WSr0DKiYhqx44dEL6XTtnUB+t+r6GIArcLh5gClbApalcfcIy2tiroVXhLw72dVBRSZj6yheiu1r2z9BIMmgghLcT90lv69u2LNsBPJcCUDizkXuYrE4sOMSmzosIiw4xCA2sVL3YmcaJw9i9btgyd0PQW0ekTw8kwQwAZPvfcc/q1JlduFix+TlduVplDuDFhZF9++WVUHLfJu43oPSd6e0WhY12yZAkGDevWrYOZkAUI4VSZXurdqpOgBilSRBrSIMDJ9e/ff+nSpUELEYMogoMYhhUhJLQWA23SVkja9y2460Qs6bnNEdTL3NdpQsUcZHO0HSETSCao1VwG2nATFJ2xVpgpv/rqqyBTEN6Fk8LVB1Qfbf3GG29cf/31ZhO4Cm/WKBbMG4zRwKRJk5SLP1tQi7hhTb5BIRh0x31BpIVCexirpMnQn7hNxmhoV6RsEpYG0SEGMSsqLDLMKDSwVvEs4kQI0+RsFN1avHhxUgZaK31NwSxDTk4S3omePXvecccdMhK05IaObdGQWvycLiOlVWaXG9MaxV9xxRVi6XQxRSwCea+br8U46lWqIDpWNIQqlYQL4VSZXupdl6rUDeLT4xN2aUgtZloTQ4YMsZwKRkJbt26Fq0Cm8LjCdivzEAKXItgVnckwrAghobUYaJO2QtK+b9UOLgGDvBDpySfQzeYI6mVBVMwiZNfmmO0IVwH/YeZrvgE1GWih4eEmSBbcuVzHStQsP9EQ8rEUHW8pfbFlaqQLp7Hy2dUH1HratGlWfOJVeLNG0L0g3uDevXtDpFJmpDBmzBj91lidemdZN7hh06ZDrOdkmPWBHrYGqDLrPCBDfZUo77HqGxVzHUOUdrQ6ToipNJcy8J0lUTdBelgiCnr16iXRGBQm7ddvRC0B4u/3339fvsxcdXz22WejR4+eMWNG1smB3LAEQRAEkQRk8CEIgiCIbHOWJieIC5f04ezSQJgwuYGCriqEF0MLH/09vMinmvg/U20pl87DusdltrSe0kcyxY+aKjJIAZoR6ks3keqTTFDfqTofac0zD6fdENXNAXu2KpiqIY2Yr/uUVZjaY5DruLOcMGHC6NGjhfvRZPpQuCymBQUFUWgglDvUzCuzhZcdV0H8hxZnqVA+anXkWbeQLlBZ3DwpgSD+z/R8Rqo0sMha2WWl8LNnz7bucQk2LflIxZF7pvhRU0UGKU+lalUk1LXkU62SCeo70WlRg5h4ozAPVx8icpBa5Ku1BFGMQBRe2VQNaVIIK5NyHqmeW4WJaJDpLKsamR08eHDdunXz5s1btWrVxIkTzWGLOQA0GS/btWvXu3dvTcEcJJo0qiZ3aMygXvQ+aBbJJXTVoZOkryVRbkYzd5dSUo5N5kl51ixkCBnjyJEjIZ9xCQj/p5mRmUV4jGJReipVpkXnGEJ2essttwg/pwCFl10B5vDTIth0hSxCQ+7Kj2oW1SKYtejEgkgpYw7Pp7eVTS0KGn0npfx15RNO7RtCZOqVj0om5NkQxmBv0yuJq9l3TCpXabUQGuQooUNS5mGr4t7O6KUbtSht3aQs/bc6lBTeIl91dcxVqhCGXksNwsljXb3SiiRlOU5K+BxkSGPBDMAhUxem5D/66KMePXqorCxyXb1TlSo6ofFZQXZzw3bq1ElILNEA5s5fGbZoBPDmm29CCZSMVIZILvmkSeFocYfGEiwVscTmWZeQVhXaYj5csWKFbBzGkBlS1vSR++LFi61Rtns1luAQUc5GK6DBs1pI4diU8yYZY9DEiJlRbm4uhpOoCNRUyFfNgaHJH4tHFi5ciAMELkVFRUqVqZycSclO2yYgMsHNkydPvv766y2qWJNg02WIVaFZRJ0WT2bMYIJFHb2klBaRL5INZ4gVAkwMgZWQIUiwQt3p0u0Gycek9rVYQ4OITEPko6mZz0ZkDDab3uQLVRLXbdu2STNZVK4Cl1bUq9VBSMo8bMZJqnIuka9FN2pR2pqpWTJ0TYepRS7bajg7NLLwMvS6auCSx4ZwyVoEqqaliq4kUQxpEAOwZRbceolhdE2o2Wdnz56tglKDHJ3QOGtQq3bzoA8IxWKfPn2EllD37ihrqMU3KLt5XPJJi8LRong1uRYtUsog5kPdWSi8l0r5uGjRItlOFDMYQb1XXeZJ3YoUO5P40UvGaPFkyp1uRlIRi4jV5Y+VM0OHDnWpJoUo0pWAC6U5FTEGUbaGMMRKytaWLIsn03w8iIXVIvKNJWOItchL3apZVK4u3W4QGWwQ12sIkWmIfEwNkWejMwab5LeW7lksr5Y0VDktWtEgnU+PedglKfUS+Qa1gpWaK0PLdFhaZHW6pOzQQQy9rhq45LEhXLKuQVMdjq4kUQypxfhqNr1lFoKYul2WbMtimDYtOqFxFu2zrF3TsBDr4MGDhdlrwYIF3tkeL9+gkk/u3btXyCfxrBAVdk0gJF+XlFKAsfYrr7yinCYImxCKYTAlEZWQ8WPk5U3TezUpXa1CyBjfeecdi4wxSkbI5Y477sB/q9br16+HcCAi5Y9FLohIXAYyJcyzJOACMpkxYwZGkS+//PK1114bRNkawhDrBXSgV69eGJ8KWYn5uNDWuAVzSf68DLGqHhZ5qQuXytXl2AyXDzQQo28Z12s7KpGpeSmifOTZ6IzBCpcv1KI6CpKGVeVwnXcxduxYBO76wjWEeViaz22mmEM3qkWyUksqQ1eLrKqFs0MrQy8CJuudnKUGluVxf1paEcRynJ6SBBlShIAynWAxALtmIalhdOH2vhBx8Z1lZjBp0iSdu9+zZ4+0gSgQ9Ebu2bFjh8s36JJPWhSOQTkGkVK6zIcwQ3BCL7zwghBQbdmyBc5m5MiRXko271Xx/SbzZBC8ZIxBM+9WRqgIBnQxZ6WixR8LAcKQYTi5cuVKb8pJyU5FJhh+yhiiZ8+eQZStIQyxQWscYgZPJtKRRkcuffv2jVIwt5Ut9bDIS10kpXKNQgYbRBpsXUpJPtEZg82mD+cLTSqNEK0OQarMw14KWYtuNKhSXhmapsPSIivrpGzDQQy9rhq45LHhXLJBBKpVURLXkAYxAAfRSqfK1htRXFmNWsQNi2EXuiKaGYMdNI9wfg4bNgwGHSMpDIjMDwhYfIMu+aRF4Qj7K9yhyiciXIvLli3zklK6zIfIC+O7m266Sb6xJVST27dvb9mypRBgWm923atLlizB+M5knrSgBKcopJIxQlmffvppeI6gV8hmRignBIheIR0GmqoisvhjAQzeYZVk/YjSsYZIAHbBLQmq061bt0WLFsV8lK1qNIMYYr2weDWRzpQpUyRZuM+kLKwuXPWwyEtjDomuReXqLj4MKoZK0mIrtUIu81JK8onOGKyw+EJd3XOlEUXZzFAmSEVDmIejNFPMoRsNqpSonClDy3RYWhQ7k3w1SHXNCRuLoTdIDYLIY2M+Llm4c4tAVY1AUiUJErvXkAYxAFtmwdsWXrZe12JEEVdWI+sZfMJ9SfYC49ArrriCVGE1BrgQLzV5fQBsvVDG1zatyyaWbZqvrEIajiy7GXwQL2IAJd9Mr0sQMkZ6ypqE9cKmXkGoXCUOoNYRRN2MLAmCIAiiukFuWIIgCIKgs0wL4eyLGWEBjfl4FCVll68yJfLYIHLajNN1BnHbWuWPQr9p0YhElHCqDRHETJsGLHbflIRW3dS+JnuwyWqUkX4RwjiaVL3T7hfRi+f+TMoGlYYueVOoAZhdSem6gsiiU2qspNnFapxH92wJmc4yDC4f44YNG2TVq6U6XjrEtOEyNEq+LmFpdPLYEHLapHSdqfKaWty2Cqv8Ueg3582bN2nSJO0bESWcakNY9wdRm0aBVCoNJkzZA/d0AqNHj/ayI4Xbr6RthHo9XYl27drJVhyrjdJwYCbjaBQrljYrbHoPokgm4xV+omnQX2644QYps8hh8eLFoxOQlZzap6LrksWSmkGgJOFjGu1ZaI5Ro0Z99dVXVnOLNqbRWOHZRe/ImUL1CTlt1LqPP0NX2rdvr0u3zZ9ocvT83NxcGd3gAKYqLy9v3759ul5Odjh06tQJV3Hs3mBmhEsdO3YUPkYxQ7gT2RUVFfXu3Rt5WWVw6RAlWclIN71JOVEMeUquxhJbd+WnllDNn5bQzBfpyCMxgzxW7sdJ8ynz/hDZLl26tEePHpYozHS0glIXkbMlfBxAPmb5YwYvLh4xN1YLZIdcSHPg0qZNmx5//PFXXnnF+sasNooUQ6Rnaoi2hRTJW7woHkhzMdUsNwGVg5m4VAoHSq9qBTSmDJG4WaT+/fvrAsi+ffvK/aZuq8w1HWlcpLNz506zjaz+Yg4+5GDYsGFo9549e2obWRroKqQXCxcuRI6SrJAprlu3zm0g+Rmk3loA7S9aXysdq4tpowRVGT4P1TS3z2/ZsuWyyy5bvXr11q1b8aDcAL8yZ84cnMEN8CJDhw7VPuW1P65dcllSVYZiT7yqpdU3f0qm0l/wIH6+/PLLgwYNStoW4imHDx+uq7Gs9bRBjWWqqGqyVYykHVm7m6iNDG60zFYHVO3Cf6211yAnFXJmUROrYauPG9ZkI4Rmu6ytFtmjRasYC+DzNMktFUJBuWTJEmFEVNpDZeCUvKwiWRSmSFYKtnLlSjO8CCG0dIk933zzTbOEWseHH34Yj2jdTfJYFM9ldIzCG5mUrtOqIAqMq9I0qIJsLUAuuF+ILq0QLYhwNYhrVLFx40bYdPQfpOwWTwktgwgnUaq1a9eGFM8E7nypEt5c4LBRHjFAwtiAMmNAbSWulbJiIJcdV5hTIoa8JlXpKwnoZIYQqGobBdEaWzOx8BZiAaWNQphLw+MP2N+xY8fKMVpKjK8lOpfU11JvAVoKmiANjfuV6NVlLtXQX/ujRR6ruPjiiy2HATFiiIA7xWrv3bsXckAiGKnIGAgHaGiT8tTkOPXaJS9Laghlrtm/Yg4Rq+gG+gtCKGgjEkSLoH3DJ04LCwvhKeFTzXXL2tzyrLexLBU1NdksRtKOHAumI7ZSFqeOn7iqJiI9KlpGljHLYmIoMXLkyFtuuQW2CXZKf4Z8pUgCEQzPb7vtNrTTlClToEP5+fk4vv3229Fp5YacnByzL6EPI1mMK9F5MJCRzScy2IGSoSPJ9zSsIvXr1w/th/Rff/31WIKDCgf4ifGgtesc91vFQCI4P3369IglRDGsupvlhM+bMWMGRrJffPEFBIXzb7zxhnQJoe/xAg8OHDgQ9+s2iYkTJ7799ttI+ciRIzivFZSrMtoFUHfpe7gBQ79du3ZJtGSljzH7smXLJDVvAYIqC1Gg86OrX3LJJZC5FgA/n3jiCSH6grETXpUOHTosWrRIJ8kHDx58xx13oAe6xXPjAy+sXK699lo4GOFOQssifZgexCLnn39+SN3VbmpDiE5KbGft4IT6ifPYsWMHtMgbjiAdJZfQdGD95b2UcAuEdJCnn3764MGDsGiQFfRcz8P7igZCB1ALmDlTIUWMXiBoc8MdS3SxBB0dBtNQKpFSiHqjoRE3oKZSfTOdoG08eKRVq1aoNW4bMWKEWWWrrS1/A/uLpoQorIlWtKnZ9++9915IOJYgDNLQxzVE5iMyYwS1R+HhxqxZSu0RF1xwAWqKn2a3lTZFykgf7QUlQb2gw+F6C/czfvx4VGfAgAHaIjrHDmlDnt7GUri92CpG0o4cS1A6IAs0K8Y6coD2tVL+6quvRHSo+/z580UgpgS0XyQVMt9Z2iMmZSMUc5mUnNCiVYzC5ylYtWoVwnwMf2AsrH5lcYpaRTKBM7B6sobCsndBxYhewvC6W4yO0Xkjo9N16iQexpKQFVyIhGWwp8ja25+TEq56KwvpwRUhF3RUyAQmWy9ZhJZewkl4Sg2Fw4unlmJwJby5wFz++te/hl2GbOEM4JOQBbQiSuJeilGX2g0uZEwCzzzzjNc/iQnbmcC4ceNkdt2dYw9RElgu2Lvly5fD3pkqbVGVeplmvejTp48ZekIsEuCaorNIfUPUG+qEUR3ugYK5TRBiIlzyWC+2bdum269RVCgVPGXSmfmgtxjhnTGEMld7BGwFDlwi1ojEgSamTZsmbgljOLO5BWKIvI1lTq5YmhyRK9hrJ02pWimb9tNruKILmc7yDKDBtm/fLsNA9DcvOaHFE2vRKkanzUTngdtABIBeGvJW3yqSewNG5Rj4S4c3EURoGb2Eki/qboYFpuUyGR2j80amStfZu3dvlARRjoy4J0+ejA6JIa13kjMixai7iABi1N4eM9Y0WoSWXsJJROfi0pIWLwgubSZ0AxoCa4sujSG8EF5HSTwpxagOGsRXmTpgEZnu2bMHeUmpvFY+CnsnHocRNyc2g5hLkyokfPbUqVOl7pD2ggULYNcs0VmkviGpQZ02JSBvfIOYSzVGRAgeCyCP9QL3y9siFBUiVU8JmaNdZIoPB1ECl6RyDqHMVafVt29fiC6IiDUlQCdjie/aomWDWK+9jaVXk2pyeh3ZTRnVVNF5DVdKypx907DVR0pgshE+8cQTaF2LnNDlibVoFZPyeSpg/sTaYoCGDgM7JXyM4UUS92y+lkBXRzoud2IQoWX0EsKLT5gwwaIVVd5Ii9ExOm9kLJSuEyouFZRJY7GtsGgDBw6UnzA6kEaPHj3kuytWh49IMWoBPdkU4KBBg1555RWdzTYJLYMIJyFSYbi1ihdzGF+9cGkzEfdgfCDz3kOGDBHmWzdxF0kpRoPgEplqOmga01kqJyfaKJy9Uxvl5ptvliUtMYcz2WQuFWrQIIY5GDgI54YbbsDAf/z48ZKjJTpYSZPUN0hKAigVhCyBdRBzKSLjW2+9Fb1V4zOXPDbozbToMMaFKDCMOI5RbPQICFYWzeLA7FNR7JJXziE00dq/4L1QhSAiVnMFDQbfuA1DmaQ8f7BIKJUILUpjKZJqcnod2U0ZpgajFrOQaVPR1gZkMYNPbaBVhHdBA1vvz+s8oWUWoT4zvhLE2QUCX/hsdECvnTy7SMORNWKLpo3PPvts9OjR8gUDonaiPjO+EsTZBQLlX/7ylzLTIKvVshrkhiUIgiCIJCCDD0EQBEFkm7MUwsOQ/dFp8xN6uR9lJ28aqdUATWKmGFwzlWYGy1OVpEzGSCsd2ZQtXKDWNu1YJUdoTZJbelFFjtaQ3iFcoNbNVn3NZ1VQXoJivUfpf70EpN4eVHVWUoKgswzDmjVrrrrqKuHMDCKHdHlTI8LifoQV6Nu37+zZs5HdpZdemqrtTrsY0RHEO5qUQDIEFuNMSmSwaVN9ZjApizHSTEd5fNAukyZNUrZMoS9YvHixcITif9CC+2qFcpCmzdGKYstmRGiFkEOZV6dPn45eA32WXQo4g3vwE/XVrSMWe+q8efNE/y01056C+5W61iUgxVXpQYAwQMUyx0pKELUNtWiBD3r4xIkTV61aJfu90OVgHYQKwCTJtAbOFnOsRRwa9KB4O+GtiFVuW5ZV7GmwJno5PLt27SpJWctizRvcEiq1Jkw8qiO70ExCVItAMihrN2VJxBWCst2az4ozthh3g6psScnK10xKS2g2Oh6Up1xZxRyy3yDGSHGZyis7btw4cxEsFAl+VDhCkQiMuPAWeXOJ+RiGRT4oYbiOmU1g8oWavL5ejtZwHmMR46ZNm2bOnCmkDQ8++CAGDbp9EMm2bNlSVhtiWIBm7dChQ+vWreEO8SCcWc+ePV32VCT4zDPPBG2vlPVr5g3WynNcFfYf6UELFy6E/JOykhJEbUB2c8PK5nSzZ0o/tMg21dC4zLGjRo0yqR0tdk0LiCZhQPEsDA0Mq3jKNFgTgzg8xQEjKWRkzkfpDe6zMpAXok4Z3eO/RYhqEkgGZe1NWRJByGUKQYlG9VkVLIQjUYX7rJU4pIRnIRNYRsQ3OED4IrNwVlJmCc3AJUhWFnNpEGMkkj18+LDJwI56mROG8Ar33nuv+BX8R4KmpwynSzWpfS3WX1c5tYIWX6jFPxxLhcdYABniPPQQ/4cPH44H8V84bGOJ/Z1a/S+++CI/P3/v3r1KGCZfm7HYU1Gk9evXI8GcnBw31Eb6KI/lSs2ZbZTZpLVCD5IChLOSEkQWo7zWYHkC1kkYkT59+sgxDvBzeSXmzp2LkxiPd+7cGQfjx4+HTdR0cB73b0tAHsQNODYTxz24E+dxgzyLG3ASx/IsrmLwLudxm5QBN+AAuQflIklNmzZNKExxEnZWM9Ub3GeR5urVq3EJ/6W0+C8SwCNIBMeSgpQzKOukKWthtF76rOQCyK5/qan5rJu4Ssk8ANykNBc8i1aTedQQWeG8Zo1jV0mQTixBOCIlUUXCz/EJSHncpjehFZRKWZniDNLXtjMvucppNgGAZ1EAkbCWXEQRkou3V2ozmXV3+8vcBCxBmQnqsSh/UQJoC9FqzSuW2MIvSemD4yuBmqrmWKhVJoUggvD7BFJ6pDbS3ekwFgNeL9mmwOUSNAllvOya1hsgGRFjuI0R9IgRI2KpsyaGcHgKDT/CQQzerU9jyg3us8rbKf8FXkLU8KwjpmxBRYQCI2pUIhXrWW++KiVLXFZSZi4XXHAB3IOkFiSrKMyl8FJwSBARntWoFAUT8jyZZldSN21660PT4XSpJsGpecmrnFLBEL7QoKoF0agKunfvLmWWd5+IVlGjDh06mJEiwnpzLjocUGMov35/wwrW4UchPYtQzSQgFSIhM3dhtgpnJSWI7EUtcpbXX3/9r3/9a5ntRAebPXt2LJhsMymXYFJ2TVhw+EX93KCwxKXKmhiSi/DoL1u2rF+/fjI/nrSEMIhK1Gm+1XMJUcOzjpiyFwgaYLVhcHWy3Xo2Cm1pUFIm4F1mzpyJMQpaNkhWUZhLkQ7K0LNnT4ta2gQuPfzww/pZ+YkTJ5qsrSnRpZqsvyFMsCF8odGrZuKWW255+umnIUz5uAdqLZ+g0hsw4OjSpYt6Ssh8wYIFKBg6FCJX7xKBvn37yuLhHTt2yIcJzZcUsQSh2pw5c7yLdOBr4WLlNQEAycsXKsJZSQkie1GLuGFh8latWoWeNmTIkM6dOz/yyCPyRsRLtpmUSzCEXVMAc6/0iXCBkkiqrIkhuQhjZAgPpPssiqFEneZtFiGqEkgGZR0x5ZhBNKpnxGhOmDABuaAVYAetZ5MKNiQp12GglSGc4cOHe2VlUemG6w88E6TkXemKeBFlhtDWr1+PodVzzz1nWvBwulRrZZPJ+quUvDGHCdblC7U4SJOyBFtsjvJWcsmSJRKGQnSmQODP5iegcSGGMsOGDUOYi/oGdRCZGEDTCLWy9x4J2YUd18KjCUgkPXfuXHlV6WUlrQ3MlARRRZDBpxYBTgt+GpYdFv+jjz6KOJ9G1BjI+ksQdQPkhs1uwFPOnj1bAix5/0QQBEEwsiQIgiCILAC5YQmCIAiCzpIgCIIg6CwJgiAIgs6SIAiCIDKGLQmk9EjKq2G5tIcgCIJgZEkQBEEQBJ0lQRAEQdBZEgRBEMTZdJZpvBclCIIgCEaWBEEQBEFnSRAEQRD1GCRSJwiCIOoX0tgDyciSIAiCIOgsCYIgCKJq4DQsQRBEFuNUwcGDg+7LObdZLMd3uezEya8OtP6P/9Po4v9HThx77t+Ln/33nHOanr6/HH8V32osLy45tf/gt154tOTFlWUf7Y41TDGgKi8v/+b4t56dodmdgZOnjv/uD8ff/bBs+6cn/3vvyf0HkV3sxEnkgvI3aNe6UccLGn/vu02+36Xx1ZfnNG0Sv9SoIZ0lQRAEUVWc3Pf18c1/CLmhwbfyG7Zrfdp7bv/0+MatIfc3vKAd/hcvebW8sCi9IpnZCY7/btuxf33tm/946+SX+wIf++Tz429vif3Lqzhsu/WlBm1bf/P6fzbu/t0m13TNuNDS+DBzytOwVydABSUIgqgNaNzt0na7VjXqdKH3av7f/e35hzbnNM/VMy0em9Jy/sPem5vccHWb915s/+W6Jj/o1v7Tlel5qWY/7W9mV7r2dwcH/M2BnncV//Ovwzyl6ZZatWjQ/ryyD3aUHy878en/1BI5850lQRBEdgOesunNN3givPbnNf/ff2udLD9a/M2aTe7NuROGtfntvzTpcWWFb2jbqtmgfmkUpmnv71dkdLzsz/c8+HX/0d+seju1FH7cs+H5bWKNGuac06RBq/zaIuTa2fZln31xqqg43mB5uY07XsTOUEWUfvhxoue0adS2DaVBEHUPZe9s83idG6+zzhz/3bZDg+47ue9r63yLf/pF3n1323YjYHa3UccLcvLzYqdOxX/kJN58Nmhwav/Bk3v3q7M88dmegwP/5sR//bfn+ZycJj2/1+Tqyxt+p0ODls3LT5w8+cWfjm/+Q+mG9yqK3atH/P+Pepz8/E8Nv/NtOks/itdsKJw489Qnp6P1Bp3b5z85NffG3vJzb86V7lMdyv+Y9qWvJ0wtnf+qmV2zsbfn3f3TIL9i3S84b9vypl0v10tNhvZqs2w+Dg4/tqB48jxJtt3W18p2f/51tyFnNECfLrnj7swbfKtVO0nQLbncf+6Afg1yzxUvaCUYV7LxPzlv3kw5LnrptaMPP6nyxOPt1i2jZSGIuoSTn+89/vuP3PPnDPih+bPoH5cc+fk/Wvc0aN2y1cv/1PSH/6+T6Cn1Xmd4urxz2+18w7Pu5sTJI5PnFD21tNHlnU7s/nJ/1/9Vfuwb+9kmjRHpnnvXwIYXeVzg8Xe2Hbxt4qmCg+cMjBc755ymjb77F7VHyLWLGxYB5eGb7jU9JYCfOIlLNSMRZAf3duCGO08VH0v12Wa3VMxaHH/xrXhwXHxMPCXQ/JGJ4t5sBVu//ciQhwoXL42Yhdx/6IGZUW6Gp8TNpjzxOC0LQdQxeKdVEcA17f8D/XVo2BTXUzbpcWXbP77i8ZQwYu9+6F3g07j7Zf4Vqo0atnjiwXafriwvO3Gg512up2zU6cK2H73a/KHRXk8ZL8y13dq+szT/lxMaXti+Fgq5dr2zLNmwKY1L1eQyj61cm+pTCH8RummBSza+e3qI1+sHYfH0nGdTygjxa5TRQ8nLazRcRripZSMIok45y1UbPb6nx5UNvhV/4Ve2bef+7reXLFtp3XDuX/2kzXsvNmx/XkCa/heNzX7SO6Qk8IgHbx53av8h63zDDm3bbHnJv5/EvO07HZpPG1c7hVy7pmGPf1Axk9Bs2j2tfjklPhqaPqdkxvPmJUWL5bMaX3qxN530LuXOndCs3w9L1v5WwsFv3npXZ0dD7q8YbXX6TsXJcXceSURvJUtfb3xdd73TndQ9b9vyU0VFh677a/HNcH7hb2el5IWz5yNsjfvLLdus+5FghWvMy9UAVw5aPjerWc/4i4SSze+ZcWdOfnOd3yYIIhuBSK507e88Xu2n/fH/2L++/ud7HvTYkycezJt4V5gDfuO33vNN+1zjKcPxspwmjcXFlq57x73hW//6qwYt8rJazrXLWZ7c8VlFM9/0Iz0QZ6mXTs8GXHqxvNXzTBSkdanRhd+WS8WxeZFkV3n/GYO1Af2OxB6KJSY8T+05UOEsb7vZo3OJZxHwyWtOWdAUAil5s0E3qgv0JnjGvEHn9jIHe3JvxUysuExzFFK+fFb4mIAgiNqME9s/iW/tPxM5uc3O+cteRU+8cORnv7LNQttW33r2EXkvGASEhmUf7PBeOjT057ETJ87wlCdPITXZjnJ09iKPqez8HV0iW0uQxgbI2uUs9Y1ag7w868B92YYQsGznLm9slN4lhJL6Py6ajhcmmfqovNN0Ng1yz0UcKbGpOCq4w5CQ0R0EBEFKXrygYnkOqmDdgEjRGg00G3u7lOTow082vbqbWQzxlFECaIIgajNK173rnsxp2uTQ3b/wOLxGDdu+u6zhdzokMW4rfxtopT/53D3Z8Ntt49bsiz/FWQUcnHNbnzog5yxm8BE3AFfkur30LiHCM5e56hRroI5W3p9XfoazwYNmbNp8jH+u4+sJU8sPHtZBgE7khtdXQ8Zm19uTIUeGxCPaFstnqbPMu/unJQtXwGfj7+ubR7bb+pouMsJtcn/usJ/Q3BBE9sLr2E4dOoI/3/D8VMlr/xk+ARtP8/9uTqkMzQb/OG4Sfatn427mom/XATmTlMCP5oseCpqtTQo8qEtp4itrAtKBo9UJVThv71pZf5sl9tJEub9R2za4s6LzfLLv4Kif6xJfRJNtd7/RrmCDTswSBJF1KC86dnzTB46NaJDTrGnAA+VH7pt94tMkywM9aQajYfvzGnWOj/VP7P7Sn2fpcUaWZxNNhvbKad2ySfcrMnUJHu7UngNwKvBGeUNvSy67Pl0aXtbRM02x/4DGi0it9MOPw/0usmtx/5go9RXn2rj/Nd5VOfC4MWd6Nn7n6qcO33RvLLHe51DrmboFk2wPBJHtKF37u/KyE/bZnFibzf/253seLNv+qfepgwP+pt2nK4PSPLHrf07+z1cei3fJRfmzf1bBQoD/J0+e3FNQ9MQLDdt8q8IpHi/zu97fbYtNql1yS4MbNmVnWXuIYfMfHB/khNK7lDvuzlOFRUdHzYKHK3rxlfyRw8ILYJIJmCh64Tfmz5K1v/Xm2GL5rPigrEP7pt2ujBImouSFCYeHkLRk2E/ciFC9oF1Ow1/G95zcP4ZukiDqBr5507MOttFfxL/d0eKJB7/u89dB7rDon/4172f/n98B+9KMJeZaZYXtmWZwyIlPKuLUhq1b+gv52gYEl/GviGQzatc0LIKnirb8qsA60EvVisaXXVw5XktzW+ep4mMlC1doyBhLvGtErOneCUeLP/i86BOwTftVkFeV7diVUqngL1WApVu20cQQRB1xlr7dkE1+GA9pmvb+frM7bgp68Mj9c4SdzpPmGwHr7X98nXsy55ymjbt2rsj3+qu8D8JTHh45PdtFXbucZU7lwOTYkhUlm98r/fBjHFiXqoiynbuQrPx5xFG5+DZoe8YZo7Mv/6RJ6bvAYyvXyiJYOKfG/SvW4Bx7/c3MtFZ+ZfE+8FBbaWGUr6Bw8VI5hre2tgnjDK4WvfRaGkRFBEHUBpzcU3Dyv/d6vFql02r14j827NDW/3B5+cFbJ3hOHy8rXe9bXpt3btMAX3jaSff8XpwA3Ydj//YfhVOfyGpp1653luf0ukbWl8bfrp3prnApI1nIElCBcMOGxIjhMR9CRl31qlSuurUDUSB8m1SneM6zeUNvix5BJkX5wcPuSSWJVW7Yo6NmHXU70tXd8P/P9/2dDAhOLSpKOuFMEEQtROlvf+8PAQ3+9Navzdt/9RB/5LD14+KnX8odM9g8efy3vy8vKfWk2ffaKB+Cbv6//+bwuF96Lx2d9UzZh580nzqmybXdvDfEX22ePNkkmUvOmsiyWrlh4/zgnT2sgDiJSzUgDvPlYum2P6b6ePGaDbq0p1nv67TM6ZHnuVDuIfi59CLC5osekheWJ7burAgxv9hDo0MQ2Yhji37jCe9uuFp2PVYYjasub/FPvwhK4fDYvz/5pzMmY795/T/9xjl4RtdE7tghIV/B/OY/3jrwg7v2d/1fh/92RtHjzx979t+L/8+LiDgP3jZx33d+fKDnXaVvb6m10q5d07CIvc5btThODle59SL+kY25E3Ayg2FZOJpNu6fC8y19NVWHVPL6Wi02fBLKfDq1BRn41gd8uQ4mil58JYprVEki3Gy16VkNIuObTzq3x9Xmw++g0SGIrMPx97Z79zU2rWTZVOTdd3fTH/cMSufr3n9trmItfXur97ZGvpX/Xpy34blGl3cKuaFs+6fF//zrI/fP+fPIaYfHP4KI85tX15/84k9xlzxsYK0VeE55eXmqkWWsNq2JJQiCqFcoLzpWuvZ3fx7x8KnD7muWWMML2+fPuLfZnQOErLXikW9KD1w7rGzbTr8j/O5f5P/9hKY/6pGTd+6fWlwTO3HSE7D+oBsi1Cbfj/QxhvKS0sPj/v7Y86+lVK+G3+nQ/r/X1IwM03BkdJYEQRDZhH1/cePJz/eG3/Ptki0555zJS1BefvhvZxQv+o3XFwItn/n7Rpdc9PWPhgel2aTn99pseiF6OUv/7+aj//Ccl+Tdi3Pv+stvvfCrWiv2RtQ8giCILEKz2/sjdAvctnjyZKPLOtqeMh4Z5bT85+nNp449vvkPJz778tTBw/GFPAiWcnLifydOnPPjnif37o8z4TVsGD+vcVTioPzkqWaDUls40vTHPfFX9tGu0tUbj7/z4Yn/3nPq4JHy4mOxshPIEeXPyW2W07J5nADokosaXd4pnNv9rIORJUEQBEEkAblhCYIgCILOkiAIgiAMpLEHMou5YQmCIAiCkSVBEARB0FkSBEEQBJ0lQRAEQdRHZ1mt3LAEQRAEwciSIAiCIOgsCYIgCKLOgXR3BEEQRP1CGnsgGVkSBEEQBJ0lQRAEQdBZEgRBEASdJUEQBEFkDOSGJQiCIAhGlgRBEARBZ0kQBEEQdJYEQRAEUdedJblhCYIgiPqGNBl81F+a632CnCjv4T28h/fwHt5T2+6p3siSIAiCIOobcsrLyykFgiAIgmBkSRAEQRB0lgRBEARBZ0kQBEEQdJYEQRAEQWdJEARBEHSWBEEQBEFnSRAEQRB0lgRBEARB0FkSBEEQBJ0lQRAEQdBZEgRBEASdJUEQBEHQWRIEQRBENuH/F2AAl0/fFmNUgrYAAAAASUVORK5CYII="\n}'
}),define("model/coupon_model",["jquery","underscore","backbone","text!../../data/coupons.json"],function(e,t,i,s){function n(){var e=localStorage.getItem("couponClaimed");null!=e&&t.isString(e)&&(l=JSON.parse(e))}function o(e){t.extend(l,e);try{localStorage.setItem("couponClaimed",JSON.stringify(l))}catch(i){}}var r=JSON.parse(s),a=Date.parse("2014-06-14T23:59:00-04:00"),h=12096e5,l={claimed:!1,expiry:null,type:null,shown:0};n();var c=null,d={DEAL_5_Off:"5_Off_8pc_meal",isCouponAvailable:function(){var e=(new Date).getTime();return a>e&&(!l.claimed||l.shown<2)},getClaim:function(){return t.clone(l)},claim:function(){if(!this.isCouponAvailable())throw new Error("Coupon not available");var e=l.claimed?l.type:t.sample([this.DEAL_5_Off]);if(!r.hasOwnProperty(e))throw new Error("Coupon not found: "+e);var i=new Image,s=document.createElement("canvas"),n=s.getContext("2d"),a=r[e];i.onload=t.bind(function(){s.width=i.width,s.height=i.height,n.drawImage(i,0,0);var t=new Date((new Date).getTime()+h),r=t.getMonth()+1+"/"+t.getDate()+"/"+(t.getYear()-100);n.font="normal 20px Pakenham_Condensed_Black",n.fillStyle="#e4002b",n.fillText(r,180,259),o(l.claimed?{shown:l.shown+1}:{claimed:!0,expiry:t.getTime(),type:e,shown:1}),c=s,this.trigger("coupon_created")},this),i.src=a,(i.complete||void 0===i.complete)&&(i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i.src=a)},getCoupon:function(){return c}};return t.extend(d,i.Events),d}),define("controller/prize_controller",["underscore","jquery","view/common/communicator","config","model/coupon_model"],function(e,t,i,s,n){var o={init:function(){i.on(i.EVENTS.GAME.CLAIM_PRIZE,this.onClaimPrize,this)},onClaimPrize:function(){n.isCouponAvailable()&&(n.off("coupon_created",this.onCouponCreated,this),n.once("coupon_created",this.onCouponCreated,this),n.claim())},onCouponCreated:function(){i.trigger(i.EVENTS.SITE.EMBEDS.SHOW_EMBED,"PRIZE"),i.trigger(i.EVENTS.SITE.MOBILE.TOGGLE_MENU,"PRIZE")}};return o.init(),o}),define("data/tracking_data",[],function(){return{TRACK_IDS:{ERROR_PAGE_ERROR_PAGE:"error-page-error-page",LOADING_EVENT_LOADING:"loading-event-loading",FAIL_PAGE_FUNCTIONALITY_BARRIER:"fail-page-functionality-barrier",HOME_EVENT_MENU_LOGO_CLICK:"home-event-menu-logo-click",HOME_EVENT_MENU_ABOUT_OVERLAY:"home-event-menu-about-overlay",HOME_EVENT_MENU_LEGAL_CLICK:"home-event-menu-legal-click",HOME_EVENT_MENU_FACEBOOK:"home-event-menu-facebook",HOME_EVENT_MENU_TWITTER:"home-event-menu-twitter",HOME_EVENT_MENU_AUDIO_TOGGLE:"home-event-menu-audio-toggle",HOME_EVENT_MENU_PRIVACY_CLICK:"home-event-menu-privacy-click",HOME_EVENT_HAMBURGER_MENU_TAP:"home-event-hamburger-menu-tap",HOME_EVENT_CLOSE:"home-event-close",HOME_EVENT_ABOUT:"home-event-about",HOME_EVENT_LEGAL:"home-event-legal",HOME_EVENT_SOCIAL_SHARE_BUTTONS_FB:"home-event-social-share-buttons-fb",HOME_EVENT_SOCIAL_SHARE_BUTTONS_TWT:"home-event-social-share-buttons-twt",HOME_PAGE_HALL_OF_COLONELS:"home-page-hall-of-colonels",HOME_EVENT_EARLY_YEARS_COLONEL:"home-event-early-years-colonel",HOME_EVENT_GASOLINE_GUNFIGHT_COLONEL:"home-event-gasoline-gunfight-colonel",HOME_EVENT_MANDOLIN_COLONEL:"home-event-mandolin-colonel",HOME_EVENT_LOOSE_LIPPED_COLONEL:"home-event-loose-lipped-colonel",HOME_EVENT_COLONELQUEST:"home-event-colonelquest",HOME_EVENT_DEPARTED_COLONEL:"home-event-departed-colonel",EARLY_YEARS_PAGE_EARLY_YEARS_LOADER:"early-years-page-early-years-loader",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_1:"early-years-event-early-years-slide-1",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_1FB_SHARE:"early-years-event-early-years-slide-1fb-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_1TWITTER_SHARE:"early-years-event-early-years-slide-1twitter-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_1NEXT:"early-years-event-early-years-slide-1next",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_1SCRUB_ANIMATION:"early-years-event-early-years-slide-1scrub-animation",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_1BACK_TO_HALL:"early-years-event-early-years-slide-1back-to-hall",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_2:"early-years-event-early-years-slide-2",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_2FB_SHARE:"early-years-event-early-years-slide-2fb-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_2TWITTER_SHARE:"early-years-event-early-years-slide-2twitter-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_2NEXT:"early-years-event-early-years-slide-2next",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_2PREVIOUS:"early-years-event-early-years-slide-2previous",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_2SCRUB_ANIMATION:"early-years-event-early-years-slide-2scrub-animation",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_2BACK_TO_HALL:"early-years-event-early-years-slide-2back-to-hall",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_3:"early-years-event-early-years-slide-3",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_3FB_SHARE:"early-years-event-early-years-slide-3fb-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_3TWITTER_SHARE:"early-years-event-early-years-slide-3twitter-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_3NEXT:"early-years-event-early-years-slide-3next",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_3PREVIOUS:"early-years-event-early-years-slide-3previous",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_3SCRUB_ANIMATION:"early-years-event-early-years-slide-3scrub-animation",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_3BACK_TO_HALL:"early-years-event-early-years-slide-3back-to-hall",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_4:"early-years-event-early-years-slide-4",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_4FB_SHARE:"early-years-event-early-years-slide-4fb-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_4TWITTER_SHARE:"early-years-event-early-years-slide-4twitter-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_4NEXT:"early-years-event-early-years-slide-4next",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_4PREVIOUS:"early-years-event-early-years-slide-4previous",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_4SCRUB_ANIMATION:"early-years-event-early-years-slide-4scrub-animation",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_4BACK_TO_HALL:"early-years-event-early-years-slide-4back-to-hall",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_5:"early-years-event-early-years-slide-5",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_5FB_SHARE:"early-years-event-early-years-slide-5fb-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_5TWITTER_SHARE:"early-years-event-early-years-slide-5twitter-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_5NEXT:"early-years-event-early-years-slide-5next",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_5PREVIOUS:"early-years-event-early-years-slide-5previous",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_5SCRUB_ANIMATION:"early-years-event-early-years-slide-5scrub-animation",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_5BACK_TO_HALL:"early-years-event-early-years-slide-5back-to-hall",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_6:"early-years-event-early-years-slide-6",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_6FB_SHARE:"early-years-event-early-years-slide-6fb-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_6TWITTER_SHARE:"early-years-event-early-years-slide-6twitter-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_6NEXT:"early-years-event-early-years-slide-6next",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_6PREVIOUS:"early-years-event-early-years-slide-6previous",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_6SCRUB_ANIMATION:"early-years-event-early-years-slide-6scrub-animation",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_6BACK_TO_HALL:"early-years-event-early-years-slide-6back-to-hall",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_7:"early-years-event-early-years-slide-7",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_7FB_SHARE:"early-years-event-early-years-slide-7fb-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_7TWITTER_SHARE:"early-years-event-early-years-slide-7twitter-share",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_7NEXT:"early-years-event-early-years-slide-7next",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_7PREVIOUS:"early-years-event-early-years-slide-7previous",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_7SCRUB_ANIMATION:"early-years-event-early-years-slide-7scrub-animation",EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_7BACK_TO_HALL:"early-years-event-early-years-slide-7back-to-hall",GASOLINE_GUN_FIGHT_PAGE_GASOLINE_GUNFIGHT:"gasoline-gun-fight-page-gasoline-gunfight",GASOLINE_GUN_FIGHT_EVENT_FAST_FORWARD_BUTTON:"gasoline-gun-fight-event-fast-forward-button",GASOLINE_GUN_FIGHT_EVENT_PAUSE_BUTTON:"gasoline-gun-fight-event-pause-button",GASOLINE_GUN_FIGHT_EVENT_BACK_TO_HALL_BUTTON:"gasoline-gun-fight-event-back-to-hall-button",GASOLINE_GUN_FIGHT_EVENT_EMBED_OVERLAY:"gasoline-gun-fight-event-embed-overlay",GASOLINE_GUN_FIGHT_EVENT_EMBED_CODE_COPY:"gasoline-gun-fight-event-embed-code-copy",GASOLINE_GUN_FIGHT_EVENT_FB_SHARE:"gasoline-gun-fight-event-fb-share",GASOLINE_GUN_FIGHT_EVENT_TWITTER_SHARE:"gasoline-gun-fight-event-twitter-share",GASOLINE_GUN_FIGHT_EVENT_GO_TO_FULL_SITE:"gasoline-gun-fight-event-go-to-full-site",PLAYS_MANDOLIN_PAGE_MANDOLIN_COLONEL:"plays-mandolin-page-mandolin-colonel",PLAYS_MANDOLIN_EVENT_BACK_TO_HALL_BUTTON:"plays-mandolin-event-back-to-hall-button",PLAYS_MANDOLIN_EVENT_EMBED_OVERLAY:"plays-mandolin-event-embed-overlay",PLAYS_MANDOLIN_EVENT_EMBED_CODE_COPY:"plays-mandolin-event-embed-code-copy",PLAYS_MANDOLIN_EVENT_FB_SHARE:"plays-mandolin-event-fb-share",PLAYS_MANDOLIN_EVENT_TWITTER_SHARE:"plays-mandolin-event-twitter-share",PLAYS_MANDOLIN_EVENT_MOBILE_PLAY_BUTTON:"plays-mandolin-event-mobile-play-button",KFC_SECRET_RECIPE_REVEALED_PAGE_LOOSE_LIPPED_COLONEL:"kfc-secret-recipe-revealed-page-loose-lipped-colonel",KFC_SECRET_RECIPE_REVEALED_EVENT_LOOSE_LIPPED_COLONEL_INTERACTION:"kfc-secret-recipe-revealed-event-loose-lipped-colonel-interaction",KFC_SECRET_RECIPE_REVEALED_EVENT_BACK_TO_HALL_BUTTON:"kfc-secret-recipe-revealed-event-back-to-hall-button",KFC_SECRET_RECIPE_REVEALED_EVENT_FB_SHARE:"kfc-secret-recipe-revealed-event-fb-share",KFC_SECRET_RECIPE_REVEALED_EVENT_TWITTER_SHARE:"kfc-secret-recipe-revealed-event-twitter-share",LEGACY_PAGE_DEPARTED_COLONEL:"legacy-page-departed-colonel",LEGACY_EVENT_DEPARTED_COLONEL_SKIP_BUTTON:"legacy-event-departed-colonel-skip-button",LEGACY_EVENT_BACK_TO_HALL_BUTTON:"legacy-event-back-to-hall-button",LEGACY_EVENT_FB_SHARE:"legacy-event-fb-share",LEGACY_EVENT_TWITTER_SHARE:"legacy-event-twitter-share",LEGACY_EVENT_MAP_SEARCH:"legacy-event-map-search",LEGACY_PAGE_LEARN_MORE:"legacy-page-learn-more",LEGACY_EVENT_LEARN_MORE:"legacy-event-learn-more",LEGACY_EVENTOF_KFC_STORE_SEARCHES:"legacy-eventof-kfc-store-searches",COLONELQUEST_PAGE_COLONEL_QUEST:"colonelquest-page-colonel-quest",COLONELQUEST_EVENT_EMBED_OVERLAY:"colonelquest-event-embed-overlay",COLONELQUEST_EVENT_EMBED_CODE_COPY:"colonelquest-event-embed-code-copy",COLONELQUEST_EVENT_END_GAME_SHARE_FACEBOOK:"colonelquest-event-end-game-share-facebook",COLONELQUEST_EVENT_END_GAME_SHARE_TWITTER:"colonelquest-event-end-game-share-twitter",COLONELQUEST_EVENT_FB_SHARE:"colonelquest-event-fb-share",COLONELQUEST_EVENT_TWITTER_SHARE:"colonelquest-event-twitter-share",COLONELQUEST_EVENT_EMBED_SHARE_FACEBOOK:"colonelquest-event-embed-share-facebook",COLONELQUEST_EVENT_EMBED_SHARE_TWITTER:"colonelquest-event-embed-share-twitter",COLONELQUEST_EVENT_LEVEL_SELECT:"colonelquest-event-level-select",COLONELQUEST_EVENT_LEVEL_1_CUT_SCENE_SKIP:"colonelquest-event-level-1-cut-scene-skip",COLONELQUEST_EVENT_LEVEL_2_CUT_SCENE_SKIP:"colonelquest-event-level-2-cut-scene-skip",COLONELQUEST_EVENT_LEVEL_3_CUT_SCENE_SKIP:"colonelquest-event-level-3-cut-scene-skip",COLONELQUEST_EVENT_LEVEL_4_CUT_SCENE_SKIP:"colonelquest-event-level-4-cut-scene-skip",COLONELQUEST_EVENT_LEVEL_5_CUT_SCENE_SKIP:"colonelquest-event-level-5-cut-scene-skip",COLONELQUEST_EVENT_LEVEL_6_CUT_SCENE_SKIP:"colonelquest-event-level-6-cut-scene-skip",COLONELQUEST_EVENT_LEVEL_1_PAUSE:"colonelquest-event-level-1-pause",COLONELQUEST_EVENT_LEVEL_2_PAUSE:"colonelquest-event-level-2-pause",COLONELQUEST_EVENT_LEVEL_3_PAUSE:"colonelquest-event-level-3-pause",COLONELQUEST_EVENT_LEVEL_4_PAUSE:"colonelquest-event-level-4-pause",COLONELQUEST_EVENT_LEVEL_5_PAUSE:"colonelquest-event-level-5-pause",COLONELQUEST_EVENT_LEVEL_6_PAUSE:"colonelquest-event-level-6-pause",COLONELQUEST_PAGE_GAME_COUPON_OFFER:"colonelquest-page-game-coupon-offer",COLONELQUEST_EVENT_GAME_COUPON_COLLECTED:"colonelquest-event-game-coupon-collected",COLONELQUEST_EVENT_GAME_COUPON_NOT_COLLECTED:"colonelquest-event-game-coupon-not-collected",COLONELQUEST_PAGE_GAME_RESULTS_SCREEN:"colonelquest-page-game-results-screen",COLONELQUEST_PAGE_LEVEL_1_LEVEL_PLAYED:"colonelquest-page-level-1-level-played",COLONELQUEST_EVENT_LEVEL_1_LEVEL_COMPLETE:"colonelquest-event-level-1-level-complete",COLONELQUEST_EVENT_LEVEL_1_REPLAYS_REQUIRED_TO_COMPLETE:"colonelquest-event-level-1-replays-required-to-complete",COLONELQUEST_EVENT_LEVEL_1_REPLAYS_AFTER_LEVEL_COMPLETE:"colonelquest-event-level-1-replays-after-level-complete",COLONELQUEST_EVENT_LEVEL_1_FINAL_SCORE_ACHIEVED:"colonelquest-event-level-1-final-score-achieved",COLONELQUEST_EVENT_LEVEL_1_SUCCESS_SCORE:"colonelquest-event-level-1-success-score",COLONELQUEST_EVENT_LEVEL_1_FAIL_SCORE:"colonelquest-event-level-1-fail-score",COLONELQUEST_EVENT_LEVEL_1_QUIT_POINT:"colonelquest-event-level-1-quit-point",COLONELQUEST_EVENT_LEVEL_1_BRONZE:"colonelquest-event-level-1-bronze",COLONELQUEST_EVENT_LEVEL_1_SILVER:"colonelquest-event-level-1-silver",COLONELQUEST_EVENT_LEVEL_1_GOLD:"colonelquest-event-level-1-gold",COLONELQUEST_PAGE_LEVEL_2_LEVEL_PLAYED:"colonelquest-page-level-2-level-played",COLONELQUEST_EVENT_LEVEL_2_LEVEL_COMPLETE:"colonelquest-event-level-2-level-complete",COLONELQUEST_EVENT_LEVEL_2_REPLAYS_REQUIRED_TO_COMPLETE:"colonelquest-event-level-2-replays-required-to-complete",COLONELQUEST_EVENT_LEVEL_2_REPLAYS_AFTER_LEVEL_COMPLETE:"colonelquest-event-level-2-replays-after-level-complete",COLONELQUEST_EVENT_LEVEL_2_FINAL_SCORE_ACHIEVED:"colonelquest-event-level-2-final-score-achieved",COLONELQUEST_EVENT_LEVEL_2_SUCCESS_SCORE:"colonelquest-event-level-2-success-score",COLONELQUEST_EVENT_LEVEL_2_FAIL_SCORE:"colonelquest-event-level-2-fail-score",COLONELQUEST_EVENT_LEVEL_2_QUIT_POINT:"colonelquest-event-level-2-quit-point",COLONELQUEST_EVENT_LEVEL_2_BRONZE:"colonelquest-event-level-2-bronze",COLONELQUEST_EVENT_LEVEL_2_SILVER:"colonelquest-event-level-2-silver",COLONELQUEST_EVENT_LEVEL_2_GOLD:"colonelquest-event-level-2-gold",COLONELQUEST_PAGE_LEVEL_3_LEVEL_PLAYED:"colonelquest-page-level-3-level-played",COLONELQUEST_EVENT_LEVEL_3_LEVEL_COMPLETE:"colonelquest-event-level-3-level-complete",COLONELQUEST_EVENT_LEVEL_3_REPLAYS_REQUIRED_TO_COMPLETE:"colonelquest-event-level-3-replays-required-to-complete",COLONELQUEST_EVENT_LEVEL_3_REPLAYS_AFTER_LEVEL_COMPLETE:"colonelquest-event-level-3-replays-after-level-complete",COLONELQUEST_EVENT_LEVEL_3_FINAL_SCORE_ACHIEVED:"colonelquest-event-level-3-final-score-achieved",COLONELQUEST_EVENT_LEVEL_3_SUCCESS_SCORE:"colonelquest-event-level-3-success-score",COLONELQUEST_EVENT_LEVEL_3_FAIL_SCORE:"colonelquest-event-level-3-fail-score",COLONELQUEST_EVENT_LEVEL_3_QUIT_POINT:"colonelquest-event-level-3-quit-point",COLONELQUEST_EVENT_LEVEL_3_BRONZE:"colonelquest-event-level-3-bronze",COLONELQUEST_EVENT_LEVEL_3_SILVER:"colonelquest-event-level-3-silver",COLONELQUEST_EVENT_LEVEL_3_GOLD:"colonelquest-event-level-3-gold",COLONELQUEST_PAGE_LEVEL_4_LEVEL_PLAYED:"colonelquest-page-level-4-level-played",COLONELQUEST_EVENT_LEVEL_4_LEVEL_COMPLETE:"colonelquest-event-level-4-level-complete",COLONELQUEST_EVENT_LEVEL_4_REPLAYS_REQUIRED_TO_COMPLETE:"colonelquest-event-level-4-replays-required-to-complete",COLONELQUEST_EVENT_LEVEL_4_REPLAYS_AFTER_LEVEL_COMPLETE:"colonelquest-event-level-4-replays-after-level-complete",COLONELQUEST_EVENT_LEVEL_4_FINAL_SCORE_ACHIEVED:"colonelquest-event-level-4-final-score-achieved",COLONELQUEST_EVENT_LEVEL_4_SUCCESS_SCORE:"colonelquest-event-level-4-success-score",COLONELQUEST_EVENT_LEVEL_4_FAIL_SCORE:"colonelquest-event-level-4-fail-score",COLONELQUEST_EVENT_LEVEL_4_QUIT_POINT:"colonelquest-event-level-4-quit-point",COLONELQUEST_EVENT_LEVEL_4_BRONZE:"colonelquest-event-level-4-bronze",COLONELQUEST_EVENT_LEVEL_4_SILVER:"colonelquest-event-level-4-silver",COLONELQUEST_EVENT_LEVEL_4_GOLD:"colonelquest-event-level-4-gold",COLONELQUEST_PAGE_LEVEL_5_LEVEL_PLAYED:"colonelquest-page-level-5-level-played",COLONELQUEST_EVENT_LEVEL_5_LEVEL_COMPLETE:"colonelquest-event-level-5-level-complete",COLONELQUEST_EVENT_LEVEL_5_REPLAYS_REQUIRED_TO_COMPLETE:"colonelquest-event-level-5-replays-required-to-complete",COLONELQUEST_EVENT_LEVEL_5_REPLAYS_AFTER_LEVEL_COMPLETE:"colonelquest-event-level-5-replays-after-level-complete",COLONELQUEST_EVENT_LEVEL_5_FINAL_SCORE_ACHIEVED:"colonelquest-event-level-5-final-score-achieved",COLONELQUEST_EVENT_LEVEL_5_SUCCESS_SCORE:"colonelquest-event-level-5-success-score",COLONELQUEST_EVENT_LEVEL_5_FAIL_SCORE:"colonelquest-event-level-5-fail-score",COLONELQUEST_EVENT_LEVEL_5_QUIT_POINT:"colonelquest-event-level-5-quit-point",COLONELQUEST_EVENT_LEVEL_5_BRONZE:"colonelquest-event-level-5-bronze",COLONELQUEST_EVENT_LEVEL_5_SILVER:"colonelquest-event-level-5-silver",COLONELQUEST_EVENT_LEVEL_5_GOLD:"colonelquest-event-level-5-gold",COLONELQUEST_PAGE_LEVEL_6_LEVEL_PLAYED:"colonelquest-page-level-6-level-played",COLONELQUEST_EVENT_LEVEL_6_LEVEL_COMPLETE:"colonelquest-event-level-6-level-complete",COLONELQUEST_EVENT_LEVEL_6_REPLAYS_REQUIRED_TO_COMPLETE:"colonelquest-event-level-6-replays-required-to-complete",COLONELQUEST_EVENT_LEVEL_6_REPLAYS_AFTER_LEVEL_COMPLETE:"colonelquest-event-level-6-replays-after-level-complete",COLONELQUEST_EVENT_LEVEL_6_FINAL_SCORE_ACHIEVED:"colonelquest-event-level-6-final-score-achieved",COLONELQUEST_EVENT_LEVEL_6_SUCCESS_SCORE:"colonelquest-event-level-6-success-score",COLONELQUEST_EVENT_LEVEL_6_FAIL_SCORE:"colonelquest-event-level-6-fail-score",COLONELQUEST_EVENT_LEVEL_6_QUIT_POINT:"colonelquest-event-level-6-quit-point",COLONELQUEST_EVENT_LEVEL_6_BRONZE:"colonelquest-event-level-6-bronze",COLONELQUEST_EVENT_LEVEL_6_SILVER:"colonelquest-event-level-6-silver",COLONELQUEST_EVENT_LEVEL_6_GOLD:"colonelquest-event-level-6-gold"},TRACK_DATA:[{id:"error-page-error-page",row:4,item:"Error Page",pageevent:"Page",description:"error",pagetrackurl:"/error",eventcategory:"",eventaction:"",eventlabel:"",eventvalue:"",desktop:"",mobile:""},{id:"loading-event-loading",row:5,item:"Loading ",pageevent:"Event",description:"loader",pagetrackurl:"/loading",eventcategory:"",eventaction:"",eventlabel:"",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"fail-page-functionality-barrier",row:6,item:"Functionality barrier",pageevent:"Page",description:"IE8/IE9 browser fail",pagetrackurl:"/fail",eventcategory:"",eventaction:"",eventlabel:"",eventvalue:"",desktop:"yes",mobile:"no"},{id:"home-event-menu-logo-click",row:20,item:"Menu: Logo click",pageevent:"event",description:"Footer Menu: Logo click",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell click-desktop",eventlabel:"Shell Logo",eventvalue:"",desktop:"yes",mobile:"no"},{id:"home-event-menu-about-overlay",row:21,item:"Menu: About overlay",pageevent:"event",description:"Footer Menu: About overlay",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell click-desktop",eventlabel:"Shell About",eventvalue:"",desktop:"yes",mobile:"no"},{id:"home-event-menu-legal-click",row:22,item:"Menu: Legal click",pageevent:"event",description:"Footer Menu: Legal click",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell click-desktop",eventlabel:"Shell Legal",eventvalue:"",desktop:"yes",mobile:"no"},{id:"home-event-menu-facebook",row:23,item:"menu: Facebook",pageevent:"event",description:"Footer menu: Facebook ",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell click-desktop",eventlabel:"Shell Share FB",eventvalue:"",desktop:"yes",mobile:"no"},{id:"home-event-menu-twitter",row:24,item:"menu: Twitter",pageevent:"event",description:"Footer menu: Twitter",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell click-desktop",eventlabel:"Shell Share Twitter",eventvalue:"",desktop:"yes",mobile:"no"},{id:"home-event-menu-audio-toggle",row:25,item:"Menu: Audio toggle",pageevent:"event",description:"Footer Menu: Audio toggle",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell click-desktop",eventlabel:"Shell Audio",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"home-event-menu-privacy-click",row:26,item:"Menu: Privacy click",pageevent:"event",description:"Footer Menu: Privacy click",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell click-desktop",eventlabel:"Shell Privacy",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"home-event-hamburger-menu-tap",row:29,item:"Hamburger Menu tap",pageevent:"event",description:"",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell tap-mobile",eventlabel:"mobile menu-tap",eventvalue:"",desktop:"no",mobile:"yes"},{id:"home-event-close",row:30,item:"Close",pageevent:"event",description:"Button will close the Menu overlay.",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell tap-mobile",eventlabel:"mobile menu-close",eventvalue:"",desktop:"no",mobile:"yes"},{id:"home-event-about",row:31,item:"About",pageevent:"event",description:"About will show a simple about page.",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell tap-mobile",eventlabel:"mobile menu-about",eventvalue:"",desktop:"no",mobile:"yes"},{id:"home-event-legal",row:32,item:"Legal",pageevent:"event",description:"Legal will show an external T&Cs page.",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell tap-mobile",eventlabel:"mobile menu-legal",eventvalue:"",desktop:"no",mobile:"yes"},{id:"home-event-social-share-buttons-fb",row:33,item:"Social share buttons FB",pageevent:"event",description:"Share specific section of the site user shares from. ",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell tap-mobile",eventlabel:"mobile menu-facebook",eventvalue:"",desktop:"no",mobile:"yes"},{id:"home-event-social-share-buttons-twt",row:34,item:"Social share buttons TWT",pageevent:"event",description:"Share specific section of the site user shares from. ",pagetrackurl:"home",eventcategory:"Home-Site Shell",eventaction:"home-Shell tap-mobile",eventlabel:"mobile menu-twitter",eventvalue:"",desktop:"no",mobile:"yes"},{id:"home-page-hall-of-colonels",row:37,item:"Hall of Colonels",pageevent:"page",description:"",pagetrackurl:"home",eventcategory:"",eventaction:"",eventlabel:"",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"home-event-early-years-colonel",row:38,item:"Early Years Colonel",pageevent:"event",description:"Hall: click",pagetrackurl:"home",eventcategory:"Hall-of-Colonels",eventaction:"Colonel-click",eventlabel:"Early-Years",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"home-event-gasoline-gunfight-colonel",row:39,item:"Gasoline Gunfight Colonel",pageevent:"event",description:"Hall: click",pagetrackurl:"home",eventcategory:"Hall-of-Colonels",eventaction:"Colonel-click",eventlabel:"Gasoline-Gunfight-Play",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"home-event-mandolin-colonel",row:40,item:"Mandolin Colonel",pageevent:"event",description:"Hall: click",pagetrackurl:"home",eventcategory:"Hall-of-Colonels",eventaction:"Colonel-click",eventlabel:"Mandolin-Song",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"home-event-loose-lipped-colonel",row:41,item:"Loose-Lipped Colonel",pageevent:"event",description:"Hall: click",pagetrackurl:"home",eventcategory:"Hall-of-Colonels",eventaction:"Colonel-click",eventlabel:"Loose-Lipped",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"home-event-colonelquest",row:42,item:"ColonelQuest",pageevent:"event",description:"Hall: click",pagetrackurl:"home",eventcategory:"Hall-of-Colonels",eventaction:"Colonel-click",eventlabel:"ColonelQuest",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"home-event-departed-colonel",row:43,item:"Departed Colonel",pageevent:"event",description:"Hall: click",pagetrackurl:"home",eventcategory:"Hall-of-Colonels",eventaction:"Colonel-click",eventlabel:"Legacy-Store-Locator",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-page-early-years-loader",row:48,item:"Early Years Loader",pageevent:"Page",description:"",pagetrackurl:"early-years",eventcategory:"",eventaction:"",eventlabel:"",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-1",row:49,item:"Early Years: Slide 1",pageevent:"Event",description:"",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"",eventlabel:"Slide-1",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-1fb-share",row:50,item:"Early Years: Slide 1 - FB share",pageevent:"Event",description:"Facebook share click\nFacebook share tap",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-1-Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-1twitter-share",row:51,item:"Early Years: Slide 1 - Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-1-Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-1next",row:52,item:"Early Years: Slide 1 - Next",pageevent:"Event",description:"Next button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"next-click",eventlabel:"Slide-1",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-1scrub-animation",row:53,item:"Early Years: Slide 1 - Scrub animation",pageevent:"Event",description:"Scrub animation click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"scrub-click",eventlabel:"Slide-1",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-1back-to-hall",row:54,item:"Early Years: Slide 1 - Back to Hall",pageevent:"Event",description:"Hall button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"backtohall-click",eventlabel:"Slide-1",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-2",row:55,item:"Early Years: Slide 2",pageevent:"Event",description:"",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"",eventlabel:"Slide-2",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-2fb-share",row:56,item:"Early Years: Slide 2 - FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-2-Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-2twitter-share",row:57,item:"Early Years: Slide 2 - Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-2-Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-2next",row:58,item:"Early Years: Slide 2 - Next",pageevent:"Event",description:"Next button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"next-click",eventlabel:"Slide-2",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-2previous",row:59,item:"Early Years: Slide 2 - Previous",pageevent:"Event",description:"Previous button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"previous-click",eventlabel:"Slide-2",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-2scrub-animation",row:60,item:"Early Years: Slide 2 - Scrub animation",pageevent:"Event",description:"Scrub animation click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"scrub-click",eventlabel:"Slide-2",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-2back-to-hall",row:61,item:"Early Years: Slide 2 - Back to Hall",pageevent:"Event",description:"Hall button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"backtohall-click",eventlabel:"Slide-2",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-3",row:62,item:"Early Years: Slide 3",pageevent:"Event",description:"",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"",eventlabel:"Slide-3",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-3fb-share",row:63,item:"Early Years: Slide 3 - FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-3-Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-3twitter-share",row:64,item:"Early Years: Slide 3 - Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-3-Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-3next",row:65,item:"Early Years: Slide 3 - Next",pageevent:"Event",description:"Next button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"next-click",eventlabel:"Slide-3",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-3previous",row:66,item:"Early Years: Slide 3 - Previous",pageevent:"Event",description:"Previous button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"previous-click",eventlabel:"Slide-3",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-3scrub-animation",row:67,item:"Early Years: Slide 3 - Scrub animation",pageevent:"Event",description:"Scrub animation click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"scrub-click",eventlabel:"Slide-3",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-3back-to-hall",row:68,item:"Early Years: Slide 3 - Back to Hall",pageevent:"Event",description:"Hall button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"backtohall-click",eventlabel:"Slide-3",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-4",row:69,item:"Early Years: Slide 4",pageevent:"Event",description:"",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"",eventlabel:"Slide-4",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-4fb-share",row:70,item:"Early Years: Slide 4 - FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-4-Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-4twitter-share",row:71,item:"Early Years: Slide 4 - Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-4-Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-4next",row:72,item:"Early Years: Slide 4 - Next",pageevent:"Event",description:"Next button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"next_click",eventlabel:"Slide-4",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-4previous",row:73,item:"Early Years: Slide 4 - Previous",pageevent:"Event",description:"Previous button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"previous-click",eventlabel:"Slide-4",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-4scrub-animation",row:74,item:"Early Years: Slide 4 - Scrub animation",pageevent:"Event",description:"Scrub animation click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"scrub-click",eventlabel:"Slide-4",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-4back-to-hall",row:75,item:"Early Years: Slide 4 - Back to Hall",pageevent:"Event",description:"Hall button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"backtohall-click",eventlabel:"Slide-4",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-5",row:76,item:"Early Years: Slide 5",pageevent:"Event",description:"",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"",eventlabel:"Slide-5",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-5fb-share",row:77,item:"Early Years: Slide 5 - FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-5-Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-5twitter-share",row:78,item:"Early Years: Slide 5 - Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-5-Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-5next",row:79,item:"Early Years: Slide 5 - Next",pageevent:"Event",description:"Next button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"next-click",eventlabel:"Slide-5",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-5previous",row:80,item:"Early Years: Slide 5 - Previous",pageevent:"Event",description:"Previous button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"previous-click",eventlabel:"Slide-5",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-5scrub-animation",row:81,item:"Early Years: Slide 5 - Scrub animation",pageevent:"Event",description:"Scrub animation click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"scrub-click",eventlabel:"Slide-5",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-5back-to-hall",row:82,item:"Early Years: Slide 5 - Back to Hall",pageevent:"Event",description:"Hall button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"backtohall-click",eventlabel:"Slide-5",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-6",row:83,item:"Early Years: Slide 6",pageevent:"Event",description:"",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"",eventlabel:"Slide-6",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-6fb-share",row:84,item:"Early Years: Slide 6 - FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-6-Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-6twitter-share",row:85,item:"Early Years: Slide 6 - Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-6-Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-6next",row:86,item:"Early Years: Slide 6 - Next",pageevent:"Event",description:"Next button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"next-click",eventlabel:"Slide-6",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-6previous",row:87,item:"Early Years: Slide 6 - Previous",pageevent:"Event",description:"Previous button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"previous-click",eventlabel:"Slide-6",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-6scrub-animation",row:88,item:"Early Years: Slide 6 - Scrub animation",pageevent:"Event",description:"Scrub animation click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"scrub-click",eventlabel:"Slide-6",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-6back-to-hall",row:89,item:"Early Years: Slide 6 - Back to Hall",pageevent:"Event",description:"Hall button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"backtohall-click",eventlabel:"Slide-6",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-7",row:90,item:"Early Years: Slide 7",pageevent:"Event",description:"",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"",eventlabel:"Slide-7",eventvalue:"",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-7fb-share",row:91,item:"Early Years: Slide 7 - FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-7-Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-7twitter-share",row:92,item:"Early Years: Slide 7 - Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"share-click",eventlabel:"Slide-7-Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-7next",row:93,item:"Early Years: Slide 7 - Next",pageevent:"Event",description:"Next button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"next-click",eventlabel:"Slide-7",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-7previous",row:94,item:"Early Years: Slide 7 - Previous",pageevent:"Event",description:"Previous button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"previous-click",eventlabel:"Slide-7",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-7scrub-animation",row:95,item:"Early Years: Slide 7 - Scrub animation",pageevent:"Event",description:"Scrub animation click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"scrub-click",eventlabel:"Slide-7",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"early-years-event-early-years-slide-7back-to-hall",row:96,item:"Early Years: Slide 7 - Back to Hall",pageevent:"Event",description:"Hall button click",pagetrackurl:"early-years",eventcategory:"Early Years Slideshow",eventaction:"backtohall-click",eventlabel:"Slide-7",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"gasoline-gun-fight-page-gasoline-gunfight",row:99,item:"Gasoline Gunfight",pageevent:"Page",description:"",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"gasoline-gun-fight-event-fast-forward-button",row:100,item:"Fast forward button",pageevent:"Event",description:"Fast forward button",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"fastforward-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"gasoline-gun-fight-event-pause-button",row:101,item:"Pause button",pageevent:"Event",description:"Pause button",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"pause-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"gasoline-gun-fight-event-back-to-hall-button",row:102,item:"Back to hall button",pageevent:"Event",description:"Back to hall button",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"backtohall-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"gasoline-gun-fight-event-embed-overlay",row:103,item:"Embed Overlay",pageevent:"Event",description:"Embed overlay opened",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"embed-open",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"no"},{id:"gasoline-gun-fight-event-embed-code-copy",row:104,item:"Embed Code Copy",pageevent:"Event",description:"Embed Code Copy",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"embed-copy-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"no"},{id:"gasoline-gun-fight-event-fb-share",row:105,item:"FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"share-click",eventlabel:"Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"gasoline-gun-fight-event-twitter-share",row:106,item:"Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"share-click",eventlabel:"Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"gasoline-gun-fight-event-go-to-full-site",row:107,item:"Go to full site",pageevent:"Event",description:"full site button",pagetrackurl:"gasoline-gun-fight",eventcategory:"Gasoline Gunfight Play",eventaction:"button click",eventlabel:"from embed",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"plays-mandolin-page-mandolin-colonel",row:110,item:"Mandolin Colonel",pageevent:"Page",description:"Mandolin Colonel",pagetrackurl:"plays-mandolin",eventcategory:"Mandolin Song",eventaction:"",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"plays-mandolin-event-back-to-hall-button",row:111,item:"Back to hall button",pageevent:"Event",description:"Back to hall button",pagetrackurl:"plays-mandolin",eventcategory:"Mandolin Song",eventaction:"backtohall-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"plays-mandolin-event-embed-overlay",row:112,item:"Embed Overlay",pageevent:"Event",description:"Embed overlay opened",pagetrackurl:"plays-mandolin",eventcategory:"Mandolin Song",eventaction:"embed-open",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"no"},{id:"plays-mandolin-event-embed-code-copy",row:113,item:"Embed Code Copy",pageevent:"Event",description:"Embed Code Copy",pagetrackurl:"plays-mandolin",eventcategory:"Mandolin Song",eventaction:"embed-copy-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"no"},{id:"plays-mandolin-event-fb-share",row:114,item:"FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"plays-mandolin",eventcategory:"Mandolin Song",eventaction:"share-click",eventlabel:"Facebook",eventvalue:"desktop\nmobile",desktop:"Yes",mobile:"yes"},{id:"plays-mandolin-event-twitter-share",row:115,item:"Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"plays-mandolin",eventcategory:"Mandolin Song",eventaction:"share-click",eventlabel:"Twitter",eventvalue:"desktop\nmobile",desktop:"yes ",mobile:"yes"},{id:"plays-mandolin-event-mobile-play-button",row:116,item:"Mobile Play button",pageevent:"Event",description:"Mobile play button click",pagetrackurl:"plays-mandolin",eventcategory:"Mandolin Song",eventaction:"play-tap-mobile",eventlabel:"",eventvalue:"",desktop:"no",mobile:"yes"},{id:"kfc-secret-recipe-revealed-page-loose-lipped-colonel",row:119,item:"Loose-Lipped Colonel ",pageevent:"Page",description:"Loose-Lipped Colonel",pagetrackurl:"kfc-secret-recipe-revealed",eventcategory:"Loose Lipped Secret Recipe Reveal",eventaction:"",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"kfc-secret-recipe-revealed-event-loose-lipped-colonel-interaction",row:120,item:"Loose-Lipped Colonel interaction",pageevent:"Event",description:"Interact with Loose Lipped Colonel",pagetrackurl:"kfc-secret-recipe-revealed",eventcategory:"Loose Lipped Secret Recipe Reveal",eventaction:"playwith-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"kfc-secret-recipe-revealed-event-back-to-hall-button",row:121,item:"Back to hall button",pageevent:"Event",description:"Back to hall button",pagetrackurl:"kfc-secret-recipe-revealed",eventcategory:"Loose Lipped Secret Recipe Reveal",eventaction:"backtohall-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"kfc-secret-recipe-revealed-event-fb-share",row:122,item:"FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"kfc-secret-recipe-revealed",eventcategory:"Loose Lipped Secret Recipe Reveal",eventaction:"share-click",eventlabel:"Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"kfc-secret-recipe-revealed-event-twitter-share",row:123,item:"Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"kfc-secret-recipe-revealed",eventcategory:"Loose Lipped Secret Recipe Reveal",eventaction:"share-click",eventlabel:"Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-page-departed-colonel",row:126,item:"Departed Colonel",pageevent:"Page",description:"Departed Colonel",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-event-departed-colonel-skip-button",row:127,item:"Departed Colonel skip button",pageevent:"Event",description:"Departed Colonel",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"skip-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-event-back-to-hall-button",row:128,item:"Back to hall button",pageevent:"Event",description:"Back to hall button",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"backtohall-click",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-event-fb-share",row:129,item:"FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"share-click",eventlabel:"Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-event-twitter-share",row:130,item:"Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"share-click",eventlabel:"Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-event-map-search",row:131,item:"Map Search",pageevent:"Event",description:"Map Search",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"map-search",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-page-learn-more",row:132,item:"Learn More",pageevent:"Page",description:"Learn More",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-event-learn-more",row:133,item:"Learn More",pageevent:"Event",description:"Learn More clicked",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"learn-more",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"legacy-eventof-kfc-store-searches",row:134,item:"# of KFC store searches",pageevent:"Event",description:"KFC store searches - location select",pagetrackurl:"legacy",eventcategory:"Colonel's Legacy",eventaction:"store-search",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-colonel-quest",row:137,item:"Colonel Quest",pageevent:"Page",description:"Colonel Quest",pagetrackurl:"colonelquest",eventcategory:"Colonel's Quest",eventaction:"",eventlabel:"",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-embed-overlay",row:141,item:"Embed Overlay",pageevent:"Event",description:"Embed overlay opened",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"embed-open",eventlabel:"",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"no"},{id:"colonelquest-event-embed-code-copy",row:142,item:"Embed Code Copy",pageevent:"Event",description:"Embed Code Copy",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"embed-copy-click",eventlabel:"",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"no"},{id:"colonelquest-event-end-game-share-facebook",row:143,item:"End Game Share Facebook",pageevent:"Event",description:"FB share click",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"end-facebook-share-click",eventlabel:"Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-end-game-share-twitter",row:144,item:"End Game Share Twitter",pageevent:"Event",description:"Twitter share click",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"end-twitter-share-click",eventlabel:"Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-fb-share",row:145,item:"FB share",pageevent:"Event",description:"FB share click",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"share-click",eventlabel:"Facebook",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-twitter-share",row:146,item:"Twitter share",pageevent:"Event",description:"Twitter share click",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"share-click",eventlabel:"Twitter",eventvalue:"desktop\nmobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-embed-share-facebook",row:147,item:"Embed Share Facebook",pageevent:"Event",description:"Embed to Facebook",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"embed-facebook-click",eventlabel:"",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-embed-share-twitter",row:148,item:"Embed Share Twitter",pageevent:"Event",description:"Share to Twitter from embed overlay",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"embed-twitter-click",eventlabel:"",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-select",row:149,item:"Level select",pageevent:"Event",description:"After user completed all levels, which do they go to?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"game complete-level-select",eventlabel:"Level 1\nLevel 2\nLevel 3\nLevel 4\nLevel 5\nLevel 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-cut-scene-skip",row:150,item:"Level 1: Cut Scene skip",pageevent:"Event",description:"Cut Scene skip on level 1",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Cut-scene-skip",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-cut-scene-skip",row:151,item:"Level 2: Cut Scene skip",pageevent:"Event",description:"Cut Scene skip on level 2",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Cut-scene-skip",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-cut-scene-skip",row:152,item:"Level 3: Cut Scene skip",pageevent:"Event",description:"Cut Scene skip on level 3",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Cut-scene-skip",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-cut-scene-skip",row:153,item:"Level 4: Cut Scene skip",pageevent:"Event",description:"Cut Scene skip on level 4",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Cut-scene-skip",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-cut-scene-skip",row:154,item:"Level 5: Cut Scene skip",pageevent:"Event",description:"Cut Scene skip on level 5",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Cut-scene-skip",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-cut-scene-skip",row:155,item:"Level 6: Cut Scene skip",pageevent:"Event",description:"Cut Scene skip on level 6",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Cut-scene-skip",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-pause",row:156,item:"Level 1: Pause",pageevent:"Event",description:"Pause on Level 1",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Pause-level",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-pause",row:157,item:"Level 2: Pause",pageevent:"Event",description:"Pause on Level 2",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Pause-level",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-pause",row:158,item:"Level 3: Pause",pageevent:"Event",description:"Pause on Level 3",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Pause-level",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-pause",row:159,item:"Level 4: Pause",pageevent:"Event",description:"Pause on Level 4",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Pause-level",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-pause",row:160,item:"Level 5: Pause",pageevent:"Event",description:"Pause on Level 5",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Pause-level",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-pause",row:161,item:"Level 6: Pause",pageevent:"Event",description:"Pause on Level 6",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Pause-level",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-game-coupon-offer",row:162,item:"Game Coupon offer",pageevent:"Page",description:"user sees game coupon offer",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"game-coupon",eventlabel:"",eventvalue:"",desktop:"",mobile:""},{id:"colonelquest-event-game-coupon-collected",row:163,item:"Game Coupon collected",pageevent:"Event",description:"user collects game coupon",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"game-coupon",eventlabel:"redeem",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-game-coupon-not-collected",row:164,item:"Game Coupon not collected",pageevent:"Event",description:"user does not collect game coupon",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"game-coupon",eventlabel:"reject",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-game-results-screen",row:165,item:"Game results screen",pageevent:"page",description:"",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest",eventaction:"Game-results",eventlabel:"",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-level-1-level-played",row:168,item:"Level 1: level played",pageevent:"Page",description:"Level is played",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-played",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-level-complete",row:169,item:"Level 1: level complete ",pageevent:"Event",description:"Level is completed",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-replays-required-to-complete",row:170,item:"Level 1: replays required to complete",pageevent:"Event",description:"How many replays to succeed?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-toWin",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-replays-after-level-complete",row:171,item:"Level 1: replays after level complete",pageevent:"Event",description:"How many replays after level complete?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-after-game-completed-toWin",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-final-score-achieved",row:172,item:"Level 1: final score achieved",pageevent:"Event",description:"What is the final score for that level?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-final-score",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-success-score",row:173,item:"Level 1: success score",pageevent:"Event",description:"How many times do people reach a success score the first time?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete-on1stTry",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-fail-score",row:174,item:"Level 1: fail score",pageevent:"Event",description:"What fail scores are reached?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-failScores",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-quit-point",row:175,item:"Level 1: quit point",pageevent:"Event",description:"What is the quit point?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-exit",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-bronze",row:176,item:"Level 1: Bronze",pageevent:"Event",description:"How many times do players play to score a bronze? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-bronze",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-silver",row:177,item:"Level 1: Silver",pageevent:"Event",description:"How many times do players play to score a silver? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-silver",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-1-gold",row:178,item:"Level 1: Gold",pageevent:"Event",description:"How many times do players play to score a gold? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-gold",eventlabel:"Level 1",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-level-2-level-played",row:179,item:"Level 2: level played",pageevent:"Page",description:"Level is played",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-played",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-level-complete",row:180,item:"Level 2: level complete ",pageevent:"Event",description:"Level is completed",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-replays-required-to-complete",row:181,item:"Level 2: replays required to complete",pageevent:"Event",description:"How many replays to succeed?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-toWin",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-replays-after-level-complete",row:182,item:"Level 2: replays after level complete",pageevent:"Event",description:"How many replays after level complete?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-after-game-completed-toWin",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-final-score-achieved",row:183,item:"Level 2: final score achieved",pageevent:"Event",description:"What is the final score for that level?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-final-score",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-success-score",row:184,item:"Level 2: success score",pageevent:"Event",description:"How many times do people reach a success score the first time?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete-on1stTry",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-fail-score",row:185,item:"Level 2: fail score",pageevent:"Event",description:"What fail scores are reached?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-failScores",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-quit-point",row:186,item:"Level 2: quit point",pageevent:"Event",description:"What is the quit point?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-exit",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-bronze",row:187,item:"Level 2: Bronze",pageevent:"Event",description:"How many times do players play to score a bronze? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-bronze",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-silver",row:188,item:"Level 2: Silver",pageevent:"Event",description:"How many times do players play to score a silver? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-silver",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-2-gold",row:189,item:"Level 2: Gold",pageevent:"Event",description:"How many times do players play to score a gold? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-gold",eventlabel:"Level 2",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-level-3-level-played",row:190,item:"Level 3: level played",pageevent:"Page",description:"Level is played",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-played",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-level-complete",row:191,item:"Level 3: level complete ",pageevent:"Event",description:"Level is completed",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-replays-required-to-complete",row:192,item:"Level 3: replays required to complete",pageevent:"Event",description:"How many replays to succeed?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-toWin",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-replays-after-level-complete",row:193,item:"Level 3: replays after level complete",pageevent:"Event",description:"How many replays after level complete?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-after-game-completed-toWin",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-final-score-achieved",row:194,item:"Level 3: final score achieved",pageevent:"Event",description:"What is the final score for that level?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-final-score",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-success-score",row:195,item:"Level 3: success score",pageevent:"Event",description:"How many times do people reach a success score the first time?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete-on1stTry",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-fail-score",row:196,item:"Level 3: fail score",pageevent:"Event",description:"What fail scores are reached?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-failScores",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-quit-point",row:197,item:"Level 3: quit point",pageevent:"Event",description:"What is the quit point?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-exit",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-bronze",row:198,item:"Level 3: Bronze",pageevent:"Event",description:"How many times do players play to score a bronze? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-bronze",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-silver",row:199,item:"Level 3: Silver",pageevent:"Event",description:"How many times do players play to score a silver? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-silver",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-3-gold",row:200,item:"Level 3: Gold",pageevent:"Event",description:"How many times do players play to score a gold? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-gold",eventlabel:"Level 3",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-level-4-level-played",row:201,item:"Level 4: level played",pageevent:"Page",description:"Level is played",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-played",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-level-complete",row:202,item:"Level 4: level complete ",pageevent:"Event",description:"Level is completed",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-replays-required-to-complete",row:203,item:"Level 4: replays required to complete",pageevent:"Event",description:"How many replays to succeed?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-toWin",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-replays-after-level-complete",row:204,item:"Level 4: replays after level complete",pageevent:"Event",description:"How many replays after level complete?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-after-game-completed-toWin",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-final-score-achieved",row:205,item:"Level 4: final score achieved",pageevent:"Event",description:"What is the final score for that level?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-final-score",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-success-score",row:206,item:"Level 4: success score",pageevent:"Event",description:"How many times do people reach a success score the first time?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete-on1stTry",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-fail-score",row:207,item:"Level 4: fail score",pageevent:"Event",description:"What fail scores are reached?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-failScores",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-quit-point",row:208,item:"Level 4: quit point",pageevent:"Event",description:"What is the quit point?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-exit",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-bronze",row:209,item:"Level 4: Bronze",pageevent:"Event",description:"How many times do players play to score a bronze? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-bronze",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-silver",row:210,item:"Level 4: Silver",pageevent:"Event",description:"How many times do players play to score a silver? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-silver",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-4-gold",row:211,item:"Level 4: Gold",pageevent:"Event",description:"How many times do players play to score a gold? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-gold",eventlabel:"Level 4",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-level-5-level-played",row:212,item:"Level 5: level played",pageevent:"Page",description:"Level is played",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-played",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-level-complete",row:213,item:"Level 5: level complete ",pageevent:"Event",description:"Level is completed",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-replays-required-to-complete",row:214,item:"Level 5: replays required to complete",pageevent:"Event",description:"How many replays to succeed?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-toWin",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-replays-after-level-complete",row:215,item:"Level 5: replays after level complete",pageevent:"Event",description:"How many replays after level complete?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-after-game-completed-toWin",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-final-score-achieved",row:216,item:"Level 5: final score achieved",pageevent:"Event",description:"What is the final score for that level?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-final-score",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-success-score",row:217,item:"Level 5: success score",pageevent:"Event",description:"How many times do people reach a success score the first time?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete-on1stTry",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-fail-score",row:218,item:"Level 5: fail score",pageevent:"Event",description:"What fail scores are reached?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-failScores",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-quit-point",row:219,item:"Level 5: quit point",pageevent:"Event",description:"What is the quit point?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-exit",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-bronze",row:220,item:"Level 5: Bronze",pageevent:"Event",description:"How many times do players play to score a bronze? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-bronze",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-silver",row:221,item:"Level 5: Silver",pageevent:"Event",description:"How many times do players play to score a silver? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-silver",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-5-gold",row:222,item:"Level 5: Gold",pageevent:"Event",description:"How many times do players play to score a gold? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-gold",eventlabel:"Level 5",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-page-level-6-level-played",row:223,item:"Level 6: level played",pageevent:"Page",description:"Level is played",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-played",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-level-complete",row:224,item:"Level 6: level complete ",pageevent:"Event",description:"Level is completed",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-replays-required-to-complete",row:225,item:"Level 6: replays required to complete",pageevent:"Event",description:"How many replays to succeed?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-toWin",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-replays-after-level-complete",row:226,item:"Level 6: replays after level complete",pageevent:"Event",description:"How many replays after level complete?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Replays-after-game-completed-toWin",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-final-score-achieved",row:227,item:"Level 6: final score achieved",pageevent:"Event",description:"What is the final score for that level?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-final-score",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-success-score",row:228,item:"Level 6: success score",pageevent:"Event",description:"How many times do people reach a success score the first time?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-complete-on1stTry",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-fail-score",row:229,item:"Level 6: fail score",pageevent:"Event",description:"What fail scores are reached?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-failScores",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-quit-point",row:230,item:"Level 6: quit point",pageevent:"Event",description:"What is the quit point?",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-exit",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-bronze",row:231,item:"Level 6: Bronze",pageevent:"Event",description:"How many times do players play to score a bronze? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-bronze",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-silver",row:232,item:"Level 6: Silver",pageevent:"Event",description:"How many times do players play to score a silver? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-silver",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"},{id:"colonelquest-event-level-6-gold",row:233,item:"Level 6: Gold",pageevent:"Event",description:"How many times do players play to score a gold? ",pagetrackurl:"colonelquest",eventcategory:"ColonelQuest-levels",eventaction:"Level-gold",eventlabel:"Level 6",eventvalue:"Desktop\nMobile",desktop:"yes",mobile:"yes"}]}
}),define("model/tracking_collection",["jquery","underscore","backbone","data/tracking_data"],function(e,t,i,s){var n=i.Collection.extend({initialize:function(){}});return new n(s.TRACK_DATA)}),define("util/google_analytics",[],function(){"use strict";return function(e,t,i,s,n,o,r){e.GoogleAnalyticsObject=n,e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},e[n].l=1*new Date,o=t.createElement(i),r=t.getElementsByTagName(i)[0],o.async=1,o.src=s,r.parentNode.insertBefore(o,r)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),function(){window.ga.apply(window.ga,arguments)}}),define("model/stage_model",["jquery","underscore","backbone","model/app_model"],function(e,t,i,s){var n={COLONEL_EARLY_YEARS:"AColonel_early_years",COLONEL_GUN_FIGHT:"AColonel_gun_fight",COLONEL_MANDOLIN:"AColonel_mandolin",COLONEL_LOOSE_LIPS:"AColonel_loose_lips",COLONEL_LOOSE_LIPS_BROKEN:"AColonel_loose_lips_broken",COLONEL_GAMES:"AColonel_games",COLONEL_DEPARTED:"AColonel_departed",BUCKET:"ABucket"},o={CAROUSEL:"carousel",EARLY_YEARS:"early_years",MANDOLIN:"mandolin",GUN_FIGHT:"gun_fight",LOOSE_LIPS:"loose_lips",GAME:"game",MAPS:"departed_colonel",INTERRUPTION:"interruption"},r={};r[s.PAGES.CAROUSEL]={label:o.CAROUSEL,loadGroup:"main"},r[s.PAGES.EARLY_YEARS]={label:o.EARLY_YEARS,loadGroup:"early_years"},r[s.PAGES.MANDOLIN]={label:o.MANDOLIN,loadGroup:"mandolin"},r[s.PAGES.GUN_FIGHT]={label:o.GUN_FIGHT,loadGroup:"gun_fight"},r[s.PAGES.LOOSE_LIPS]={label:o.LOOSE_LIPS,loadGroup:"loose_lips"},r[s.PAGES.GAME]={label:o.GAME,loadGroup:"game"},r[s.PAGES.DEPARTED_COLONEL]={label:o.MAPS,loadGroup:"maps"};var a={COLONEL_EARLY_YEARS:"mc_colonel_holder_early_years",COLONEL_GUN_FIGHT:"mc_colonel_holder_gun_fight",COLONEL_MANDOLIN:"mc_colonel_holder_mandolin",COLONEL_LOOSE_LIPS:"mc_colonel_holder_loose_lips",COLONEL_LOOSE_LIPS_BROKEN:"mc_colonel_holder_loose_lips_broken",COLONEL_GAMES:"mc_colonel_holder_games",COLONEL_DEPARTED:"mc_colonel_holder_departed",BUCKET:"mc_bucket",FOREGROUND_LAYER:"mc_foreground_element",OVERLAY_HOLDER:"mc_embed_holder"},h={};h.CLIPS=a,h.LINKAGES=n,h.LABELS=o,h.DETAILS_BY_PAGE=r;var l=i.Model.extend({defaults:{animateTo:null,createJSAnimation:null,renderState:null},addEmbed:function(e){this.trigger("show_embed",e)},animationInterruption:function(e){this.set("animation_interrupted",e,{silent:!1}),e&&this.trigger("animation_interrupted")},removeEmbed:function(e){this.trigger("remove_embed",e)},getDetailsByPage:function(e){return r[e]},getDetailsByLabel:function(e){return t.findWhere(r,{label:e})},getDetailsByLoadGroup:function(e){return t.findWhere(r,{loadGroup:e})},getStage:function(){return this.get("createJSAnimation").stage},initialize:function(){},setAnimationComplete:function(e){this.trigger("animationComplete",e)},animateTo:function(e){this.trigger("animateTo",e)},createJSAnimation:function(e,t,i,s){this.set({createJSAnimation:e,animationHeight:i,animationWidth:t,$canvas:s})},setClipContents:function(e,t){this.trigger("set_asset",e,t)}});return t.extend(l.prototype,h),new l}),define("controller/tracking_controller",["jquery","underscore","route/router","model/app_model","model/tracking_collection","util/google_analytics","config","view/common/communicator","console","data/game_tracking_data","model/stage_model","data/tracking_data","events/sound_events","model/slides_model","model/sound_model"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p){"use strict";var m={init:function(){o("create",r.getGoogleID(),"auto"),a.on(a.EVENTS.GAME_TRACKING,this.onGameTrackingEvent,this),a.on(a.EVENTS.FLOODLIGHT_TRACKING,this.trackFloodlight,this),a.on(a.EVENTS.TRACKING,this.onTrackingEvent,this),a.on(a.EVENTS.SITE.DESKTOP.LEGAL,this.onShowLegal,this),a.on(a.EVENTS.SITE.SHARE.FACEBOOK.SHARE_GAME_RESULTS,this.onEndGameFaceSharePage,this),a.on(a.EVENTS.SITE.SHARE.TWITTER.SHARE_GAME_RESULTS,this.onEndGameTwitterSharePage,this),a.on(a.EVENTS.SITE.SHARE.FACEBOOK.EMBED_SHARE_CURRENT_PAGE,this.onEmbedFaceSharePage,this),a.on(a.EVENTS.SITE.SHARE.TWITTER.EMBED_SHARE_CURRENT_PAGE,this.onEmbedTwitterSharePage,this),a.on(a.EVENTS.SITE.SHARE.FACEBOOK.SHARE_CURRENT_PAGE,this.onFaceSharePage,this),a.on(a.EVENTS.SITE.SHARE.TWITTER.SHARE_CURRENT_PAGE,this.onTwitterSharePage,this),a.on(u.TOGGLE_MUTE,this.onToggleSound,this),a.on(a.EVENTS.SITE.SHARE.TWITTER.SHARE_CURRENT_SLIDE,this.onTwitterShareCurrentSlide,this),a.on(a.EVENTS.SITE.SHARE.FACEBOOK.SHARE_CURRENT_SLIDE,this.onFacebookShareCurrentSlide,this),a.on(a.EVENTS.SITE.DESKTOP.EARLY_YEARS.SCUBBER_CLICKED,this.onEarlyYearsScrubberClick,this),c.on("show_embed",this.onEmbed,this),s.on("change:page",this.onPage,this),g.on("change:slide",this.onEarlyYearsSlideShow,this),p.on("change:volume",this.onVolume,this),s.on("change:menu_visibility",this.onHamburgerMenuChange)},onVolume:function(){},onGameTrackingEvent:function(e,t){this.trackGameEvent(e,t)},trackGameEvent:function(e,i){var s=l.TRACKS[e];if(s){var n=s;void 0!==i&&(n=t.extend({},s,i)),"Page"===n.pageevent?o("send","pageview",n.pagetrackurl):"Event"===n.pageevent?o("send","event",n.eventcategory,n.eventaction,n.eventlabel):h.error("Track not found: "+e)}},onEarlyYearsSlideShow:function(e){var t=g.get("slide"),i=d.TRACK_IDS["EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_"+t];if(a.trigger(a.EVENTS.TRACKING,i),e){var s=e.previous("slide");i=t>s?d.TRACK_IDS["EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_"+s+"NEXT"]:d.TRACK_IDS["EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_"+s+"PREVIOUS"],i&&a.trigger(a.EVENTS.TRACKING,i)}},onHamburgerMenuChange:function(){var e=s.get("menu_visibility");e?a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_HAMBURGER_MENU_TAP):a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_CLOSE)},onPage:function(e,t){switch(t){case s.PAGES.CAROUSEL:var i=e.previous("page");if(i===s.PAGES.GUN_FIGHT&&a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.GASOLINE_GUN_FIGHT_EVENT_BACK_TO_HALL_BUTTON),i===s.PAGES.EARLY_YEARS){var n=g.get("slide");a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS["EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_"+n+"BACK_TO_HALL"])}i===s.PAGES.MANDOLIN&&a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.PLAYS_MANDOLIN_EVENT_BACK_TO_HALL_BUTTON),i===s.PAGES.LOOSE_LIPS&&a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.KFC_SECRET_RECIPE_REVEALED_EVENT_BACK_TO_HALL_BUTTON),i===s.PAGES.DEPARTED_COLONEL&&a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.LEGACY_EVENT_BACK_TO_HALL_BUTTON),a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_PAGE_HALL_OF_COLONELS);break;case s.PAGES.EARLY_YEARS:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.EARLY_YEARS_PAGE_EARLY_YEARS_LOADER);break;case s.PAGES.GUN_FIGHT:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.GASOLINE_GUN_FIGHT_PAGE_GASOLINE_GUNFIGHT);break;case s.PAGES.MANDOLIN:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.PLAYS_MANDOLIN_PAGE_MANDOLIN_COLONEL);break;case s.PAGES.LOOSE_LIPS:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.KFC_SECRET_RECIPE_REVEALED_PAGE_LOOSE_LIPPED_COLONEL);break;case s.PAGES.DEPARTED_COLONEL:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.LEGACY_PAGE_DEPARTED_COLONEL);break;case s.PAGES.GAME:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.COLONELQUEST_PAGE_COLONEL_QUEST)}},onTwitterShareCurrentSlide:function(){var e=g.get("slide");a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS["EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_"+e+"TWITTER_SHARE"])},onFacebookShareCurrentSlide:function(){var e=g.get("slide");a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS["EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_"+e+"FB_SHARE"])},onEarlyYearsScrubberClick:function(){var e=g.get("slide");a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS["EARLY_YEARS_EVENT_EARLY_YEARS_SLIDE_"+e+"SCRUB_ANIMATION"])},onTrackingEvent:function(e,t){this.track(e,t)},onShowLegal:function(){},onEndGameFaceSharePage:function(){a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.COLONELQUEST_EVENT_END_GAME_SHARE_FACEBOOK)},onEndGameTwitterSharePage:function(){a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.COLONELQUEST_EVENT_END_GAME_SHARE_TWITTER)},onEmbedFaceSharePage:function(){s.get("page")===s.PAGES.GAME?a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.COLONELQUEST_EVENT_EMBED_SHARE_FACEBOOK):this.onFaceSharePage()},onEmbedTwitterSharePage:function(){s.get("page")===s.PAGES.GAME?a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.COLONELQUEST_EVENT_EMBED_SHARE_TWITTER):this.onTwitterSharePage()},onFaceSharePage:function(){switch(a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_SOCIAL_SHARE_BUTTONS_FB),s.get("page")){case s.PAGES.CAROUSEL:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_SOCIAL_SHARE_BUTTONS_FB),a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_MENU_FACEBOOK);break;case s.PAGES.GUN_FIGHT:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.GASOLINE_GUN_FIGHT_EVENT_FB_SHARE);break;case s.PAGES.MANDOLIN:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.PLAYS_MANDOLIN_EVENT_FB_SHARE);break;case s.PAGES.LOOSE_LIPS:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.KFC_SECRET_RECIPE_REVEALED_EVENT_FB_SHARE);break;case s.PAGES.DEPARTED_COLONEL:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.LEGACY_EVENT_FB_SHARE);break;case s.PAGES.GAME:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.COLONELQUEST_EVENT_FB_SHARE)}},onTwitterSharePage:function(){switch(a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_SOCIAL_SHARE_BUTTONS_TWT),s.get("page")){case s.PAGES.CAROUSEL:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_SOCIAL_SHARE_BUTTONS_TWT),a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_MENU_TWITTER);break;case s.PAGES.GUN_FIGHT:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.GASOLINE_GUN_FIGHT_EVENT_TWITTER_SHARE);break;case s.PAGES.MANDOLIN:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.PLAYS_MANDOLIN_EVENT_TWITTER_SHARE);break;case s.PAGES.LOOSE_LIPS:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.KFC_SECRET_RECIPE_REVEALED_EVENT_TWITTER_SHARE);break;case s.PAGES.DEPARTED_COLONEL:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.LEGACY_EVENT_TWITTER_SHARE);break;case s.PAGES.GAME:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.COLONELQUEST_EVENT_TWITTER_SHARE)}},onToggleSound:function(){a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_MENU_AUDIO_TOGGLE)},onEmbed:function(e){var t=e||s.get("page");switch(t){case s.PAGES.ABOUT:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_MENU_ABOUT_OVERLAY);break;case s.PAGES.GUN_FIGHT:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.GASOLINE_GUN_FIGHT_EVENT_EMBED_OVERLAY);break;case s.PAGES.MANDOLIN:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.PLAYS_MANDOLIN_EVENT_EMBED_OVERLAY);break;case s.PAGES.GAME:a.trigger(a.EVENTS.TRACKING,d.TRACK_IDS.COLONELQUEST_EVENT_EMBED_OVERLAY)}},track:function(e,i){var s=n.get(e),a=r.FLOW===r.FLOWS.MOBILE||r.FLOW===r.FLOWS.TABLET;if(s){var l=s.toJSON();if(a&&"no"===l.mobile.toLowerCase())return;if(!a&&"no"===l.desktop.toLowerCase())return;switch(l.pageevent){case"Page":case"page":o("send","pageview",l.pagetrackurl);break;case"Event":case"event":var c=/desktop\nmobile/i,d=/mobile\ndesktop/i;if(l.eventvalue.match(c)?i=a?0:1:l.eventvalue.match(d)&&(i=a?0:1),l.eventvalue&&(t.isUndefined(i)||null===i))return void h.error("Track value not found: "+e+" ("+l.eventvalue+")");r.EMBEDDED&&(l.eventcategory+="_htmlEmbed"),o("send","event",l.eventcategory,l.eventaction,l.eventlabel,i);break;default:h.error("Track type not found: "+e+" - "+l.pageevent)}}else h.error("Track not found: "+e)},trackFloodlight:function(e){var t=l.TRACKS[e];h.log("floodlight",t),t&&this.floodlight(t.flood_src,t.flood_type,t.flood_cat,!0)},floodlight:function(e,t,i,s){var n=Math.random()+"",o=1e16*n,r=document.body.appendChild(document.createElement("div")),a=s?";ord=1;num=":";ord=";r.setAttribute("id","DCLK_FLDiv1"),r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.width="1px",r.style.height="1px",r.style.display="none",r.innerHTML='<iframe id="DCLK_FLIframe1" src="https://'+e+".fls.doubleclick.net/activityi;src="+e+";type="+t+";cat="+i+a+o+'?" width="1" height="1" frameborder="0" style="display:none"></iframe>'}};return m.init(),m}),define("view/common/transitioner/transitioner",["jquery","underscore","config","backbone","model/app_model"],function(e,t,i,s,n){"use strict";return s.View.extend({activeTransitioner:null,elementsMap:null,initialize:function(e){if(this.options=e,this.evaluateOptions(e),this.elementsMap=this.setupMapping(this.options.viewMap),this.activeTransitioner=this.options.transition,!this.activeTransitioner||!this.activeTransitioner.hasInterface())throw new Error(' Transition needs to extend "transition_interface.js"');this.activeTransitioner.setMap(this.elementsMap),n.on("change:page",this.onAppModelPage,this)},evaluateOptions:function(){var e=["viewMap","transition"];t.each(e,function(e){if(!t.has(this.options,e))throw new Error(e+" option not set")},this)},setupMapping:function(e){var i={};return t.each(e,function(e,s){if(!e.className||!e.nodeSelector)throw new Error("RouteObject missing options: "+s);var n=e.className,o=this.$(e.nodeSelector),r=o.parent(),a={element:o,parent:r,className:n};t.defaults(a,e),i[s]=a},this),i},onResize:function(e){this.activeTransitioner&&this.activeTransitioner.onResize(e)},onAppModelPage:function(e,t){this.activeTransitioner.show(t)}})}),define("view/common/sound_request",["jquery","underscore","backbone","createjs"],function(e,t,i,s){"use strict";var n=function(e){this.id=e.id,this.config=e.config};return t.extend(n.prototype,i.Events),t.extend(n.prototype,{setInstance:function(e){this.soundInstance=e,this.trigger("instance_set")},getProgress:function(){if(!this.soundInstance)return 0;var e=this.soundInstance.getPosition()/this.soundInstance.getDuration();return(this.soundInstance.playState===s.Sound.PLAY_FINISHED||e>1)&&(e=1),e},isCorrectClass:function(){return!0},destroy:function(){this.off(),this.soundInstance=null}}),n}),define("view/common/base_view",["jquery","underscore","backbone","model/loader_collection","config","view/common/sound_request","events/sound_events","view/common/communicator","console"],function(e,t,i,s,n,o,r,a){"use strict";var h=i.View.extend({initialize:function(){},setup:function(){},show:function(){this.onShowComplete()},onShowComplete:function(){},render:function(){},hide:function(){this.onHideComplete()},onHideComplete:function(){this.trigger("hideComplete")},createSoundRequest:function(e,t){var i=new o({id:e.id,config:t});return i},playSound:function(e){a.trigger(r.PLAY_SOUND,e)},stopSound:function(e,t){e&&a.trigger(r.STOP_SOUND,e,t)},onResize:function(){},destroy:function(){this.stopListening(),this.off()}});return h}),define("view/pages/mobile/loader",["jquery","underscore","view/common/base_view","view/common/communicator","config","route/router","model/app_model","model/loader_collection"],function(e,t,i,s,n,o,r,a){"use strict";return i.extend({events:{},initialize:function(){this.$btn=this.$(".js-startBtn"),this.$loaderBar=this.$(".js-loaderBarProgress"),i.prototype.initialize.apply(this,arguments)},setup:function(){this.trigger("view_ready")},show:function(){a.on("progress",this.onLoadProgress,this)},removeEvents:function(){a.off("progress",this.onLoadProgress,this),a.off("complete",this.onLoaderComplete,this)},hide:function(){this.removeEvents(),i.prototype.hide.apply(this,arguments)},onLoadProgress:function(e){var t=100*e.progress;this.$loaderBar.css("width",t+"%")}})}),define("view/pages/mobile/mobile_base_view",["jquery","underscore","view/common/base_view","view/common/communicator","backbone","model/loader_collection","model/app_model"],function(e,t,i,s,n,o,r){"use strict";return i.extend({initialize:function(e){t.defaults(e,{groupID:r.get("page")}),this.groupID=e.groupID},setup:function(){this.onViewReady(),this.trigger("view_ready")},onViewReady:function(){},show:function(){this.onShowComplete()},hide:function(){this.onHideComplete()},onHideComplete:function(){i.prototype.onHideComplete.apply(this,arguments)},destroy:function(){r.off(null,null,this),o.off(null,null,this),i.prototype.destroy.apply(this,arguments)}})}),define("view/animations/createjs_animations/mobile/carousel",[],function(){"use strict";return{manifest:[{src:"/js/view/animations/createjs_animations/mobile/carousel.lib.js",id:"carousel.lib.js"},{src:"/img/easel/mobile/carousel/carousel_0_sheet.png",createjs:{ns:"carousel",spritesheet:[{x:558,y:642,width:213,height:272,id:"ll_s_board",src:"images/ll_s_board.png"},{x:1138,y:0,width:200,height:584,id:"ll_s_pole",src:"images/ll_s_pole.png"},{x:0,y:1065,width:119,height:345,id:"mobile_hall_departed",src:"images/mobile_hall_departed.png"},{x:1340,y:0,width:157,height:365,id:"mobile_hall_early",src:"images/mobile_hall_early.png"},{x:0,y:0,width:1136,height:640,id:"mobile_hall_fbg",src:"images/mobile_hall_fbg.jpg"},{x:1340,y:367,width:135,height:382,id:"mobile_hall_games",src:"images/mobile_hall_games.png"},{x:390,y:642,width:166,height:397,id:"mobile_hall_gunfight",src:"images/mobile_hall_gunfight.png"},{x:206,y:642,width:182,height:402,id:"mobile_hall_looselip",src:"images/mobile_hall_looselip.png"},{x:0,y:642,width:204,height:421,id:"mobile_hall_mandolin",src:"images/mobile_hall_mandolin.png"}],width:1497,height:1410}}],root:"carousel",ns:"carousel",width:"1136",height:"640",fps:"30",js:"carousel.lib.js"}}),define("view/common/createjs_animation",["jquery","underscore","backbone","util/createjs","model/loader_collection","model/app_model"],function(e,t,i,s,n,o){var r={};return i.View.extend({stage:null,root:null,initialize:function(t,i){if(this.width=t.width,this.height=t.height,this.ratio=this.width/this.height,this.lib=window.lib[t.ns],this.root=new s.lib[t.ns][t.root],this.appendedScripts=[],!r[t.js]){r[t.js]=n.getResult(t.js);var o=r[t.js];this.appendedScripts.push(o),e("head").append(o)}i&&(this.canvas=e('<canvas width="'+this.width+'" height="'+this.height+'"></canvas>'),this.setElement(this.canvas[0]),this.stage=new s.Stage(this.el),this.stage.addChild(this.root),s.Touch.enable(this.stage),this.stage.enableMouseOver(),this.stage.update())},update:function(){this.stage.update()},resize:function(t){if(this.canvas){var i,s,n=o.get("viewport_width")||e(window).innerWidth(),r=o.get("viewport_height")||e(window).innerHeight(),a=n/r;switch(t){case"contain":n>r?(i=r*this.ratio,s=r,i>n&&(i=n,s=n/this.ratio)):(i=r*this.ratio,s=r);break;case"cover":this.ratio>a?(i=r*this.ratio,s=r):(i=n,s=n/this.ratio);break;default:this.ratio>a?(i=r*this.ratio,s=r):(i=n,s=n/this.ratio)}this.canvas.css({width:i,height:s,"margin-left":-1*(i-n)/2,"margin-top":-1*(s-r)/2})}},destroy:function(){this.stage&&(s.Touch.disable(this.stage),this.stage.removeAllChildren()),t.each(this.appendedScripts,function(e){e.remove&&e.remove()},this),this.appendedScripts=null,this.stage=null,this.$el.remove(),this.root.removeAllEventListeners(),this.root=null}})}),define("view/common/button_helper",["jquery","underscore","view/common/base_view","view/common/communicator","backbone","createjs"],function(e,t,i,s,n,o){"use strict";return i.extend({isHidden:!0,initialize:function(e){this.mc=e.mc;var i={out_label:"out",over_label:"over",down_label:"down",hide_label:"hide",show_label:"show",hit_area:null,animation:!0,enable_frames:!0};t.defaults(e,i),this.options=e,this.hasHideAnimation=t.where(this.mc.labels,{label:this.options.hide_label}).length>0,this.hasShowAnimation=t.where(this.mc.labels,{label:this.options.show_label}).length>0,e.customHelper?(this.helper=new e.customHelper(e),this.mc.addEventListener("mousedown",t.bind(this.onClick,this)),this.helper.on("mouseover",this.onMouseOver,this),this.helper.on("mouseout",this.onMouseOut,this)):(e.enable_frames||(e.out_label=null,e.over_label=null,e.down_label=null,e.animation=!1),this.helper=new o.ButtonHelper(this.mc,e.out_label,e.over_label,e.down_label,e.animation,e.hit_area),this.mc.addEventListener("mousedown",t.bind(this.onClick,this)),this.mc.addEventListener("mouseover",t.bind(this.onMouseOver,this)),this.mc.addEventListener("mouseout",t.bind(this.onMouseOut,this)),this.mc.addEventListener("pressmove",t.bind(this.onPressMove,this))),this.hasShowAnimation&&this.mc.gotoAndStop(0)},onPressMove:function(e){this.helper.enabled&&this.trigger("pressmove",e)},hide:function(e){if(!this.isHidden){var t=this;if(this.isHidden=!0,this.disable(),this.hasHideAnimation&&!e){var i=this.mc.addEventListener("hide_complete",function(){t.trigger("hide_complete"),t.mc.removeEventListener("hide_complete",i)});this.mc.gotoAndPlay(this.options.hide_label)}else this.mc.visible=!1}},show:function(){this.isHidden&&(this.isHidden=!1,this.enable(),this.mc.visible=!0,this.hasShowAnimation&&this.mc.gotoAndPlay(this.options.show_label))},onMouseOut:function(){this.helper.enabled&&this.trigger("mouseout",this.mc,this)},onMouseOver:function(){this.helper.enabled&&this.trigger("mouseover",this.mc,this)},onClick:function(){this.helper.enabled&&this.trigger("mousedown",this.mc,this)},disable:function(){this.helper.setEnabled(!1)},enable:function(){this.helper.setEnabled(!0),this.helper._isPressed=!1},destroy:function(){this.off(),this.helper.off&&this.helper.off(),this.helper=null,this.mc.removeAllEventListeners(),this.mc=null,i.prototype.destroy.apply(this,arguments)}})}),define("view/pages/mobile/carousel",["jquery","underscore","view/pages/mobile/mobile_base_view","view/common/communicator","backbone","config","view/animations/createjs_animations/mobile/carousel","view/common/createjs_animation","model/app_model","model/loader_collection","view/common/button_helper","route/router","view/common/sound_request","events/sound_events","data/tracking_data","TweenMax"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p){"use strict";var m=[],_=s.EVENTS.SITE.SOUNDS.MOBILE.HALL;for(var f in _)_[f].id=f,m.push(_[f]);return l.loadManifest(r.manifest),l.add(m),i.extend({initialize:function(){this.hasPlayedWelcomeRequest=!1,i.prototype.initialize.apply(this,arguments)},onViewReady:function(){h.on("update",this.onUpdate,this),this.hallMusicRequest=this.createSoundRequest(s.EVENTS.SITE.SOUNDS.MOBILE.HALL.HALL_MUSIC),this.welcomeRequest=this.createSoundRequest(s.EVENTS.SITE.SOUNDS.MOBILE.HALL.WELCOME),this.createJSAnimation=new a(r,!0),this.root=this.createJSAnimation.root,this.early_years_colonel=new c({mc:this.root.mc_colonel_holder_early_years,hit_area:this.root.mc_colonel_holder_early_years.mc_hit,enable_frames:!1}),this.gun_fight_colonel=new c({mc:this.root.mc_colonel_holder_gun_fight,hit_area:this.root.mc_colonel_holder_gun_fight.mc_hit,enable_frames:!1}),this.mandolin_colonel=new c({mc:this.root.mc_colonel_holder_mandolin,hit_area:this.root.mc_colonel_holder_mandolin.mc_hit,enable_frames:!1}),this.loose_lipped_colonel=new c({mc:this.root.mc_colonel_holder_loose_lips,hit_area:this.root.mc_colonel_holder_loose_lips.mc_hit,enable_frames:!1}),this.loose_lipped_colonel.mc.gotoAndStop(h.get("loose_lips_out_of_order")?"outOfOrder":0),this.games_colonel=new c({mc:this.root.mc_colonel_holder_games,hit_area:this.root.mc_colonel_holder_games.mc_hit,enable_frames:!1}),this.departed_colonel=new c({mc:this.root.mc_colonel_holder_departed,hit_area:this.root.mc_colonel_holder_departed.mc_hit,enable_frames:!1}),this.colonels=[this.early_years_colonel,this.gun_fight_colonel,this.mandolin_colonel,this.loose_lipped_colonel,this.games_colonel,this.departed_colonel];for(var e=0;e<this.colonels.length;e++){var t=this.colonels[e];t.on("mouseover",this.onColonelRollOver,this),t.on("mouseout",this.onColonelRollOut,this),t.on("mousedown",this.onColonelClick,this)}this.$el.append(this.createJSAnimation.$el)},onColonelClick:function(e,t){switch(t){case this.early_years_colonel:s.trigger(s.EVENTS.TRACKING,p.TRACK_IDS.HOME_EVENT_EARLY_YEARS_COLONEL),d.navigate(h.PAGES.EARLY_YEARS,{updateURL:!1});break;case this.gun_fight_colonel:s.trigger(s.EVENTS.TRACKING,p.TRACK_IDS.HOME_EVENT_GASOLINE_GUNFIGHT_COLONEL),d.navigate(h.PAGES.GUN_FIGHT,{updateURL:!1});break;case this.mandolin_colonel:s.trigger(s.EVENTS.TRACKING,p.TRACK_IDS.HOME_EVENT_MANDOLIN_COLONEL),d.navigate(h.PAGES.MANDOLIN,{updateURL:!1});break;case this.loose_lipped_colonel:s.trigger(s.EVENTS.TRACKING,p.TRACK_IDS.HOME_EVENT_LOOSE_LIPPED_COLONEL),d.navigate(h.PAGES.LOOSE_LIPS,{updateURL:!1});break;case this.games_colonel:s.trigger(s.EVENTS.TRACKING,p.TRACK_IDS.HOME_EVENT_COLONELQUEST),d.navigate(h.PAGES.GAME,{updateURL:!1});break;case this.departed_colonel:s.trigger(s.EVENTS.TRACKING,p.TRACK_IDS.HOME_EVENT_DEPARTED_COLONEL),d.navigate(h.PAGES.DEPARTED_COLONEL,{updateURL:!1})}},setup:function(){i.prototype.setup.apply(this,arguments)},onUpdate:function(){this.createJSAnimation.update()},show:function(){this.root.gotoAndPlay("label_show");for(var e=0;e<this.colonels.length;e++){var t=this.colonels[e];t.enable()}this.playSound(this.hallMusicRequest),this.hasPlayedWelcomeRequest||(this.hasPlayedWelcomeRequest=!0,this.playSound(this.welcomeRequest))},hide:function(){for(var e=0;e<this.colonels.length;e++){var i=this.colonels[e];i.disable()}this.root.addEventListener("hide_complete",t.bind(this.onHideComplete,this)),this.root.gotoAndPlay("hide_show")},onResize:function(){this.createJSAnimation&&this.createJSAnimation.resize("contain")},destroy:function(){this.stopSound(this.hallMusicRequest,{time:1}),this.stopSound(this.welcomeRequest,{time:1}),this.createJSAnimation.$el.remove(),this.createJSAnimation.destroy(),i.prototype.destroy.apply(this,arguments)}})}),define("view/common/transitioner/types/transition_interface",["jquery","underscore"],function(e,t){"use strict";var i=function(){};return t.extend(i.prototype,{setMap:function(){throw new Error('Please override "setMap" function')},onResize:function(){throw new Error('Please override "onResize" function')},show:function(){throw new Error('Please override "show" function')},hasInterface:function(){return!0}}),i}),define("view/common/transitioner/types/hide_show_transition_mobile",["jquery","underscore","config","backbone","TweenMax","view/common/communicator","view/common/transitioner/types/transition_interface"],function(e,t,i,s,n,o,r){"use strict";var a=s.View.extend({savePagesInMemory:!0,currentSection:null,createdPages:{},elementsMap:{},initialize:function(e){this.options=e},setMap:function(t){this.elementsMap=t,this.detachAll(),this.transitionOverlay=e(".js-transitionOverlay")},detachAll:function(){t.each(this.elementsMap,function(e){e.element.addClass("isVisible"),e.element.detach()},this)},onResize:function(e){this.currentSection&&this.currentSection.onResize(e)},show:function(e){var t=e;this.currentViewId!==t&&(this.newViewId=t,this.createSection())},createSection:function(){var e=this.elementsMap[this.newViewId],t=e.className;if(!t)throw new Error("View class not found for: "+this.currentViewId);var i=this.currentSection,s=this.currentViewId;this.currentViewId=this.newViewId,this.newViewId=null;var r=this.createdPages[this.currentViewId],a=this.elementsMap[this.currentViewId],h=a.element,l=a.parent;r&&this.savePagesInMemory?this.currentSection=r:(this.currentSection=new t({el:h}),this.createdPages[this.currentViewId]=this.currentSection),this.currentSection.off("view_ready",null,this),this.currentSection.once("view_ready",function(){var e=this;i?(i.off("view_ready",null,this),i.once("hideComplete",function(){o.trigger(o.EVENTS.SITE.PAGE_TRANSITIONS.HIDE_COMPLETE),n.killTweensOf(this.transitionOverlay),n.to(this.transitionOverlay,.6,{autoAlpha:1,ease:"Power2.easeInOut",onComplete:function(){var t=e.elementsMap[s];t.element.detach(),i.destroy(),l.append(h),e.showSection(),n.to(e.transitionOverlay,.6,{autoAlpha:0,ease:"Power2.easeInOut",onComplete:function(){e.onShowComplete()}})}})},this),i.hide()):(l.append(h),this.showSection())},this),this.currentSection.setup()},onShowComplete:function(){this.currentSection.onShowComplete(),o.trigger(o.EVENTS.SITE.PAGE_TRANSITIONS.SHOW_COMPLETE)},showSection:function(){this.currentSection.onResize(),this.currentSection.render(),this.currentSection.show()}});return t.extend(r.prototype,a.prototype),r}),define("view/animations/createjs_animations/mobile/earlyyears",[],function(){"use strict";return{manifest:[{src:"/js/view/animations/createjs_animations/mobile/earlyyears.lib.js",id:"earlyyears.lib.js"},{src:"/img/easel/mobile/earlyyears/earlyyears_1_sheet.png",createjs:{ns:"earlyyears",spritesheet:[{x:749,y:0,width:606,height:455,id:"ey_s_flicker",src:"images/ey_s_flicker.png"},{x:0,y:477,width:638,height:490,id:"eym_bg_ani",src:"images/eym_bg_ani.png"},{x:1061,y:969,width:551,height:120,id:"fore_2sDropShadow",src:"images/fore_2sDropShadow.png"},{x:1357,y:0,width:547,height:442,id:"garage_bg",src:"images/garage_bg.png"},{x:532,y:969,width:527,height:171,id:"garage_fore_1",src:"images/garage_fore_1.png"},{x:0,y:969,width:530,height:175,id:"garage_fore_1sDropShadow",src:"images/garage_fore_1sDropShadow.png"},{x:326,y:1242,width:319,height:150,id:"garage_fore_2",src:"images/garage_fore_2.png"},{x:0,y:1242,width:324,height:155,id:"garage_fore_2sDropShadow",src:"images/garage_fore_2sDropShadow.png"},{x:0,y:1146,width:557,height:94,id:"home_fore_1sDropShadow",src:"images/home_fore_1sDropShadow.png"},{x:1660,y:444,width:195,height:235,id:"leaf",src:"images/leaf.png"},{x:0,y:0,width:747,height:475,id:"school_bg_new_1",src:"images/school_bg_new_1.png"},{x:1357,y:444,width:301,height:405,id:"school_head",src:"images/school_head.png"},{x:749,y:457,width:562,height:449,id:"steam_bg",src:"images/steam_bg.png"}],width:1904,height:1397}},{src:"/img/easel/mobile/earlyyears/earlyyears_0_sheet.png",createjs:{ns:"earlyyears",spritesheet:[{x:0,y:0,width:1136,height:640,id:"_8b_frame_all",src:"images/_8b_frame_all.png"},{x:555,y:1165,width:553,height:438,id:"bgtouchups",src:"images/bgtouchups.png"},{x:0,y:1165,width:553,height:441,id:"bg",src:"images/bg.png"},{x:1882,y:942,width:63,height:82,id:"cubadonkey2",src:"images/cubadonkey2.png"},{x:1843,y:1385,width:31,height:39,id:"cubadoneky2backlegs",src:"images/cubadoneky2backlegs.png"},{x:1826,y:1047,width:92,height:56,id:"cubadoneky3",src:"images/cubadoneky3.png"},{x:1826,y:754,width:84,height:89,id:"cubadoneky4",src:"images/cubadoneky4.png"},{x:1876,y:1385,width:28,height:39,id:"cubadoneky4backlegs",src:"images/cubadoneky4backlegs.png"},{x:1826,y:1232,width:62,height:73,id:"cubadonkey1",src:"images/cubadonkey1.png"},{x:1978,y:571,width:17,height:28,id:"cubadonkey1backlegs",src:"images/cubadonkey1backlegs.png"},{x:1961,y:1385,width:22,height:30,id:"cubadonkey3backlegs",src:"images/cubadonkey3backlegs.png"},{x:1916,y:1360,width:23,height:18,id:"cubahat",src:"images/cubahat.png"},{x:1890,y:1232,width:51,height:72,id:"cubaman",src:"images/cubaman.png"},{x:1972,y:222,width:23,height:38,id:"cuba_donkey_f_legs",src:"images/cuba_donkey_f_legs.png"},{x:0,y:1608,width:329,height:131,id:"ey_copy_1",src:"images/ey_copy_1.png"},{x:1506,y:1298,width:294,height:104,id:"ey_copy_2_new",src:"images/ey_copy_2_new.png"},{x:659,y:1608,width:308,height:126,id:"ey_copy_3",src:"images/ey_copy_3.png"},{x:331,y:1608,width:326,height:131,id:"ey_copy_4",src:"images/ey_copy_4.png"},{x:1506,y:1165,width:309,height:131,id:"ey_copy_5",src:"images/ey_copy_5.png"},{x:1989,y:214,width:1,height:1,id:"ey_m_bg_n1",src:"images/ey_m_bg_n1.jpg"},{x:1912,y:754,width:82,height:82,id:"ey_m_btn_scroll_n1",src:"images/ey_m_btn_scroll_n1.png"},{x:1110,y:1528,width:573,height:69,id:"ey_m_slider_hide",src:"images/ey_m_slider_hide.png"},{x:665,y:1074,width:602,height:71,id:"ey_m_slider_patch_n2",src:"images/ey_m_slider_patch_n2.png"},{x:0,y:642,width:663,height:521,id:"ey_m_text_bg",src:"images/ey_m_text_bg.png"},{x:1138,y:0,width:686,height:544,id:"ey_m_text_bgsDropShadow",src:"images/ey_m_text_bgsDropShadow.png"},{x:1826,y:386,width:159,height:91,id:"ey_m_title_1",src:"images/ey_m_title_1.png"},{x:1826,y:571,width:150,height:90,id:"ey_m_title_2",src:"images/ey_m_title_2.png"},{x:1826,y:663,width:120,height:89,id:"ey_m_title_3",src:"images/ey_m_title_3.png"},{x:1826,y:479,width:158,height:90,id:"ey_m_title_5",src:"images/ey_m_title_5.png"},{x:1826,y:0,width:170,height:123,id:"ey_m_title_new2",src:"images/ey_m_title_new2.png"},{x:1902,y:1164,width:41,height:41,id:"ey_s_button_flickerz",src:"images/ey_s_button_flickerz.png"},{x:1237,y:642,width:570,height:430,id:"ey_s_end_bg",src:"images/ey_s_end_bg.png"},{x:1826,y:263,width:143,height:121,id:"ey_s_end_text",src:"images/ey_s_end_text.png"},{x:1902,y:1207,width:36,height:17,id:"ey_s_eye_l_school",src:"images/ey_s_eye_l_school.png"},{x:1940,y:1207,width:34,height:17,id:"ey_s_eye_r_school",src:"images/ey_s_eye_r_school.png"},{x:665,y:642,width:570,height:430,id:"ey_s_intro_slide",src:"images/ey_s_intro_slide.png"},{x:0,y:1741,width:452,height:76,id:"fore_1",src:"images/fore_1.png"},{x:1322,y:1608,width:456,height:81,id:"fore_1sDropShadow",src:"images/fore_1sDropShadow.png"},{x:1110,y:1411,width:546,height:115,id:"fore_2",src:"images/fore_2.png"},{x:1967,y:1307,width:20,height:22,id:"garage_cat",src:"images/garage_cat.png"},{x:1978,y:601,width:12,height:30,id:"garage_fire_1",src:"images/garage_fire_1.png"},{x:1826,y:1565,width:19,height:29,id:"garage_fire_2",src:"images/garage_fire_2.png"},{x:1826,y:1516,width:23,height:47,id:"garage_fire_3",src:"images/garage_fire_3.png"},{x:1826,y:845,width:78,height:95,id:"garage_man_2",src:"images/garage_man_2.png"},{x:1826,y:1470,width:27,height:44,id:"garage_man_2_1",src:"images/garage_man_2_1.png"},{x:1944,y:1307,width:21,height:22,id:"garage_man_tyre",src:"images/garage_man_tyre.png"},{x:1978,y:633,width:14,height:23,id:"garage_spark_1",src:"images/garage_spark_1.png"},{x:1941,y:1360,width:22,height:18,id:"garage_spark_2",src:"images/garage_spark_2.png"},{x:1851,y:1516,width:22,height:26,id:"garage_spark_3",src:"images/garage_spark_3.png"},{x:1948,y:1331,width:27,height:25,id:"garage_spark_4",src:"images/garage_spark_4.png"},{x:1987,y:386,width:7,height:87,id:"garage_stick_01",src:"images/garage_stick_01.png"},{x:1826,y:1331,width:15,height:95,id:"garage_stick_01sDropShadow",src:"images/garage_stick_01sDropShadow.png"},{x:1826,y:1105,width:90,height:57,id:"garage_truck",src:"images/garage_truck.png"},{x:1882,y:1470,width:23,height:25,id:"garage_truckman",src:"images/garage_truckman.png"},{x:1826,y:1428,width:30,height:40,id:"homerockingchair",src:"images/homerockingchair.png"},{x:1855,y:1470,width:25,height:43,id:"home_boy_1",src:"images/home_boy_1.png"},{x:1870,y:1331,width:46,height:27,id:"home_broom",src:"images/home_broom.png"},{x:1110,y:1165,width:394,height:244,id:"home_building",src:"images/home_building.png"},{x:1918,y:1331,width:28,height:26,id:"home_cat_2",src:"images/home_cat_2.png"},{x:1972,y:1282,width:23,height:19,id:"home_chciken_3",src:"images/home_chciken_3.png"},{x:1893,y:1360,width:21,height:20,id:"home_chicken_1",src:"images/home_chicken_1.png"},{x:1971,y:360,width:25,height:20,id:"home_chicken_2",src:"images/home_chicken_2.png"},{x:1858,y:1428,width:26,height:24,id:"home_dog",src:"images/home_dog.png"},{x:1979,y:1026,width:15,height:15,id:"home_dog_tail",src:"images/home_dog_tail.png"},{x:1138,y:546,width:553,height:90,id:"home_fore_1",src:"images/home_fore_1.png"},{x:1957,y:1105,width:34,height:44,id:"home_man1",src:"images/home_man1.png"},{x:1906,y:845,width:76,height:87,id:"home_smoke",src:"images/home_smoke.png"},{x:1906,y:1385,width:26,height:38,id:"home_snake",src:"images/home_snake.png"},{x:1988,y:263,width:7,height:87,id:"home_stick_01",src:"images/home_stick_01.png"},{x:1972,y:125,width:15,height:95,id:"home_stick_01sDropShadow",src:"images/home_stick_01sDropShadow.png"},{x:1978,y:1232,width:15,height:21,id:"home_woman2_arm_left",src:"images/home_woman2_arm_left.png"},{x:1943,y:1232,width:33,height:48,id:"home_woman_1",src:"images/home_woman_1.png"},{x:1870,y:1360,width:21,height:20,id:"home_woman_1_arms",src:"images/home_woman_1_arms.png"},{x:1947,y:942,width:33,height:60,id:"home_woman_2",src:"images/home_woman_2.png"},{x:1920,y:1047,width:66,height:47,id:"school_chin",src:"images/school_chin.png"},{x:1882,y:1026,width:51,height:18,id:"school_eyebrowleft",src:"images/school_eyebrowleft.png"},{x:1947,y:1004,width:45,height:16,id:"school_eyebrowright",src:"images/school_eyebrowright.png"},{x:1935,y:1026,width:42,height:15,id:"school_eyeliddarkleft",src:"images/school_eyeliddarkleft.png"},{x:1948,y:726,width:43,height:18,id:"school_eyeliddarkright",src:"images/school_eyeliddarkright.png"},{x:1826,y:1307,width:116,height:22,id:"school_eyelid_overlay",src:"images/school_eyelid_overlay.png"},{x:1943,y:1282,width:27,height:20,id:"steamduck",src:"images/steamduck.png"},{x:969,y:1608,width:351,height:106,id:"steam_boat",src:"images/steam_boat.png"},{x:1918,y:1105,width:37,height:47,id:"steam_boy_1",src:"images/steam_boy_1.png"},{x:1948,y:663,width:40,height:61,id:"steam_boy_2",src:"images/steam_boy_2.png"},{x:1945,y:1164,width:37,height:36,id:"steam_dog",src:"images/steam_dog.png"},{x:1826,y:1164,width:74,height:66,id:"steam_lad_1",src:"images/steam_lad_1.png"},{x:1826,y:942,width:54,height:103,id:"steam_lighting_1",src:"images/steam_lighting_1.png"},{x:1934,y:1385,width:25,height:31,id:"steam_lighting_2",src:"images/steam_lighting_2.png"},{x:1843,y:1331,width:25,height:52,id:"steam_man",src:"images/steam_man.png"},{x:1826,y:125,width:144,height:136,id:"steam_smoke",src:"images/steam_smoke.png"},{x:1989,y:125,width:7,height:87,id:"stick_01",src:"images/stick_01.png"},{x:1971,y:263,width:15,height:95,id:"stick_01sDropShadow",src:"images/stick_01sDropShadow.png"}],width:1996,height:1817}}],root:"earlyyears",ns:"earlyyears",width:"1136",height:"640",fps:"30",js:"earlyyears.lib.js"}
}),define("view/modules/extended/early_years/scrubber",["jquery","underscore","view/common/base_view","view/common/communicator","view/common/button_helper","backbone"],function(e,t,i,s,n){"use strict";return i.extend({initialize:function(e){t.bindAll(this,"update"),t.defaults(e,{pathWidth:330}),this.mc=e.mc,this.pathWidth=e.pathWidth,this.stage=e.stage,this.head=this.mc.mc_slider_head,this.path=this.mc.mc_slider_bar,this.button=new n({mc:this.head}),this.button.on("pressmove",this.update,this),this.button.on("mousedown",this.onMouseDown,this)},enable:function(e){e?this.button.enable():this.button.disable()},show:function(){this.isShowing||(this.isShowing=!0,this.button.show())},hide:function(){this.isShowing&&(this.isShowing=!1,this.button.hide())},reset:function(){this.head.x=0},onMouseDown:function(){s.trigger(s.EVENTS.SITE.DESKTOP.EARLY_YEARS.SCUBBER_CLICKED)},update:function(e){this.head.x=Math.min(this.pathWidth,Math.max(0,this.mc.globalToLocal(e.stageX,0).x));var t=this.head.x/this.pathWidth;this.trigger("update",t)},destroy:function(){this.button.destroy(),this.head.removeAllEventListeners(),this.button=null,this.mc=null,this.stage=null,this.head=null,this.path=null}})}),define("view/modules/extended/early_years/view_finder",["jquery","underscore","view/common/base_view","view/common/communicator","backbone","view/common/button_helper"],function(e,t,i,s,n,o){"use strict";return i.extend({initialize:function(e){this.mc=e.mc,this.mc.addEventListener("active_slide",t.bind(this.onActiveSlide,this)),this.slidesHolder=this.mc.mc_slides_holder,this.floor_sign=this.mc.floor_sign,this.allLabels=this.slidesHolder.labels,this.mc.mc_next&&(this.nextButton=new o({mc:this.mc.mc_next}),this.prevButton=new o({mc:this.mc.mc_prev}),this.nextButton.on("mousedown",this.onNext,this),this.prevButton.on("mousedown",this.onPrev,this)),s.trigger(s.EVENTS.SITE.DESKTOP.EARLY_YEARS.TOTAL_SLIDES_SET,this.allLabels.length)},onNext:function(){this.trigger("next")},onPrev:function(){this.trigger("prev")},onActiveSlide:function(e){this.activeSlide=e.slide},onSwapSlide:function(){var e=this.allLabels[this.currentIndex].label;this.slidesHolder.gotoAndStop(e),this.trigger("active_slide_update",e)},setSlide:function(e){this.currentIndex=e-1,this.mc.removeEventListener("swap_slide",this.swapListener),this.swapListener=this.mc.addEventListener("swap_slide",t.bind(this.onSwapSlide,this)),this.mc.gotoAndPlay("label_next_slide")},showCTA:function(e){e?this.CTAShowing||(this.CTAShowing=!0,this.floor_sign.gotoAndPlay("start")):this.CTAShowing&&(this.CTAShowing=!1,this.floor_sign.gotoAndPlay("out"))},update:function(e){if(this.activeSlide){var t=this.activeSlide.timeline.duration-1;this.activeSlide.gotoAndStop(e*t)}},destroy:function(){this.mc.mc_next&&(this.nextButton.destroy(),this.prevButton.destroy()),this.prevButton=null,this.nextButton=null,this.mc.removeAllEventListeners(),this.mc=null,this.swapListener=null,this.activeSlide=null,this.slidesHolder=null,this.allLabels=null,this.off()}})}),define("view/pages/mobile/early_years",["jquery","underscore","view/pages/mobile/mobile_base_view","view/common/communicator","backbone","config","view/animations/createjs_animations/mobile/earlyyears","view/common/createjs_animation","model/app_model","model/loader_collection","view/common/button_helper","route/router","view/common/sound_request","events/sound_events","view/modules/extended/early_years/scrubber","view/modules/extended/early_years/view_finder","data/tracking_data","model/slides_model"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m,_,f){"use strict";l.loadManifest(r.manifest);for(var v=["01_intro.mp3","06_fathers_death.mp3","04_school_dropout.mp3","05_army.mp3","02_tire_sales.mp3","03_streamboat.mp3",""],E=0;E<v.length;E++)if(v[E].length>0){var y=E+1,T={src:o.CDN+"/audio/early_years/"+v[E],id:"slide-"+y,priority:1};l.add(T)}return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments)},onViewReady:function(){h.on("update",this.onUpdate,this),this.currentSlideIndex=1,this.numSlides=7,this.createJSAnimation=new a(r,!0),this.root=this.createJSAnimation.root,this.scrubber=new p({mc:this.root.mc_main.mc_slider_holder,pathWidth:430}),this.scrubber.on("update",this.onScrubberUpdate,this),this.nextButton=this.root.mc_main.mc_next,this.prevButton=this.root.mc_main.mc_prev,this.nextButton.addEventListener("mousedown",t.bind(this.onNext,this)),this.prevButton.addEventListener("mousedown",t.bind(this.onPrev,this)),this.viewFinder=new m({mc:this.root.mc_main.mc_view_finder}),this.viewFinder.on("active_slide_update",this.onActiveSlideUpdate,this),this.trackSlide(1),this.$el.append(this.createJSAnimation.$el)},onNext:function(){var e=this.currentSlideIndex;this.currentSlideIndex++,this.currentSlideIndex>this.numSlides&&(this.currentSlideIndex=1),this.trackSlide(e),this.setSlide(this.currentSlideIndex)},onPrev:function(){var e=this.currentSlideIndex;this.currentSlideIndex--,this.currentSlideIndex<1&&(this.currentSlideIndex=this.numSlides),this.trackSlide(e),this.setSlide(this.currentSlideIndex)},trackSlide:function(){},setSlide:function(e){if(this.previousSlide!==e){this.previousSlide=e,1===e||e===this.numSlides?(this.scrubber.enable(!1),this.scrubber.hide()):(this.scrubber.enable(!0),this.scrubber.show()),f.set("slide",e),this.scrubber.reset(),this.viewFinder.setSlide(e);var t="slide-"+e;this.stopSound(this.speechSoundRequest),this.speechSoundRequest=new u({id:t}),this.playSound(this.speechSoundRequest)}},onShowComplete:function(){this.setSlide(this.currentSlideIndex)},onScrubberUpdate:function(e){this.viewFinder.update(e)},onUpdate:function(){this.createJSAnimation.update()},hide:function(){this.previousSlide=-1,this.stopSound(this.speechSoundRequest),this.onHideComplete()},onResize:function(){this.createJSAnimation&&this.createJSAnimation.resize("contain")},destroy:function(){f.set("slide",-1,{silent:!0}),this.createJSAnimation.$el.remove(),this.createJSAnimation.destroy(),i.prototype.destroy.apply(this,arguments)}})}),define("util/dom_video",["jquery","underscore","view/common/base_view","view/common/communicator","backbone"],function(e,t,i){"use strict";return i.extend({volume:1,initialize:function(i){t.bindAll(this,"onFullscreenChange","onFullscreenEnd");var s={controls:"",url:null,className:""};t.defaults(i,s);var n=i.url,o="<video "+i.controls+" >   ";i.autoplay&&(o="<video "+i.controls+" autoplay>   "),this.$el=e(""+o+'<source type="video/mp4" /><source type="video/ogg" /> </video>'),this.$mp4Source=e(this.$("source")[0]),this.$oggSource=e(this.$("source")[1]),this.$el.addClass(i.className),this.el=this.$el[0],this.el.oncanplay=t.bind(this.onVideoCanPlay,this),this.el.onended=t.bind(this.onVideoComplete,this),this.el.onplay=t.bind(this.onVideoPlay,this),this.el.addEventListener("webkitfullscreenchange",this.onFullscreenChange,!1),this.el.addEventListener("webkitendfullscreen",this.onFullscreenEnd,!1),this.$el.on("mousemove",t.bind(this.onMouseMove,this)),this.setSource(n)},onMouseMove:function(){this.trigger("mousemove")},setSource:function(e){e!==this.url&&(this.ready=!1,this.url=e,this.$mp4Source.attr("src",e+".mp4"),this.$oggSource.attr("src",e+".ogg"),this.$el.load())},onVideoPlay:function(){this.trigger("start",this)},onVideoComplete:function(){this.trigger("ended",this)},onVideoCanPlay:function(){this.ready=!0,this.trigger("ready",this)},setVolume:function(e){this.volume=e,this.setProperties()},fullScreen:function(e){this.isFullScreen=e,this.setProperties()},onFullscreenChange:function(){this.trigger("fullscreen_change",document.webkitIsFullScreen)},onFullscreenEnd:function(){this.trigger("fullscreen_change",!1)},setProperties:function(){this.isReady()&&(this.el.volume=this.volume,this.isFullScreen?this.el.requestFullscreen?this.el.requestFullscreen():this.el.msRequestFullscreen?this.el.msRequestFullscreen():this.el.mozRequestFullScreen?this.el.mozRequestFullScreen():this.el.webkitRequestFullscreen&&this.el.webkitRequestFullscreen():this.el.exitFullscreen?this.el.exitFullscreen():this.el.msExitFullscreen?this.el.msExitFullscreen():this.el.mozCancelFullScreen?this.el.mozCancelFullScreen():this.el.webkitExitFullscreen&&document.webkitExitFullscreen())},isReady:function(){return this.ready},play:function(e){this.paused=!1,this.el.currentTime&&(this.el.currentTime=e||0),this.el.play(),this.trigger("paused",!1)},resume:function(){this.paused=!1,this.el.play(),this.trigger("paused",!1)},pause:function(){this.paused=!0,this.el.pause&&this.el.pause(),this.trigger("paused",!0)},isPaused:function(){return this.paused},destroy:function(){this.el.oncanplay=null,this.el.onended=null,this.el.onplay=null,this.$el.off("mousemove"),this.el.removeEventListener("webkitfullscreenchange",this.onFullscreenChange),this.el.removeEventListener("webkitendfullscreen",this.onFullscreenEnd),this.pause(),this.el.src="",this.$el.children("source").prop("src",""),this.$el.remove().length=0,this.ready=!1,this.el=null,this.$el=null,this.off()}})}),define("view/pages/mobile/gun_fight",["jquery","underscore","config","model/app_model","view/pages/mobile/mobile_base_view","view/common/communicator","util/dom_video","backbone","data/tracking_data"],function(e,t,i,s,n,o,r,a,h){"use strict";return n.extend({events:{"touchend .js-play-btn":"onPlayClick"},initialize:function(){this.videoURL=i.CDN+"/video/play",this.$playBtn=this.$(".js-play-btn"),this.$curtains=this.$(".js-curtains"),this.$videoHolder=this.$(".js-videoHolder"),n.prototype.initialize.apply(this,arguments)},show:function(){},onPlayClick:function(){this.video||(this.$playBtn.hide(),this.$curtains.hide(),this.createVideo())},createVideo:function(){this.$videoHolder.show(),this.video=new r({url:this.videoURL,controls:"controls",className:"videoEl",autoplay:!0}),this.$videoHolder.find(".js-videoinner").append(this.video.el)},destroyVideo:function(){this.video.off(),this.video.destroy(),this.video=null,this.$videoHolder.hide(),this.$playBtn.show(),this.$curtains.show()},onVideoComplete:function(){this.video.fullScreen(!1),this.destroyVideo()},onPaused:function(){o.trigger(o.EVENTS.TRACKING,h.TRACK_IDS.GASOLINE_GUN_FIGHT_EVENT_PAUSE_BUTTON)},onVideoStart:function(){this.video.fullScreen(!0)},onFullscreenChange:function(e){e||this.onVideoComplete()},showElement:function(e){e.removeClass("hidden")},hideElement:function(e){e.addClass("hidden")},destroy:function(){this.video&&this.destroyVideo(),n.prototype.destroy.apply(this,arguments)}})}),define("view/pages/mobile/about",["jquery","underscore","view/pages/mobile/mobile_base_view","view/common/communicator","backbone"],function(e,t,i){"use strict";return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments)}})}),define("view/pages/mobile/mandolin",["jquery","underscore","config","model/app_model","view/pages/mobile/mobile_base_view","view/common/communicator","util/dom_video","backbone","data/tracking_data"],function(e,t,i,s,n,o,r,a,h){"use strict";return n.extend({events:{"touchend .js-play-btn":"onPlayClick"},initialize:function(){this.videoURL=i.CDN+"/video/mandolin",this.$playBtn=this.$(".js-play-btn"),this.$videoHolder=this.$(".js-videoHolder"),n.prototype.initialize.apply(this,arguments)},show:function(){},onPlayClick:function(){this.video||(this.$playBtn.hide(),this.createVideo(),o.trigger(o.EVENTS.TRACKING,h.TRACK_IDS.PLAYS_MANDOLIN_EVENT_MOBILE_PLAY_BUTTON))},createVideo:function(){this.$videoHolder.show(),this.video=new r({url:this.videoURL,controls:"controls",className:"videoEl",autoplay:!0}),this.$videoHolder.find(".js-videoinner").append(this.video.el)},destroyVideo:function(){this.video.off(),this.video.destroy(),this.video=null,this.$videoHolder.hide(),this.$playBtn.show()},onVideoComplete:function(){this.video.fullScreen(!1),this.destroyVideo()},onVideoStart:function(){this.video.fullScreen(!0)},onFullscreenChange:function(e){e||this.onVideoComplete()},showElement:function(e){e.removeClass("hidden")},hideElement:function(e){e.addClass("hidden")},destroy:function(){this.video&&this.destroyVideo(),n.prototype.destroy.apply(this,arguments)}})}),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},s=function(e,t,i){this.data=e,this.size=e.length,this.type=t,this.encoding=i},n=i.prototype,o=s.prototype,r=e.FileReaderSync,a=function(e){this.code=this[this.name=e]},h="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=h.length,c=e.URL||e.webkitURL||e,d=c.createObjectURL,u=c.revokeObjectURL,g=c,p=e.btoa,m=e.atob,_=e.ArrayBuffer,f=e.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(s.fake=o.fake=!0;l--;)a.prototype[h[l]]=l+1;return c.createObjectURL||(g=e.URL=function(e){var t,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");return i.href=e,"origin"in i||("data:"===i.protocol.toLowerCase()?i.origin=null:(t=e.match(v),i.origin=t&&t[1])),i}),g.createObjectURL=function(e){var t,i=e.type;return null===i&&(i="application/octet-stream"),e instanceof s?(t="data:"+i,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):p?t+";base64,"+p(e.data):t+","+encodeURIComponent(e.data)):d?d.call(c,e):void 0},g.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&u&&u.call(c,e)},n.append=function(e){var i=this.data;if(f&&(e instanceof _||e instanceof f)){for(var n="",o=new f(e),h=0,l=o.length;l>h;h++)n+=String.fromCharCode(o[h]);i.push(n)}else if("Blob"===t(e)||"File"===t(e)){if(!r)throw new a("NOT_READABLE_ERR");var c=new r;i.push(c.readAsBinaryString(e))}else e instanceof s?"base64"===e.encoding&&m?i.push(m(e.data)):"URI"===e.encoding?i.push(decodeURIComponent(e.data)):"raw"===e.encoding&&i.push(e.data):("string"!=typeof e&&(e+=""),i.push(unescape(encodeURIComponent(e))))},n.getBlob=function(e){return arguments.length||(e=null),new s(this.data.join(""),e,"raw")},n.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,i){var n=arguments.length;return 3>n&&(i=null),new s(this.data.slice(e,n>1?t:this.data.length),i,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},i}(e);e.Blob=function(e,t){var s=t?t.type||"":"",n=new i;if(e)for(var o=0,r=e.length;r>o;o++)n.append(Uint8Array&&e[o]instanceof Uint8Array?e[o].buffer:e[o]);var a=n.getBlob(s);return!a.slice&&a.webkitSlice&&(a.slice=a.webkitSlice),a};var s=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=s(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),define("libs/Blob",function(){}),function(e){"use strict";var t,i=e.Uint8Array,s=e.HTMLCanvasElement,n=s&&s.prototype,o=/\s*;\s*base64\s*(?:;|$)/i,r="toDataURL",a=function(e){for(var s,n,o,r=e.length,a=new i(r/4*3|0),h=0,l=0,c=[0,0],d=0,u=0;r--;)n=e.charCodeAt(h++),s=t[n-43],255!==s&&s!==o&&(c[1]=c[0],c[0]=n,u=u<<6|s,d++,4===d&&(a[l++]=u>>>16,61!==c[1]&&(a[l++]=u>>>8),61!==c[0]&&(a[l++]=u),d=0));return a};i&&(t=new i([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),s&&!n.toBlob&&(n.toBlob=function(e,t){if(t||(t="image/png"),this.mozGetAsFile)return void e(this.mozGetAsFile("canvas",t));if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(t))return void e(this.msToBlob());var s,n=Array.prototype.slice.call(arguments,1),h=this[r].apply(this,n),l=h.indexOf(","),c=h.substring(l+1),d=o.test(h.substring(0,l));Blob.fake?(s=new Blob,s.encoding=d?"base64":"URI",s.data=c,s.size=c.length):i&&(s=d?new Blob([a(c)],{type:t}):new Blob([decodeURIComponent(c)],{type:t})),e(s)},n.toBlobHD=n.toDataURLHD?function(){r="toDataURLHD";var e=this.toBlob();return r="toDataURL",e}:n.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),define("libs/canvas-toBlob",function(){});var saveAs=saveAs||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,i=function(){return e.URL||e.webkitURL||e},s=t.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in s,o=function(i){var s=t.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,e,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(s)},r=e.webkitRequestFileSystem,a=e.requestFileSystem||r||e.mozRequestFileSystem,h=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,d=500,u=function(t){var s=function(){"string"==typeof t?i().revokeObjectURL(t):t.remove()};e.chrome?s():setTimeout(s,d)},g=function(e,t,i){t=[].concat(t);for(var s=t.length;s--;){var n=e["on"+t[s]];if("function"==typeof n)try{n.call(e,i||e)}catch(o){h(o)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["﻿",e],{type:e.type}):e},m=function(t,h){t=p(t);var d,m,_,f=this,v=t.type,E=!1,y=function(){g(f,"writestart progress write writeend".split(" "))},T=function(){if((E||!d)&&(d=i().createObjectURL(t)),m)m.location.href=d;else{var s=e.open(d,"_blank");void 0==s&&"undefined"!=typeof safari&&(e.location.href=d)}f.readyState=f.DONE,y(),u(d)},S=function(e){return function(){return f.readyState!==f.DONE?e.apply(this,arguments):void 0}},C={create:!0,exclusive:!1};return f.readyState=f.INIT,h||(h="download"),n?(d=i().createObjectURL(t),s.href=d,s.download=h,o(s),f.readyState=f.DONE,y(),void u(d)):(e.chrome&&v&&v!==l&&(_=t.slice||t.webkitSlice,t=_.call(t,0,t.size,l),E=!0),r&&"download"!==h&&(h+=".download"),(v===l||r)&&(m=e),a?(c+=t.size,void a(e.TEMPORARY,c,S(function(e){e.root.getDirectory("saved",C,S(function(e){var i=function(){e.getFile(h,C,S(function(e){e.createWriter(S(function(i){i.onwriteend=function(t){m.location.href=e.toURL(),f.readyState=f.DONE,g(f,"writeend",t),u(e)},i.onerror=function(){var e=i.error;e.code!==e.ABORT_ERR&&T()},"writestart progress write abort".split(" ").forEach(function(e){i["on"+e]=f["on"+e]}),i.write(t),f.abort=function(){i.abort(),f.readyState=f.DONE},f.readyState=f.WRITING}),T)}),T)};e.getFile(h,{create:!1},S(function(e){e.remove(),i()}),S(function(e){e.code===e.NOT_FOUND_ERR?i():T()}))}),T)}),T)):void T())},_=m.prototype,f=function(e,t){return new m(e,t)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t){return navigator.msSaveOrOpenBlob(p(e),t)}:(_.abort=function(){var e=this;e.readyState=e.DONE,g(e,"abort")},_.readyState=_.INIT=0,_.WRITING=1,_.DONE=2,_.error=_.onwritestart=_.onprogress=_.onwrite=_.onabort=_.onerror=_.onwriteend=null,f)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define("libs/FileSaver",[],function(){return saveAs}),define("view/modules/mobile/menu",["jquery","underscore","TweenMax","view/common/base_view","view/common/communicator","backbone","model/loader_collection","model/sound_model","model/app_model","model/coupon_model","events/sound_events","data/tracking_data","libs/FileSaver"],function(e,t,i,s,n,o,r,a,h,l,c,d,u){"use strict";return s.extend({events:{"click .js-navAbout":"onAboutClick","click .js-closeAbout":"onCloseAboutClick","click .js-fb":"onFBClick","click .js-twitter":"onTweetClick","click .js-legal":"onLegalClick","click .js-volume":"onAudioClick","click .js-privacy":"onPrivacy"},initialize:function(){t.bindAll(this,"onSectionHideComplete"),this.state=null,this.$volumeBtn=this.$(".js-volume"),this.$mainSection=this.$(".js-mainSection"),this.$aboutSection=this.$(".js-aboutSection"),this.$couponSection=this.$(".js-couponSection"),this.addEvents()},onPrivacy:function(){n.trigger(n.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_MENU_PRIVACY_CLICK)},addEvents:function(){a.on("change:volume",this.onChangeVolume,this)},onChangeVolume:function(e,t){0===t?this.$volumeBtn.addClass("isMuted"):this.$volumeBtn.removeClass("isMuted")},setState:function(t){if(t!==this.state)switch(this.prevState=this.state,this.state=t,t){case"main":"about"===this.prevState?(this.hideSection(this.$aboutSection),this.showSection(this.$mainSection,.4)):(this.showSection(this.$mainSection),this.hideSection(this.$couponSection));break;case"about":n.trigger(n.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_ABOUT),this.hideSection(this.$mainSection),this.hideSection(this.$couponSection),this.showSection(this.$aboutSection,.4);break;case"PRIZE":this.hideSection(this.$mainSection),this.hideSection(this.$aboutSection),this.showSection(this.$couponSection,.4);var i=l.getCoupon(),s=l.getClaim();e(i).css({width:"80%"}),this.$couponSection.find(".js-coupon-container").empty().append(i),this.$couponSection.find("button").first().on("click",function(){var e=!1;try{e=!!new Blob}catch(t){}e?i.toBlob(function(e){u(e,s.type+".png")}):window.open(i.toDataURL("image/png"))});break;default:this.hideSection(this.$couponSection),this.hideSection(this.$mainSection),this.hideSection(this.$aboutSection)}},onLegalClick:function(){n.trigger(n.EVENTS.TRACKING,d.TRACK_IDS.HOME_EVENT_LEGAL)},onAboutClick:function(){this.setState("about")},onCloseAboutClick:function(){this.setState("main")},showSection:function(e,t){var s=t||0;i.to(e,.8,{y:0,delay:s,ease:"Power4.easeOut",force3D:!0})},hideSection:function(e,t){var s=t||0;i.to(e,.8,{y:screen.height,delay:s,ease:"Power4.easeOut",onComplete:this.onSectionHideComplete,force3D:!0})},onFBClick:function(){n.trigger(n.EVENTS.SITE.SHARE.FACEBOOK.SHARE_CURRENT_PAGE)},onTweetClick:function(){n.trigger(n.EVENTS.SITE.SHARE.TWITTER.SHARE_CURRENT_PAGE)},onAudioClick:function(){n.trigger(c.TOGGLE_MUTE)},show:function(e){this.$el.css("pointer-events","auto"),i.to(this.el,.2,{autoAlpha:1}),this.setState(e)},hide:function(){this.$el.css("pointer-events","none"),this.setState(null),i.to(this.el,.2,{autoAlpha:0,delay:.1})},onSectionHideComplete:function(){!this.state},destroy:function(){}})}),define("view/modules/mobile/about",["jquery","underscore","view/common/base_view","view/common/communicator","backbone","model/loader_collection"],function(e,t,i){"use strict";return i.extend({events:{},initialize:function(){this.addEvents()},addEvents:function(){},show:function(){this.$el.addClass("isActive")},hide:function(){this.$el.removeClass("isActive")},destroy:function(){}})}),define("view/modules/mobile/shell",["jquery","underscore","backbone","config","model/app_model","view/common/base_view","view/common/communicator","model/loader_collection","view/modules/mobile/menu","view/modules/mobile/about","view/common/sound_request","events/sound_events"],function(e,t,i,s,n,o,r,a,h,l,c,d){"use strict";return a.add({id:"blank_audio",src:s.CDN+"/audio/blank.mp3"}),o.extend({events:{"touchend .js-hamburger":"onMenuBtnClick","touchend .js-back":"onBackBtnClick","touchend .js-soundAccept":"onSoundAccept","touchend .js-soundRefuse":"onSoundRefuse"},initialize:function(){this.showMenuBtn=!1,this.$hamburgerBtn=this.$(".js-hamburger"),this.$backBtn=this.$(".js-back"),this.$soundOverlay=this.$(".js-soundOverlay"),this.menu=new h({el:this.$(".js-menu")}),this.addEvents()},addEvents:function(){r.on(r.EVENTS.LOADER.START_QUEUE,this.onLoaderQueueStarts,this),r.on(r.EVENTS.SITE.MOBILE.START_SITE,this.onStartSite,this),a.once("complete",this.onMainLoaderComplete,this),n.on("page_show_complete",this.onPageShowComplete,this),n.on("page_hide_complete",this.onPageHideComplete,this),n.on("change:menu_visibility",this.onMenuVisibility,this)},onMenuBtnClick:function(){r.trigger(r.EVENTS.SITE.MOBILE.TOGGLE_MENU)},onBackBtnClick:function(){r.trigger(r.EVENTS.SITE.MOBILE.RETURN_TO_CAROUSEL)},onSoundAccept:function(){r.trigger(r.EVENTS.SITE.MOBILE.SOUND_ACCEPT),r.trigger(r.EVENTS.APP.GO_FULLSCREEN,!0),this.triggerBlankSound()},onSoundRefuse:function(){r.trigger(r.EVENTS.SITE.MOBILE.SOUND_REFUSE),r.trigger(r.EVENTS.APP.GO_FULLSCREEN,!0),this.triggerBlankSound()},triggerBlankSound:function(){this.mainSoundRequest=new c({id:"blank_audio",config:{loop:0}}),r.trigger(d.PLAY_SOUND,this.mainSoundRequest)},onMainLoaderComplete:function(){this.$soundOverlay.addClass("isActive")},onStartSite:function(){this.$soundOverlay.removeClass("isActive")},onPageShowComplete:function(){var e=n.get("page");switch(e){case n.PAGES.LOADER:this.showUIElement(this.$hamburgerBtn,!1),this.showUIElement(this.$backBtn,!1);break;case n.PAGES.CAROUSEL:this.showUIElement(this.$hamburgerBtn,!0),this.showUIElement(this.$backBtn,!1);break;case n.PAGES.GAME:this.showUIElement(this.$hamburgerBtn,!0),this.showUIElement(this.$backBtn,!1);break;default:this.showUIElement(this.$hamburgerBtn,!0),this.showUIElement(this.$backBtn,!0)}},onPageHideComplete:function(){var e=n.get("page");switch(e){case n.PAGES.LOADER:this.showUIElement(this.$hamburgerBtn,!1),this.showUIElement(this.$backBtn,!1);break;case n.PAGES.CAROUSEL:this.showUIElement(this.$hamburgerBtn,!0),this.showUIElement(this.$backBtn,!1);break;case n.PAGES.GAME:this.showUIElement(this.$hamburgerBtn,!0),this.showUIElement(this.$backBtn,!1)}},showUIElement:function(e,t){t?e.addClass("isActive"):e.removeClass("isActive")},onAboutClick:function(){this.setState("about")},onMenuVisibility:function(e,t){if(t){var i=n.get("menu_section")||"main";this.menu.show(i),this.$hamburgerBtn.attr("data-state","close")}else this.menu.hide(),this.$hamburgerBtn.attr("data-state","open")},onLoaderQueueStarts:function(e){"main"!==e&&(this.groupID=e,this.$el.addClass("preloading_assets"),a.on("complete",this.onLoaderComplete,this))},onLoaderComplete:function(e){e.group===this.groupID&&(this.$el.remove("preloading_assets"),a.off(null,null,this))}})}),define("view/animations/createjs_animations/mobile/loose_lipped",[],function(){"use strict";return{manifest:[{src:"/js/view/animations/createjs_animations/mobile/loose_lipped.lib.js",id:"loose_lipped.lib.js"},{src:"/img/easel/mobile/loose_lipped/loose_lipped_0_sheet.png",createjs:{ns:"loose_lipped",spritesheet:[{x:0,y:0,width:1136,height:615,id:"halls_bg",src:"images/halls_bg.jpg"},{x:1340,y:618,width:54,height:27,id:"ll_s_bg_mouth",src:"images/ll_s_bg_mouth.png"},{x:382,y:617,width:213,height:272,id:"ll_s_board",src:"images/ll_s_board.png"},{x:1340,y:1086,width:44,height:23,id:"ll_s_bow_l",src:"images/ll_s_bow_l.png"},{x:1340,y:1040,width:52,height:23,id:"ll_s_bow_r",src:"images/ll_s_bow_r.png"},{x:1138,y:586,width:156,height:179,id:"ll_s_bucket_all",src:"images/ll_s_bucket_all.png"},{x:1340,y:1136,width:41,height:23,id:"ll_s_eye_L",src:"images/ll_s_eye_L.png"},{x:1340,y:1111,width:41,height:23,id:"ll_s_eye_R",src:"images/ll_s_eye_R.png"},{x:1340,y:1065,width:59,height:19,id:"ll_s_eyelids",src:"images/ll_s_eyelids.png"},{x:1367,y:457,width:35,height:38,id:"ll_s_goaty",src:"images/ll_s_goaty.png"},{x:826,y:617,width:143,height:171,id:"ll_s_head_bg",src:"images/ll_s_head_bg.png"},{x:382,y:1013,width:118,height:92,id:"ll_s_jaw",src:"images/ll_s_jaw.png"},{x:1138,y:767,width:107,height:234,id:"ll_s_l_arm",src:"images/ll_s_l_arm.png"},{x:1367,y:352,width:43,height:49,id:"ll_s_l_cheek",src:"images/ll_s_l_cheek.png"},{x:1340,y:0,width:70,height:175,id:"ll_s_l_forearm",src:"images/ll_s_l_forearm.png"},{x:1340,y:177,width:53,height:173,id:"ll_s_l_hand",src:"images/ll_s_l_hand.png"},{x:1390,y:533,width:20,height:24,id:"ll_s_l_lip",src:"images/ll_s_l_lip.png"},{x:1340,y:1015,width:56,height:23,id:"ll_s_l_sleeve",src:"images/ll_s_l_sleeve.png"},{x:1390,y:507,width:20,height:24,id:"ll_s_m_lip",src:"images/ll_s_m_lip.png"},{x:597,y:617,width:227,height:173,id:"ll_s_m_pants",src:"images/ll_s_m_pants.png"},{x:1340,y:352,width:25,height:153,id:"ll_s_m_walkinstick",src:"images/ll_s_m_walkinstick.png"},{x:1340,y:584,width:70,height:32,id:"ll_s_moustache",src:"images/ll_s_moustache.png"},{x:1247,y:929,width:80,height:55,id:"ll_s_neck",src:"images/ll_s_neck.png"},{x:1372,y:969,width:30,height:41,id:"ll_s_nose",src:"images/ll_s_nose.png"},{x:1138,y:0,width:200,height:584,id:"ll_s_pole",src:"images/ll_s_pole.png"},{x:1247,y:767,width:81,height:160,id:"ll_s_r_arm",src:"images/ll_s_r_arm.png"},{x:1367,y:403,width:33,height:52,id:"ll_s_r_cheek",src:"images/ll_s_r_cheek.png"},{x:1138,y:1003,width:143,height:110,id:"ll_s_r_hand",src:"images/ll_s_r_hand.png"},{x:1340,y:1161,width:18,height:26,id:"ll_s_r_lip",src:"images/ll_s_r_lip.png"},{x:502,y:1013,width:90,height:76,id:"ll_s_tie_l",src:"images/ll_s_tie_l.png"},{x:1340,y:507,width:48,height:75,id:"ll_s_tie_r",src:"images/ll_s_tie_r.png"},{x:0,y:617,width:380,height:504,id:"ll_s_torso",src:"images/ll_s_torso.png"},{x:597,y:792,width:231,height:63,id:"ll_s_torso_shadow",src:"images/ll_s_torso_shadow.png"},{x:1340,y:969,width:30,height:44,id:"ll_smoke_1r_0060",src:"images/ll_smoke_1r_0060.png"},{x:1340,y:647,width:30,height:44,id:"ll_smoke_1r_0061",src:"images/ll_smoke_1r_0061.png"},{x:1372,y:647,width:30,height:44,id:"ll_smoke_1r_0062",src:"images/ll_smoke_1r_0062.png"},{x:1340,y:693,width:30,height:44,id:"ll_smoke_1r_0063",src:"images/ll_smoke_1r_0063.png"},{x:1372,y:693,width:30,height:44,id:"ll_smoke_1r_0064",src:"images/ll_smoke_1r_0064.png"},{x:1340,y:739,width:30,height:44,id:"ll_smoke_1r_0065",src:"images/ll_smoke_1r_0065.png"},{x:1372,y:739,width:30,height:44,id:"ll_smoke_1r_0066",src:"images/ll_smoke_1r_0066.png"},{x:1340,y:785,width:30,height:44,id:"ll_smoke_1r_0067",src:"images/ll_smoke_1r_0067.png"},{x:1372,y:785,width:30,height:44,id:"ll_smoke_1r_0068",src:"images/ll_smoke_1r_0068.png"},{x:1340,y:831,width:30,height:44,id:"ll_smoke_1r_0069",src:"images/ll_smoke_1r_0069.png"},{x:1372,y:831,width:30,height:44,id:"ll_smoke_1r_0070",src:"images/ll_smoke_1r_0070.png"},{x:1340,y:877,width:30,height:44,id:"ll_smoke_1r_0071",src:"images/ll_smoke_1r_0071.png"},{x:1372,y:877,width:30,height:44,id:"ll_smoke_1r_0072",src:"images/ll_smoke_1r_0072.png"},{x:1340,y:923,width:30,height:44,id:"ll_smoke_1r_0073",src:"images/ll_smoke_1r_0073.png"},{x:1372,y:923,width:30,height:44,id:"ll_smoke_1r_0074",src:"images/ll_smoke_1r_0074.png"},{x:626,y:891,width:120,height:120,id:"ll_spark_01r_0028",src:"images/ll_spark_01r_0028.png"},{x:382,y:891,width:120,height:120,id:"ll_spark_01r_0029",src:"images/ll_spark_01r_0029.png"},{x:122,y:1123,width:120,height:120,id:"ll_spark_01r_0030",src:"images/ll_spark_01r_0030.png"},{x:0,y:1123,width:120,height:120,id:"ll_spark_01r_0031",src:"images/ll_spark_01r_0031.png"},{x:992,y:891,width:120,height:120,id:"ll_spark_01r_0032",src:"images/ll_spark_01r_0032.png"},{x:870,y:891,width:120,height:120,id:"ll_spark_01r_0033",src:"images/ll_spark_01r_0033.png"},{x:504,y:891,width:120,height:120,id:"ll_spark_01r_0034",src:"images/ll_spark_01r_0034.png"},{x:971,y:617,width:120,height:120,id:"ll_spark_01r_0035",src:"images/ll_spark_01r_0035.png"},{x:748,y:891,width:120,height:120,id:"ll_spark_01r_0036",src:"images/ll_spark_01r_0036.png"}],width:1410,height:1243}}],root:"loose_lipped",ns:"loose_lipped",width:"1136",height:"640",fps:"30",js:"loose_lipped.lib.js"}}),define("view/modules/extended/section_animation",["jquery","underscore","view/common/base_view","view/common/communicator","backbone"],function(e,t,i){"use strict";return i.extend({initialize:function(e){this.label=e.label,this.mc=e.mc,this.label=e.label,this.hasHideAnimation=e.hasHideAnimation,this.hasShowAnimation=e.hasShowAnimation},hiding:function(){return this.hideAnimationInProgress},show:function(){this.hideAnimationInProgress=!1,this.removeListeners(),this.hasShowAnimation?(this.showListener=this.mc.addEventListener("showComplete",t.bind(this.onShowComplete,this)),this.mc.gotoAndPlay(this.label+"_show")):this.onShowComplete()},onShowComplete:function(){this.removeListeners(),this.trigger("showComplete",this)},removeListeners:function(){this.mc.removeEventListener("showComplete",this.showListener),this.mc.removeEventListener("hideComplete",this.hideListener)
},hide:function(){this.hideAnimationInProgress=!0,this.removeListeners(),this.hasHideAnimation?(this.hideListener=this.mc.addEventListener("hideComplete",t.bind(this.onHideComplete,this)),this.mc.gotoAndPlay(this.label+"_hide")):this.onHideComplete()},onHideComplete:function(){this.hideAnimationInProgress=!1,this.removeListeners(),this.trigger("hideComplete",this)}})}),define("view/modules/extended/section_loader",["jquery","underscore","view/common/base_view","view/common/communicator","backbone","model/loader_collection","TweenMax"],function(e,t,i,s,n,o,r){"use strict";return i.extend({initialize:function(e){this.onDelayedShowBound=t.bind(this.onDelayedShow,this),this.mc=e.mc,this.progressBar=this.mc.mc_loader_sign.load_bar,this.mc.addEventListener("hide_complete",t.bind(this.onHideComplete,this)),this.mc.addEventListener("show_complete",t.bind(this.onShowComplete,this))},isVisible:function(){return this.visible},show:function(e){r.killDelayedCallsTo(this.onDelayedShowBound),r.delayedCall(e,this.onDelayedShowBound)},onDelayedShow:function(){this.visible||(o.on("progress",this.onProgress,this),this.setPct(0),this.visible=!0,this.mc.gotoAndPlay("show"))},onShowComplete:function(){},onProgress:function(e){var t=e.progress;this.setPct(t)},setPct:function(e){var t=e*(this.progressBar.timeline.duration-1);this.progressBar.gotoAndStop(t)},hide:function(){r.killDelayedCallsTo(this.onDelayedShowBound),this.visible&&(o.off("progress",null,this),this.setPct(1),this.mc.gotoAndPlay("hide"))},onHideComplete:function(){this.visible=!1,i.prototype.onHideComplete.apply(this,arguments)}})}),define("view/modules/extended/back_bucket",["jquery","underscore","view/common/base_view","view/common/communicator","backbone","model/app_model","view/common/button_helper"],function(e,t,i,s,n,o,r){"use strict";return i.extend({initialize:function(e){this.mc=e.mc,this.closeButton=new r({mc:this.mc.mc_animation}),this.closeButton.on("mousedown",this.onCloseClick,this)},onCloseClick:function(){this.trigger("click")},hide:function(){this.isShowing&&(this.isShowing=!1,this.closeButton.hide())},show:function(){this.isShowing||(this.isShowing=!0,this.closeButton.show())}})}),define("view/modules/extended/interruption_animation",["jquery","underscore","view/common/base_view","view/common/communicator","backbone"],function(e,t,i){"use strict";return i.extend({initialize:function(e){this.mc=e.mc},show:function(){this.mc.gotoAndPlay("label_show")}})}),define("view/modules/extended/carousel/embed_button",["jquery","underscore","view/common/base_view","view/common/communicator","backbone","view/common/button_helper"],function(e,t,i,s,n,o){"use strict";return i.extend({initialize:function(e){this.mc=e.mc,this.button=new o({mc:this.mc.embed}),this.button.on("mousedown",this.onMouseDown,this)},onMouseDown:function(){this.trigger("mousedown")},show:function(e){e?(this.mc.embed.x=-54,this.mc.embed.y=-94,this.button.show(),this.mc.embed.gotoAndStop("out")):(this.mc.embed.x=this.mc.embed.y=0,this.button.show())},hide:function(){this.button.hide()}})}),define("view/modules/extended/stage_view",["config","jquery","underscore","backbone","model/app_model","view/common/communicator","model/stage_model","view/modules/extended/section_animation","model/loader_collection","view/modules/extended/section_loader","route/router","view/modules/extended/back_bucket","view/modules/extended/interruption_animation","view/modules/extended/carousel/embed_button","TweenMax","view/common/base_view","console"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m){var _=m.extend({defaults:{},embed_button:null,initialize:function(){this.sequence=[],this.onBoundLoadingSound=i.bind(this.onLoadingSound,this),this.boundDelayEmbedShow=i.bind(this.delayedEmbedShow,this),r.on("change:createJSAnimation",this.onSetStage,this),r.on("animation_interrupted",this.onAnimationInterruption,this),o.on(o.EVENTS.SITE.EASEL.SHOW_BACK_BUTTON,this.onShowBackButton,this),this.boundRandomAmbientSound=i.bind(this.randomAmbientSound,this),this.randomAmbientSounds=[o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_01,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_02,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_03,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_04,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_05,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_06,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_07,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_08,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_09,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_10,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_11,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_12,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_13,o.EVENTS.SITE.SOUNDS.CAROUSEL.ROOM_TONE_ELEMENT_14]},onPageChange:function(){var e=n.get("page");switch(p.killDelayedCallsTo(this.boundRandomAmbientSound),e){case n.PAGES.CAROUSEL:this.backButton.hide(),this.embed_button.hide(),this.randomAmbientSound(),this.isPlayingHallMusic||(this.isPlayingHallMusic=!0,this.playSound(this.hallMusicRequest)),this.isplayingAmbienceSound||(this.isplayingAmbienceSound=!0,this.playSound(this.ambienceSound));break;case n.PAGES.GUN_FIGHT:case n.PAGES.GAME:this.isPlayingHallMusic&&(this.isPlayingHallMusic=!1,this.stopSound(this.hallMusicRequest,{time:1})),this.isplayingAmbienceSound=!1,this.stopSound(this.ambienceSound,{time:15});break;default:this.isPlayingHallMusic&&(this.isPlayingHallMusic=!1,this.stopSound(this.hallMusicRequest,{time:1}))}},randomAmbientSound:function(){if(p.delayedCall(5+10*Math.random(),this.boundRandomAmbientSound),Math.random()>.5){var e=this.createSoundRequest(i.sample(this.randomAmbientSounds));this.playSound(e)}},onUpdate:function(){this.stage&&this.stage.update()},getAnimationByID:function(e){return i.findWhere(this.labels,{label:e})},onLoaderQueueStarts:function(e){var t=e.group,i=n.get("page");p.killDelayedCallsTo(this.onBoundLoadingSound);var s=r.getDetailsByPage(i);s&&s.loadGroup===t&&(p.delayedCall(2,this.onBoundLoadingSound),this.loader.show(2))},onLoadingSound:function(){this.startLoadingSound()},onLoaderQueueComplete:function(e){this.stopLoadingSound();var t=e.group,i=n.get("page"),s=r.getDetailsByPage(i);s&&s.loadGroup===t&&this.loader.hide()},stopLoadingSound:function(){p.killDelayedCallsTo(this.onBoundLoadingSound),this.stopSound(o.EVENTS.SITE.SOUNDS.CAROUSEL.LOADING_ALT.id),this.stopSound(o.EVENTS.SITE.SOUNDS.CAROUSEL.LOADING.id)},startLoadingSound:function(){this.currentLoadSoundID=this.currentLoadSoundID===o.EVENTS.SITE.SOUNDS.CAROUSEL.LOADING_ALT?o.EVENTS.SITE.SOUNDS.CAROUSEL.LOADING_ALT:o.EVENTS.SITE.SOUNDS.CAROUSEL.LOADING,this.trackSoundRequest=this.createSoundRequest(this.currentLoadSoundID,{loop:-1}),this.playSound(this.trackSoundRequest)},onAnimateTo:function(e){if(this.hall){var t=this.getAnimationByID(e);this.sequence.push(t),this.processSequence()}},processSequence:function(){if(this.sequence.length>0){var e=this.sequence.shift();r.get("animation_interrupted")&&(e=this.getAnimationByID(r.LABELS.INTERRUPTION)),this.currentAnimation=e,e.once("hideComplete",i.bind(this.onAnimationHideDone,this)),e.hide()}},onAnimationHideDone:function(e){if(o.trigger(o.EVENTS.SITE.EASEL.HALL.ANIMATION_COMPLETE,e.label),e.off(null,null,this),this.currentAnimation===e&&(this.currentAnimation=null),this.sequence.length>0){var t=this,s=function(){var e=i.first(t.sequence);e.once("showComplete",i.bind(t.onAnimationShowDone,t)),e.show()};this.loader.isVisible()?this.loader.once("hideComplete",s,this):s()}},onShowBackButton:function(){var e=n.get("page");e!==n.PAGES.CAROUSEL&&this.backButton.show()},onAnimationShowDone:function(e){o.trigger(o.EVENTS.SITE.EASEL.HALL.ANIMATION_COMPLETE,e.label),e.off(null,null,this);var t=n.get("page");switch(p.killDelayedCallsTo(this.boundDelayEmbedShow),t){case n.PAGES.GUN_FIGHT:this.embed_button.show();break;case n.PAGES.GAME:p.delayedCall(3.5,this.boundDelayEmbedShow)}this.currentAnimation===e&&(this.currentAnimation=null),this.sequence.length>1&&this.processSequence()},delayedEmbedShow:function(){this.embed_button.show(!0),this.onUpdate()},onBackClick:function(){var e=this.createSoundRequest(o.EVENTS.SITE.SOUNDS.CAROUSEL.BIG_CURTAIN_RAISE);this.playSound(e),c.navigate(n.PAGES.CAROUSEL)},onEmbedClick:function(){o.trigger(o.EVENTS.SITE.EMBEDS.SHOW_EMBED)},onLoaderQueueRemoved:function(){this.loader.hide()},onAnimationInterruption:function(){this.animationInterruption&&this.animationInterruption.show()},onSetStage:function(e,t){n.on("update",this.onUpdate,this),this.randomAmbientSound(),r.on("animateTo",this.onAnimateTo,this),r.on("set_asset",this.onSetAsset,this),n.on("change:page",this.onPageChange,this),h.on("queue_starts",this.onLoaderQueueStarts,this),h.on("complete",this.onLoaderQueueComplete,this),h.on("group_removed",this.onLoaderQueueRemoved,this),this.animationWidth=r.get("animationWidth"),this.animationHeight=r.get("animationHeight"),this.$canvas=r.get("$canvas"),this.stage=t.stage,this.hall=t.root.mc_hall,this.animationInterruption=new u({mc:this.hall.mc_interruption_animation}),this.backButton=new d({mc:this.hall.mc_back_to_hall_bucket}),this.backButton.on("click",this.onBackClick,this),this.loader=new l({mc:this.hall.mc_section_loader}),this.embed_button=new g({mc:this.hall.mc_embed_button_holder}),this.embed_button.on("mousedown",this.onEmbedClick,this),this.labels=i.map(r.LABELS,function(e){return new a({mc:this.hall,label:e,hasHideAnimation:e!==r.LABELS.CAROUSEL,hasShowAnimation:e!==r.LABELS.CAROUSEL})},this),this.sequence.push(this.getAnimationByID(r.LABELS.CAROUSEL)),this.hallMusicRequest=this.createSoundRequest(o.EVENTS.SITE.SOUNDS.CAROUSEL.HALL_MUSIC),this.ambienceSound=this.createSoundRequest(o.EVENTS.SITE.SOUNDS.CAROUSEL.HALL_AMBIENCE,{loop:-1}),this.onPageChange(),this.onResize()},onSetAsset:function(e,t){for(var s=[],n=10,a=i.bind(function(i){var s=i.target;e===r.CLIPS.BUCKET?(s.bucketHolder.removeAllChildren(),t&&(s.bucketHolder.addChild(t),o.trigger(o.EVENTS.SITE.EASEL.SET_ASSET_DONE,e,t))):(s.removeAllChildren(),t&&(s.addChild(t),o.trigger(o.EVENTS.SITE.EASEL.SET_ASSET_DONE,e,t)))},this),h=0;n>h;h++){var l=e+"_"+h;0===h&&(l=e);var c=this.hall[l];i.isUndefined(c)||(c.addEventListener("added",a),c.parent&&a({target:c}),s.push(c))}},onResize:function(){if(this.$canvas){var t=window.innerHeight-(e.SIZES.DESKTOP.HEADER_HEIGHT+e.SIZES.DESKTOP.FOOTER_HEIGHT);this.viewportScaleY=t/this.animationHeight,this.viewportScaleX=window.innerWidth/this.animationWidth;var i,s,n=this.animationWidth*this.viewportScaleY,r=this.animationHeight*this.viewportScaleX,a=this.animationHeight>t?t:this.animationHeight;a>=this.animationHeight&&(n=this.animationWidth);var h=window.innerWidth-n,l=Math.max(0,h/2),c=t-r,d=Math.max(e.SIZES.DESKTOP.HEADER_HEIGHT,c/2);a>=this.animationHeight&&(n=this.animationWidth,d=e.SIZES.DESKTOP.HEADER_HEIGHT+(t-a)/2),s=a*(this.animationWidth/this.animationHeight),n>window.innerWidth&&window.innerWidth<this.animationWidth&&(s=r*(this.animationWidth/this.animationHeight),a=r,l=0),i={height:a,width:s,top:d,left:l,position:"fixed"},o.trigger(o.EVENTS.SITE.DESKTOP.RESIZE,i),this.$canvas.css({width:s,height:a})}}});return new _}),define("view/modules/mobile/looselips/loose_lips_colonel",["jquery","underscore","view/common/base_view","view/common/communicator","backbone","model/loader_collection","view/common/createjs_animation","model/app_model","model/stage_model","view/modules/extended/stage_view","createjs"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";return i.extend({currentMouthTween:null,initialize:function(e){t.bindAll(this,"onColonelClick","onMoveForwardComplete","onMainPlayComplete","onSecondaryPlayComplete","onColonelHideComplete","onTweenInitiated"),this.colonel=e.mc,this.currenLabelInfo=null,this.currentFrame=0,this.secondarySequence=1,this.addEvents()},addEvents:function(){this.colonel.addEventListener("click",this.onColonelClick),this.colonel.addEventListener("move_forward_complete",this.onMoveForwardComplete),this.colonel.addEventListener("mainComplete",this.onMainPlayComplete),this.colonel.addEventListener("secondaryComplete",this.onSecondaryPlayComplete),this.colonel.addEventListener("hideComplete",this.onColonelHideComplete),this.colonel.addEventListener("tween_created",this.onTweenInitiated)},onColonelClick:function(){this.trigger("click",this)},onMoveForwardComplete:function(){this.trigger("move_forward_complete",this)},onMainPlayComplete:function(){this.trigger("main_play_complete",this)},onSecondaryPlayComplete:function(){this.trigger("secondary_play_complete",this)},onColonelHideComplete:function(){this.trigger("hide_play_complete",this)},getMovieClip:function(){return this.colonel},getCurrentFrame:function(){return this.currentFrame},getCurrentLabelInfo:function(e,i){var s,n,o=i.getLabels();return t.each(o,function(t,i){if(e===t.label)if(i<o.length-2){var r=o[i+1];s=r.position-t.position,n={startPos:t.position,duration:s}}else{var a=this.colonel.timeline.duration;s=a-t.position,n={startPos:t.position,duration:s}}},this),n},setBehavior:function(e){switch(this.state=e,e){case"move_forward":this.colonel.gotoAndPlay(a.get("loose_lips_out_of_order")?"move_forward_broken":"move_forward");break;case"main":this.colonel.gotoAndStop("main_sequence"),this.currenLabelInfo=this.getCurrentLabelInfo("start",this.colonel.main);break;case"secondary":this.colonel.gotoAndStop("main_sequence");var t="click_sequence_"+this.secondarySequence;this.colonel.main.gotoAndPlay(t);break;case"hide":this.colonel.gotoAndPlay(a.get("loose_lips_out_of_order")?"hide":"hide_norm")}},setSecondarySequence:function(e){this.secondarySequence=e},buttonMode:function(e){this.colonel.cursor=e?"pointer":"auto"},update:function(e){var t;switch(this.state){case"main":t=this.colonel.main;break;case"hide":}if(t&&this.currenLabelInfo){var i=this.currenLabelInfo.duration-1;this.currentFrame=Math.round(this.currenLabelInfo.startPos+i*e),t.gotoAndStop(this.currentFrame)}this.currentMouthTween&&this.currentMouthTween.setPosition(e*this.currentMouthTween.duration)},onTweenInitiated:function(e){var t=e.tween;this.destroyTween(this.currentMouthTween),t&&(this.currentMouthTween=t)},destroyTween:function(e){e&&(c.Tween.removeTweens(e.target),e.removeAllEventListeners())},removeEvents:function(){this.colonel.removeAllEventListeners()},destroy:function(){this.currentFrame=0,this.secondarySequence=1,this.removeEvents(),this.undelegateEvents(),i.prototype.destroy.apply(this,arguments)}})}),define("view/pages/mobile/loose_lipped",["jquery","underscore","view/pages/mobile/mobile_base_view","view/common/communicator","backbone","config","view/common/sound_request","events/sound_events","view/animations/createjs_animations/mobile/loose_lipped","view/common/createjs_animation","view/modules/mobile/looselips/loose_lips_colonel","model/app_model","model/loader_collection","data/tracking_data"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g){"use strict";var p=[],m=s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED;for(var _ in m){m[_].id=_;var f=t.extend({},m[_]);p.push(f)}return u.add(p),u.loadManifest(h.manifest),i.extend({initialize:function(){this.glitchAudioTracks=[s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_01,s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_02,s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_03,s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_04,s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_05,s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_06,s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_07],i.prototype.initialize.apply(this,arguments)},setup:function(){this.secondarySequence=0,this.secondarySequenceLength=5,i.prototype.setup.apply(this,arguments)},onViewReady:function(){this.createJSAnimation=new l(h,!0),this.root=this.createJSAnimation.root,this.$el.append(this.createJSAnimation.$el),this.bucket=this.root.mc_bucket;var e=new this.createJSAnimation.lib.AColonel_loose_lips;this.colonel=new c({mc:e}),this.root.addChild(e),e.x=437,e.y=150,this.setState("move_forward")},show:function(){this.addEvents()},onShowComplete:function(){this.setState(d.get("loose_lips_out_of_order")?"clickable":"main")},addEvents:function(){d.on("update",this.onUpdate,this),this.colonel.on("secondary_play_complete",this.onSecondaryPlayComplete,this),this.colonel.on("hide_play_complete",this.onHidePlayComplete,this)},setState:function(e){if(e!==this.state)switch(this.state=e,this.currentSongReq=null,this.playComplete=!1,e){case"move_forward":this.colonel.setBehavior(e);break;case"main":this.colonel.setBehavior(e),this.setClickMode(!1);var i=this.createSoundRequest(s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.LOOSE_LIPPED_COLONEL_SPEECH_BREAKS,{loop:0});this.currentSongReq=i,this.playSound(i);break;case"secondary":var n=t.random(0,this.glitchAudioTracks.length-1),o=this.glitchAudioTracks[n],r=this.createSoundRequest(o,{loop:0});this.playSound(r),this.setClickMode(!1),this.colonel.setSecondarySequence(n),this.colonel.setBehavior(e);break;case"clickable":this.setClickMode(!0);break;case"hide":this.colonel.off(null,null,this),this.colonel.on("hide_play_complete",this.onHidePlayComplete,this),this.setClickMode(!1),this.colonel.setBehavior(e)}},onUpdate:function(){if(this.currentSongReq){var e=this.currentSongReq.getProgress();this.colonel.update(e),e>=1&&this.onAudioPlayComplete()}this.createJSAnimation.update()},onAudioPlayComplete:function(){if(!this.playComplete)switch(this.playComplete=!0,this.state){case"main":s.trigger(s.EVENTS.SITE.MOBILE.LOOSE_LIPS.OUT_OF_ORDER),this.setState("clickable")}},setClickMode:function(e){e?(this.colonel.buttonMode(!0),this.colonel.on("click",this.onColonelClick,this)):(this.colonel.buttonMode(!1),this.colonel.off("click",this.onColonelClick,this))},onMainPlayComplete:function(){s.trigger(s.EVENTS.SITE.MOBILE.LOOSE_LIPS.OUT_OF_ORDER),this.setState("clickable")},onSecondaryPlayComplete:function(){this.setState("clickable")},onHidePlayComplete:function(){this.onHideComplete()},onColonelClick:function(){this.setState("secondary"),s.trigger(s.EVENTS.TRACKING,g.TRACK_IDS.KFC_SECRET_RECIPE_REVEALED_EVENT_LOOSE_LIPPED_COLONEL_INTERACTION)},hide:function(){this.stopSound(s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.LOOSE_LIPPED_COLONEL_SPEECH_BREAKS.id),this.stopSound(s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_01.id),this.stopSound(s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_02.id),this.stopSound(s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_03.id),this.stopSound(s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_04.id),this.stopSound(s.EVENTS.SITE.SOUNDS.LOOSE_LIPPED.COLONEL_GLITCH_05.id),this.setState("hide"),this.onHideComplete()},removeEvents:function(){d.off(null,null,this),this.colonel&&this.colonel.off()},onResize:function(){this.createJSAnimation&&this.createJSAnimation.resize("contain")},destroy:function(){this.removeEvents(),this.colonel&&(this.colonel.destroy(),this.colonel=null),this.createJSAnimation&&(this.createJSAnimation.$el.remove(),this.createJSAnimation.destroy()),i.prototype.destroy.apply(this,arguments)}})}),define("game/sprites/game_screen_assets",[],function(){"use strict";return{ns:"game-screens",manifest:[{src:"/img/games/game_shell/game-screens_1_sheet.png",spritesheet:{ns:"game-screens",sprites:[{x:237,y:194,width:217,height:82,id:"kfc_instructions_level_6.png",trim:{origWidth:256,origHeight:192,width:217,height:82,offsetX:22,offsetY:59}},{x:0,y:362,width:177,height:72,id:"kfc_instructions_mobile_level_2.png",trim:{origWidth:256,origHeight:192,width:177,height:72,offsetX:39,offsetY:59}},{x:0,y:278,width:200,height:82,id:"kfc_instructions_mobile_level_3.png",trim:{origWidth:256,origHeight:192,width:200,height:82,offsetX:27,offsetY:59}},{x:202,y:278,width:214,height:72,id:"kfc_instructions_mobile_level_5.png",trim:{origWidth:256,origHeight:192,width:214,height:72,offsetX:20,offsetY:59}},{x:0,y:194,width:235,height:82,id:"kfc_instructions_mobile_level_6.png",trim:{origWidth:256,origHeight:192,width:235,height:82,offsetX:13,offsetY:59}},{x:418,y:278,width:78,height:51,id:"kfc_results_sign.png",trim:{origWidth:256,origHeight:192,width:78,height:51,offsetX:88,offsetY:0}},{x:179,y:362,width:33,height:72,id:"kfc_results_silver_medal.png",trim:{origWidth:256,origHeight:192,width:33,height:72,offsetX:111,offsetY:59}},{x:0,y:0,width:256,height:192,id:"kfc_screens_bg_gray.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:258,y:0,width:256,height:192,id:"kfc_screens_bg_pause.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:214,y:362,width:26,height:22,id:"pause_button.png"},{x:456,y:239,width:28,height:22,id:"pause_button_element.png"},{x:486,y:239,width:28,height:22,id:"pause_hover.png",trim:{origWidth:28,origHeight:22,width:28,height:22,offsetX:0,offsetY:0}},{x:456,y:194,width:57,height:43,id:"share_tooltip.png",trim:{origWidth:59,origHeight:44,width:57,height:43,offsetX:1,offsetY:1}}]},width:514,height:434},{src:"/img/games/game_shell/game-screens_0_sheet.png",spritesheet:{ns:"game-screens",sprites:[{x:977,y:933,width:32,height:31,id:"box_selected.png",trim:{origWidth:256,origHeight:192,width:32,height:31,offsetX:66,offsetY:118}},{x:966,y:121,width:9,height:19,id:"bronze_small_medal.png",trim:{origWidth:11,origHeight:21,width:9,height:19,offsetX:1,offsetY:1}},{x:512,y:872,width:73,height:19,id:"btn_level_select.png",trim:{origWidth:73,origHeight:19,width:73,height:19,offsetX:0,offsetY:0}},{x:587,y:872,width:73,height:19,id:"btn_level_select_hover.png",trim:{origWidth:73,origHeight:19,width:73,height:19,offsetX:0,offsetY:0}},{x:673,y:156,width:51,height:19,id:"button_play_more.png",trim:{origWidth:256,origHeight:192,width:51,height:19,offsetX:136,offsetY:167}},{x:671,y:526,width:51,height:21,id:"button_play_more_hover.png",trim:{origWidth:256,origHeight:192,width:51,height:21,offsetX:136,offsetY:167}},{x:800,y:139,width:23,height:45,id:"countdown_1.png",trim:{origWidth:256,origHeight:192,width:23,height:45,offsetX:116,offsetY:77}},{x:939,y:470,width:30,height:45,id:"countdown_2.png",trim:{origWidth:256,origHeight:192,width:30,height:45,offsetX:113,offsetY:77}},{x:950,y:532,width:24,height:45,id:"countdown_3.png",trim:{origWidth:256,origHeight:192,width:24,height:45,offsetX:115,offsetY:77}},{x:388,y:388,width:98,height:45,id:"countdown_go.png",trim:{origWidth:256,origHeight:192,width:98,height:45,offsetX:79,offsetY:77}},{x:966,y:100,width:9,height:19,id:"gold_small_medal.png",trim:{origWidth:11,origHeight:21,width:9,height:19,offsetX:1,offsetY:1}},{x:919,y:215,width:46,height:75,id:"gun_colonel_celebration_0.png"},{x:737,y:342,width:46,height:75,id:"gun_colonel_celebration_1.png"},{x:403,y:646,width:194,height:56,id:"gunfight_copy_embed.png",trim:{origWidth:256,origHeight:192,width:194,height:56,offsetX:31,offsetY:84}},{x:714,y:92,width:20,height:16,id:"icon_baby.png",trim:{origWidth:256,origHeight:192,width:20,height:16,offsetX:72,offsetY:125}},{x:714,y:74,width:20,height:16,id:"icon_baby_off.png",trim:{origWidth:256,origHeight:192,width:20,height:16,offsetX:72,offsetY:125}},{x:954,y:627,width:18,height:18,id:"icon_courtroom.png",trim:{origWidth:256,origHeight:192,width:18,height:18,offsetX:135,offsetY:123}},{x:954,y:647,width:18,height:18,id:"icon_courtroom_off.png",trim:{origWidth:256,origHeight:192,width:18,height:18,offsetX:135,offsetY:123}},{x:1007,y:760,width:6,height:15,id:"icon_gunfight.png",trim:{origWidth:256,origHeight:192,width:6,height:15,offsetX:171,offsetY:126}},{x:1007,y:777,width:6,height:15,id:"icon_gunfight_off.png",trim:{origWidth:256,origHeight:192,width:6,height:15,offsetX:171,offsetY:126}},{x:954,y:585,width:19,height:19,id:"icon_hangry.png",trim:{origWidth:256,origHeight:192,width:19,height:19,offsetX:195,offsetY:124}},{x:954,y:606,width:19,height:19,id:"icon_hangry_off.png",trim:{origWidth:256,origHeight:192,width:19,height:19,offsetX:195,offsetY:124}},{x:957,y:688,width:16,height:19,id:"icon_school.png",trim:{origWidth:256,origHeight:192,width:16,height:19,offsetX:42,offsetY:123}},{x:957,y:667,width:16,height:19,id:"icon_school_off.png",trim:{origWidth:256,origHeight:192,width:16,height:19,offsetX:42,offsetY:123}},{x:488,y:414,width:26,height:17,id:"icon_train.png",trim:{origWidth:256,origHeight:192,width:26,height:17,offsetX:101,offsetY:125}},{x:800,y:186,width:26,height:17,id:"icon_train_off.png",trim:{origWidth:256,origHeight:192,width:26,height:17,offsetX:101,offsetY:125}},{x:0,y:194,width:256,height:192,id:"kfc_0000_BG.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:662,y:872,width:50,height:19,id:"kfc_0000_skip_click.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:136,offsetY:167}},{x:818,y:872,width:50,height:19,id:"kfc_0000s_0000_CONTINUE-_HOVER.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:103,offsetY:167}},{x:870,y:872,width:50,height:19,id:"kfc_0000s_0001_CONTINUE.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:103,offsetY:167}},{x:922,y:872,width:50,height:19,id:"kfc_0000s_0002_SKIP_HOVER.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:130,offsetY:167}},{x:510,y:910,width:50,height:19,id:"kfc_0000s_0003_SKIP.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:130,offsetY:167}},{x:718,y:910,width:50,height:19,id:"kfc_0000s_0004_NEXT_HOVER.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:76,offsetY:167}},{x:354,y:931,width:50,height:19,id:"kfc_0000s_0005_NEXT.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:76,offsetY:167}},{x:494,y:781,width:150,height:26,id:"kfc_0001_Group-126-copy.png",trim:{origWidth:256,origHeight:192,width:150,height:26,offsetX:53,offsetY:14}},{x:458,y:931,width:50,height:19,id:"kfc_0001_Results_click.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:103,offsetY:167}},{x:977,y:760,width:28,height:58,id:"kfc_0001s_0000_school_young_colonel_run_4-.png",trim:{origWidth:256,origHeight:192,width:28,height:58,offsetX:116,offsetY:15}},{x:977,y:704,width:34,height:54,id:"kfc_0001s_0001_school_young_colonel_run_3.png",trim:{origWidth:256,origHeight:192,width:34,height:54,offsetX:112,offsetY:13}},{x:977,y:820,width:28,height:58,id:"kfc_0001s_0002_school_young_colonel_run_2.png",trim:{origWidth:256,origHeight:192,width:28,height:58,offsetX:116,offsetY:15}},{x:196,y:910,width:47,height:50,id:"kfc_0001s_0003_school_young_colonel_run_1.png",trim:{origWidth:256,origHeight:192,width:47,height:50,offsetX:105,offsetY:13}},{x:834,y:149,width:125,height:64,id:"kfc_0001s_0004_school_STEP_2.png",trim:{origWidth:256,origHeight:192,width:125,height:64,offsetX:66,offsetY:88}},{x:834,y:470,width:103,height:60,id:"kfc_0001s_0005_school_STEP_1.png",trim:{origWidth:256,origHeight:192,width:103,height:60,offsetX:77,offsetY:88}},{x:770,y:910,width:50,height:19,id:"kfc_0001s_0006_Layer-68-copy-2.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:103,offsetY:167}},{x:926,y:910,width:45,height:19,id:"kfc_0002_ok_click.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:106,offsetY:167}},{x:800,y:206,width:25,height:34,id:"kfc_0002s_0000_babies_pink_up.png",trim:{origWidth:256,origHeight:192,width:25,height:34,offsetX:116,offsetY:29}},{x:446,y:730,width:147,height:34,id:"kfc_0002s_0001_Who-will-deliver-all--the-babies_.png",trim:{origWidth:256,origHeight:192,width:147,height:34,offsetX:54,offsetY:88}},{x:388,y:435,width:126,height:24,id:"kfc_0002s_0002_The-poor-mountain--people-can’t-afford-doctors.--A-helpful-(but.png",trim:{origWidth:256,origHeight:192,width:126,height:24,offsetX:64,offsetY:88}},{x:714,y:872,width:50,height:19,id:"kfc_0003_Restart_click.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:71,offsetY:167}},{x:894,y:667,width:61,height:65,id:"kfc_0003s_0000_card_colonel_4.png",trim:{origWidth:256,origHeight:192,width:61,height:65,offsetX:93,offsetY:13}},{x:737,y:272,width:57,height:68,id:"kfc_0003s_0001_card_colonel_3.png",trim:{origWidth:256,origHeight:192,width:57,height:68,offsetX:97,offsetY:10}},{x:737,y:206,width:61,height:64,id:"kfc_0003s_0002_card_colonel_2.png",trim:{origWidth:256,origHeight:192,width:61,height:64,offsetX:93,offsetY:14}},{x:737,y:139,width:61,height:65,id:"kfc_0003s_0003_card_colonel_1-.png",trim:{origWidth:256,origHeight:192,width:61,height:65,offsetX:93,offsetY:13}},{x:0,y:910,width:144,height:61,id:"kfc_0003s_0004_card_text1.png",trim:{origWidth:256,origHeight:192,width:144,height:61,offsetX:59,offsetY:88}},{x:834,y:532,width:114,height:51,id:"kfc_0003s_0005_card_text2.png",trim:{origWidth:256,origHeight:192,width:114,height:51,offsetX:73,offsetY:88}},{x:874,y:910,width:50,height:19,id:"kfc_0004_Resume_click.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:136,offsetY:167}},{x:834,y:667,width:58,height:80,id:"kfc_0004s_0006_courtroom_judge_hit_in_head_1.png"},{x:977,y:314,width:34,height:78,id:"kfc_0004s_0006_courtroom_judge_hit_in_head_2.png"},{x:778,y:536,width:39,height:80,id:"kfc_0004s_0006_courtroom_judge_hit_in_head_3.png"},{x:834,y:749,width:133,height:24,id:"kfc_0004s_0007_courtroom_Help-the-Colonel-say,--_-I-object-_-the-old-fashioned--way!.png",trim:{origWidth:256,origHeight:192,width:133,height:24,offsetX:57,offsetY:88}},{x:516,y:416,width:205,height:60,id:"kfc_0004s_0008_courtroom_txt1.png",trim:{origWidth:256,origHeight:192,width:205,height:60,offsetX:26,offsetY:88}},{x:766,y:872,width:50,height:19,id:"kfc_0005_Continue_click.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:73,offsetY:167}},{x:490,y:568,width:194,height:60,id:"kfc_0005s_0012_gun_Next,-the-Colonel--opens-a-gas-station..png"},{x:294,y:568,width:194,height:60,id:"kfc_0005s_0012_gunfight_copy.png",trim:{origWidth:256,origHeight:192,width:194,height:60,offsetX:31,offsetY:88}},{x:737,y:496,width:86,height:38,id:"kfc_0005s_0013_gun_Look-out!--He’s-got--a-gun!.png",trim:{origWidth:256,origHeight:192,width:86,height:38,offsetX:85,offsetY:88}},{x:839,y:931,width:45,height:19,id:"kfc_0006_Prize_click.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:177,offsetY:167}},{x:686,y:568,width:48,height:50,id:"kfc_0006s_0000_chicken_front_customer1_happy.png",trim:{origWidth:256,origHeight:192,width:48,height:50,offsetX:100,offsetY:21}},{x:301,y:910,width:51,height:41,id:"kfc_0006s_0001_chicken_front_customer1_cry_1.png",trim:{origWidth:256,origHeight:192,width:51,height:41,offsetX:99,offsetY:22}},{x:245,y:910,width:54,height:42,id:"kfc_0006s_0002_chicken_front_customer1_cry_2.png",trim:{origWidth:256,origHeight:192,width:54,height:42,offsetX:96,offsetY:21}},{x:780,y:646,width:48,height:49,id:"kfc_0006s_0003_chicken_front_customer1_hungry_2.png",trim:{origWidth:256,origHeight:192,width:48,height:49,offsetX:101,offsetY:21}},{x:146,y:910,width:48,height:50,id:"kfc_0006s_0004_chicken_front_customer1_hungry_1.png",trim:{origWidth:256,origHeight:192,width:48,height:50,offsetX:101,offsetY:21}},{x:894,y:734,width:62,height:12,id:"kfc_0006s_0005_chicken_Ready_.png",trim:{origWidth:256,origHeight:192,width:62,height:12,offsetX:97,offsetY:88}},{x:98,y:568,width:194,height:70,id:"kfc_0006s_0006_chicken_The-Colonel-has-had--a-lot-of-adventures..png",trim:{origWidth:256,origHeight:192,width:194,height:70,offsetX:31,offsetY:88}},{x:745,y:931,width:45,height:19,id:"kfc_0007_Replay_click.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:138,offsetY:167}},{x:258,y:194,width:256,height:192,id:"kfc_0007s_0000_bg.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:488,y:388,width:25,height:24,id:"kfc_0007s_0001_babies_pink_down.png"},{x:796,y:308,width:34,height:20,id:"kfc_0007s_0002_babies_pink_neutral.png"},{x:796,y:272,width:25,height:34,id:"kfc_0007s_0003_babies_pink_up.png"},{x:354,y:910,width:50,height:19,id:"kfc_0010_Play_click.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:103,offsetY:167}},{x:406,y:910,width:50,height:19,id:"kfc_0011_skip.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:136,offsetY:167}},{x:458,y:910,width:50,height:19,id:"kfc_0012_Results.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:103,offsetY:167}},{x:557,y:931,width:45,height:19,id:"kfc_0013_ok.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:106,offsetY:167}},{x:614,y:910,width:50,height:19,id:"kfc_0014_Restart.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:71,offsetY:167}},{x:666,y:910,width:50,height:19,id:"kfc_0015_Resume.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:136,offsetY:167}},{x:406,y:931,width:50,height:19,id:"kfc_0016_Continue.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:73,offsetY:167}},{x:510,y:931,width:45,height:19,id:"kfc_0018_Replay-copy.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:138,offsetY:167}},{x:822,y:910,width:50,height:19,id:"kfc_0021_Play.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:103,offsetY:167}},{x:737,y:0,width:95,height:137,id:"kfc_0022_did_not_qualify.png",trim:{origWidth:256,origHeight:192,width:95,height:137,offsetX:82,offsetY:0}},{x:834,y:362,width:127,height:52,id:"kfc_0024_Group-128.png",trim:{origWidth:256,origHeight:192,width:127,height:52,offsetX:65,offsetY:40}},{x:963,y:308,width:10,height:16,id:"kfc_0025_number_bar_level.png",trim:{origWidth:256,origHeight:192,width:10,height:16,offsetX:95,offsetY:127}},{x:834,y:308,width:127,height:52,id:"kfc_0028_title_level.png",trim:{origWidth:256,origHeight:192,width:127,height:52,offsetX:65,offsetY:40}},{x:342,y:781,width:150,height:26,id:"kfc_0032_PAUSE_center.png",trim:{origWidth:256,origHeight:192,width:150,height:26,offsetX:53,offsetY:85}},{x:152,y:849,width:127,height:21,id:"kfc_0033_instructions_big.png",trim:{origWidth:256,origHeight:192,width:127,height:21,offsetX:64,offsetY:64}},{x:410,y:849,width:105,height:16,id:"kfc_0034_Instruction_small.png",trim:{origWidth:256,origHeight:192,width:105,height:16,offsetX:76,offsetY:80}},{x:595,y:730,width:150,height:26,id:"kfc_0035_PAUSE.png",trim:{origWidth:256,origHeight:192,width:150,height:26,offsetX:53,offsetY:35}},{x:599,y:646,width:179,height:49,id:"kfc_0036_failure.png",trim:{origWidth:256,origHeight:192,width:179,height:49,offsetX:39,offsetY:72}},{x:0,y:849,width:150,height:59,id:"kfc_0037_next_time.png",trim:{origWidth:256,origHeight:192,width:150,height:59,offsetX:53,offsetY:67}},{x:161,y:781,width:179,height:57,id:"kfc_0038_you_lose.png",trim:{origWidth:256,origHeight:192,width:179,height:57,offsetX:41,offsetY:68}},{x:285,y:730,width:159,height:36,id:"kfc_0039_tarnation!.png",trim:{origWidth:256,origHeight:192,width:159,height:36,offsetX:49,offsetY:78}},{x:136,y:973,width:47,height:18,id:"kfc_0040_Vector-Smart-Object.png",trim:{origWidth:256,origHeight:192,width:47,height:18,offsetX:27,offsetY:89}},{x:792,y:931,width:45,height:19,id:"kfc_0041_Vector-Smart-Object.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:189,offsetY:89}},{x:0,y:481,width:96,height:163,id:"kfc_0042_bronze_medal_win.png",trim:{origWidth:256,origHeight:192,width:96,height:163,offsetX:86,offsetY:0}},{x:516,y:177,width:96,height:163,id:"kfc_0043_silver_medal_win.png",trim:{origWidth:256,origHeight:192,width:96,height:163,offsetX:86,offsetY:0}},{x:614,y:177,width:96,height:163,id:"kfc_0044_gold_medal_win.png",trim:{origWidth:256,origHeight:192,width:96,height:163,offsetX:86,offsetY:0}},{x:977,y:880,width:30,height:51,id:"kfc_0045_hand.png",trim:{origWidth:256,origHeight:192,width:30,height:51,offsetX:118,offsetY:0}},{x:0,y:646,width:96,height:133,id:"kfc_0046_medal.png",trim:{origWidth:256,origHeight:192,width:96,height:133,offsetX:86,offsetY:30}},{x:258,y:0,width:256,height:192,id:"kfc_0057_GREY--bg.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:98,y:481,width:176,height:85,id:"kfc_0062_chicken_time.png",trim:{origWidth:256,origHeight:192,width:176,height:85,offsetX:40,offsetY:62}},{x:747,y:730,width:70,height:21,id:"kfc_0063_level_6.png",trim:{origWidth:256,origHeight:192,width:70,height:21,offsetX:93,offsetY:25}},{x:98,y:730,width:185,height:42,id:"kfc_0064_gas_station.png",trim:{origWidth:256,origHeight:192,width:185,height:42,offsetX:36,offsetY:83}},{x:440,y:872,width:70,height:21,id:"kfc_0065_level_5.png",trim:{origWidth:256,origHeight:192,width:70,height:21,offsetX:93,offsetY:25}},{x:0,y:781,width:159,height:66,id:"kfc_0066_courtroom.png",trim:{origWidth:256,origHeight:192,width:159,height:66,offsetX:49,offsetY:71}},{x:224,y:872,width:70,height:21,id:"kfc_0067_level_4.png",trim:{origWidth:256,origHeight:192,width:70,height:21,offsetX:93,offsetY:25}},{x:834,y:0,width:141,height:77,id:"kfc_0068_card.png",trim:{origWidth:256,origHeight:192,width:141,height:77,offsetX:58,offsetY:66}},{x:152,y:872,width:70,height:21,id:"kfc_0069_level_3.png",trim:{origWidth:256,origHeight:192,width:70,height:21,offsetX:93,offsetY:25}},{x:251,y:646,width:150,height:75,id:"kfc_0070_baby_businness.png",trim:{origWidth:256,origHeight:192,width:150,height:75,offsetX:53,offsetY:67}},{x:368,y:872,width:70,height:21,id:"kfc_0071_level_2.png",trim:{origWidth:256,origHeight:192,width:70,height:21,offsetX:93,offsetY:25}},{x:834,y:79,width:130,height:68,id:"kfc_0072_sixth.png",trim:{origWidth:256,origHeight:192,width:130,height:68,offsetX:63,offsetY:70}},{x:296,y:872,width:70,height:21,id:"kfc_0073_level_1.png",trim:{origWidth:256,origHeight:192,width:70,height:21,offsetX:93,offsetY:25}},{x:737,y:618,width:84,height:26,id:"kfc_0076_True-stories-from--the-adventures-of--Colonel-Sanders.png",trim:{origWidth:256,origHeight:192,width:84,height:26,offsetX:86,offsetY:129}},{x:562,y:910,width:50,height:19,id:"kfc_0077_BTN_play_click-copy.png",trim:{origWidth:256,origHeight:192,width:50,height:19,offsetX:103,offsetY:167}},{x:834,y:215,width:83,height:91,id:"kfc_0078_colonel_8bit.png",trim:{origWidth:256,origHeight:192,width:83,height:91,offsetX:172,offsetY:101}},{x:516,y:74,width:155,height:101,id:"kfc_0079_colonel_quest_titel.png",trim:{origWidth:256,origHeight:192,width:155,height:101,offsetX:50,offsetY:18}},{x:671,y:481,width:57,height:43,id:"kfc_0082_share_popup.png",trim:{origWidth:57,origHeight:43,width:57,height:43,offsetX:0,offsetY:0}},{x:403,y:704,width:175,height:13,id:"kfc_0083_LOADER_bar.png",trim:{origWidth:256,origHeight:192,width:175,height:13,offsetX:41,offsetY:90}},{x:646,y:781,width:177,height:21,id:"kfc_0084_LOADER_base.png",trim:{origWidth:256,origHeight:192,width:177,height:21,offsetX:40,offsetY:88}},{x:977,y:394,width:34,height:78,id:"kfc_courtroom_block.png"},{x:737,y:536,width:39,height:80,id:"kfc_courtroom_idle.png"},{x:894,y:585,width:58,height:80,id:"kfc_courtroom_punch.png"},{x:977,y:0,width:38,height:73,id:"kfc_cutscene_baby_0.png",trim:{origWidth:256,origHeight:192,width:38,height:73,offsetX:114,offsetY:7}},{x:785,y:419,width:41,height:73,id:"kfc_cutscene_baby_1.png",trim:{origWidth:256,origHeight:192,width:41,height:73,offsetX:114,offsetY:7}},{x:977,y:474,width:34,height:78,id:"kfc_cutscene_courtroom_0.png",trim:{origWidth:256,origHeight:192,width:34,height:78,offsetX:116,offsetY:6}},{x:834,y:585,width:58,height:80,id:"kfc_cutscene_courtroom_1.png",trim:{origWidth:256,origHeight:192,width:58,height:80,offsetX:116,offsetY:4}},{x:673,y:74,width:39,height:80,id:"kfc_cutscene_courtroom_2.png",trim:{origWidth:256,origHeight:192,width:39,height:80,offsetX:114,offsetY:4}},{x:785,y:342,width:46,height:75,id:"kfc_cutscene_gunfight_0.png",trim:{origWidth:256,origHeight:192,width:46,height:75,offsetX:106,offsetY:9}},{x:737,y:419,width:46,height:75,id:"kfc_cutscene_gunfight_1.png",trim:{origWidth:256,origHeight:192,width:46,height:75,offsetX:104,offsetY:9}},{x:977,y:156,width:35,height:79,id:"kfc_hungry_baby_0.png",trim:{origWidth:256,origHeight:192,width:35,height:79,offsetX:114,offsetY:4}},{x:977,y:237,width:36,height:75,id:"kfc_hungry_baby_1.png",trim:{origWidth:256,origHeight:192,width:36,height:75,offsetX:112,offsetY:3}},{x:977,y:75,width:35,height:79,id:"kfc_hungry_baby_2.png",trim:{origWidth:256,origHeight:192,width:35,height:79,offsetX:114,offsetY:4}},{x:0,y:0,width:256,height:192,id:"kfc_instructions_bg.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:0,y:388,width:190,height:91,id:"kfc_instructions_level_1.png",trim:{origWidth:256,origHeight:192,width:190,height:91,offsetX:33,offsetY:59}},{x:516,y:0,width:219,height:72,id:"kfc_instructions_level_2.png",trim:{origWidth:256,origHeight:192,width:219,height:72,offsetX:18,offsetY:59}},{x:192,y:388,width:194,height:82,id:"kfc_instructions_level_3.png",trim:{origWidth:256,origHeight:192,width:194,height:82,offsetX:30,offsetY:59}},{x:276,y:481,width:201,height:72,id:"kfc_instructions_level_4.png",trim:{origWidth:256,origHeight:192,width:201,height:72,offsetX:27,offsetY:59}},{x:516,y:342,width:214,height:72,id:"kfc_instructions_level_5.png",trim:{origWidth:256,origHeight:192,width:214,height:72,offsetX:20,offsetY:59}},{x:491,y:809,width:147,height:21,id:"kfc_instructions_loader_01.png",trim:{origWidth:256,origHeight:192,width:147,height:21,offsetX:52,offsetY:163}},{x:342,y:809,width:147,height:21,id:"kfc_instructions_loader_02.png",trim:{origWidth:256,origHeight:192,width:147,height:21,offsetX:52,offsetY:163}},{x:825,y:781,width:147,height:21,id:"kfc_instructions_loader_03.png",trim:{origWidth:256,origHeight:192,width:147,height:21,offsetX:52,offsetY:163}},{x:789,y:809,width:147,height:21,id:"kfc_instructions_loader_04.png",trim:{origWidth:256,origHeight:192,width:147,height:21,offsetX:52,offsetY:163}},{x:640,y:809,width:147,height:21,id:"kfc_instructions_loader_05.png",trim:{origWidth:256,origHeight:192,width:147,height:21,offsetX:52,offsetY:163}},{x:479,y:481,width:190,height:72,id:"kfc_instructions_mobile_level_1.png",trim:{origWidth:256,origHeight:192,width:190,height:72,offsetX:33,offsetY:59}},{x:98,y:646,width:151,height:82,id:"kfc_instructions_mobile_level_4.png",trim:{origWidth:256,origHeight:192,width:151,height:82,offsetX:52,offsetY:59}},{x:281,y:849,width:127,height:21,id:"kfc_instructions_title_big.png",trim:{origWidth:256,origHeight:192,width:127,height:21,offsetX:64,offsetY:27}},{x:977,y:554,width:34,height:74,id:"kfc_results_bronze_medal.png",trim:{origWidth:256,origHeight:192,width:34,height:74,offsetX:43,offsetY:58}},{x:977,y:966,width:32,height:5,id:"kfc_results_bronze_text.png",trim:{origWidth:256,origHeight:192,width:32,height:5,offsetX:44,offsetY:135}},{x:89,y:973,width:45,height:19,id:"kfc_results_btn_prize.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:171,offsetY:167}},{x:604,y:931,width:45,height:19,id:"kfc_results_btn_prize_click.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:171,offsetY:167}},{x:651,y:931,width:45,height:19,id:"kfc_results_btn_replay.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:106,offsetY:167}},{x:698,y:931,width:45,height:19,id:"kfc_results_btn_replay_click.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:106,offsetY:167}},{x:886,y:931,width:45,height:19,id:"kfc_results_btn_share.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:41,offsetY:167}},{x:42,y:973,width:45,height:19,id:"kfc_results_btn_share_click.png",trim:{origWidth:256,origHeight:192,width:45,height:19,offsetX:41,offsetY:167}},{x:977,y:630,width:33,height:72,id:"kfc_results_gold_medal.png",trim:{origWidth:256,origHeight:192,width:33,height:72,offsetX:178,offsetY:59}},{x:949,y:292,width:21,height:5,id:"kfc_results_gold_text.png",trim:{origWidth:256,origHeight:192,width:21,height:5,offsetX:183,offsetY:135}},{x:919,y:292,width:28,height:5,id:"kfc_results_silver_text.png",trim:{origWidth:256,origHeight:192,width:28,height:5,offsetX:114,offsetY:135}},{x:834,y:416,width:127,height:52,id:"level_selected_title.png",trim:{origWidth:256,origHeight:192,width:127,height:52,offsetX:65,offsetY:40}},{x:800,y:242,width:28,height:22,id:"pause_btn.png",trim:{origWidth:28,origHeight:22,width:28,height:22,offsetX:0,offsetY:0}},{x:961,y:184,width:9,height:18,id:"share_tooltip_fb.png",trim:{origWidth:26,origHeight:33,width:9,height:18,offsetX:8,offsetY:7}},{x:961,y:149,width:13,height:18,id:"share_tooltip_twitter.png",trim:{origWidth:26,origHeight:33,width:13,height:18,offsetX:8,offsetY:7}},{x:966,y:79,width:9,height:19,id:"silver_small_medal.png",trim:{origWidth:11,origHeight:21,width:9,height:19,offsetX:1,offsetY:1}},{x:1007,y:829,width:4,height:7,id:"ui_health_0.png",trim:{origWidth:4,origHeight:7,width:4,height:7,offsetX:0,offsetY:0}},{x:1007,y:820,width:4,height:7,id:"ui_health_1.png",trim:{origWidth:4,origHeight:7,width:4,height:7,offsetX:0,offsetY:0}},{x:1007,y:803,width:4,height:7,id:"ui_health_2.png",trim:{origWidth:4,origHeight:7,width:4,height:7,offsetX:0,offsetY:0}},{x:1007,y:838,width:4,height:7,id:"ui_health_3.png",trim:{origWidth:4,origHeight:7,width:4,height:7,offsetX:0,offsetY:0}},{x:1007,y:794,width:4,height:7,id:"ui_health_X.png",trim:{origWidth:4,origHeight:7,width:4,height:7,offsetX:0,offsetY:0}},{x:0,y:973,width:40,height:22,id:"ui_health_bg.png",trim:{origWidth:40,origHeight:22,width:40,height:22,offsetX:0,offsetY:0}},{x:939,y:517,width:13,height:12,id:"ui_health_heart.png",trim:{origWidth:13,origHeight:12,width:13,height:12,offsetX:0,offsetY:0}},{x:961,y:169,width:13,height:13,id:"ui_health_heart_bg.png",trim:{origWidth:13,origHeight:13,width:13,height:13,offsetX:0,offsetY:0}},{x:919,y:299,width:16,height:3,id:"ui_health_pole.png",trim:{origWidth:16,origHeight:3,width:16,height:3,offsetX:0,offsetY:0}}]},width:1015,height:995}]}
}),define("game/screens/game_screen_asset_manifest",["underscore","game/sprites/game_screen_assets"],function(e,t){var i=e.flatten([t.manifest],!0);e.each(i,function(e){e.spritesheet&&(e.pixijs=e.spritesheet)});var s=[{src:"/font/frucade.xml",id:"font/frucade.xml",type:"xml",pixijs:{font:{name:"frucade",bitmap:"font/frucade.png"}}},{id:"CUTSCREEN_MUSIC",priority:1,type:"sound",volume:1,src:"/audio/games/common/cutscene_music.mp3"},{id:"AUDIO_CLICK",type:"sound",volume:1,src:"/audio/games/common/arcade_click_01.mp3"},{id:"AUDIO_MOUSEOVER",type:"sound",volume:1,src:"/audio/games/common/arcade_rollover_01.mp3"},{id:"AUDIO_BRONZE",type:"sound",volume:1,src:"/audio/games/common/success_bronze_synth.mp3"},{id:"AUDIO_SILVER",type:"sound",volume:1,src:"/audio/games/common/success_silver_synth.mp3"},{id:"AUDIO_REWARD",type:"sound",volume:1,src:"/audio/games/common/random12_reward.mp3"},{id:"AUDIO_LOSE",type:"sound",volume:1,src:"/audio/games/common/random13_youlose.mp3"},{id:"AUDIO_GOLD",type:"sound",volume:1,src:"/audio/games/common/success_gold_synth.mp3"},{id:"FAIL",type:"sound",volume:1,src:"/audio/games/common/fail_synth.mp3"},{id:"AUDIO_COUNTDOWN_1",type:"sound",volume:1,src:"/audio/games/common/countdown_speech_one.mp3"},{id:"AUDIO_COUNTDOWN_2",type:"sound",volume:1,src:"/audio/games/common/countdown_speech_two.mp3"},{id:"AUDIO_COUNTDOWN_3",type:"sound",volume:1,src:"/audio/games/common/countdown_speech_three.mp3"},{id:"AUDIO_COUNTDOWN_GO",type:"sound",volume:1,src:"/audio/games/common/countdown_speech_go.mp3"},{id:"AUDIO_WHINE",type:"sound",volume:1,src:"/audio/games/common/arcade_startup_whine.mp3"}];s=s.concat(i);var n={TOOLTIP_SHARE_BG:{id:"TOOLTIP_SHARE_BG",type:"SPRITE",url:"share_tooltip.png"},TOOLTIP_SHARE_TWITTER:{id:"TOOLTIP_SHARE_TWITTER",type:"SPRITE",url:"share_tooltip_twitter.png"},TOOLTIP_SHARE_FB:{id:"TOOLTIP_SHARE_FB",type:"SPRITE",url:"share_tooltip_fb.png"},TOOLTIP_SHARE_TWITTER_CLICK:{id:"TOOLTIP_SHARE_TWITTER_CLICK",type:"SPRITE",url:"share_tooltip_twitter.png"},TOOLTIP_SHARE_FB_CLICK:{id:"TOOLTIP_SHARE_FB_CLICK",type:"SPRITE",url:"share_tooltip_fb.png"},LEVEL_SELECT:{id:"LEVEL_SELECT",type:"SPRITE",url:"btn_level_select.png"},LEVEL_SELECT_HOVER:{id:"LEVEL_SELECT_HOVER",type:"SPRITE",url:"btn_level_select_hover.png"},SKIP_CLICK:{id:"SKIP_CLICK",type:"SPRITE",url:"kfc_0000_skip_click.png"},RESULTS_BTN:{id:"RESULTS_BTN",type:"SPRITE",url:"kfc_0012_Results.png"},RESULTS_CLICK:{id:"RESULTS_CLICK",type:"SPRITE",url:"kfc_0001_Results_click.png"},OK_CLICK:{id:"OK_CLICK",type:"SPRITE",url:"kfc_0002_ok_click.png"},RESTART_CLICK:{id:"RESTART_CLICK",type:"SPRITE",url:"kfc_0003_Restart_click.png"},RESUME_CLICK:{id:"RESUME_CLICK",type:"SPRITE",url:"kfc_0004_Resume_click.png"},CONTINUE_CLICK:{id:"CONTINUE_CLICK",type:"SPRITE",url:"kfc_0005_Continue_click.png"},PRIZE_CLICK:{id:"PRIZE_CLICK",type:"SPRITE",url:"kfc_results_btn_prize_click.png"},REPLAY_CLICK:{id:"REPLAY_CLICK",type:"SPRITE",url:"kfc_0007_Replay_click.png"},SHARE_CLICK:{id:"SHARE_CLICK",type:"SPRITE",url:"kfc_results_btn_share_click.png"},PLAY_CLICK:{id:"PLAY_CLICK",type:"SPRITE",url:"kfc_0010_Play_click.png"},SKIP:{id:"SKIP",type:"SPRITE",url:"kfc_0011_skip.png"},RESULTS:{id:"RESULTS",type:"SPRITE",url:"kfc_results_sign.png"},OK:{id:"OK",type:"SPRITE",url:"kfc_0013_ok.png"},RESTART:{id:"RESTART",type:"SPRITE",url:"kfc_0014_Restart.png"},RESUME:{id:"RESUME",type:"SPRITE",url:"kfc_0015_Resume.png"},CONTINUE:{id:"CONTINUE",type:"SPRITE",url:"kfc_0016_Continue.png"},PRIZE:{id:"PRIZE",type:"SPRITE",url:"kfc_results_btn_prize.png"},PLAY_MORE:{id:"PLAY_MORE",type:"SPRITE",url:"button_play_more.png"},PLAY_MORE_CLICK:{id:"PLAY_MORE_CLICK",type:"SPRITE",url:"button_play_more_hover.png"},"REPLAY-COPY":{id:"REPLAY-COPY",type:"SPRITE",url:"kfc_0018_Replay-copy.png"},SHARE:{id:"SHARE",type:"SPRITE",url:"kfc_results_btn_share.png"},PLAY:{id:"PLAY",type:"SPRITE",url:"kfc_0021_Play.png"},DID_NOT_QUALIFY:{id:"DID_NOT_QUALIFY",type:"SPRITE",url:"kfc_0022_did_not_qualify.png"},"GROUP-128":{id:"GROUP-128",type:"SPRITE",url:"kfc_0024_Group-128.png"},NUMBER_BAR_LEVEL:{id:"NUMBER_BAR_LEVEL",type:"SPRITE",url:"kfc_0025_number_bar_level.png"},BOX_LEVEL:{id:"BOX_LEVEL",type:"SPRITE",url:"kfc_0030_box_level.png"},"1----2----3----4----5----6":{id:"1----2----3----4----5----6",type:"SPRITE",url:"kfc_0031_1----2----3----4----5----6.png"},TITLE_LEVEL:{id:"TITLE_LEVEL",type:"SPRITE",url:"kfc_0028_title_level.png"},BAR_LEVEL:{id:"BAR_LEVEL",type:"SPRITE",url:"kfc_0029_bar_level.png"},PAUSE_CENTER:{id:"PAUSE_CENTER",type:"SPRITE",url:"kfc_0032_PAUSE_center.png"},INSTRUCTIONS_TITLE_BIG:{id:"INSTRUCTIONS_TITLE_BIG",type:"SPRITE",url:"kfc_instructions_title_big.png"},INSTRUCTION_SMALL:{id:"INSTRUCTION_SMALL",type:"SPRITE",url:"kfc_0034_Instruction_small.png"},GAME_PAUSE_BTN:{id:"GAME_PAUSE_BTN",type:"SPRITE",url:"pause_btn.png"},GAME_PAUSE_BTN_HOVER:{id:"GAME_PAUSE_BTN_HOVER",type:"SPRITE",url:"pause_hover.png"},PAUSE:{id:"PAUSE",type:"SPRITE",url:"kfc_0001_Group-126-copy.png"},FAILURE:{id:"FAILURE",type:"SPRITE",url:"kfc_0036_failure.png"},NEXT_TIME:{id:"NEXT_TIME",type:"SPRITE",url:"kfc_0037_next_time.png"},YOU_LOSE:{id:"YOU_LOSE",type:"SPRITE",url:"kfc_0038_you_lose.png"},"TARNATION!":{id:"TARNATION!",type:"SPRITE",url:"kfc_0039_tarnation!.png"},TEXT_YOU:{id:"TEXT_YOU",type:"SPRITE",url:"kfc_0040_Vector-Smart-Object.png"},TEXT_WIN:{id:"TEXT_WIN",type:"SPRITE",url:"kfc_0041_Vector-Smart-Object.png"},BRONZE_MEDAL_WIN:{id:"BRONZE_MEDAL_WIN",type:"SPRITE",url:"kfc_0042_bronze_medal_win.png"},SILVER_MEDAL_WIN:{id:"SILVER_MEDAL_WIN",type:"SPRITE",url:"kfc_0043_silver_medal_win.png"},GOLD_MEDAL_WIN:{id:"GOLD_MEDAL_WIN",type:"SPRITE",url:"kfc_0044_gold_medal_win.png"},HAND:{id:"HAND",type:"SPRITE",url:"kfc_0045_hand.png"},MEDAL:{id:"MEDAL",type:"SPRITE",url:"kfc_0046_medal.png"},LEVEL_SELECT_GOLD:{id:"LEVEL_SELECT_GOLD",type:"SPRITE",url:"gold_small_medal.png"},LEVEL_SELECT_SILVER:{id:"LEVEL_SELECT_SILVER",type:"SPRITE",url:"silver_small_medal.png"},LEVEL_SELECT_BRONZE:{id:"LEVEL_SELECT_BRONZE",type:"SPRITE",url:"bronze_small_medal.png"},RESULTS_REPLAY:{id:"RESULTS_REPLAY",type:"SPRITE",url:"kfc_results_btn_replay.png"},RESULTS_REPLAY_CLICK:{id:"RESULTS_REPLAY_CLICK",type:"SPRITE",url:"kfc_results_btn_replay_click.png"},RESULTS_X_TEXT:{id:"RESULTS_X_TEXT",type:"SPRITE",url:"kfc_results_text_x.png"},RESULTS_MEDAL_BRONZE:{id:"RESULTS_MEDAL_BRONZE",type:"SPRITE",url:"kfc_results_bronze_medal.png"},RESULTS_MEDAL_SILVER:{id:"RESULTS_MEDAL_SILVER",type:"SPRITE",url:"kfc_results_silver_medal.png"},RESULTS_MEDAL_GOLD:{id:"RESULTS_MEDAL_GOLD",type:"SPRITE",url:"kfc_results_gold_medal.png"},BRONZE:{id:"BRONZE",type:"SPRITE",url:"kfc_results_bronze_text.png"},"1X":{id:"1X",type:"SPRITE",url:"kfc_0051_1x.png"},SILVER:{id:"SILVER",type:"SPRITE",url:"kfc_results_silver_text.png"},"4X":{id:"4X",type:"SPRITE",url:"kfc_0053_4x.png"},GOLD:{id:"GOLD",type:"SPRITE",url:"kfc_results_gold_text.png"},"2X":{id:"2X",type:"SPRITE",url:"kfc_0055_2x.png"},"GREY--BG":{id:"GREY--BG",type:"SPRITE",url:"kfc_0057_GREY--bg.png"},COUNTDOWN_GO:{id:"COUNTDOWN_GO",type:"SPRITE",url:"countdown_go.png"},COUNTDOWN_2:{id:"COUNTDOWN_2",type:"SPRITE",url:"countdown_2.png"},COUNTDOWN_1:{id:"COUNTDOWN_1",type:"SPRITE",url:"countdown_1.png"},COUNTDOWN_3:{id:"COUNTDOWN_3",type:"SPRITE",url:"countdown_3.png"},TITLE_LEVEL_6:{id:"TITLE_LEVEL_6",type:"SPRITE",url:"kfc_0062_chicken_time.png"},LEVEL_6:{id:"LEVEL_6",type:"SPRITE",url:"kfc_0063_level_6.png"},TITLE_LEVEL_5:{id:"TITLE_LEVEL_5",type:"SPRITE",url:"kfc_0064_gas_station.png"},LEVEL_5:{id:"LEVEL_5",type:"SPRITE",url:"kfc_0065_level_5.png"},TITLE_LEVEL_4:{id:"TITLE_LEVEL_4",type:"SPRITE",url:"kfc_0066_courtroom.png"},LEVEL_4:{id:"LEVEL_4",type:"SPRITE",url:"kfc_0067_level_4.png"},TITLE_LEVEL_3:{id:"TITLE_LEVEL_3",type:"SPRITE",url:"kfc_0068_card.png"},LEVEL_3:{id:"LEVEL_3",type:"SPRITE",url:"kfc_0069_level_3.png"},TITLE_LEVEL_2:{id:"TITLE_LEVEL_2",type:"SPRITE",url:"kfc_0070_baby_businness.png"},LEVEL_2:{id:"LEVEL_2",type:"SPRITE",url:"kfc_0071_level_2.png"},TITLE_LEVEL_1:{id:"TITLE_LEVEL_1",type:"SPRITE",url:"kfc_0072_sixth.png"},LEVEL_1:{id:"LEVEL_1",type:"SPRITE",url:"kfc_0073_level_1.png"},LOADER_FULL:{id:"LOADER_FULL",type:"SPRITE",url:"kfc_0074_LOADER_full.png"},LOADER_MC:{id:"LOADER_MC",type:"MOVIECLIP",speedRatio:.35,frameNames:["kfc_instructions_loader_01.png","kfc_instructions_loader_02.png","kfc_instructions_loader_03.png","kfc_instructions_loader_04.png","kfc_instructions_loader_05.png"]},"TRUE-STORIES-FROM--THE-ADVENTURES-OF--COLONEL-SANDERS":{id:"TRUE-STORIES-FROM--THE-ADVENTURES-OF--COLONEL-SANDERS",type:"SPRITE",url:"kfc_0076_True-stories-from--the-adventures-of--Colonel-Sanders.png"},"BTN_PLAY_CLICK-COPY":{id:"BTN_PLAY_CLICK-COPY",type:"SPRITE",url:"kfc_0077_BTN_play_click-copy.png"},COLONEL_8BIT:{id:"COLONEL_8BIT",type:"SPRITE",url:"kfc_0078_colonel_8bit.png"},COLONEL_QUEST_TITLE:{id:"COLONEL_QUEST_TITLE",type:"SPRITE",url:"kfc_0079_colonel_quest_titel.png"},BG_GRAY:{id:"BG_GRAY",type:"SPRITE",url:"kfc_screens_bg_gray.png"},BG_PAUSE_GRAY:{id:"BG_PAUSE_GRAY",type:"SPRITE",url:"kfc_screens_bg_pause.png"},INSTRUCTIONS_DESCRIPTION_1:{id:"INSTRUCTIONS_DESCRIPTION_1",type:"SPRITE",url:"kfc_instructions_level_1.png"},INSTRUCTIONS_DESCRIPTION_2:{id:"INSTRUCTIONS_DESCRIPTION_2",type:"SPRITE",url:"kfc_instructions_level_2.png"},INSTRUCTIONS_DESCRIPTION_3:{id:"INSTRUCTIONS_DESCRIPTION_3",type:"SPRITE",url:"kfc_instructions_level_3.png"},INSTRUCTIONS_DESCRIPTION_4:{id:"INSTRUCTIONS_DESCRIPTION_4",type:"SPRITE",url:"kfc_instructions_level_4.png"},INSTRUCTIONS_DESCRIPTION_5:{id:"INSTRUCTIONS_DESCRIPTION_5",type:"SPRITE",url:"kfc_instructions_level_5.png"},INSTRUCTIONS_DESCRIPTION_6:{id:"INSTRUCTIONS_DESCRIPTION_6",type:"SPRITE",url:"kfc_instructions_level_6.png"},INSTRUCTIONS_DESCRIPTION_1_MOBILE:{id:"INSTRUCTIONS_DESCRIPTION_1_MOBILE",type:"SPRITE",url:"kfc_instructions_mobile_level_1.png"},INSTRUCTIONS_DESCRIPTION_2_MOBILE:{id:"INSTRUCTIONS_DESCRIPTION_2_MOBILE",type:"SPRITE",url:"kfc_instructions_mobile_level_2.png"},INSTRUCTIONS_DESCRIPTION_3_MOBILE:{id:"INSTRUCTIONS_DESCRIPTION_3_MOBILE",type:"SPRITE",url:"kfc_instructions_mobile_level_3.png"},INSTRUCTIONS_DESCRIPTION_4_MOBILE:{id:"INSTRUCTIONS_DESCRIPTION_4_MOBILE",type:"SPRITE",url:"kfc_instructions_mobile_level_4.png"},INSTRUCTIONS_DESCRIPTION_5_MOBILE:{id:"INSTRUCTIONS_DESCRIPTION_5_MOBILE",type:"SPRITE",url:"kfc_instructions_mobile_level_5.png"},INSTRUCTIONS_DESCRIPTION_6_MOBILE:{id:"INSTRUCTIONS_DESCRIPTION_6_MOBILE",type:"SPRITE",url:"kfc_instructions_mobile_level_6.png"},CONTINUE_CUTSCENE:{id:"CONTINUE_CUTSCENE",type:"SPRITE",url:"kfc_0000s_0001_CONTINUE.png"},CONTINUE_CUTSCENE_CLICK:{id:"CONTINUE_CUTSCENE_CLICK",type:"SPRITE",url:"kfc_0000s_0000_CONTINUE-_HOVER.png"},NEXT_CUTSCENE:{id:"NEXT_CUTSCENE",type:"SPRITE",url:"kfc_0000s_0005_NEXT.png"},NEXT_CUTSCENE_CLICK:{id:"NEXT_CUTSCENE_CLICK",type:"SPRITE",url:"kfc_0000s_0004_NEXT_HOVER.png"},SKIP_CUTSCENE:{id:"SKIP_CUTSCENE",type:"SPRITE",url:"kfc_0000s_0003_SKIP.png"},SKIP_CUTSCENE_CLICK:{id:"SKIP_CUTSCENE_CLICK",type:"SPRITE",url:"kfc_0000s_0002_SKIP_HOVER.png"},BG_CUTSCENE:{id:"BG_CUTSCENE",type:"SPRITE",url:"kfc_0000_BG.png"},SCHOOL_CUTSCENE_1:{id:"SCHOOL_CUTSCENE_1",type:"SPRITE",url:"kfc_0001s_0005_school_STEP_1.png"},SCHOOL_CUTSCENE_2:{id:"SCHOOL_CUTSCENE_2",type:"SPRITE",url:"kfc_0001s_0004_school_STEP_2.png"},SCHOOL_CUTSCENE_MC:{id:"SCHOOL_CUTSCENE_MC",type:"MOVIECLIP",speedRatio:.1,frameNames:["kfc_0001s_0003_school_young_colonel_run_1.png","kfc_0001s_0002_school_young_colonel_run_2.png","kfc_0001s_0001_school_young_colonel_run_3.png","kfc_0001s_0000_school_young_colonel_run_4-.png"]},BABY_CUTSCENE_1:{id:"BABY_CUTSCENE_1",type:"SPRITE",url:"kfc_0002s_0002_The-poor-mountain--people-can’t-afford-doctors.--A-helpful-(but.png"},BABY_CUTSCENE_2:{id:"BABY_CUTSCENE_2",type:"SPRITE",url:"kfc_0002s_0001_Who-will-deliver-all--the-babies_.png"},BABY_CUTSCENE_MC:{id:"BABY_CUTSCENE_MC",type:"MOVIECLIP",speedRatio:.02,frameNames:["kfc_cutscene_baby_0.png","kfc_cutscene_baby_1.png"]},TRAIN_CUTSCENE_1:{id:"TRAIN_CUTSCENE_1",type:"SPRITE",url:"kfc_0003s_0004_card_text1.png"},TRAIN_CUTSCENE_2:{id:"TRAIN_CUTSCENE_2",type:"SPRITE",url:"kfc_0003s_0005_card_text2.png"},TRAIN_CUTSCENE_MC:{id:"TRAIN_CUTSCENE_MC",type:"MOVIECLIP",speedRatio:.07,frameNames:["kfc_0003s_0003_card_colonel_1-.png","kfc_0003s_0002_card_colonel_2.png","kfc_0003s_0001_card_colonel_3.png","kfc_0003s_0000_card_colonel_4.png"]},COURTROOM_CUTSCENE_1:{id:"COURTROOM_CUTSCENE_1",type:"SPRITE",url:"kfc_0004s_0008_courtroom_txt1.png"},COURTROOM_CUTSCENE_2:{id:"COURTROOM_CUTSCENE_2",type:"SPRITE",url:"kfc_0004s_0007_courtroom_Help-the-Colonel-say,--_-I-object-_-the-old-fashioned--way!.png"},COURTROOM_CUTSCENE_MC:{id:"COURTROOM_CUTSCENE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["kfc_cutscene_courtroom_0.png","kfc_cutscene_courtroom_1.png","kfc_cutscene_courtroom_2.png"]},GUNFIGHT_CUTSCENE_1:{id:"GUNFIGHT_CUTSCENE_1",type:"SPRITE",url:"kfc_0005s_0012_gunfight_copy.png"},GUNFIGHT_CUTSCENE_1_EMBED:{id:"GUNFIGHT_CUTSCENE_1_EMBED",type:"SPRITE",url:"gunfight_copy_embed.png"},GUNFIGHT_CUTSCENE_2:{id:"GUNFIGHT_CUTSCENE_2",type:"SPRITE",url:"kfc_0005s_0013_gun_Look-out!--He’s-got--a-gun!.png"},GUNFIGHT_CUTSCENE_MC:{id:"GUNFIGHT_CUTSCENE_MC",type:"MOVIECLIP",speedRatio:.1,frameNames:["kfc_cutscene_gunfight_0.png","kfc_cutscene_gunfight_1.png"]},CHICKEN_CUTSCENE_1:{id:"CHICKEN_CUTSCENE_1",type:"SPRITE",url:"kfc_0006s_0006_chicken_The-Colonel-has-had--a-lot-of-adventures..png"},CHICKEN_CUTSCENE_2:{id:"CHICKEN_CUTSCENE_2",type:"SPRITE",url:"kfc_0006s_0005_chicken_Ready_.png"},CHICKEN_CUTSCENE_MC:{id:"CHICKEN_CUTSCENE_MC",type:"MOVIECLIP",speedRatio:.1,frameNames:["kfc_hungry_baby_0.png","kfc_hungry_baby_1.png","kfc_hungry_baby_2.png"]},TITLE_LEVEL_SELECT:{id:"TITLE_LEVEL_SELECT",type:"SPRITE",url:"level_selected_title.png"},TITLE_LEVEL_SELECT_BOX:{id:"TITLE_LEVEL_SELECT_BOX",type:"SPRITE",url:"box_selected.png"},LEVEL_ICON_SCHOOL:{id:"LEVEL_ICON_SCHOOL",type:"SPRITE",url:"icon_school.png"},LEVEL_ICON_SCHOOL_OFF:{id:"LEVEL_ICON_SCHOOL_OFF",type:"SPRITE",url:"icon_school_off.png"},LEVEL_ICON_BABY:{id:"LEVEL_ICON_BABY",type:"SPRITE",url:"icon_baby.png"},LEVEL_ICON_BABY_OFF:{id:"LEVEL_ICON_BABY_OFF",type:"SPRITE",url:"icon_baby_off.png"},LEVEL_ICON_TRAIN:{id:"LEVEL_ICON_TRAIN",type:"SPRITE",url:"icon_train.png"},LEVEL_ICON_TRAIN_OFF:{id:"LEVEL_ICON_TRAIN_OFF",type:"SPRITE",url:"icon_train_off.png"},LEVEL_ICON_COURTROOM:{id:"LEVEL_ICON_COURTROOM",type:"SPRITE",url:"icon_courtroom.png"},LEVEL_ICON_COURTROOM_OFF:{id:"LEVEL_ICON_COURTROOM_OFF",type:"SPRITE",url:"icon_courtroom_off.png"},LEVEL_ICON_GUNFIGHT:{id:"LEVEL_ICON_GUNFIGHT",type:"SPRITE",url:"icon_gunfight.png"},LEVEL_ICON_GUNFIGHT_OFF:{id:"LEVEL_ICON_GUNFIGHT_OFF",type:"SPRITE",url:"icon_gunfight_off.png"},LEVEL_ICON_HANGRY:{id:"LEVEL_ICON_HANGRY",type:"SPRITE",url:"icon_hangry.png"},LEVEL_ICON_HANGRY_OFF:{id:"LEVEL_ICON_HANGRY_OFF",type:"SPRITE",url:"icon_hangry_off.png"}};for(var o in n)n[o].ns=t.ns;for(var r in n){var a=n[r];if(a.url&&(a.ns_url=a.ns+a.url),a.frameNames){a.ns_frameNames=[];for(var h=0,l=a.frameNames.length;l>h;h++)a.ns_frameNames.push(a.ns+a.frameNames[h])}}return e.each(s,function(e){if("sound"===e.type){var t=e.id,i="gameshell";e.sound_group=i,e.id=i+"_"+e.id,n[t]={id:e.id,type:e.type,volume:e.volume,src:e.src}}},this),n.assetManifest=s,n}),define("util/anim_frame",["config","underscore","backbone"],function(e,t,i){"use strict";!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),s=Math.max(0,16-(i-e)),n=window.setTimeout(function(){t(i+s)},s);return e=i+s,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var s={};s.onAnimRequestFrame=function(){this.trigger("anim_frame"),window.requestAnimationFrame(n)};var n=t.bind(s.onAnimRequestFrame,s);return t.extend(s,i.Events),s.onAnimRequestFrame(),s}),define("game/model/render_model",["backbone","underscore","util/anim_frame"],function(e,t,i){var s=e.Model.extend({defaults:{started:!1,frameRate:60,renderQuality:"high"},EVENTS:{FRAME_TICK:"FRAME_TICK"},initialize:function(){},start:function(){this.attributes.started||(this.set("started",!0),this.addEvents())},stop:function(){this.attributes.started&&(this.attributes.started=!1,this.set("started",!1),this.removeEvents())},addEvents:function(){i.on("anim_frame",this.onRenderUpdate,this)},onRenderUpdate:function(){this.trigger(this.EVENTS.FRAME_TICK)},removeEvents:function(){i.off("anim_frame",this.onRenderUpdate)},destroy:function(){this.removeEvents()}}),n=new s;return n}),define("game/model/game_input_model",["jquery","backbone","underscore","config","view/common/communicator"],function(e,t,i,s,n){var o=t.Model.extend({defaults:{started:!1,buttonLeftPressed:!1,buttonRightPressed:!1},EVENTS:{BUTTON_PRESS:"BUTTON_PRESS",BUTTON_RELEASE:"BUTTON_RELEASE"},BUTTONS:{BUTTON_LEFT:"BUTTON_LEFT",BUTTON_RIGHT:"BUTTON_RIGHT",BUTTON_ENTER:"BUTTON_ENTER",BUTTON_SPACE:"BUTTON_SPACE",BUTTON_WIN:"BUTTON_WIN",BUTTON_PAUSE:"BUTTON_PAUSE",BUTTON_LOSE:"BUTTON_LOSE"},BUTTON_KEYS:{BUTTON_LEFT:90,BUTTON_RIGHT:77,BUTTON_ENTER:13,BUTTON_SPACE:32,WIN_GAME:87,PAUSED:80,LOSE:76},initialize:function(){i.bindAll(this,"onKeyPress","onKeyRelease","onTouchStart","onTouchEnd")},start:function(){var e=this.get("started");e||(this.set("started",!0),this.addEvents())},addEvents:function(){e(document).on("keydown",this.onKeyPress),e(document).on("keyup",this.onKeyRelease),e(document).on("touchstart",this.onTouchStart),e(document).on("touchend",this.onTouchEnd)},onKeyPress:function(e){switch(e.keyCode){case this.BUTTON_KEYS.BUTTON_LEFT:this.pressLeft();break;case this.BUTTON_KEYS.BUTTON_RIGHT:this.pressRight();break;case this.BUTTON_KEYS.BUTTON_ENTER:this.trigger(this.EVENTS.BUTTON_PRESS,this.BUTTONS.BUTTON_ENTER);break;case this.BUTTON_KEYS.BUTTON_SPACE:this.trigger(this.EVENTS.BUTTON_PRESS,this.BUTTONS.BUTTON_SPACE);break;case this.BUTTON_KEYS.WIN_GAME:s.DEBUG&&n.trigger(n.EVENTS.GAME.DEBUG_WIN);break;case this.BUTTON_KEYS.PAUSED:this.pressPause();break;case this.BUTTON_KEYS.LOSE:s.DEBUG&&this.trigger(this.EVENTS.BUTTON_PRESS,this.BUTTONS.BUTTON_LOSE)}},onKeyRelease:function(e){switch(e.keyCode){case this.BUTTON_KEYS.BUTTON_LEFT:this.releaseLeft();break;case this.BUTTON_KEYS.BUTTON_RIGHT:this.releaseRight()}},onTouchStart:function(e){var t=window.innerWidth;e.originalEvent&&(e=e.originalEvent);var i=e.changedTouches[0];i.pageX<.35*t?this.pressLeft():i.pageX>.65*t&&this.pressRight()},onTouchEnd:function(e){var t=window.innerWidth;e.originalEvent&&(e=e.originalEvent);var i=e.changedTouches[0];i.pageX<.35*t?this.releaseLeft():i.pageX>.65*t&&this.releaseRight(),e.touches.length<2&&(this.releaseLeft(),this.releaseRight())},pressPause:function(){this.trigger(this.EVENTS.BUTTON_PRESS,this.BUTTONS.BUTTON_PAUSE)},pressLeft:function(){this.attributes.buttonLeftPressed||(this.set("buttonLeftPressed",!0),this.trigger(this.EVENTS.BUTTON_PRESS,this.BUTTONS.BUTTON_LEFT))},pressRight:function(){this.attributes.buttonRightPressed||(this.set("buttonRightPressed",!0),this.trigger(this.EVENTS.BUTTON_PRESS,this.BUTTONS.BUTTON_RIGHT))},releaseLeft:function(){this.attributes.buttonLeftPressed&&(this.set("buttonLeftPressed",!1),this.trigger(this.EVENTS.BUTTON_RELEASE,this.BUTTONS.BUTTON_LEFT))},releaseRight:function(){this.attributes.buttonRightPressed&&(this.set("buttonRightPressed",!1),this.trigger(this.EVENTS.BUTTON_RELEASE,this.BUTTONS.BUTTON_RIGHT))},destroy:function(){e(document).off("keydown",null,this.onKeyPress),e(document).off("keyup",null,this.onKeyRelease),e(document).off("touchstart",this.onTouchStart),e(document).off("touchend",this.onTouchEnd)}});return o}),define("game/game_base/model/pixi_movieclip_asset",["underscore","pixi"],function(e,t){function i(e){this.manifestItem=e,this.textures=[],this.id=this.manifestItem.id,this.makeTextures=function(){this.makeFrameNames();var e=0,i=this.manifestItem.frameNames.length;for(e;i>e;e++){var s=t.Texture.fromFrame(this.manifestItem.ns+this.manifestItem.frameNames[e]);this.textures.push(s)}},this.formatLeadingZeros=function(e,t){for(var i=""+e;i.length<t;)i="0"+i;return i},this.makeFrameNames=function(){if(0===this.manifestItem.frameNames.length){var e=this.manifestItem.frameDescription,t=e.range[0],i=e.range[1];for(t;i>t;t++){var s=e.prefix+this.formatLeadingZeros(t,e.minNumberStringLength)+e.suffix;this.manifestItem.frameNames.push(s)}}},this.newMovieClip=function(){var e=new t.MovieClip(this.textures);return e.animationSpeed=this.manifestItem.speedRatio,e},this.destroy=function(){this.manifestItem=null,this.textures=[]}}return i}),define("game/game_base/model/pixi_asset_library",["underscore","model/loader_collection","game/game_base/model/pixi_movieclip_asset","pixi","console"],function(e,t,i,s){function n(n,o){this.loaderID=n,this.manifest=o,this.movieClipAssets={},this.pixiLoader={},this.loaderCollection={},this.onLoadComplete=function(){},this.load=function(){this._setAudioIdsOnManifest(),t.loadManifest(this.manifest.assetManifest,this.loaderID),t.on("complete",this._onLoadComplete,this),t.start(this.loaderID)},this._onLoadComplete=function(e){e.group&&e.group===this.loaderID&&this._onTotalLoadComplete()},this._onTotalLoadComplete=function(){this.makeMovieClips(),this.onLoadComplete()},this._setAudioIdsOnManifest=function(){e.each(this.manifest.assetManifest,this._setAudioId,this)},this._setAudioId=function(e){if("sound"===e.type){var t=e.id;e.sound_group=this.loaderID,e.id=this.loaderID+"_"+e.id,this.manifest[t]={id:e.id,type:e.type,volume:e.volume,src:e.src}}},this.destroy=function(){this.destroyMovieClips(),this.unload(),this.destroyTextures()},this.unload=function(){t.off(null,null,this),this.pixiLoader&&(this.pixiLoader.removeAllListeners(),this.pixiLoader.onLoadComplete=function(){},this.pixiLoader=null)},this.destroyMovieClips=function(){for(var e in this.movieClipAssets){{this.movieClipAssets[e]}this.movieClipAssets.destroy(),this.movieClipAssets[e]=null}},this.destroyTextures=function(){},this.arrayObjectIndexOf=function(e,t,i){for(var s=0,n=e.length;n>s;s++)if(e[s][t]===i)return s;return-1},this.addOnce=function(e,t,i,s){if(void 0===i){if(-1!==t.indexOf(e))return;return void t.push(e)}-1===this.arrayObjectIndexOf(t,i,s)&&t.push(e)},this.getPixiAssetList=function(){var e=[];for(var t in this.manifest){var i=this.manifest[t],s=i.type;"AUDIO"!==s&&"CHARACTER"!==s&&this.addOnce(i.url,e)}return e},this.getCreateJSAssetList=function(){var e=[];for(var t in this.manifest){var i=this.manifest[t];if("AUDIO"===i.type){var s={src:i.url,id:i.id,group:this.loaderID};this.addOnce(s,e,"id",s.id)}}return e},this.movieClipFramesFromID=function(e){var t=this.movieClipAssets[e].textures;if(t)return t;throw new Error('MovieClip Textures with id "'+e+'" does not exist')},this.movieClipFromID=function(e){var t=this.movieClipAssets[e].textures;if(t){var i=new s.MovieClip(t);return i.animationSpeed=this.movieClipAssets[e].manifestItem.speedRatio,i}throw new Error('MovieClip with id "'+e+'" does not exist')},this.spriteFromFrameID=function(e){var t=s.Texture.fromFrame(e);if(t)return new s.Sprite(t);throw new Error('Frame with id "'+e+'" does not exist')},this.textureFromID=function(e){for(var t in this.manifest){var i=this.manifest[t];if(i.id===e)return s.TextureCache[i.ns+i.url];if("MOVIECLIP"===i.type){var n=i.frameNames.indexOf(e);if(-1!==n)return this.movieClipAssets[i.id].textures[n]}}return null},this.spriteFromID=function(e){var t=this.textureFromID(e);if(t)return new s.Sprite(t);throw new Error('Sprite with id "'+e+'" does not exist')},this.newSprite=function(e){if(!e)throw new Error("Specified manifest item does not exist");if(!e.id)throw new Error("Specified manifest item does not have id");return this.spriteFromID(e.id)},this.makeMovieClips=function(){for(var e in this.manifest){var t=this.manifest[e],s=t.id,n=t.type;"MOVIECLIP"===n&&(this.movieClipAssets[s]=new i(t),this.movieClipAssets[s].makeTextures())}}}return n}),define("util/tweenmax_wrapper",["TweenMax"],function(){function e(){this.timeline=new window.TimelineMax({autoRemoveChildren:!0,useFrames:!1}),this.paused=function(){return this.timeline.paused()},this.pause=function(){return this.timeline.pause()},this.resume=function(){return this.timeline.resume()},this.destroy=function(){this.timeline.invalidate(),this.timeline.kill(),this.timeline=null},this.reset=function(){this.timeline.invalidate(),this.timeline.remove(),this.timeline.clear(),this.timeline.pause(0,!0),this.timeline.play(),this.delayedCall(86400,function(){})},this.to=function(e,t,i){return this.paused()?null:this.timeline.to(e,t,i,this.timeline.time())},this.set=function(e,t){return this.paused()?null:this.timeline.set(e,t,this.timeline.time())},this.fromTo=function(e,t,i,s){return this.paused()?null:this.timeline.fromTo(e,t,i,s,this.timeline.time())},this.from=function(e,t,i){return this.paused()?null:this.timeline.from(e,t,i,this.timeline.time())},this.killTweensOf=function(e){return this.timeline.kill(null,e)},this.delayedCall=function(e,t,i){return this.paused()?null:this.timeline.addCallback(t,e+this.timeline.time(),i)},this.killDelayedCallsTo=function(e){return this.timeline.removeCallback(e)},this.delay=function(e,t,i){return this.paused()?null:(this.killDelayedCallsTo(t),this.timeline.addCallback(t,e+this.timeline.time(),i))},this.time=function(){return this.timeline._timeline._time}}return e}),define("game/model/game_sound_model",["backbone","underscore","TweenMax","view/common/communicator","view/common/sound_request","events/sound_events","model/sound_model"],function(e,t,i,s,n,o){"use strict";var r=e.Model.extend({defaults:{started:!1,sounds:null},initialize:function(){this.set("sounds",[])},setup:function(){this.get("started")||this.set("started",!0)},play:function(e,t){var i=new n({id:e,config:t}),r=this.getSoundById(e);r||this.get("sounds").push(e),s.trigger(o.PLAY_SOUND,i)},stop:function(e){s.trigger(o.STOP_SOUND,e),this.removeSoundById(e)},stopAllSounds:function(){t.each(this.get("sounds"),this.stop,this)},setVolume:function(e,t){s.trigger(o.SET_SOUND_VOLUME,e,t)},pauseAll:function(){t.each(this.get("sounds"),function(e){s.trigger(o.PAUSE_SOUND,e,!0)})},playAll:function(){t.each(this.get("sounds"),function(e){s.trigger(o.PAUSE_SOUND,e,!1)})},removeSoundById:function(e){this.set("sounds",t.without(this.get("sounds"),e))},getSoundById:function(e){return t.find(this.get("sounds"),function(t){return e===t})},destroy:function(){this.stopAllSounds()}});return r}),define("util/resn/array",[],function(){"use strict";function e(){this.appendToArray=function(e,t,i){for(;i>0;)e.push=t,i--},this.overwriteArray=function(e,t,i,s,n){n=n||!1,n&&(s=Math.min(s,e.length));for(var o=0;s>o;)e[i+o]=t,o++},this.filledArray=function(e,t){for(var i=[];t>0;)i.push(e),t--;return i},this.getRandomIndex=function(e){return parseInt(Math.random()*(e.length-.001))},this.getRandomItem=function(e){var t=parseInt(Math.random()*(e.length-.001));return e[t]},this.arrayObjectIndexOfValue=function(e,t,i){for(var s=0,n=e.length;n>s;s++)if(e[s][t]===i)return s;return-1},this.addOnceToArray=function(e,t,i){if(void 0===i){if(-1!==t.indexOf(e))return;return void t.push(e)}-1===this.arrayObjectIndexOfValue(t,i,e.key)&&t.push(e)},this.removeFromArray=function(e,t,i){var s;if(void 0===i)for(s=t.length-1;s>-1;s--)t[s]===e&&t.splice(s,1);else for(s=t.length-1;s>-1;s--)t[s].key===e.key&&t.splice(s,1)},this.getNextInPoolFinite=function(e){void 0===e.poolIndex&&(e.poolIndex=0);var t=e.poolIndex>e.length-1;if(t)return null;var i=e[e.poolIndex];return e.poolIndex++,i},this.getNextInPool=function(e){void 0===e.poolIndex&&(e.poolIndex=0);var t=e[e.poolIndex];e.poolIndex++;var i=e.poolIndex>e.length-1;return i&&(e.poolIndex=0),t}}return new e}),define("util/resn/collision2d",[],function(){"use strict";function e(){this.boxToLineSegmentCollision=function(e,t,i,s,n,o,r,a){if(n>=e&&n>=i||o>=t&&o>=s||e>=r&&i>=r||t>=a&&s>=a)return!1;var h=(s-t)/(i-e),l=h*(n-e)+t;if(l>o&&a>l)return!0;if(l=h*(r-e)+t,l>o&&a>l)return!0;var c=(o-t)/h+e;return c>n&&r>c?!0:(c=(a-t)/h+e,c>n&&r>c?!0:!1)},this.rectCollision=function(e,t,i,s,n,o){var r=e>i&&i+n>e,a=t>s&&s+o>t;return r&&a}}return new e}),define("util/resn/math",[],function(){"use strict";function e(){this.isOdd=function(e){return e%2},this.clamp=function(e,t,i){return t>e&&(e=t),e>i&&(e=i),e},this.timeFormat=function(e){var t=parseInt(e,10),i=Math.floor(t/3600),s=Math.floor((t-3600*i)/60),n=t-3600*i-60*s;10>i&&(i="0"+i),10>s&&(s="0"+s),10>n&&(n="0"+n);var o=s+":"+n;return o},this.getDistance=function(e,t){return t-e},this.getPointDistance=function(e,t){var i=0,s=0;return i=this.getDistance(t.x,e.x),s=this.getDistance(t.y,e.y),Math.sqrt(i*i+s*s)},this.toRadians=function(e){return e*Math.PI/180},this.randomIntInRange=function(e,t){return Math.round(e+Math.random()*(t-e))},this.randomInRange=function(e,t){return e+Math.random()*(t-e)},this.randomDist=function(e,t,i){for(var s=0,n=0;i>n;n+=1)s+=this.randomInRange(e,t);return s/i},this.norm=function(e,t,i){return(e-t)/(i-t)},this.lerp=function(e,t,i){return t+e*(i-t)},this.lerpPoint=function(e,t,i){var s={};return s.x=e.x+i*(t.x-e.x),s.y=e.y+i*(t.y-e.y),s},this.copyPoint=function(e){return{x:e.x,y:e.y}},this.map=function(e,t,i,s,n){return this.lerp(this.norm(e,t,i),s,n)},this.simpleEasing=function(e,t,i){return(e-t)*i}}return new e}),define("util/resn/parse",[],function(){"use strict";function e(){this.deepClone=function(e){return JSON.parse(JSON.stringify(e))}}return new e}),define("util/resn/color",[],function(){"use strict";function e(){this.hexToMatrix=function(e,t){var i=[],s=((16711680&e)>>>16)/255,n=((65280&e)>>>8)/255,o=(255&e)/255;return i=i.concat([s,0,0,0]),i=i.concat([0,n,0,0]),i=i.concat([0,0,o,0]),i=i.concat([0,0,0,t])},this.componentToHex=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},this.rgbToHex=function(e,t,i){return"0x"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},this.darken=function(e,t){return{r:Math.round(e.r*=t),g:Math.round(e.g*=t),b:Math.round(e.b*=t)}}}return new e}),define("util/resn/pixi",["util/resn/color","pixi"],function(e,t){"use strict";function i(){this.pointToBitmapDetection=function(e,t){var i=e.generateTexture(),s=i.getCanvas().getContext("2d"),n=s.getImageData(t.x,t.y,1,1),o=n.data;i.destroy(!0);var r=0===o[3],a=0===o[0]&&0===o[1]&&0===o[2]&&255===o[3],h=window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,l=!(r||h&&a);return{result:l,data:o}},this.setBitmapTextColor=function(i,s){for(var n=0;n<i.children.length;n++){var o=i.children[n];o._r_colorFilter||(o._r_colorFilter=new t.ColorMatrixFilter),o._r_colorFilter.matrix=e.hexToMatrix(s,1),o.filters=[o._r_colorFilter],o.cacheAsBitmap=!0}}}return new i}),define("shims/shim_resn_utils",["util/resn/array","util/resn/collision2d","util/resn/math","util/resn/parse","util/resn/pixi","util/resn/color"],function(e,t,i,s,n,o){"use strict";var r={math:i,array:e,collision:t,parse:s,pixi:n,color:o};return r}),define("libs/tab_visible",[],function(){"use strict";return{visible:function(){var e,t,i={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in i)if(e in document){t=i[e];break}return function(i){return i&&document.addEventListener&&document.addEventListener(t,i),!document[e]}}()}}),define("game/game_base/model/game_model",["underscore","backbone","game/game_base/model/pixi_asset_library","util/tweenmax_wrapper","game/model/game_sound_model","config","TweenMax","view/common/communicator","console","shims/shim_resn_utils","model/app_model","libs/tab_visible"],function(e,t,i,s,n,o,r,a,h,l,c,d){var u="loading",g="intro",p="cutscene",m="instructions",_="gamePlaying",f="gamePaused",v="gameOutro",E="endGameWin",y="endGameLose",T="endGameLevelSelect",S="gameInactive",C=t.Model.extend({GAMESTATE_LOADING:u,GAMESTATE_INTRO:g,GAMESTATE_CUTSCENE:p,GAMESTATE_GAME_OUTRO:v,GAMESTATE_INSTRUCTIONS:m,GAMESTATE_GAME_PLAYING:_,GAMESTATE_GAME_PAUSED:f,GAMESTATE_END_GAME_WIN:E,GAMESTATE_END_GAME_LOSE:y,GAMESTATE_LEVEL_SELECT:T,GAMESTATE_INACTIVE:S,gameShellModel:null,gameInputModel:null,gameTweenMax:null,FPS:60,gameId:null,gameIndex:-1,medalIndex:0,attempts:0,attemptsThreshold:3,loaded:!1,loading:!1,manifest:null,pixiAssetLibrary:null,gameRect:{x:0,y:0,width:256,height:192},startTime:0,time:0,lastTime:0,timeDelta:0,state:p,initialValues:{},defaults:{gameWidth:256,gameHeight:192,pixelScale:4,pixelScaleMultiplier:.25},EVENTS:{STATE_CHANGE:"STATE_CHANGE",NEXT_GAME:"NEXT_GAME",STARTED:"STARTED",GAME_END:"GAME_END",TIME_UP:"TIME_UP"},initialize:function(t){e.bindAll(this,"nextGame","onLoadComplete","resolveWinOrLose","onPageVisibilityChange"),this.gameInputModel=t.gameInputModel,this.gameShellModel=t.gameShellModel,this.gameScoreModel=this.gameShellModel.gameScoreModel,e.extend(this,this.defaults),this.gameId=t.gameId,this.gameIndex=t.gameIndex,this.manifest=t.manifest,this.gameTweenMax=new s,this.gameTweenMax.pause(),this.pixiAssetLibrary=new i(this.gameId,this.manifest),this.gameSoundModel=new n,d.visible(this.onPageVisibilityChange),this.resetModel()
},onPageVisibilityChange:function(){var e=d.visible();e===!1&&this.state===_&&this.pause()},load:function(){this.loading||this.loaded||(this.loading=!0,this.pixiAssetLibrary.onLoadComplete=this.onLoadComplete,this.pixiAssetLibrary.load())},onLoadComplete:function(){this.loaded=!0,this.trigger(a.EVENTS.GAME.LOAD_COMPLETE,this),this.gameSoundModel.setup(this.manifest)},setup:function(){},reset:function(){this.gameTweenMax.reset(),this.resetAudio()},resetAudio:function(){this.gameSoundModel.stopAllSounds()},resetModel:function(){e.extend(this,this.initialValues)},start:function(){},buttonLeftPress:function(){},buttonRightPress:function(){},buttonLeftRelease:function(){},buttonRightRelease:function(){},frameTick:function(){this.time=this.gameTweenMax.time()-this.startTime,this.timeDelta=this.time-this.lastTime,this.lastTime=this.time,this.timeDelta=l.math.clamp(this.timeDelta,0,.1)},togglePause:function(){this.state===this.GAMESTATE_GAME_PLAYING?this.pause():this.state===this.GAMESTATE_GAME_PAUSED&&this.unpause()},pause:function(){this.state===this.GAMESTATE_GAME_PLAYING&&(this.setGameState(this.GAMESTATE_GAME_PAUSED),this.gameSoundModel.pauseAll())},unpause:function(){this.state===this.GAMESTATE_GAME_PAUSED&&(this.setGameState(this.GAMESTATE_GAME_PLAYING),this.gameSoundModel.playAll())},playerWin:function(){this.setGameState(this.GAMESTATE_END_GAME_WIN)},playerLose:function(){this.setGameState(this.GAMESTATE_END_GAME_LOSE)},startGame:function(){this.reset(),this.setGameState(this.GAMESTATE_GAME_PLAYING),this.gameTweenMax.resume(),this.trigger(this.EVENTS.STARTED)},endGame:function(){this.gameTweenMax.pause(),this.trigger(this.EVENTS.GAME_END),this.resetAudio(),!o.GAME_DEV&&o.DEBUG&&(r.killDelayedCallsTo(this.nextGame),r.delayedCall(2,this.nextGame))},nextGame:function(){this.trigger(this.EVENTS.NEXT_GAME,this)},isCurrentGame:function(){return c.get("page")===c.PAGES.GAME&&this.gameShellModel.get("state")===this.gameShellModel.STATE_IN_GAME&&this.gameShellModel.attributes.currentGameId===this.gameId},isAnimating:function(){var e=this.isCurrentGame(),t=this.state===_||this.state===v;return e&&t},isPlaying:function(){var e=this.isCurrentGame(),t=this.state===_;return e&&t},playFailSound:function(){this.gameShellModel.gameSoundModel.play(this.gameShellModel.manifest.FAIL.id),this.manifest.AUDIO_MUSIC&&this.gameSoundModel.stop(this.manifest.AUDIO_MUSIC.id,{})},setGameState:function(e){switch(e){case u:break;case p:this.gameShellModel.setGameAttempted(this.gameId);break;case g:break;case m:break;case _:this.state===this.GAMESTATE_GAME_PAUSED?this.gameTweenMax.resume():this.trackGameStart();break;case v:break;case f:if(this.state!==this.GAMESTATE_GAME_PLAYING)return;a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.LEVEL_PAUSE,this.getTrackData()),this.gameTweenMax.pause();break;case E:this.calculateMedalIndex(),this.trackGameResolved(!0),this.gameShellModel.setScoreById(this.medalIndex,this.gameId),this.endGame();break;case y:this.calculateMedalIndex(),this.trackGameResolved(!1),this.gameShellModel.setScoreById(this.medalIndex,this.gameId),this.endGame();break;case T:}this.state=e,this.trigger(this.EVENTS.STATE_CHANGE,this.state)},hide:function(){this.gameSoundModel.stopAllSounds(),this.gameTweenMax.reset(),this.gameTweenMax.pause(),r.killDelayedCallsTo(this.nextGame)},getMedalIndex:function(){return this.medalIndex},resolveWinOrLose:function(){this.calculateMedalIndex();var e=0<this.medalIndex;this.updateAttempts(e),this.setGameState(e?E:y)},updateAttempts:function(e){e?this.attempts=this.attemptsThreshold:this.attempts++},calculateMedalIndex:function(){this.medalIndex=0},getTrackData:function(){var e=this.gameIndex+1,t={eventlabel:"Level "+e};return o.EMBEDDED&&(t.eventlabel=t.eventlabel+" Embed"),t},getPlayTrackData:function(){var e=this.gameIndex+1,t=0<this.gameScoreVO.medalIndex,i=t?"post_win_play "+this.gameScoreVO.postWinPlays:"pre_win_play "+this.gameScoreVO.preWinPlays,s={eventlabel:"Level "+e,eventaction:i};return o.EMBEDDED&&(s.eventlabel=s.eventlabel+" Embed"),s},trackGameStart:function(){this.gameScoreVO=this.gameScoreModel.getGameVOById(this.gameId),h.log("this.gameScoreVO",this.gameScoreVO),a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.LEVEL_PLAYED,this.getTrackData());var e=0<this.gameScoreVO.medalIndex;e?(this.gameScoreVO.postWinPlays++,a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.POST_WIN_LEVEL_PLAYED,this.getPlayTrackData())):(this.gameScoreVO.preWinPlays++,a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.PRE_WIN_LEVEL_PLAYED,this.getPlayTrackData())),this.gameScoreModel.saveGameScore(this.gameScoreVO)},trackGameResolved:function(){var e=0<this.medalIndex,t=[a.GAME_TRACK_IDS.MEDAL_FAIL,a.GAME_TRACK_IDS.MEDAL_BRONZE,a.GAME_TRACK_IDS.MEDAL_SILVER,a.GAME_TRACK_IDS.MEDAL_GOLD];a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.LEVEL_COMPLETE,this.getTrackData()),a.trigger(a.EVENTS.GAME_TRACKING,t[this.medalIndex],this.getTrackData()),e?(a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.LEVEL_WIN,this.getTrackData()),this.gameScoreVO.firstTry===!0&&a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.FIRST_TRY_WIN,this.getTrackData())):(a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.LEVEL_LOSE,this.getTrackData()),this.gameScoreVO.firstTry===!0&&a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.FIRST_TRY_LOSE,this.getTrackData())),this.gameScoreVO.firstTry=!1,this.gameScoreModel.saveGameScore(this.gameScoreVO)},getAnimationDuration:function(e){return e.frameNames.length*(1/this.FPS/e.speedRatio)},destroy:function(){this.gameSoundModel.stopAllSounds()}});return C}),define("game/game_base/view/game_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/model/game_model","pixi"],function(e,t,i,s,n,o,r){"use strict";var a=i.View.extend({shown:!1,gameModel:null,gameConfig:null,pixiStageModel:null,viewContainer:null,gameContainer:null,movieClips:[],gameWidth:null,gameHeight:null,pixelScaleMultiplier:null,initialize:function(e){t.bindAll(this,"onGameStateChanged"),this.gameModel=e.gameModel,this.pixiStageModel=e.pixiStageModel,this.gameWidth=this.gameModel.get("gameWidth"),this.gameHeight=this.gameModel.get("gameHeight"),this.pixelScaleMultiplier=this.gameModel.get("pixelScaleMultiplier"),this.viewContainer=new r.DisplayObjectContainer,this.gameContainer=this.viewContainer},setup:function(){this.addEvents(),this.gameConfig=this.gameModel.gameConfig,this.pixiAssetLibrary=this.gameModel.pixiAssetLibrary,this.manifest=this.gameModel.manifest,this.movieClipFramesFromID=t.bind(this.gameModel.pixiAssetLibrary.movieClipFramesFromID,this.gameModel.pixiAssetLibrary),this.textureFromID=t.bind(this.gameModel.pixiAssetLibrary.textureFromID,this.gameModel.pixiAssetLibrary),this.spriteFromID=this.gameModel.pixiAssetLibrary.spriteFromID,this.newSprite=this.gameModel.pixiAssetLibrary.newSprite},getAnimation:function(e){return this.movieClipFramesFromID(e.id)},movieClipFromID:function(e){var t=this.gameModel.pixiAssetLibrary.movieClipFromID(e);return null!==t&&this.movieClips.push(t),t},newMovieClip:function(e,t){if(!e)throw new Error("Specified manifest item does not exist");if(!e.id)throw new Error("Specified manifest item does not have id");var i=this.movieClipFromID(e.id);return t&&(void 0!==t.loop&&(i.loop=t.loop),t.autoplay&&i.play()),i},onGameStateChanged:function(e){if(this.gameModel.isCurrentGame())switch(e){case this.gameModel.GAMESTATE_GAME_PLAYING:this.show(),this.resumeMovieClips();break;case this.gameModel.GAMESTATE_GAME_PAUSED:this.show(),this.pauseMovieClips();break;case this.gameModel.GAMESTATE_LOADING:case this.gameModel.GAMESTATE_INTRO:case this.gameModel.GAMESTATE_INSTRUCTIONS:case this.gameModel.GAMESTATE_COUNTDOWN:case this.gameModel.GAMESTATE_END_GAME_WIN:case this.gameModel.GAMESTATE_END_GAME_LOSE:case this.gameModel.GAMESTATE_LEVEL_SELECT:case this.gameModel.GAMESTATE_INACTIVE:this.hide()}},resumeMovieClips:function(){for(var e,t=0,i=this.movieClips.length;i>t;t++)e=this.movieClips[t],null!==e&&e.wasPlaying===!0&&e.play()},pauseMovieClips:function(){for(var e,t=0,i=this.movieClips.length;i>t;t++)e=this.movieClips[t],null!==e&&(e.wasPlaying=e.playing===!0,e.stop())},removeFromParent:function(e){e.parent&&e.parent.removeChild(e)},updateSpriteFromModel:function(e,t){if(null!==e&&null!==t&&void 0!==e&&void 0!==t){var i=t.spriteVO;e.position.y=Math.round(i.y),e.position.x=Math.round(i.x),e.scale.x=i.scaleX,e.scale.y=i.scaleY,e.rotation=i.rotation,e.alpha=i.alpha,e.visible=i.visible,e.tint!==i.tint&&(e.tint=i.tint),e.alpha!==i.alpha&&(e.alpha=i.alpha),e.pivot.x!==i.pivotX&&(e.pivot.x=i.pivotX),e.pivot.y!==i.pivotY&&(e.pivot.y=i.pivotY)}},updateSpritesFromModels:function(e,t){if(void 0!==e&&void 0!==t&&e.length===t.length)for(var i=0,s=t.length;s>i;i++)this.updateSpriteFromModel(e[i],t[i])},updateMovieClipsFromModels:function(e,t,i,s,n){if(void 0!==i)for(var o,r,a,h=0,l=e.length;l>h;h++)o=e[h],r=i[h],a=r.spriteVO.currentAnimationId,void 0!==t[a]&&(o.textures!==t[a]&&(o.textures=t[a],n&&(o.gotoAndStop(0),o.gotoAndPlay(0))),s&&o.gotoAndStop(r.spriteVO.currentFrame))},updateMovieClipFromModel:function(e,t,i,s){if(void 0!==i){var n=i.spriteVO.currentAnimationId;void 0!==t[n]&&(e.textures!==t[n]&&(e.textures=t[n]),s&&e.gotoAndStop(i.spriteVO.currentFrame))}},setSpriteAnimation:function(e,t){e.textures=t},updateAnimationFromModel:function(e,t,i){if(void 0!==i){var s=i.spriteVO.currentAnimationId;void 0!==t[s]&&e.texture!==t[s]&&(e.texture=t[s])}},updateAnimationsFromModels:function(e,t,i){if(void 0!==i)for(var s,n,o,r=0,a=e.length;a>r;r++)s=e[r],n=i[r],o=n.spriteVO.currentAnimationId,void 0!==t[o]&&s.texture!==t[o]&&(s.texture=t[o])},render:function(){},show:function(){this.shown||(this.shown=!0,this.pixiStageModel.gameViewContainer.addChild(this.viewContainer))},hide:function(){this.shown&&(this.shown=!1,this.onHideComplete())},onHideComplete:function(){this.pixiStageModel.gameViewContainer.removeChild(this.viewContainer),this.trigger("hideComplete")},onResize:function(){},destroy:function(){this.removeEvents(),this.movieClips=null,this.stopListening(),this.off()},addEvents:function(){this.gameModel.on(this.gameModel.EVENTS.STATE_CHANGE,this.onGameStateChanged),n.DEBUG&&this.listenTo(this.gameModel.gameSoundModel,"change:sounds",this.onGameSoundChanged)},removeEvents:function(){this.gameModel.off(this.gameModel.EVENTS.STATE_CHANGE,this.onGameStateChanged),n.DEBUG&&this.stopListening(this.gameModel.gameSoundModel,"change:sounds")},onGameSoundChanged:function(){}});return a}),define("game/game_base/view/game_ui_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/model/game_model","pixi"],function(e,t,i,s,n,o,r){"use strict";var a=i.View.extend({shown:!1,gameModel:null,gameConfig:null,pixiStageModel:null,viewContainer:null,gameWidth:null,gameHeight:null,pixelScaleMultiplier:null,initialize:function(e){t.bindAll(this,"onGameStateChanged"),this.gameModel=e.gameModel,this.pixiStageModel=e.pixiStageModel,this.gameWidth=this.gameModel.get("gameWidth"),this.gameHeight=this.gameModel.get("gameHeight"),this.pixelScaleMultiplier=this.gameModel.get("pixelScaleMultiplier"),this.viewContainer=new r.DisplayObjectContainer},setup:function(){this.gameConfig=this.gameModel.gameConfig,this.pixiAssetLibrary=this.gameModel.pixiAssetLibrary,this.manifest=this.gameModel.manifest,this.textureFromID=this.gameModel.pixiAssetLibrary.textureFromID,this.spriteFromID=this.gameModel.pixiAssetLibrary.spriteFromID,this.newSprite=this.gameModel.pixiAssetLibrary.newSprite},onGameStateChanged:function(e){if(this.gameModel.isCurrentGame())switch(e){case this.gameModel.GAMESTATE_GAME_PLAYING:this.show();break;case this.gameModel.GAMESTATE_GAME_PAUSED:case this.gameModel.GAMESTATE_LOADING:case this.gameModel.GAMESTATE_INTRO:case this.gameModel.GAMESTATE_INSTRUCTIONS:case this.gameModel.GAMESTATE_COUNTDOWN:case this.gameModel.GAMESTATE_END_GAME_WIN:case this.gameModel.GAMESTATE_END_GAME_LOSE:case this.gameModel.GAMESTATE_LEVEL_SELECT:case this.gameModel.GAMESTATE_INACTIVE:this.hide()}},render:function(){},show:function(){this.shown||(this.shown=!0,this.pixiStageModel.gameUIViewContainer.addChild(this.viewContainer))},hide:function(){this.shown&&(this.shown=!1,this.onHideComplete())},onHideComplete:function(){this.pixiStageModel.gameUIViewContainer.removeChild(this.viewContainer),this.trigger("hideComplete")},onResize:function(){},destroy:function(){this.gameModel.off("change:gameState",this.onGameStateChanged),this.stopListening(),this.off()}});return a}),define("game/game_base/view/game_screens_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/model/game_model","pixi"],function(e,t,i,s,n,o,r){"use strict";var a=i.View.extend({initialized:!1,shown:!1,screens:[],gameModel:null,pixiStageModel:null,viewContainer:null,initialize:function(e){this.gameModel=e.gameModel,this.pixiStageModel=e.pixiStageModel,t.bindAll(this,"onGameStateChanged")},setup:function(){if(!this.initialized){{({gameModel:this.gameModel})}this.viewContainer=new r.DisplayObjectContainer}},onGameStateChanged:function(){},render:function(){},show:function(){this.shown||(this.shown=!0,this.pixiStageModel.gameScreensViewContainer.addChild(this.viewContainer))},hide:function(){for(var e=0,t=this.screens.length;t>e;e++)this.screens[e].hide();this.shown&&(this.shown=!1,this.onHideComplete())},onHideComplete:function(){this.pixiStageModel.gameScreensViewContainer.removeChild(this.viewContainer),this.trigger("hideComplete")},onResize:function(){},destroy:function(){this.gameModel.off("change:gameState",this.onGameStateChanged),this.stopListening(),this.off()}});return a}),define("game/game_base/game_main",["jquery","underscore","backbone","model/loader_collection","config","game/shell/model/game_shell_model","game/game_base/model/game_model","game/game_base/view/game_view","game/game_base/view/game_ui_view","game/game_base/view/game_screens_view","console","view/common/communicator","model/app_model"],function(e,t,i,s,n,o,r,a,h,l,c,d,u){"use strict";var g=i.View.extend({initialized:!1,gameModel:null,gameShellModel:null,gameInputModel:null,gameScoreModel:null,pixiStageModel:null,pixiLoaderController:null,gameView:null,gameUIView:null,gameScreensView:null,destroyed:!1,shown:!1,initialize:function(e){if(e||(e={}),!e.gameShellModel)throw new Error("GameMain constructor requires gameShellModel param");this.gameModel=e.gameModel,this.gameView=e.gameView,this.gameUIView=e.gameUIView,this.gameScreensView=e.gameScreensView,e.gameModel||(this.gameModel=new r({gameInputModel:e.gameInputModel})),e.gameView||(this.gameView=new a({gameModel:this.gameModel,pixiStageModel:e.gameShellModel.pixiStageModel})),e.gameUIView||(this.gameUIView=new h({gameModel:this.gameModel,pixiStageModel:e.gameShellModel.pixiStageModel})),e.gameScreensView||(this.gameScreensView=new l({gameModel:this.gameModel,pixiStageModel:e.gameShellModel.pixiStageModel})),void 0!==e.gameIndex&&null!==e.gameIndex?this.gameModel.gameIndex=e.gameIndex:e.gameIndex=0,this.gameShellModel=e.gameShellModel,this.gameInputModel=e.gameInputModel,this.gameScoreModel=e.gameScoreModel,this.pixiStageModel=e.pixiStageModel,this.pixiLoaderController=e.pixiLoaderController,this.addEvents()},addEvents:function(){this.listenTo(this.gameModel,d.EVENTS.GAME.SCREENS.IN_GAME.INTRO,this.onIntroScreen),this.listenTo(this.gameModel,d.EVENTS.GAME.SCREENS.IN_GAME.INSTRUCTIONS,this.onInstructionScreen),this.listenTo(this.gameModel,d.EVENTS.GAME.SCREENS.IN_GAME.COUNTDOWN,this.onCountdownScreen),this.listenTo(this.gameModel,d.EVENTS.GAME.SCREENS.IN_GAME.CUT_SCENE,this.onCutsceneScreen),this.listenTo(this.gameModel,d.EVENTS.GAME.START,this.onStart),this.listenTo(this.gameModel,d.EVENTS.GAME.RESTART,this.onRestart),this.gameShellModel.on(this.gameShellModel.EVENTS.FRAME_TICK,this.onFrameTick,this),this.gameInputModel.on(this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress,this),this.gameInputModel.on(this.gameInputModel.EVENTS.BUTTON_RELEASE,this.onButtonRelease,this)},onCutsceneScreen:function(){this.gameModel.setGameState(this.gameModel.GAMESTATE_CUTSCENE)},onIntroScreen:function(){this.gameModel.setGameState(this.gameModel.GAMESTATE_INTRO)},onInstructionScreen:function(){this.gameModel.setGameState(this.gameModel.GAMESTATE_INSTRUCTIONS)},onCountdownScreen:function(){this.gameModel.setGameState(this.gameModel.GAMESTATE_COUNTDOWN)},onStart:function(){this.gameModel.startGame()},onRestart:function(){this.gameModel.setGameState(this.gameModel.GAMESTATE_COUNTDOWN)},onButtonPress:function(e){if(u.get("page")===u.PAGES.GAME)switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:this.gameModel.isPlaying()&&this.gameModel.buttonLeftPress();break;case this.gameInputModel.BUTTONS.BUTTON_RIGHT:this.gameModel.isPlaying()&&this.gameModel.buttonRightPress();break;case this.gameInputModel.BUTTONS.NEXT_GAME:this.gameModel.isPlaying()&&this.gameModel.setGameState(this.gameModel.GAMESTATE_END_GAME_WIN);break;case this.gameInputModel.BUTTONS.BUTTON_PAUSE:this.gameModel.isCurrentGame()&&this.gameModel.togglePause();break;case this.gameInputModel.BUTTONS.BUTTON_LOSE:this.gameModel.isPlaying()&&this.gameModel.setGameState(this.gameModel.GAMESTATE_END_GAME_LOSE)}},onButtonRelease:function(e){if(u.get("page")===u.PAGES.GAME&&this.gameModel.isPlaying())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:this.gameModel.isCurrentGame()&&this.gameModel.buttonLeftRelease();break;case this.gameInputModel.BUTTONS.BUTTON_RIGHT:this.gameModel.isCurrentGame()&&this.gameModel.buttonRightRelease()}},setup:function(){this.initialized||(this.initialized=!0,this.gameModel.setup(),this.gameView.setup(),this.gameUIView.setup())},setupScreens:function(){this.gameScreensView.setup()},start:function(){this.gameModel.start()},load:function(){this.gameModel.load()},show:function(){this.shown||(this.shown=!0,this.gameView.show(),this.gameUIView.show())},setInactive:function(){this.gameModel.setGameState(this.gameModel.GAMESTATE_INACTIVE)},showScreens:function(){this.gameScreensView.show(),this.gameModel.setGameState(this.gameModel.GAMESTATE_CUTSCENE)},onFrameTick:function(){this.gameModel.isCurrentGame()&&(this.gameModel.frameTick(),this.render())},render:function(){this.gameView.render(),this.gameUIView.render(),this.gameScreensView.render()},hide:function(){this.shown&&(this.shown=!1,this.gameModel.hide(),this.gameView.hide(),this.gameUIView.hide(),this.gameScreensView.hide(),this.onHideComplete())},onHideComplete:function(){this.trigger("hideComplete")},onResize:function(){},getMedalIndex:function(){return this.gameModel.getMedalIndex()},destroy:function(){this.destroyed=!0,this.gameInputModel.off(null,null,this),this.stopListening(),this.off()}});return g}),define("game/games/courtroom/model/courtroom_game_config",["jquery","underscore","backbone","model/loader_collection","config"],function(e,t,i){"use strict";return i.Model.extend({initialValues:{allowDebug:!1,showDebugSettings:!1,gameDuration:61,showEndScreenDelay:3.5,finalHitWinDelay:.5,restartDelay:4,enableTimer:!0,showScore:!1,hitScoreInc:100,gavelScoresPoints:!0,gavelScoreInc:200,showHealthBars:!0,colonelLivesMax:8,clientLivesMax:8,hitDamage:1,hitBlockedDamage:0,gavelBlockedDamage:.25,gavelHitHealthRestore:.25,resetLivesOnReturn:!1,gavelResetLives:!1,punchUpHitsClient:!1,colonelPunchOffTime:.2,clientPunchOffTime:.2,useBlockDuration:!1,blockDuration:.4,colonelPunchLeftProbability:.5,clientPunchLeftProbability:.5,colonelAttackStartDelay:.1,colonelAttackEndDelay:.4,clientAttackStartDelay:.3,clientAttackEndDelay:.3,colonelHitResetDelay:.3,clientHitResetDelay:.3,clientInitialAttackDelay:1.5,clientAttackDelay:1.5,clientAttackDelayVar:2,clientAttackDelayEnd:.5,clientAttackDelayEndVar:1,clientAttackDelayEndAccel:.05,counterDelay:.75,lateCounterDelay:1.25,counterClientReactTime:.8,counterClientReactTimeVar:1,clientReactTime:.6,clientReactTimeVar:1,counterClientLateTime:.4,counterClientLateTimeVar:1,windUpPunch:!0,punchStopBlock:!1,hitBreakBlock:!1,gavelBreakBlock:!1,punchIfNotBlock:!0,clientRetreatOnAttacked:!0,clientRetreatDelay:.5,clientReturnAfterDelay:!1,clientReturnDelay:7,clientReturnDelayVar:2,clientReturnDuration:1,clientRetreatHitCount:4,rechargeClientHealth:!0,rechargeClientSpeed:.25,clientStepBackOnAttack:!1,clientStepBackDuration:2.5,clientStepBackDurationVar:1,clientStepBackDelay:.5,judgeThrowResetDelay:1,judgeHitResetDelay:3,judgeHitHidingResetDelay:.5,reboundGavelsToJudge:!0,hittingJudgeResumes:!0,judgeHitReturnCount:3,showJudgeHealthBar:!0,judgeHitReturnDelay:.25,gavelMaxCount:10,gavelStartThrowDelay:3,gavelStartThrowDelayVar:3,gavelRetreatStartThrowDelay:.3,gavelRetreatStartThrowDelayVar:.5,gavelThrowDelayEndAccel:.03,gavelThrowDelay:.5,gavelThrowDelayVar:1,gavelThrowDelayEnd:.4,gavelThrowDelayEndVar:1,gavelsWhileFighting:!0,gavelFightThrowDelay:2,gavelFightThrowDelayVar:2,gavelFightThrowDelayEnd:1,gavelFightThrowDelayEndVar:1.5,gavelArcDuration:.75,gavelArcDurationVar:.3,gavelBounceDurationMultiplier:1,gavelReboundDuration:.7,gavelArcTopOffset:-20,gavelArcTopOffsetVar:-20,gavelReboundArcTopOffset:-30,gavelStartPos:{x:198,y:90},gavelTargetPos:{x:65,y:90},punchReboundGavel:!0,reboundPunchTime:.15,reboundBlockTime:.1,gavelReboundMaxPos:107,debugModelStates:!1,updateDebugView:!0,debugModelStateHeight:10,debugModelSpeed:60},initialize:function(){this.reset()},reset:function(){t.extend(this,this.initialValues)}})}),define("game/games/courtroom/model/courtroom_score_model",["jquery","underscore","backbone","model/loader_collection","config"],function(e,t,i){"use strict";return i.Model.extend({initialValues:{score:0},initialize:function(){this.reset()},reset:function(){t.extend(this,this.initialValues)}})}),define("game/games/courtroom/model/courtroom_player_states",[],function(){"use strict";return{BLOCK:"block",PUNCH:"punch",PUNCH_LEFT:"punch_left",PUNCHUP:"punch_up",PUNCHED:"punched",PUNCHED_HARD:"punched_hard",GAVEL_HIT:"gavel_hit",IDLE:"idle",TELL:"tell",WIN:"WIN",KO:"KO",HIDDEN:"hidden",HIDING:"hiding",RETURNING:"returning"}}),define("game/games/courtroom/model/courtroom_colonel_model",["jquery","underscore","backbone","model/loader_collection","config","game/games/courtroom/model/courtroom_player_states"],function(e,t,i,s,n,o){"use strict";return i.Model.extend({initialValues:{state:o.IDLE,lastState:o.IDLE,livesLost:0,blockTime:0,endBlockTime:0,nextTapTime:0,signEndTime:0,blockEndTime:0,nextPunchEnableTime:0,punchedStarted:!1,blockActive:!1,rebounding:!1},initialize:function(){this.reset()},isHit:function(){return this.state===o.PUNCHED||this.state===o.PUNCHED_HARD||this.state===o.GAVEL_HIT},reset:function(){t.extend(this,this.initialValues)}})}),define("game/games/courtroom/model/courtroom_client_model",["jquery","underscore","backbone","model/loader_collection","config","game/games/courtroom/model/courtroom_player_states"],function(e,t,i,s,n,o){"use strict";return i.Model.extend({initialValues:{state:o.IDLE,livesLost:0,nextPunchEnableTime:0,counterEnableTime:0,lateCounterTime:0,attackEndProgress:0},initialize:function(){this.reset()},reset:function(){t.extend(this,this.initialValues)},isHiding:function(){return this.state===o.HIDDEN||this.state===o.HIDING}})}),define("game/games/courtroom/model/courtroom_judge_states",[],function(){"use strict";return{IDLE:"idle",THROW:"throw",HIT:"hit",ANGRY:"angry"}}),define("game/games/courtroom/model/courtroom_judge_model",["jquery","underscore","backbone","model/loader_collection","config","game/games/courtroom/model/courtroom_judge_states"],function(e,t,i,s,n,o){"use strict";return i.Model.extend({initialValues:{state:o.IDLE},initialize:function(){this.reset()},reset:function(){t.extend(this,this.initialValues)}})}),define("game/games/courtroom/model/courtroom_gavel_model",["jquery","underscore","backbone","model/loader_collection","config"],function(e,t,i){"use strict";return i.Model.extend({index:-1,initialValues:{active:!1,state:0,x:0,y:0,blocked:!1,rebounded:!1,bounced:!1,rotation:0},initialize:function(e){this.index=e.index,this.reset()},remove:function(){this.active=!1},reset:function(){t.extend(this,this.initialValues)}})}),define("game/games/courtroom/model/courtroom_game_model",["jquery","underscore","backbone","model/loader_collection","config","TweenMax","game/game_base/model/game_model","game/games/courtroom/model/courtroom_game_config","game/games/courtroom/model/courtroom_score_model","game/games/courtroom/model/courtroom_colonel_model","game/games/courtroom/model/courtroom_client_model","game/games/courtroom/model/courtroom_judge_model","game/games/courtroom/model/courtroom_gavel_model","game/games/courtroom/model/courtroom_player_states","game/games/courtroom/model/courtroom_judge_states","console","shims/shim_resn_utils"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m,_){"use strict";return r.extend({initialized:!1,gameConfig:null,scoreModel:null,colonelModel:null,clientModel:null,judgeModel:null,punchHitIndex:0,voAudioIndex:0,gavelModels:[],arcUpEase:window.Sine.easeOut,arcDownEase:window.Sine.easeIn,noEase:window.Linear.easeNone,debugStartTime:0,debugPauseTime:0,lastColonelDebugPositionX:0,lastClientDebugPositionX:0,initialValues:{gameTime:0,gameTimeRemaining:0,gavelThrowEndProgress:0,gavelIndex:0,judgeHitCount:0,lastPunchWasCounter:!1,lastPunchWasLate:!1,lastHitWithGavel:!1},EVENTS:t.defaults({TIME_UP:"TIME_UP",PLAYER_STATE_CHANGE:"PLAYER_STATE_CHANGE",JUDGE_STATE_CHANGE:"JUDGE_STATE_CHANGE"},r.prototype.EVENTS),initialize:function(e){this["super"]=this.constructor.__super__,this.gameInputModel=e.gameInputModel,this.gameConfig=new a,this.scoreModel=new h,this.colonelModel=new l,this.clientModel=new c,this.judgeModel=new d,this["super"].initialize.apply(this,arguments)},load:function(){this["super"].load.apply(this,arguments)},onLoadComplete:function(){this["super"].onLoadComplete.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.initialized||(this.initialized=!0,t.bindAll(this,"throwGavel","setModelState","colonelPunchNow","clientBlockReact","clientAttack","clientBeginAttack","attackEndClient","clientReturn","clientReturned","clientHideNow","resetColonelState","idleResetJudge","hitResetJudge","resetClientState","start"),this.initGavels())},reset:function(){this["super"].reset.apply(this,arguments),this.resetModel(),this.resetGavels(),this.killTweens(),this.colonelModel.reset(),this.clientModel.reset(),this.judgeModel.reset(),this.scoreModel.reset()},killTweens:function(){this.gameTweenMax.killDelayedCallsTo(this.throwGavel),this.gameTweenMax.killDelayedCallsTo(this.colonelPunchNow),this.gameTweenMax.killDelayedCallsTo(this.clientBlockReact),this.gameTweenMax.killDelayedCallsTo(this.clientAttack),this.gameTweenMax.killDelayedCallsTo(this.clientBeginAttack),this.gameTweenMax.killDelayedCallsTo(this.attackEndClient),this.gameTweenMax.killDelayedCallsTo(this.clientReturn),this.gameTweenMax.killDelayedCallsTo(this.clientReturned),this.gameTweenMax.killDelayedCallsTo(this.clientHideNow),this.gameTweenMax.killDelayedCallsTo(this.resetColonelState),this.gameTweenMax.killDelayedCallsTo(this.idleResetJudge),this.gameTweenMax.killDelayedCallsTo(this.hitResetJudge),this.gameTweenMax.killDelayedCallsTo(this.resetClientState),this.gameTweenMax.killDelayedCallsTo(this.resolveWinOrLose),this.stopGavels()},calculateMedalIndex:function(){this.medalIndex=this.getMedalIndex()},getMedalIndex:function(){var e,t=this.colonelModel.livesLost,i=this.gameConfig.colonelLivesMax,s=i-t,n=_.math.clamp(s/i,0,1),o=this.clientModel.livesLost,r=this.gameConfig.clientLivesMax,a=r-o,h=_.math.clamp(a/r,0,1),l=this.gameTimeRemaining,c=this.gameConfig.gameDuration,d=_.math.clamp(1-l/c,0,1),u=n>0&&1>d,g=n>0,p=this.clientModel.livesLost>=this.gameConfig.clientLivesMax;return e=p&&.5>=d?3:p&&.75>=d?2:u||g&&n>=h?1:0},start:function(){this["super"].start.apply(this,arguments)},startGame:function(){this.gameTweenMax.killDelayedCallsTo(this.startGame),this["super"].startGame.apply(this,arguments),this.gameTweenMax.delay(this.gameConfig.gavelStartThrowDelay+Math.random()*this.gameConfig.gavelStartThrowDelayVar,this.throwGavel),this.gameTweenMax.delay(this.gameConfig.clientInitialAttackDelay,this.clientBeginAttack),this.playGameMusic()},playGameMusic:function(){this.gameSoundModel.play(this.manifest.AUDIO_MUSIC.id,{loop:0})},buttonLeftPress:function(){this.colonelModel.blockActive||(this.colonelModel.blockActive=!0,this.colonelModel.rebounding=!1),this.gameConfig.useBlockDuration&&(this.colonelModel.endBlockTime=this.gameTime+this.gameConfig.blockDuration),this.isPlaying()&&!this.colonelModel.isHit()&&this.colonelModel.state!==g.BLOCK&&(this.colonelModel.blockTime=this.gameTime)},buttonRightPress:function(){this.colonelModel.punchedStarted=!1},buttonLeftRelease:function(){this.gameConfig.useBlockDuration||this.stopBlock()},buttonRightRelease:function(){},isClientInPlay:function(){return this.isPlaying()&&this.clientModel.state!==g.PUNCHED&&this.clientModel.state!==g.PUNCHED_HARD&&!this.isClientHiding()},isClientHiding:function(){return this.clientModel.state===g.HIDDEN||this.clientModel.state===g.HIDING||this.clientModel.state===g.RETURNING},stopBlock:function(){this.colonelModel.blockActive=!1},checkColonelState:function(){this.isPlaying()&&!this.colonelModel.isHit()&&(!this.gameConfig.windUpPunch||this.colonelModel.state!==g.TELL&&this.colonelModel.state!==g.PUNCH&&this.colonelModel.state!==g.PUNCH_LEFT&&this.colonelModel.state!==g.PUNCHUP)&&(this.colonelModel.blockActive?this.setModelState(this.colonelModel,g.BLOCK):this.setModelState(this.colonelModel,g.IDLE),this.gameInputModel.get("buttonRightPressed")&&(this.colonelModel.punchedStarted||this.gameConfig.punchIfNotBlock&&this.colonelModel.blockActive||!(this.gameTime>this.colonelModel.nextPunchEnableTime)||(this.colonelModel.nextPunchEnableTime=this.gameTime+this.gameConfig.colonelPunchOffTime+(this.gameConfig.colonelAttackStartDelay+this.gameConfig.colonelAttackEndDelay),this.gameConfig.punchReboundGavel&&(this.colonelModel.punchTime=this.gameTime),!this.colonelModel.isHit()&&this.isClientInPlay()&&(this.colonelModel.blockEndTime=this.gameTime+this.gameConfig.blockDuration,this.colonelModel.blockTime=this.gameTime),this.colonelModel.punchedStarted=!0,this.colonelPunch())))},colonelPunch:function(){if(this.gameConfig.windUpPunch)if(this.setModelState(this.colonelModel,g.TELL),this.gameTweenMax.killDelayedCallsTo(this.colonelPunchNow),this.gameTweenMax.delayedCall(this.gameConfig.colonelAttackStartDelay,this.colonelPunchNow),this.lastPunchWasCounter=this.gameTime<this.clientModel.counterEnableTime,this.lastPunchWasLate=this.gameTime>this.clientModel.lateCounterTime,this.gameTweenMax.killDelayedCallsTo(this.clientBlockReact),this.clientModel.state===g.TELL)this.gameTweenMax.killDelayedCallsTo(this.clientAttack),this.gameTweenMax.delayedCall(this.gameConfig.colonelAttackStartDelay/2,this.clientAttack);else{var e;e=this.gameTime>this.clientModel.lateCounterTime?this.gameConfig.counterClientLateTime+Math.random()*this.gameConfig.counterClientLateTimeVar:this.gameTime<this.clientModel.counterEnableTime?this.gameConfig.counterClientReactTime+Math.random()*this.gameConfig.counterClientReactTimeVar:this.gameConfig.clientReactTime+Math.random()*this.gameConfig.clientReactTimeVar,this.gameTweenMax.delayedCall(this.gameConfig.colonelAttackStartDelay*e,this.clientBlockReact)}else this.clientBlockReact(),this.colonelPunchNow()},clientBlockReact:function(){this.clientModel.state!==g.PUNCH&&this.clientModel.state!==g.PUNCH_LEFT&&this.isClientInPlay()&&this.setModelState(this.clientModel,g.BLOCK)},colonelPunchNow:function(){this.colonelModel.isHit()||(this.clientModel.state===g.HIDDEN||this.clientModel.state===g.RETURNING?this.setModelState(this.colonelModel,g.PUNCHUP):Math.random()<this.gameConfig.colonelPunchLeftProbability?this.setModelState(this.colonelModel,g.PUNCH_LEFT):this.setModelState(this.colonelModel,g.PUNCH),this.gameConfig.punchStopBlock&&this.stopBlock(),this.gameTweenMax.killDelayedCallsTo(this.resetColonelState),this.gameTweenMax.delayedCall(this.gameConfig.colonelAttackEndDelay,this.resetColonelState),this.isClientInPlay()&&(this.colonelModel.state!==g.PUNCHUP||this.gameConfig.punchUpHitsClient&&this.colonelModel.state===g.PUNCHUP)&&(this.clientModel.state!==g.BLOCK?this.hitClient():(this.playBlockAudio(),this.clientModel.livesLost+=this.gameConfig.hitBlockedDamage)),this.checkGavelCollisions())
},frameTick:function(){this["super"].frameTick.apply(this,arguments),this.isPlaying()&&(this.gameTime+=this.timeDelta,this.gameTimeRemaining=Math.max(0,this.gameConfig.gameDuration-this.gameTime),this.gameConfig.enableTimer&&this.gameTimeRemaining<=0&&this.state!==this.GAMESTATE_GAME_OUTRO&&(this.gameTimeRemaining=0,this.timeUp()),this.gameConfig.rechargeClientSpeed&&this.clientModel.isHiding()&&(this.clientModel.livesLost-=this.timeDelta*this.gameConfig.rechargeClientSpeed,this.clientModel.livesLost<0&&(this.clientModel.livesLost=0))),this.checkColonelState(),this.gameConfig.useBlockDuration&&this.colonelModel.endBlockTime&&this.gameTime>this.colonelModel.endBlockTime&&(this.colonelModel.endBlockTime=0,this.stopBlock()),this.checkScore()},checkScore:function(){this.isPlaying()&&(this.colonelModel.livesLost>=this.gameConfig.colonelLivesMax&&this.colonelLose(),this.clientModel.livesLost>=this.gameConfig.clientLivesMax&&this.colonelWin())},determineOutro:function(){this.getMedalIndex()>0?this.colonelNoKOWin():this.colonelNoKOLose()},colonelNoKOLose:function(){this.playLoseAudio();var e=this.gameConfig.finalHitWinDelay;this.gameTweenMax.delayedCall(e,this.setModelState,[this.clientModel,g.WIN,!0]),this.setModelState(this.colonelModel,g.IDLE),this.playFailSound(),this.showOutro()},colonelNoKOWin:function(){this.playWinAudio(),this.setModelState(this.clientModel,g.IDLE);var e=this.gameConfig.finalHitWinDelay;this.gameTweenMax.delayedCall(e,this.setModelState,[this.colonelModel,g.WIN,!0]),this.showOutro()},colonelLose:function(){this.playLoseAudio();var e=this.gameConfig.finalHitWinDelay;this.gameTweenMax.delayedCall(e,this.setModelState,[this.clientModel,g.WIN,!0]),this.setModelState(this.colonelModel,g.KO),this.playFailSound(),this.showOutro()},colonelWin:function(){this.playWinAudio();var e=this.gameConfig.finalHitWinDelay;this.setModelState(this.clientModel,g.KO),this.gameTweenMax.delayedCall(e,this.setModelState,[this.colonelModel,g.WIN,!0]),this.showOutro()},showOutro:function(){this.state!==this.GAMESTATE_GAME_OUTRO&&(this.setGameState(this.GAMESTATE_GAME_OUTRO),this.gameTweenMax.killDelayedCallsTo(this.resolveWinOrLose),this.gameTweenMax.delayedCall(this.gameConfig.showEndScreenDelay,this.resolveWinOrLose))},throwGavel:function(){if(this.gameTweenMax.killDelayedCallsTo(this.throwGavel),!this.isPlaying()||!this.gameConfig.gavelsWhileFighting&&this.clientModel.state!==g.HIDDEN||this.colonelModel.isHit()||this.judgeModel.state===p.HIT)this.setNextSpawnTimer(!1);else{this.setModelState(this.judgeModel,p.IDLE),this.setModelState(this.judgeModel,p.THROW),this.gameTweenMax.killDelayedCallsTo(this.idleResetJudge),this.gameTweenMax.delayedCall(this.gameConfig.judgeThrowResetDelay,this.idleResetJudge),this.gavelIndex++,this.gavelIndex>this.gavelModels.length-1&&(this.gavelIndex=0);var e=this.gavelIndex,t=this.gavelModels[e];this.setGavelState(t,0),this.setNextSpawnTimer(this.clientModel.isHiding()?!1:!0)}},idleResetJudge:function(){this.gameTweenMax.killDelayedCallsTo(this.idleResetJudge),this.restoreJudgeState()},hitResetJudge:function(){this.gameTweenMax.killDelayedCallsTo(this.hitResetJudge),this.restoreJudgeState()},restoreJudgeState:function(){this.clientModel.state===g.HIDDEN?this.setModelState(this.judgeModel,p.ANGRY):this.setModelState(this.judgeModel,p.IDLE)},setNextSpawnTimer:function(e,t){this.gameTweenMax.killDelayedCallsTo(this.throwGavel);var i,s;this.clientModel.state!==g.HIDDEN||t?(i=this.gameConfig.gavelFightThrowDelay+(this.gameConfig.gavelFightThrowDelayEnd-this.gameConfig.gavelFightThrowDelay)*this.gavelThrowEndProgress,s=this.gameConfig.gavelFightThrowDelayVar+(this.gameConfig.gavelFightThrowDelayEndVar-this.gameConfig.gavelFightThrowDelayVar)*this.gavelThrowEndProgress):(i=this.gameConfig.gavelThrowDelay+(this.gameConfig.gavelThrowDelayEnd-this.gameConfig.gavelThrowDelay)*this.gavelThrowEndProgress,s=this.gameConfig.gavelThrowDelayVar+(this.gameConfig.gavelThrowDelayEndVar-this.gameConfig.gavelThrowDelayVar)*this.gavelThrowEndProgress),e&&(this.gavelThrowEndProgress+=(1-this.gavelThrowEndProgress)*this.gameConfig.gavelThrowDelayEndAccel);var n=i+Math.random()*s;this.gameTweenMax.killDelayedCallsTo(this.throwGavel),this.gameTweenMax.delayedCall(n,this.throwGavel)},setNextClientAttackTime:function(e){this.gameTweenMax.killDelayedCallsTo(this.clientBeginAttack);var t=this.gameConfig.clientAttackDelay+(this.gameConfig.clientAttackDelayEnd-this.gameConfig.clientAttackDelay)*this.clientModel.attackEndProgress,i=this.gameConfig.clientAttackDelayVar+(this.gameConfig.clientAttackDelayEndVar-this.gameConfig.clientAttackDelayVar)*this.clientModel.attackEndProgress;e&&(this.clientModel.attackEndProgress+=(1-this.clientModel.attackEndProgress)*this.gameConfig.clientAttackDelayEndAccel);var s=t+Math.random()*i;this.gameTweenMax.delayedCall(s,this.clientBeginAttack)},clientBeginAttack:function(){this.gameTweenMax.killDelayedCallsTo(this.clientBeginAttack),!this.colonelModel.isHit()&&this.isClientInPlay()&&this.gameTime>this.clientModel.nextPunchEnableTime?(this.setModelState(this.clientModel,g.TELL),this.gameTweenMax.killDelayedCallsTo(this.clientAttack),this.gameTweenMax.delayedCall(this.gameConfig.clientAttackStartDelay,this.clientAttack),this.setNextClientAttackTime(!0)):this.setNextClientAttackTime(!1)},clientAttack:function(){this.gameTweenMax.killDelayedCallsTo(this.clientAttack),this.clientModel.state!==g.PUNCH&&this.clientModel.state!==g.PUNCH_LEFT&&this.isClientInPlay()&&(Math.random()<this.gameConfig.clientPunchLeftProbability?this.setModelState(this.clientModel,g.PUNCH_LEFT):this.setModelState(this.clientModel,g.PUNCH),this.gameTweenMax.killDelayedCallsTo(this.attackEndClient),this.gameTweenMax.delayedCall(this.gameConfig.clientAttackEndDelay,this.attackEndClient),this.colonelModel.state!==g.BLOCK?this.hitColonel():(this.playBlockAudio(),this.colonelModel.livesLost+=this.gameConfig.hitBlockedDamage),this.gameConfig.hitBreakBlock&&this.stopBlock())},attackEndClient:function(){this.isClientInPlay()&&this.setModelState(this.clientModel,g.IDLE)},setGavelState:function(e,t){e.state=t,this.gameTweenMax.killTweensOf(e);var i=this.gameConfig.gavelArcDuration+Math.random()*this.gameConfig.gavelArcDurationVar;if(0===t){e.active=!0,e.blocked=!1,e.rebounded=!1,e.bounced=!1,e.throwDuration=i;var s={x:0,y:0},n={x:0,y:0},o={x:0,y:0};s.x=this.gameConfig.gavelTargetPos.x,s.y=this.gameConfig.gavelTargetPos.y,e.x=this.gameConfig.gavelStartPos.x,e.y=this.gameConfig.gavelStartPos.y,e.startPosition=this.gameConfig.gavelStartPos,e.rotation=0;var r=this.gameConfig.gavelArcTopOffset+Math.random()*this.gameConfig.gavelArcTopOffsetVar;n.y=e.y+r,o.y=e.y+this.gameConfig.gavelReboundArcTopOffset,e.heightPosition=n,e.heightBackPosition=o,e.targetMaxBlockTime=this.gameTime+i,this.gameTweenMax.to(e,i,{x:s.x,ease:this.noEase}),this.gameTweenMax.to(e,i/2,{y:n.y,ease:this.arcUpEase}),this.gameTweenMax.to(e,i/2,{delay:i/2,y:s.y,ease:this.arcDownEase,onComplete:this.onGavelHit,onCompleteParams:[e],onCompleteScope:this})}},onGavelHit:function(e){this.isPlaying()?(this.colonelModel.isHit()||!this.isBlocking(e)&&this.colonelModel.state!==g.PUNCHUP&&this.colonelModel.state!==g.PUNCH?this.gavelHitPlayer(e):(this.colonelModel.livesLost+=this.gameConfig.gavelBlockedDamage,this.blockGavel(e)),this.gameConfig.gavelBreakBlock&&this.stopBlock()):e.active=!1},blockGavel:function(e){e.blocked=!0,this.playBlockAudio(),this.blockGavelDrop(e)},gavelHitPlayer:function(e){e.bounced=!0,this.colonelModel.isHit()||(this.hitColonel(!0),this.lastHitWithGavel=!0),this.bounceGavel(e)},hitColonel:function(e){this.isPlaying()&&!this.colonelModel.isHit()&&(this.colonelModel.livesLost+=this.gameConfig.hitDamage,this.checkScore(),this.gameTweenMax.killDelayedCallsTo(this.colonelPunchNow),this.gameTweenMax.killDelayedCallsTo(this.clientBlockReact),this.gameTweenMax.killDelayedCallsTo(this.resetColonelState),e?(this.setModelState(this.colonelModel,g.GAVEL_HIT),this.playGavelHitAudio()):(this.clientModel.state===g.PUNCH_LEFT?this.setModelState(this.colonelModel,g.PUNCHED_HARD):this.setModelState(this.colonelModel,g.PUNCHED),this.playHitAudio()),this.isPlaying()&&this.gameTweenMax.delayedCall(this.gameConfig.colonelHitResetDelay,this.resetColonelState))},incScore:function(){this.scoreModel.score+=this.gameConfig.hitScoreInc,this.checkScore()},playHitAudio:function(){var e=[this.manifest.AUDIO_HIT_0.id,this.manifest.AUDIO_HIT_1.id,this.manifest.AUDIO_HIT_2.id,this.manifest.AUDIO_HIT_3.id];this.punchHitIndex++;var t=this.punchHitIndex%e.length,i=e[t];this.gameSoundModel.play(i,{loop:0})},playVOAudio:function(){var e=[this.manifest.AUDIO_SPEECH_ADJOURNED.id,this.manifest.AUDIO_SPEECH_APPEAL.id,this.manifest.AUDIO_SPEECH_OBJECTION.id];this.voAudioIndex++;var t=this.voAudioIndex%e.length,i=e[t];this.gameSoundModel.play(i,{loop:0})},playWinAudio:function(){this.gameSoundModel.play(this.manifest.AUDIO_SPEECH_WIN.id,{loop:0})},playLoseAudio:function(){this.gameSoundModel.play(this.manifest.AUDIO_SPEECH_LOSE.id,{loop:0})},playGavelHitAudio:function(){this.gameSoundModel.play(this.manifest.AUDIO_HIT_WOOD.id,{loop:0})},playBlockAudio:function(){this.gameSoundModel.play(this.manifest.AUDIO_BLOCK.id,{loop:0})},hitClient:function(){this.isClientInPlay()&&(this.colonelModel.state===g.PUNCH_LEFT?this.setModelState(this.clientModel,g.PUNCHED_HARD):this.setModelState(this.clientModel,g.PUNCHED),this.playHitAudio(),this.incScore(),this.clientModel.livesLost+=this.gameConfig.hitDamage,this.checkScore(),this.gameConfig.clientRetreatOnAttacked?this.isPlaying()&&this.clientModel.livesLost%this.gameConfig.clientRetreatHitCount===0&&this.clientHide():this.clientModel.livesLost>=this.gameConfig.clientLivesMax&&this.resolveWinOrLose(),this.gameTweenMax.killDelayedCallsTo(this.clientAttack),this.gameTweenMax.killDelayedCallsTo(this.clientBlockReact),this.gameTweenMax.killDelayedCallsTo(this.resetClientState),this.isPlaying()&&this.gameTweenMax.delayedCall(this.gameConfig.clientHitResetDelay,this.resetClientState))},timeUp:function(){this.determineOutro(),this.trigger(this.EVENTS.TIME_UP)},clientHide:function(){this.setModelState(this.clientModel,g.HIDING),this.judgeHitCount=0;var e=this.getAnimationDuration(this.manifest.CLIENT_COWER_MC);this.gameTweenMax.killDelayedCallsTo(this.clientHideNow),this.gameTweenMax.delayedCall(e,this.clientHideNow)},clientHideNow:function(){this.gameConfig.gavelResetLives&&(this.colonelModel.livesLost=0),this.setModelState(this.clientModel,g.HIDDEN),this.setModelState(this.judgeModel,p.ANGRY);var e=this.gameConfig.gavelRetreatStartThrowDelay+Math.random()*this.gameConfig.gavelRetreatStartThrowDelayVar;this.gameTweenMax.killDelayedCallsTo(this.throwGavel),this.gameTweenMax.delayedCall(e,this.throwGavel),this.gameTweenMax.killDelayedCallsTo(this.clientReturn),this.gameTweenMax.killDelayedCallsTo(this.clientReturned),this.gameConfig.clientStepBackOnAttack?this.gameTweenMax.delayedCall(this.gameConfig.clientStepBackDuration+Math.random()*this.gameConfig.clientStepBackDurationVar,this.clientReturn):this.gameConfig.clientReturnAfterDelay&&this.gameTweenMax.delayedCall(this.gameConfig.clientReturnDelay+Math.random()*this.gameConfig.clientReturnDelayVar,this.clientReturn)},clientReturn:function(){this.gameConfig.resetLivesOnReturn&&(this.colonelModel.livesLost=0,this.checkScore()),this.playVOAudio(),this.judgeModel.state===p.ANGRY&&this.setModelState(this.judgeModel,p.IDLE),this.gameTweenMax.killDelayedCallsTo(this.clientReturn),this.setModelState(this.clientModel,g.RETURNING);var e=this.getAnimationDuration(this.manifest.CLIENT_RECOVER_MC);this.gameTweenMax.killDelayedCallsTo(this.clientReturned),this.gameTweenMax.delayedCall(e,this.clientReturned)},clientReturned:function(){this.gameTweenMax.killDelayedCallsTo(this.clientReturned),this.setModelState(this.clientModel,g.IDLE)},setModelState:function(e,t,i){if((this.state!==this.GAMESTATE_GAME_OUTRO||i===!0)&&e.state!==t)switch(e.lastState=e.state,e.state=t,e){case this.colonelModel:switch(t){case g.PUNCHED:case g.PUNCHED_HARD:this.lastHitWithGavel=!1}this.trigger(this.EVENTS.PLAYER_STATE_CHANGE,e,t);break;case this.clientModel:switch(t){case g.PUNCH:case g.PUNCH_LEFT:case g.BLOCK:this.clientModel.counterEnableTime=this.gameTime+this.gameConfig.counterDelay,this.clientModel.lateCounterTime=this.gameTime+this.gameConfig.lateCounterDelay;break;case g.IDLE:this.clientModel.nextPunchEnableTime=this.gameTime+this.gameConfig.clientPunchOffTime}this.trigger(this.EVENTS.PLAYER_STATE_CHANGE,e,t);break;case this.judgeModel:this.trigger(this.EVENTS.JUDGE_STATE_CHANGE,e,t)}},initGavels:function(){this.gavelModels=[];for(var e,t=this.gameConfig.gavelMaxCount,i=0;t>i;i++)e=new u({index:i}),this.gavelModels.push(e),e.reset()},stopGavels:function(){t.each(this.gavelModels,function(e){this.gameTweenMax.killTweensOf(e),e.active=!1},this)},resetGavels:function(){t.each(this.gavelModels,function(e){this.gameTweenMax.killTweensOf(e),e.active=!1},this)},resetColonelState:function(){this.setModelState(this.colonelModel,g.IDLE),this.colonelModel.lastState=this.colonelModel.state},resetClientState:function(){this.isClientHiding()||this.setModelState(this.clientModel,g.IDLE)},reboundGavel:function(e){if(this.isPlaying()&&e.active&&!e.blocked&&!e.rebounded&&!e.bounced){e.rebounded=!0,this.colonelModel.rebounding=!0,this.colonelModel.livesLost-=this.gameConfig.gavelHitHealthRestore,this.colonelModel.livesLost<0&&(this.colonelModel.livesLost=0),this.playHitAudio();var t=this.gameConfig.gavelReboundDuration;if(this.gameConfig.reboundGavelsToJudge)this.gameTweenMax.killTweensOf(e),this.gameTweenMax.to(e,t,{x:e.startPosition.x,ease:this.noEase}),this.gameTweenMax.to(e,.5*t,{y:e.heightBackPosition.y,ease:this.arcUpEase}),this.gameTweenMax.to(e,.5*t,{delay:.5*t,y:e.startPosition.y,ease:this.arcDownEase,onComplete:this.onGavelReboundHit,onCompleteParams:[e],onCompleteScope:this});else{var i={x:0,y:0},s=0;i.x=e.x+800*this.pixelScaleMultiplier,i.y=e.y-300*this.pixelScaleMultiplier,s=(-100-50*Math.random())*this.pixelScaleMultiplier,this.gameTweenMax.killTweensOf(e),this.gameTweenMax.to(e,t,{x:i.x,ease:this.noEase}),this.gameTweenMax.to(e,.5*t,{y:e.y+(i.y-e.y)/2+s,ease:this.arcUpEase}),this.gameTweenMax.to(e,t,{delay:.5*t,y:i.y,ease:this.arcDownEase,onComplete:this.removeGavel,onCompleteParams:[e],onCompleteScope:this})}}},onGavelReboundHit:function(e){e.active=!1,this.isPlaying()&&this.judgeModel.state!==p.HIT&&(this.isClientHiding()&&this.gameConfig.hittingJudgeResumes&&(this.judgeHitCount++,this.judgeHitCount>=this.gameConfig.judgeHitReturnCount&&(this.gameTweenMax.killDelayedCallsTo(this.clientReturn),this.gameTweenMax.killDelayedCallsTo(this.clientReturned),this.gameTweenMax.delayedCall(this.gameConfig.judgeHitReturnDelay,this.clientReturn),this.setNextSpawnTimer(!1,!0))),this.playHitAudio(),this.gameConfig.gavelScoresPoints&&(this.scoreModel.score+=this.gameConfig.gavelScoreInc),this.checkScore(),this.setModelState(this.judgeModel,p.HIT),this.gameTweenMax.killDelayedCallsTo(this.hitResetJudge),this.clientModel.isHiding()?this.gameTweenMax.delayedCall(this.gameConfig.judgeHitHidingResetDelay,this.hitResetJudge):this.gameTweenMax.delayedCall(this.gameConfig.judgeHitResetDelay,this.hitResetJudge))},blockGavelDrop:function(e){this.bounceGavel(e)},bounceGavel:function(e){var t=e.throwDuration*this.gameConfig.gavelBounceDurationMultiplier;this.gameTweenMax.killTweensOf(e),this.gameTweenMax.to(e,t/2,{x:e.x-70,ease:this.noEase}),this.gameTweenMax.to(e,t/2,{y:e.y-30,ease:this.arcUpEase,onComplete:this.removeGavel,onCompleteParams:[e],onCompleteScope:this})},removeGavel:function(e){e.active=!1},checkGavelCollisions:function(){for(var e=0,t=this.gavelModels.length;t>e;e++){var i=this.gavelModels[e];i.active!==!1&&!i.rebounded&&!i.blocked&&i.x<this.gameConfig.gavelReboundMaxPos&&(this.setModelState(this.colonelModel,g.PUNCHUP),this.reboundGavel(i))}},isBlocking:function(){return this.isPlaying()&&this.colonelModel.state===g.BLOCK},endGame:function(){this["super"].endGame.apply(this,arguments),this.killTweens()},hide:function(){this.killTweens(),this["super"].hide.apply(this,arguments)},destroy:function(){this.killTweens(),this["super"].destroy.apply(this,arguments)}})}),define("game/games/courtroom/sprites/courtroom-sheet",[],function(){"use strict";return{ns:"courtroom-sheet",manifest:[{src:"/img/games/courtroom/courtroom-sheet_0_sheet.png",spritesheet:{ns:"courtroom-sheet",sprites:[{x:0,y:0,width:256,height:192,id:"bg.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:43,y:458,width:38,height:83,id:"client_KO_1.png",trim:{origWidth:152,origHeight:100,width:38,height:83,offsetX:26,offsetY:6}},{x:166,y:285,width:63,height:59,id:"client_KO_2.png",trim:{origWidth:152,origHeight:100,width:63,height:59,offsetX:28,offsetY:23}},{x:267,y:458,width:77,height:29,id:"client_KO_3.png",trim:{origWidth:152,origHeight:100,width:77,height:29,offsetX:27,offsetY:67}},{x:270,y:507,width:77,height:23,id:"client_KO_4.png",trim:{origWidth:152,origHeight:100,width:77,height:23,offsetX:27,offsetY:75}},{x:191,y:507,width:77,height:24,id:"client_KO_5.png",trim:{origWidth:152,origHeight:100,width:77,height:24,offsetX:27,offsetY:73}},{x:602,y:346,width:35,height:85,id:"client_block_1.png",trim:{origWidth:152,origHeight:100,width:35,height:85,offsetX:26,offsetY:8}},{x:0,y:545,width:33,height:84,id:"client_block_2.png",trim:{origWidth:152,origHeight:100,width:33,height:84,offsetX:28,offsetY:9}},{x:425,y:261,width:48,height:81,id:"client_celebration_1.png",trim:{origWidth:152,origHeight:100,width:48,height:81,offsetX:22,offsetY:12}},{x:225,y:194,width:51,height:82,id:"client_celebration_2.png",trim:{origWidth:152,origHeight:100,width:51,height:82,offsetX:22,offsetY:11}},{x:322,y:174,width:51,height:82,id:"client_celebration_3.png",trim:{origWidth:152,origHeight:100,width:51,height:82,offsetX:22,offsetY:11}},{x:520,y:0,width:40,height:88,id:"client_cower_1.png",trim:{origWidth:152,origHeight:100,width:40,height:88,offsetX:29,offsetY:5}},{x:278,y:194,width:38,height:82,id:"client_cower_2.png",trim:{origWidth:152,origHeight:100,width:38,height:82,offsetX:59,offsetY:12}},{x:177,y:372,width:43,height:76,id:"client_cower_3.png",trim:{origWidth:152,origHeight:100,width:43,height:76,offsetX:76,offsetY:15}},{x:640,y:0,width:35,height:76,id:"client_cower_4.png",trim:{origWidth:152,origHeight:100,width:35,height:76,offsetX:99,offsetY:19}},{x:677,y:383,width:27,height:52,id:"client_cower_5.png",trim:{origWidth:152,origHeight:100,width:27,height:52,offsetX:119,offsetY:43}},{x:677,y:328,width:27,height:53,id:"client_cower_6.png",trim:{origWidth:152,origHeight:100,width:27,height:53,offsetX:118,offsetY:42}},{x:520,y:348,width:40,height:83,id:"client_idle_1.png",trim:{origWidth:152,origHeight:100,width:40,height:83,offsetX:20,offsetY:10}},{x:0,y:458,width:41,height:85,id:"client_idle_2.png",trim:{origWidth:152,origHeight:100,width:41,height:85,offsetX:20,offsetY:8}},{x:133,y:372,width:42,height:83,id:"client_idle_3.png",trim:{origWidth:152,origHeight:100,width:42,height:83,offsetX:20,offsetY:10}},{x:425,y:0,width:49,height:84,id:"client_left_punch_1.png",trim:{origWidth:152,origHeight:100,width:49,height:84,offsetX:2,offsetY:9}},{x:562,y:439,width:38,height:85,id:"client_left_punch_2.png",trim:{origWidth:152,origHeight:100,width:38,height:85,offsetX:18,offsetY:8}},{x:562,y:265,width:38,height:85,id:"client_punched_1.png",trim:{origWidth:152,origHeight:100,width:38,height:85,offsetX:28,offsetY:8}},{x:562,y:0,width:38,height:87,id:"client_punched_2.png",trim:{origWidth:152,origHeight:100,width:38,height:87,offsetX:28,offsetY:6}},{x:562,y:178,width:38,height:85,id:"client_punched_hard_1.png",trim:{origWidth:152,origHeight:100,width:38,height:85,offsetX:28,offsetY:8}},{x:58,y:194,width:54,height:85,id:"client_punched_hard_2.png",trim:{origWidth:152,origHeight:100,width:54,height:85,offsetX:31,offsetY:8}},{x:562,y:89,width:38,height:87,id:"client_punched_hard_3.png",trim:{origWidth:152,origHeight:100,width:38,height:87,offsetX:26,offsetY:6}},{x:267,y:372,width:40,height:74,id:"client_recover_1.png",trim:{origWidth:152,origHeight:100,width:40,height:74,offsetX:110,offsetY:21}},{x:83,y:458,width:38,height:82,id:"client_recover_2.png",trim:{origWidth:152,origHeight:100,width:38,height:82,offsetX:75,offsetY:14}},{x:222,y:372,width:43,height:76,id:"client_recover_3.png",trim:{origWidth:152,origHeight:100,width:43,height:76,offsetX:53,offsetY:17}},{x:170,y:194,width:53,height:85,id:"client_right_punch_1.png",trim:{origWidth:152,origHeight:100,width:53,height:85,offsetX:4,offsetY:8}},{x:425,y:174,width:46,height:85,id:"client_right_punch_2.png",trim:{origWidth:152,origHeight:100,width:46,height:85,offsetX:13,offsetY:8}},{x:562,y:352,width:38,height:85,id:"client_tell.png",trim:{origWidth:152,origHeight:100,width:38,height:85,offsetX:25,offsetY:8}},{x:45,y:372,width:42,height:84,id:"colonel_KO_1.png",trim:{origWidth:125,origHeight:100,width:42,height:84,offsetX:41,offsetY:9}},{x:103,y:285,width:61,height:64,id:"colonel_KO_2.png",trim:{origWidth:125,origHeight:100,width:61,height:64,offsetX:13,offsetY:20}},{x:186,y:458,width:79,height:33,id:"colonel_KO_3.png",trim:{origWidth:125,origHeight:100,width:79,height:33,offsetX:2,offsetY:65}},{x:427,y:458,width:79,height:28,id:"colonel_KO_4.png",trim:{origWidth:125,origHeight:100,width:79,height:28,offsetX:2,offsetY:71}},{x:346,y:458,width:79,height:28,id:"colonel_KO_5.png",trim:{origWidth:125,origHeight:100,width:79,height:28,offsetX:2,offsetY:71}},{x:520,y:177,width:40,height:84,id:"colonel_block_1.png",trim:{origWidth:125,origHeight:100,width:40,height:84,offsetX:51,offsetY:9}},{x:602,y:261,width:36,height:83,id:"colonel_block_2.png",trim:{origWidth:125,origHeight:100,width:36,height:83,offsetX:51,offsetY:10}},{x:602,y:174,width:36,height:85,id:"colonel_celebration_1.png",trim:{origWidth:125,origHeight:100,width:36,height:85,offsetX:51,offsetY:8}},{x:602,y:433,width:34,height:85,id:"colonel_celebration_2.png",trim:{origWidth:125,origHeight:100,width:34,height:85,offsetX:48,offsetY:8}},{x:375,y:88,width:45,height:85,id:"colonel_celebration_3.png",trim:{origWidth:125,origHeight:100,width:45,height:85,offsetX:48,offsetY:8}},{x:322,y:0,width:51,height:87,id:"colonel_hit_on_head_1.png",trim:{origWidth:125,origHeight:100,width:51,height:87,offsetX:50,offsetY:6}},{x:114,y:194,width:54,height:85,id:"colonel_hit_on_head_2.png",trim:{origWidth:125,origHeight:100,width:54,height:85,offsetX:45,offsetY:8}},{x:51,y:285,width:50,height:83,id:"colonel_hit_on_head_3.png",trim:{origWidth:125,origHeight:100,width:50,height:83,offsetX:47,offsetY:10}},{x:425,y:86,width:47,height:86,id:"colonel_hit_on_head_4.png",trim:{origWidth:125,origHeight:100,width:47,height:86,offsetX:49,offsetY:7}},{x:0,y:372,width:43,height:84,id:"colonel_hit_on_head_5.png",trim:{origWidth:125,origHeight:100,width:43,height:84,offsetX:50,offsetY:9}},{x:476,y:0,width:42,height:85,id:"colonel_hit_on_head_6.png",trim:{origWidth:125,origHeight:100,width:42,height:85,offsetX:49,offsetY:8}},{x:476,y:87,width:42,height:85,id:"colonel_hit_on_head_7.png",trim:{origWidth:125,origHeight:100,width:42,height:85,offsetX:49,offsetY:8}},{x:476,y:174,width:42,height:85,id:"colonel_idle_1.png",trim:{origWidth:125,origHeight:100,width:42,height:85,offsetX:49,offsetY:8}},{x:520,y:263,width:40,height:83,id:"colonel_idle_2.png",trim:{origWidth:125,origHeight:100,width:40,height:83,offsetX:49,offsetY:10}},{x:89,y:372,width:42,height:83,id:"colonel_idle_3.png",trim:{origWidth:125,origHeight:100,width:42,height:83,offsetX:50,offsetY:10}},{x:258,y:0,width:62,height:85,id:"colonel_left_punch_1.png",trim:{origWidth:125,origHeight:100,width:62,height:85,offsetX:53,offsetY:8}},{x:0,y:285,width:49,height:85,id:"colonel_left_punch_2.png",trim:{origWidth:125,origHeight:100,width:49,height:85,offsetX:49,offsetY:8}},{x:0,y:194,width:56,height:89,id:"colonel_punch_up_1.png",trim:{origWidth:125,origHeight:100,width:56,height:89,offsetX:50,offsetY:4}},{x:375,y:0,width:48,height:86,id:"colonel_punch_up_2.png",trim:{origWidth:125,origHeight:100,width:48,height:86,offsetX:49,offsetY:7}},{x:375,y:175,width:45,height:83,id:"colonel_punched_1.png",trim:{origWidth:125,origHeight:100,width:45,height:83,offsetX:42,offsetY:10}},{x:476,y:347,width:42,height:84,id:"colonel_punched_2.png",trim:{origWidth:125,origHeight:100,width:42,height:84,offsetX:47,offsetY:9}},{x:375,y:260,width:45,height:83,id:"colonel_punched_hard_1.png",trim:{origWidth:125,origHeight:100,width:45,height:83,offsetX:42,offsetY:10}},{x:322,y:89,width:51,height:83,id:"colonel_punched_hard_2.png",trim:{origWidth:125,origHeight:100,width:51,height:83,offsetX:31,offsetY:10}},{x:476,y:261,width:42,height:84,id:"colonel_punched_hard_3.png",trim:{origWidth:125,origHeight:100,width:42,height:84,offsetX:47,offsetY:9}},{x:258,y:87,width:58,height:86,id:"colonel_right_punch_1.png",trim:{origWidth:125,origHeight:100,width:58,height:86,offsetX:58,offsetY:7}},{x:602,y:0,width:36,height:85,id:"colonel_right_punch_2.png",trim:{origWidth:125,origHeight:100,width:36,height:85,offsetX:55,offsetY:8}},{x:602,y:87,width:36,height:85,id:"colonel_right_punch__2.png",trim:{origWidth:125,origHeight:100,width:36,height:85,offsetX:54,offsetY:8}},{x:520,y:90,width:40,height:85,id:"colonel_tell.png",trim:{origWidth:125,origHeight:100,width:40,height:85,offsetX:47,offsetY:8}},{x:640,y:126,width:22,height:31,id:"gavel_1.png",trim:{origWidth:41,origHeight:41,width:22,height:31,offsetX:9,offsetY:9}},{x:677,y:546,width:30,height:30,id:"gavel_2.png",trim:{origWidth:41,origHeight:41,width:30,height:30,offsetX:5,offsetY:6}},{x:640,y:102,width:31,height:22,id:"gavel_3.png",trim:{origWidth:41,origHeight:41,width:31,height:22,offsetX:9,offsetY:11}},{x:677,y:514,width:30,height:30,id:"gavel_4.png",trim:{origWidth:41,origHeight:41,width:30,height:30,offsetX:6,offsetY:7}},{x:640,y:159,width:22,height:31,id:"gavel_5.png",trim:{origWidth:41,origHeight:41,width:22,height:31,offsetX:10,offsetY:2}},{x:677,y:578,width:30,height:30,id:"gavel_6.png",trim:{origWidth:41,origHeight:41,width:30,height:30,offsetX:6,offsetY:7}},{x:640,y:78,width:31,height:22,id:"gavel_7.png",trim:{origWidth:41,origHeight:41,width:31,height:22,offsetX:1,offsetY:10}},{x:677,y:482,width:30,height:30,id:"gavel_8.png",trim:{origWidth:41,origHeight:41,width:30,height:30,offsetX:6,offsetY:7}},{x:306,y:545,width:66,height:26,id:"healthbar_client.png",trim:{origWidth:66,origHeight:26,width:66,height:26,offsetX:0,offsetY:0}},{x:123,y:507,width:66,height:29,id:"healthbar_colonel.png",trim:{origWidth:66,origHeight:29,width:66,height:29,offsetX:0,offsetY:0}},{x:103,y:351,width:64,height:10,id:"healthbar_inner.png",trim:{origWidth:64,origHeight:10,width:64,height:10,offsetX:0,offsetY:0}},{x:677,y:610,width:30,height:15,id:"healthbar_judge.png",trim:{origWidth:30,origHeight:15,width:30,height:15,offsetX:0,offsetY:0}},{x:706,y:328,width:18,height:11,id:"healthbar_judge_inner.png",trim:{origWidth:18,origHeight:11,width:18,height:11,offsetX:0,offsetY:0}},{x:309,y:372,width:54,height:55,id:"judge_angry_gavel_1.png",trim:{origWidth:73,origHeight:63,width:54,height:55,offsetX:14,offsetY:5}},{x:421,y:372,width:52,height:54,id:"judge_angry_gavel_2.png",trim:{origWidth:73,origHeight:63,width:52,height:54,offsetX:16,offsetY:6}},{x:143,y:545,width:52,height:47,id:"judge_angry_no_gavel_1.png",trim:{origWidth:73,origHeight:63,width:52,height:47,offsetX:16,offsetY:13}},{x:677,y:0,width:50,height:47,id:"judge_angry_no_gavel_2.png",trim:{origWidth:73,origHeight:63,width:50,height:47,offsetX:18,offsetY:13}},{x:677,y:189,width:45,height:45,id:"judge_hit_in_head_1.png",trim:{origWidth:73,origHeight:63,width:45,height:45,offsetX:26,offsetY:15}},{x:197,y:545,width:54,height:44,id:"judge_hit_in_head_2.png",trim:{origWidth:73,origHeight:63,width:54,height:44,offsetX:15,offsetY:16}},{x:253,y:545,width:51,height:44,id:"judge_hit_in_head_3.png",trim:{origWidth:73,origHeight:63,width:51,height:44,offsetX:17,offsetY:16}},{x:677,y:97,width:49,height:44,id:"judge_hit_in_head_4.png",trim:{origWidth:73,origHeight:63,width:49,height:44,offsetX:19,offsetY:16}},{x:677,y:143,width:48,height:44,id:"judge_hit_in_head_5.png",trim:{origWidth:73,origHeight:63,width:48,height:44,offsetX:20,offsetY:16}},{x:677,y:236,width:45,height:44,id:"judge_hit_in_head_6.png",trim:{origWidth:73,origHeight:63,width:45,height:44,offsetX:23,offsetY:16}},{x:677,y:282,width:37,height:44,id:"judge_hit_in_head_7.png",trim:{origWidth:73,origHeight:63,width:37,height:44,offsetX:31,offsetY:16}},{x:365,y:372,width:54,height:55,id:"judge_idle_gavel_1.png",trim:{origWidth:73,origHeight:63,width:54,height:55,offsetX:14,offsetY:5}},{x:35,y:545,width:52,height:53,id:"judge_idle_gavel_2.png",trim:{origWidth:73,origHeight:63,width:52,height:53,offsetX:16,offsetY:7}},{x:89,y:545,width:52,height:47,id:"judge_idle_no_gavel_1.png",trim:{origWidth:73,origHeight:63,width:52,height:47,offsetX:16,offsetY:13}},{x:677,y:49,width:50,height:46,id:"judge_idle_no_gavel_2.png",trim:{origWidth:73,origHeight:63,width:50,height:46,offsetX:18,offsetY:14}},{x:231,y:285,width:63,height:51,id:"judge_throw_gavel_1.png",trim:{origWidth:73,origHeight:63,width:63,height:51,offsetX:5,offsetY:9}},{x:296,y:285,width:64,height:47,id:"judge_throw_gavel_2.png",trim:{origWidth:73,origHeight:63,width:64,height:47,offsetX:4,offsetY:13}},{x:123,y:458,width:61,height:47,id:"judge_throw_gavel_3.png",trim:{origWidth:73,origHeight:63,width:61,height:47,offsetX:7,offsetY:13}},{x:677,y:437,width:32,height:43,id:"timer.png",trim:{origWidth:32,origHeight:43,width:32,height:43,offsetX:0,offsetY:0}}]},width:727,height:629}]}}),define("game/games/courtroom/model/courtroom_asset_manifest",["config","underscore","game/games/courtroom/sprites/courtroom-sheet"],function(e,t,i){var s=t.flatten([i.manifest],!0);t.each(s,function(e){e.spritesheet&&(e.pixijs=e.spritesheet)});var n=[{src:"/font/frucade.xml",id:"font/frucade.xml",type:"xml",pixijs:{font:{name:"frucade",bitmap:"font/frucade.png"}}},{id:"AUDIO_MUSIC",priority:1,type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_music.mp3"},{id:"AUDIO_BLOCK",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_block.mp3"},{id:"AUDIO_HIT_0",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_hit01.mp3"},{id:"AUDIO_HIT_1",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_hit02.mp3"},{id:"AUDIO_HIT_2",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_hit03.mp3"},{id:"AUDIO_HIT_3",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_hit04.mp3"},{id:"AUDIO_HIT_WOOD",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_hit_wood.mp3"},{id:"AUDIO_SPEECH_ADJOURNED",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_speech_adjourned.mp3"},{id:"AUDIO_SPEECH_APPEAL",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_speech_appeal.mp3"},{id:"AUDIO_SPEECH_OBJECTION",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_speech_objection.mp3"},{id:"AUDIO_SPEECH_LOSE",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_speech_youlose.mp3"},{id:"AUDIO_SPEECH_WIN",type:"sound",volume:1,src:"/audio/games/courtroom/courtroom_brawl_speech_youwin.mp3"}];n=n.concat(s);var o={BG:{id:"BG",type:"SPRITE",url:"bg.png",ns:i.ns},COLONEL_IDLE_MC:{id:"COLONEL_IDLE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_idle_1.png","colonel_idle_2.png","colonel_idle_1.png","colonel_idle_3.png"],ns:i.ns},COLONEL_RIGHT_PUNCH_MC:{id:"COLONEL_RIGHT_PUNCH_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_right_punch_1.png","colonel_right_punch_2.png"],ns:i.ns},COLONEL_LEFT_PUNCH_MC:{id:"COLONEL_LEFT_PUNCH_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_left_punch_1.png","colonel_left_punch_2.png"],ns:i.ns},COLONEL_PUNCH_LEFT:{id:"COLONEL_PUNCH",type:"SPRITE",url:"colonel_left_punch_1.png",ns:i.ns},COLONEL_PUNCHUP_MC:{id:"COLONEL_PUNCHUP_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_punch_up_1.png","colonel_punch_up_2.png"],ns:i.ns},COLONEL_PUNCHED_MC:{id:"COLONEL_PUNCHED_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_punched_1.png","colonel_punched_2.png"],ns:i.ns},COLONEL_PUNCHED_HARD_MC:{id:"COLONEL_PUNCHED_HARD_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_punched_hard_1.png","colonel_punched_hard_2.png","colonel_punched_hard_3.png"],ns:i.ns},COLONEL_BLOCK_MC:{id:"COLONEL_BLOCK_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_block_1.png","colonel_block_2.png"],ns:i.ns},COLONEL_TELL:{id:"COLONEL_TELL",type:"SPRITE",url:"colonel_tell.png",ns:i.ns},COLONEL_HIT_ON_HEAD_MC:{id:"COLONEL_HIT_ON_HEAD_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_hit_on_head_1.png","colonel_hit_on_head_2.png","colonel_hit_on_head_3.png","colonel_hit_on_head_4.png","colonel_hit_on_head_5.png","colonel_hit_on_head_6.png","colonel_hit_on_head_7.png"],ns:i.ns},COLONEL_CELEBRATION_MC:{id:"COLONEL_CELEBRATION_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_celebration_1.png","colonel_celebration_2.png","colonel_celebration_3.png"],ns:i.ns},COLONEL_KO_MC:{id:"COLONEL_KO_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_KO_1.png","colonel_KO_2.png","colonel_KO_3.png","colonel_KO_4.png","colonel_KO_5.png","colonel_KO_4.png"],ns:i.ns},CLIENT_IDLE_MC:{id:"CLIENT_IDLE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_idle_1.png","client_idle_2.png","client_idle_3.png","client_idle_2.png"],ns:i.ns},CLIENT_RIGHT_PUNCH_MC:{id:"CLIENT_RIGHT_PUNCH_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_right_punch_1.png","client_right_punch_2.png"],ns:i.ns},CLIENT_LEFT_PUNCH_MC:{id:"CLIENT_LEFT_PUNCH_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_left_punch_1.png","client_left_punch_2.png"],ns:i.ns},CLIENT_PUNCHED_MC:{id:"CLIENT_PUNCHED_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_punched_1.png","client_punched_2.png"],ns:i.ns},CLIENT_PUNCHED_HARD_MC:{id:"CLIENT_PUNCHED_HARD_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_punched_hard_1.png","client_punched_hard_2.png","client_punched_hard_3.png"],ns:i.ns},CLIENT_BLOCK_MC:{id:"CLIENT_BLOCK_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_block_1.png","client_block_2.png"],ns:i.ns},CLIENT_TELL:{id:"CLIENT_TELL",type:"SPRITE",url:"client_tell.png",ns:i.ns},CLIENT_CELEBRATION_MC:{id:"CLIENT_CELEBRATION_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_celebration_1.png","client_celebration_2.png","client_celebration_1.png","client_celebration_3.png"],ns:i.ns},CLIENT_KO_MC:{id:"CLIENT_KO_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_KO_1.png","client_KO_2.png","client_KO_3.png","client_KO_4.png","client_KO_5.png","client_KO_4.png"],ns:i.ns},CLIENT_COWER_MC:{id:"CLIENT_COWER_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_cower_1.png","client_cower_2.png","client_cower_3.png","client_cower_4.png","client_cower_5.png","client_cower_6.png"],ns:i.ns},CLIENT_COWER_LOOP_MC:{id:"CLIENT_COWER_LOOP_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_cower_5.png","client_cower_6.png"],ns:i.ns},CLIENT_RECOVER_MC:{id:"CLIENT_RECOVER_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["client_recover_1.png","client_recover_2.png","client_recover_3.png","client_idle_2.png"],ns:i.ns},JUDGE_IDLE_GAVEL_MC:{id:"JUDGE_IDLE_GAVEL_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["judge_idle_gavel_1.png","judge_idle_gavel_2.png"],ns:i.ns},JUDGE_THROW_GAVEL_MC:{id:"JUDGE_THROW_GAVEL_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["judge_throw_gavel_1.png","judge_throw_gavel_2.png","judge_throw_gavel_3.png"],ns:i.ns},JUDGE_ANGRY_GAVEL_MC:{id:"JUDGE_ANGRY_GAVEL_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["judge_angry_gavel_1.png","judge_angry_gavel_2.png"],ns:i.ns},JUDGE_HIT_IN_HEAD_MC:{id:"JUDGE_HIT_IN_HEAD_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["judge_hit_in_head_1.png","judge_hit_in_head_2.png","judge_hit_in_head_3.png","judge_hit_in_head_4.png","judge_hit_in_head_5.png","judge_hit_in_head_6.png","judge_hit_in_head_7.png"],ns:i.ns},GAVEL_MC:{id:"GAVEL_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["gavel_1.png","gavel_2.png","gavel_3.png","gavel_4.png","gavel_5.png","gavel_6.png","gavel_7.png","gavel_8.png"],ns:i.ns},GAVEL_REVERSE_MC:{id:"GAVEL_REVERSE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["gavel_1.png","gavel_8.png","gavel_7.png","gavel_6.png","gavel_5.png","gavel_4.png","gavel_3.png","gavel_2.png"],ns:i.ns},UI_TIMER:{id:"UI_TIMER",type:"SPRITE",url:"timer.png",ns:i.ns},UI_HEALTHBAR_COLONEL:{id:"UI_HEALTHBAR_COLONEL",type:"SPRITE",url:"healthbar_colonel.png",ns:i.ns},UI_HEALTHBAR_CLIENT:{id:"UI_HEALTHBAR_CLIENT",type:"SPRITE",url:"healthbar_client.png",ns:i.ns},UI_HEALTHBAR_INNER:{id:"UI_HEALTHBAR_INNER",type:"SPRITE",url:"healthbar_inner.png",ns:i.ns},UI_HEALTHBAR_JUDGE:{id:"UI_HEALTHBAR_JUDGE",type:"SPRITE",url:"healthbar_judge.png",ns:i.ns},UI_HEALTHBAR_JUDGE_INNER:{id:"UI_HEALTHBAR_JUDGE_INNER",type:"SPRITE",url:"healthbar_judge_inner.png",ns:i.ns}};
for(var r in o){var a=o[r];if(a.url&&(a.ns_url=a.ns+a.url),a.frameNames){a.ns_frameNames=[];for(var h=0,l=a.frameNames.length;l>h;h++)a.ns_frameNames.push(a.ns+a.frameNames[h])}}return o.assetManifest=n,o}),define("game/games/courtroom/view/courtroom_game_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_view","pixi","game/games/courtroom/model/courtroom_player_states","game/games/courtroom/model/courtroom_judge_states"],function(e,t,i,s,n,o,r,a,h){"use strict";return o.extend({initialized:!1,bgClip:null,colonelClip:null,colonelIdleClip:null,colonelHitClip:null,colonelHitHardClip:null,colonelHitOnHeadClip:null,colonelPunchClip:null,colonelPunchLeftClip:null,colonelHitBackClip:null,colonelCelebrationClip:null,colonelKOClip:null,colonelBlockClip:null,colonelWindClip:null,clientClip:null,clientIdleClip:null,clientHitClip:null,clientPunchClip:null,clientBlockClip:null,clientCelebrationClip:null,clientKOClip:null,clientWindClip:null,clientHideClip:null,clientCoweringClip:null,clientReturningClip:null,judgeClip:null,judgeIdleClip:null,judgeThrowClip:null,judgeHitClip:null,gavelSpriteContainer:null,graphicScaleMultiplier:1,curColonelAnimationState:null,curClientAnimationState:null,curJudgeAnimationState:null,initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.initialized||(this.initialized=!0,t.bindAll(this,"onColonelActionAnimationComplete","onClientActionAnimationComplete","onClientCowerAnimationComplete","onJudgeActionAnimationComplete"),this.initScene(),this.initGavels(),this.gameModel.on(this.gameModel.EVENTS.PLAYER_STATE_CHANGE,this.onPlayerStateChange,this),this.gameModel.on(this.gameModel.EVENTS.JUDGE_STATE_CHANGE,this.onJudgeStateChange,this))},initScene:function(){this.bgClip=this.newSprite(this.manifest.BG),this.gameContainer.addChild(this.bgClip),this.colonelBehindContainer=new r.DisplayObjectContainer,this.gameContainer.addChild(this.colonelBehindContainer),this.colonelClip=new r.DisplayObjectContainer,this.colonelBehindContainer.addChild(this.colonelClip),this.colonelClip.x=0,this.colonelClip.y=80,this.colonelClip.scale.x=this.colonelClip.scale.y=this.graphicScaleMultiplier,this.colonelIdleClip=this.newMovieClip(this.manifest.COLONEL_IDLE_MC,{loop:!0,autoplay:!0}),this.colonelClip.addChild(this.colonelIdleClip),this.colonelBlockClip=this.newMovieClip(this.manifest.COLONEL_BLOCK_MC,{loop:!1}),this.colonelClip.addChild(this.colonelBlockClip),this.colonelPunchClip=this.newMovieClip(this.manifest.COLONEL_RIGHT_PUNCH_MC,{loop:!1}),this.colonelPunchClip.onComplete=this.onColonelActionAnimationComplete,this.colonelClip.addChild(this.colonelPunchClip),this.colonelPunchLeftClip=this.newMovieClip(this.manifest.COLONEL_LEFT_PUNCH_MC,{loop:!1}),this.colonelPunchLeftClip.onComplete=this.onColonelActionAnimationComplete,this.colonelClip.addChild(this.colonelPunchLeftClip),this.colonelHitClip=this.newMovieClip(this.manifest.COLONEL_PUNCHED_MC,{loop:!1}),this.colonelHitClip.onComplete=this.onColonelActionAnimationComplete,this.colonelClip.addChild(this.colonelHitClip),this.colonelHitHardClip=this.newMovieClip(this.manifest.COLONEL_PUNCHED_HARD_MC,{loop:!1}),this.colonelHitHardClip.onComplete=this.onColonelActionAnimationComplete,this.colonelClip.addChild(this.colonelHitHardClip),this.colonelHitOnHeadClip=this.newMovieClip(this.manifest.COLONEL_HIT_ON_HEAD_MC,{loop:!1}),this.colonelHitOnHeadClip.onComplete=this.onColonelActionAnimationComplete,this.colonelClip.addChild(this.colonelHitOnHeadClip),this.colonelHitBackClip=this.newMovieClip(this.manifest.COLONEL_PUNCHUP_MC,{loop:!1}),this.colonelHitBackClip.onComplete=this.onColonelActionAnimationComplete,this.colonelClip.addChild(this.colonelHitBackClip),this.colonelCelebrationClip=this.newMovieClip(this.manifest.COLONEL_CELEBRATION_MC,{loop:!1}),this.colonelClip.addChild(this.colonelCelebrationClip),this.colonelKOClip=this.newMovieClip(this.manifest.COLONEL_KO_MC,{loop:!1}),this.colonelClip.addChild(this.colonelKOClip),this.colonelWindClip=this.newSprite(this.manifest.COLONEL_TELL),this.colonelClip.addChild(this.colonelWindClip),this.clientClip=new r.DisplayObjectContainer,this.gameContainer.addChild(this.clientClip),this.clientClip.x=69,this.clientClip.y=80,this.clientClip.scale.x=this.clientClip.scale.y=this.graphicScaleMultiplier,this.clientIdleClip=this.newMovieClip(this.manifest.CLIENT_IDLE_MC,{loop:!0,autoplay:!0}),this.clientClip.addChild(this.clientIdleClip),this.clientBlockClip=this.newMovieClip(this.manifest.CLIENT_BLOCK_MC,{loop:!1}),this.clientClip.addChild(this.clientBlockClip),this.clientHitClip=this.newMovieClip(this.manifest.CLIENT_PUNCHED_MC,{loop:!1}),this.clientHitClip.onComplete=this.onClientActionAnimationComplete,this.clientClip.addChild(this.clientHitClip),this.clientHitHardClip=this.newMovieClip(this.manifest.CLIENT_PUNCHED_HARD_MC,{loop:!1}),this.clientHitHardClip.onComplete=this.onClientActionAnimationComplete,this.clientClip.addChild(this.clientHitHardClip),this.clientPunchClip=this.newMovieClip(this.manifest.CLIENT_RIGHT_PUNCH_MC,{loop:!1}),this.clientPunchClip.onComplete=this.onClientActionAnimationComplete,this.clientClip.addChild(this.clientPunchClip),this.clientPunchLeftClip=this.newMovieClip(this.manifest.CLIENT_LEFT_PUNCH_MC,{loop:!1}),this.clientPunchLeftClip.onComplete=this.onClientActionAnimationComplete,this.clientClip.addChild(this.clientPunchLeftClip),this.clientKOClip=this.newMovieClip(this.manifest.CLIENT_KO_MC,{loop:!1}),this.clientClip.addChild(this.clientKOClip),this.clientCelebrationClip=this.newMovieClip(this.manifest.CLIENT_CELEBRATION_MC,{loop:!0,autoplay:!0}),this.clientClip.addChild(this.clientCelebrationClip),this.clientWindClip=this.newSprite(this.manifest.CLIENT_TELL),this.clientClip.addChild(this.clientWindClip),this.clientHideClip=this.newMovieClip(this.manifest.CLIENT_COWER_MC,{loop:!1}),this.clientHideClip.onComplete=this.onClientCowerAnimationComplete,this.clientClip.addChild(this.clientHideClip),this.clientCoweringClip=this.newMovieClip(this.manifest.CLIENT_COWER_LOOP_MC,{loop:!0,autoplay:!0}),this.clientClip.addChild(this.clientCoweringClip),this.clientReturningClip=this.newMovieClip(this.manifest.CLIENT_RECOVER_MC,{loop:!1}),this.clientClip.addChild(this.clientReturningClip),this.colonelInfrontContainer=new r.DisplayObjectContainer,this.gameContainer.addChild(this.colonelInfrontContainer),this.judgeClip=new r.DisplayObjectContainer,this.gameContainer.addChild(this.judgeClip),this.judgeClip.x=183,this.judgeClip.y=46,this.judgeClip.scale.x=this.judgeClip.scale.y=this.graphicScaleMultiplier,this.judgeIdleClip=this.newMovieClip(this.manifest.JUDGE_IDLE_GAVEL_MC,{loop:!0,autoplay:!0}),this.judgeClip.addChild(this.judgeIdleClip),this.judgeAngryClip=this.newMovieClip(this.manifest.JUDGE_ANGRY_GAVEL_MC,{loop:!0,autoplay:!0}),this.judgeClip.addChild(this.judgeAngryClip),this.judgeThrowClip=this.newMovieClip(this.manifest.JUDGE_THROW_GAVEL_MC,{loop:!1}),this.judgeThrowClip.onComplete=this.onJudgeActionAnimationComplete,this.judgeClip.addChild(this.judgeThrowClip),this.judgeHitClip=this.newMovieClip(this.manifest.JUDGE_HIT_IN_HEAD_MC,{loop:!1}),this.judgeHitClip.onComplete=this.onJudgeActionAnimationComplete,this.judgeClip.addChild(this.judgeHitClip),this.gavelSpriteContainer=new r.DisplayObjectContainer,this.gameContainer.addChild(this.gavelSpriteContainer),this.updateCharacterStates()},updateCharacterStates:function(){this.setColonelState(this.gameModel.colonelModel.state),this.setClientState(this.gameModel.clientModel.state),this.setJudgeState(this.gameModel.judgeModel.state)},setColonelState:function(e){if(e!==this.curColonelAnimationState)switch(this.curColonelAnimationState=e,this.colonelIdleClip.visible=!1,this.colonelBlockClip.visible=!1,this.colonelPunchClip.visible=!1,this.colonelPunchLeftClip.visible=!1,this.colonelHitBackClip.visible=!1,this.colonelHitClip.visible=!1,this.colonelHitHardClip.visible=!1,this.colonelHitOnHeadClip.visible=!1,this.colonelKOClip.visible=!1,this.colonelCelebrationClip.visible=!1,this.colonelWindClip.visible=!1,this.colonelBlockClip.gotoAndStop(0),this.colonelPunchClip.gotoAndStop(0),this.colonelPunchLeftClip.gotoAndStop(0),this.colonelHitBackClip.gotoAndStop(0),this.colonelHitClip.gotoAndStop(0),this.colonelHitHardClip.gotoAndStop(0),this.colonelHitOnHeadClip.gotoAndStop(0),this.colonelKOClip.gotoAndStop(0),this.colonelCelebrationClip.gotoAndStop(0),e){case a.IDLE:this.colonelIdleClip.visible=!0,this.colonelIdleClip.gotoAndPlay(0);break;case a.PUNCH:this.colonelPunchClip.visible=!0,this.colonelPunchClip.gotoAndPlay(0);break;case a.PUNCH_LEFT:this.colonelPunchLeftClip.visible=!0,this.colonelPunchLeftClip.gotoAndPlay(0);break;case a.PUNCHUP:this.colonelHitBackClip.visible=!0,this.colonelHitBackClip.gotoAndPlay(0);break;case a.BLOCK:this.colonelBlockClip.visible=!0,this.colonelBlockClip.gotoAndPlay(0);break;case a.PUNCHED:this.colonelHitClip.visible=!0,this.colonelHitClip.gotoAndPlay(0);break;case a.PUNCHED_HARD:this.colonelHitHardClip.visible=!0,this.colonelHitHardClip.gotoAndPlay(0);break;case a.GAVEL_HIT:this.colonelHitOnHeadClip.visible=!0,this.colonelHitOnHeadClip.gotoAndPlay(0);break;case a.WIN:this.colonelCelebrationClip.visible=!0,this.colonelCelebrationClip.gotoAndPlay(0);break;case a.KO:this.colonelKOClip.visible=!0,this.colonelKOClip.gotoAndPlay(0);break;case a.TELL:this.colonelWindClip.visible=!0}},onColonelActionAnimationComplete:function(){this.setColonelState(a.IDLE)},setClientState:function(e){if(e!==this.curClientAnimationState)switch(this.curClientAnimationState=e,this.clientIdleClip.visible=!1,this.clientBlockClip.visible=!1,this.clientPunchClip.visible=!1,this.clientPunchLeftClip.visible=!1,this.clientHitClip.visible=!1,this.clientHitHardClip.visible=!1,this.clientWindClip.visible=!1,this.clientHideClip.visible=!1,this.clientKOClip.visible=!1,this.clientCelebrationClip.visible=!1,this.clientCoweringClip.visible=!1,this.clientReturningClip.visible=!1,this.clientBlockClip.gotoAndStop(0),this.clientPunchClip.gotoAndStop(0),this.clientPunchLeftClip.gotoAndStop(0),this.clientHitClip.gotoAndStop(0),this.clientHitHardClip.gotoAndStop(0),this.clientHideClip.gotoAndStop(0),this.clientKOClip.gotoAndStop(0),this.clientReturningClip.gotoAndStop(0),e){case a.IDLE:this.clientIdleClip.visible=!0,this.clientIdleClip.gotoAndPlay(0);break;case a.PUNCH:this.clientPunchClip.visible=!0,this.clientPunchClip.gotoAndPlay(0);break;case a.PUNCH_LEFT:this.clientPunchLeftClip.visible=!0,this.clientPunchLeftClip.gotoAndPlay(0);break;case a.BLOCK:this.clientBlockClip.visible=!0,this.clientBlockClip.gotoAndPlay(0);break;case a.PUNCHED:this.clientHitClip.visible=!0,this.clientHitClip.gotoAndPlay(0);break;case a.PUNCHED_HARD:this.clientHitHardClip.visible=!0,this.clientHitHardClip.gotoAndPlay(0);break;case a.HIDING:this.clientHideClip.visible=!0,this.clientHideClip.gotoAndPlay(0);break;case a.HIDDEN:this.clientCoweringClip.visible=!0;break;case a.RETURNING:this.clientReturningClip.visible=!0,this.clientReturningClip.gotoAndPlay(0);break;case a.WIN:this.clientCelebrationClip.visible=!0;break;case a.KO:this.clientKOClip.visible=!0,this.clientKOClip.gotoAndPlay(0);break;case a.TELL:this.clientWindClip.visible=!0}},onClientActionAnimationComplete:function(){this.setClientState(a.IDLE)},onJudgeActionAnimationComplete:function(){this.setJudgeState(h.IDLE)},onClientCowerAnimationComplete:function(){},onPlayerStateChange:function(e,t){e===this.gameModel.colonelModel?(this.setColonelState(t),t===a.PUNCH&&this.colonelInfrontContainer.addChild(this.colonelClip)):e===this.gameModel.clientModel&&(this.setClientState(t),t===a.PUNCH&&this.colonelBehindContainer.addChild(this.colonelClip))},onJudgeStateChange:function(e,t){this.setJudgeState(t)},setJudgeState:function(e){if(e!==this.curJudgeAnimationState)switch(this.curJudgeAnimationState=e,this.judgeIdleClip.visible=!1,this.judgeAngryClip.visible=!1,this.judgeThrowClip.visible=!1,this.judgeHitClip.visible=!1,this.judgeThrowClip.gotoAndStop(0),this.judgeHitClip.gotoAndStop(0),e){case h.IDLE:this.judgeIdleClip.visible=!0;break;case h.ANGRY:this.judgeAngryClip.visible=!0;break;case h.THROW:this.judgeThrowClip.visible=!0,this.judgeThrowClip.gotoAndPlay(0);break;case h.HIT:this.judgeHitClip.visible=!0,this.judgeHitClip.gotoAndPlay(0)}},initGavels:function(){this.gavelSprites=[];for(var e,t=this.gameConfig.gavelMaxCount,i=0;t>i;i++)e=this.newMovieClip(this.manifest.GAVEL_MC,{loop:!0,autoplay:!0}),e.visible=!1,e.index=i,this.gavelSprites.push(e),this.gavelSpriteContainer.addChild(e),e.anchor.set(.5,.5),e.scale.x=e.scale.y=this.graphicScaleMultiplier},render:function(){this.initialized&&this.updateGavels(),this["super"].render.apply(this,arguments)},updateGavels:function(){t.each(this.gavelSprites,function(e){var t=this.gameModel.gavelModels[e.index];t.active?(e.visible=!0,e.position.y=Math.round(t.y),e.position.x=Math.round(t.x)):e.visible=!1},this)},show:function(){this["super"].show.apply(this,arguments),this.updateCharacterStates()},destroy:function(){this.gameModel.off(this.gameModel.EVENTS.PLAYER_STATE_CHANGE,this.onPlayerStateChange),this.gameModel.off(this.gameModel.EVENTS.JUDGE_STATE_CHANGE,this.onJudgeStateChange),this.stopListening(),this.off(),this["super"].destroy.apply(this,arguments)}})}),define("game/games/courtroom/view/courtroom_game_ui_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_ui_view","pixi","game/games/courtroom/model/courtroom_player_states"],function(e,t,i,s,n,o,r,a){"use strict";return o.extend({uiFont:{font:"8px frucade"},initialized:!1,scoreLabel:null,livesLabel:null,timeLabel:null,timerClip:null,healthBarColonelClip:null,healthBarColonel:null,healthBarColonelInnerClip:null,healthBarColonelInner:null,healthBarColonelGraphics:null,healthBarColonelInnerGraphics:null,healthBarClientClip:null,healthBarClient:null,healthBarClientInnerClip:null,healthBarClientInner:null,healthBarClientGraphics:null,healthBarClientInnerGraphics:null,debugClip:null,debugGraphics:null,settingsGui:null,debugStateColours:[],healthBarWidth:64,healthBarJudgeWidth:30,initialize:function(){this["super"]=this.constructor.__super__,this.debugStateColours[a.TELL]=16776960,this.debugStateColours[a.PUNCH]=16711935,this.debugStateColours.punch_counter=16764159,this.debugStateColours.punch_late=6684774,this.debugStateColours[a.PUNCHUP]=65535,this.debugStateColours[a.BLOCK]=255,this.debugStateColours[a.PUNCHED]=16711680,this.debugStateColours[a.GAVEL_HIT]=16737792,this.debugStateColours[a.IDLE]=6710886,this.debugStateColours[a.HIDING]=3355443,this.debugStateColours[a.HIDDEN]=0,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.initialized||(this.initialized=!0,this.initUI(),this.updateUI())},initUI:function(){this.timerClip=this.newSprite(this.manifest.UI_TIMER),this.timerClip.x=97,this.timerClip.y=-11,this.viewContainer.addChild(this.timerClip),this.timeLabel=new r.BitmapText("60",this.uiFont),this.timeLabel.x=12,this.timeLabel.y=29,this.timeLabelShadow=new r.BitmapText("60",this.uiFont),this.timeLabelShadow.tint=51,this.timeLabelShadow.x=this.timeLabel.x,this.timeLabelShadow.y=this.timeLabel.y+1,this.timerClip.addChild(this.timeLabelShadow),this.timerClip.addChild(this.timeLabel),this.scoreLabel=new r.BitmapText("0/0",this.uiFont),this.scoreLabel.x=159,this.scoreLabel.y=6,this.viewContainer.addChild(this.scoreLabel),this.healthBarColonelClip=this.newSprite(this.manifest.UI_HEALTHBAR_COLONEL),this.healthBarColonelClip.x=23,this.healthBarColonelClip.y=4,this.viewContainer.addChild(this.healthBarColonelClip),this.healthBarColonelInnerClip=this.newSprite(this.manifest.UI_HEALTHBAR_INNER),this.healthBarColonelInnerClip.x=1,this.healthBarColonelInnerClip.y=15,this.healthBarColonelClip.addChild(this.healthBarColonelInnerClip),this.healthBarClientClip=this.newSprite(this.manifest.UI_HEALTHBAR_CLIENT),this.healthBarClientClip.x=137,this.healthBarClientClip.y=4,this.viewContainer.addChild(this.healthBarClientClip),this.healthBarClientInnerClipContainer=new r.DisplayObjectContainer,this.healthBarClientInnerClipContainer.x=1+this.healthBarWidth,this.healthBarClientInnerClipContainer.y=15,this.healthBarClientInnerClipContainer.scale.x=-1,this.healthBarClientClip.addChild(this.healthBarClientInnerClipContainer),this.healthBarClientInnerClip=this.newSprite(this.manifest.UI_HEALTHBAR_INNER),this.healthBarClientInnerClipContainer.addChild(this.healthBarClientInnerClip),this.healthBarJudgeClip=this.newSprite(this.manifest.UI_HEALTHBAR_JUDGE),this.healthBarJudgeClip.x=217,this.healthBarJudgeClip.y=41,this.viewContainer.addChild(this.healthBarJudgeClip),this.healthBarJudgeInnerClipContainer=new r.DisplayObjectContainer,this.healthBarJudgeInnerClipContainer.x=this.healthBarJudgeWidth,this.healthBarJudgeInnerClipContainer.y=0,this.healthBarJudgeInnerClipContainer.scale.x=-1,this.healthBarJudgeClip.addChild(this.healthBarJudgeInnerClipContainer),this.healthBarJudgeInnerClip=this.newSprite(this.manifest.UI_HEALTHBAR_JUDGE_INNER),this.healthBarJudgeInnerClipContainer.addChild(this.healthBarJudgeInnerClip)},updateTimerVisibility:function(){this.timeLabel.visible=this.gameConfig.enableTimer,this.timeLabelShadow.visible=this.gameConfig.enableTimer},updateHealthBarVisibility:function(){this.healthBarColonelClip.visible=this.gameConfig.showHealthBars,this.healthBarClientClip.visible=this.gameConfig.showHealthBars},updateDebugVisibility:function(){this.gameConfig.allowDebug&&this.debugGraphics&&(this.debugGraphics.visible=this.gameConfig.debugModelStates,this.gameConfig.debugModelStates&&this.resetDebugView())},toggleDebugMode:function(){this.gameConfig.allowDebug&&(this.gameConfig.debugModelStates?(this.gameConfig.updateDebugView=!this.gameModel.updateDebugView,this.gameConfig.updateDebugView?(this.gameModel.debugStartTime+=this.gameModel.gameTime-this.gameModel.debugPauseTime,this.gameModel.lastColonelDebugPositionX+=5*this.pixelScaleMultiplier,this.gameModel.lastClientDebugPositionX+=5*this.pixelScaleMultiplier):this.gameModel.debugPauseTime=this.gameModel.gameTime):(this.gameConfig.debugModelStates=!0,this.updateDebugVisibility()))},resetDebugView:function(){this.gameConfig.allowDebug&&this.gameConfig.updateDebugView&&(this.gameModel.debugStartTime=this.gameModel.gameTime,this.gameModel.lastColonelDebugPositionX=0,this.gameModel.lastClientDebugPositionX=0,this.debugGraphics.clear())},updateDebugGraphics:function(){if(this.gameConfig.allowDebug&&this.gameConfig.updateDebugView){var e=(this.gameModel.gameTime-this.gameModel.debugStartTime)*this.gameConfig.debugModelSpeed;this.debugClip.x=Math.min(0,this.gameWidth-e),this.updateModelDebugGraphics(this.gameModel.colonelModel),this.updateModelDebugGraphics(this.gameModel.clientModel)}},updateModelDebugGraphics:function(e){var t,i,s,n;switch(e){case this.gameModel.colonelModel:i=this.gameModel.lastColonelDebugPositionX,n=0;break;case this.gameModel.clientModel:i=this.gameModel.lastClientDebugPositionX,n=this.gameConfig.debugModelStateHeight}switch(e){case this.gameModel.colonelModel:case this.gameModel.clientModel:switch(t=e===this.gameModel.colonelModel&&e.state===a.PUNCH&&this.gameModel.lastPunchWasLate?this.debugStateColours.punch_late:e===this.gameModel.colonelModel&&e.state===a.PUNCH&&this.gameModel.lastPunchWasCounter?this.debugStateColours.punch_counter:this.debugStateColours[e.state],s=(this.gameModel.gameTime-this.gameModel.debugStartTime)*this.gameConfig.debugModelSpeed,this.debugGraphics.beginFill(t),this.debugGraphics.drawRect(i,n,s-i,this.gameConfig.debugModelStateHeight),e){case this.gameModel.colonelModel:this.gameModel.lastColonelDebugPositionX=s;break;case this.gameModel.clientModel:this.gameModel.lastClientDebugPositionX=s}}},render:function(){this.initialized&&(this.updateUI(),this.gameConfig.debugModelStates&&this.updateDebugGraphics()),this["super"].render.apply(this,arguments)},updateUI:function(){this.gameConfig.enableTimer&&(this.timeLabel.setText(""+Math.floor(this.gameModel.gameTimeRemaining)),this.timeLabelShadow.setText(""+Math.floor(this.gameModel.gameTimeRemaining))),this.gameConfig.showHealthBars&&(this.healthBarColonelInnerClip.scale.x=Math.max(0,1-this.gameModel.colonelModel.livesLost/this.gameConfig.colonelLivesMax),this.healthBarClientInnerClip.scale.x=Math.max(0,1-this.gameModel.clientModel.livesLost/this.gameConfig.clientLivesMax)),this.gameModel.clientModel.isHiding()&&this.gameConfig.showJudgeHealthBar?(this.healthBarClientInnerClip.alpha=this.gameModel.clientModel.livesLost>0?Math.sin(10*this.gameModel.time)>0?1:.75:1,this.healthBarJudgeClip.visible=!0,this.healthBarJudgeInnerClip.scale.x=Math.max(0,1-this.gameModel.judgeHitCount/this.gameConfig.judgeHitReturnCount),this.healthBarColonelClip.visible=!0,this.healthBarClientClip.visible=this.gameConfig.rechargeClientHealth?!0:!1):(this.healthBarJudgeClip.visible=!1,this.healthBarColonelClip.visible=!0,this.healthBarClientClip.visible=!0,this.healthBarClientInnerClip.alpha=1)},show:function(){this["super"].show.apply(this,arguments),this.updateTimerVisibility(),this.updateHealthBarVisibility(),this.updateDebugVisibility()},onHideComplete:function(){this["super"].onHideComplete.apply(this,arguments)},onResize:function(){},destroy:function(){this.stopListening(),this.off()}})}),define("game/game_base/view/arcade_button_view",["jquery","underscore","backbone","model/loader_collection","view/common/base_view","config","pixi","view/common/communicator"],function(e,t,i,s,n,o,r,a){"use strict";var h=n.extend({graphic:null,graphicRollover:null,active:!1,buttonHitAreaScale:1,initialize:function(e){t.bindAll(this,"onMouseOver","onMouseOut"),10===o.getIEVersion()&&(this.buttonHitAreaScale=.2),this.graphic=e.graphic,this.graphicRollover=e.rollover,this.gameSoundModel=e.gameSoundModel,this.setupGraphic(),this.setupRollover()},setupGraphic:function(){this.graphic.interactive=!0,this.graphic.buttonMode=!0,this.graphic.hitArea=new r.Rectangle(this.graphic.texture.trim.x,this.graphic.texture.trim.y,this.graphic.width*this.buttonHitAreaScale,this.graphic.height),this.graphic.alpha=1,this.graphic.y=-3},setupRollover:function(){this.graphicRollover.interactive=!0,this.graphicRollover.buttonMode=!0,this.graphicRollover.hitArea=new r.Rectangle(this.graphicRollover.texture.trim.x,this.graphicRollover.texture.trim.y,this.graphicRollover.width*this.buttonHitAreaScale,this.graphicRollover.height),this.graphicRollover.mouseout=this.onMouseOut,this.graphicRollover.mouseover=this.onMouseOver,this.graphicRollover.alpha=0,this.graphicRollover.y=-3},addMouseDownEvent:function(e){var t=function(){e(),a.trigger(a.EVENTS.GAME.AUDIO.CLICK)};this.graphic.mousedown=t,this.graphic.touchstart=t,this.graphicRollover.mousedown=t,this.graphicRollover.touchstart=t},addMouseUpEvent:function(e){var t=function(){e(),a.trigger(a.EVENTS.GAME.AUDIO.CLICK)};this.graphic.mouseup=t,this.graphic.touchstart=t,this.graphicRollover.mouseup=t,this.graphicRollover.touchstart=t},onMouseOver:function(){this.graphicRollover.alpha=1,this.graphic.alpha=0;var e=this;setTimeout(function(){e.graphicRollover.alpha=1},0),a.trigger(a.EVENTS.GAME.AUDIO.MOUSEOVER)},onMouseOut:function(){this.graphicRollover.alpha=0,this.graphic.alpha=1},show:function(){},removeMouseOverEvents:function(){this.graphicRollover.interactive=!1},addMouseOverEvents:function(){this.graphicRollover.interactive=!0},setVisible:function(e){e===!0?this.addMouseOverEvents():this.removeMouseOverEvents(),this.graphic.visible=e,this.graphicRollover.alpha=0},getVisible:function(){return 1===this.graphic.alpha},setPosition:function(e){this.graphic.x=e,this.graphicRollover.x=e},destroy:function(){n.prototype.destroy.apply(this,arguments)}});return h}),define("game/game_base/view/screens/game_screen_instructions",["jquery","underscore","backbone","model/loader_collection","config","pixi","shims/shim_resn_utils","view/common/communicator","model/copy_model","game/game_base/view/arcade_button_view","model/app_model"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";var d=i.View.extend({initialize:function(e){t.bindAll(this,"onMouseUpStartGame","onButtonPress"),this.viewContainer=e.viewContainer,this.gameModel=e.gameModel,this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight,this.gameInputModel=this.gameModel.gameInputModel,this.createScreen()},screenIsActive:function(){return this.gameModel.state===this.gameModel.GAMESTATE_INSTRUCTIONS&&this.shown&&this.gameModel.isCurrentGame()&&c.get("page")===c.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:this.gameModel.loaded&&(a.trigger(a.EVENTS.GAME.AUDIO.CLICK),this.onMouseUpStartGame())}},createScreen:function(){this.container=new o.DisplayObjectContainer,this.viewContainer.addChild(this.container),this.pixiGameScreenAssets=this.gameModel.gameShellModel.pixiGameScreenAssets;var e=this.pixiGameScreenAssets.spriteFromID("BG_GRAY");this.container.addChild(e);var t=this.pixiGameScreenAssets.spriteFromID("INSTRUCTIONS_TITLE_BIG");this.container.addChild(t),this.gameModel.loaded?this.onGameLoaded():(this.createLoaderMC(),this.listenToOnce(this.gameModel,a.EVENTS.GAME.LOAD_COMPLETE,this.onGameLoaded)),this.addInstructionsCopy()},createLoaderMC:function(){this.loaderMC=this.pixiGameScreenAssets.movieClipFromID("LOADER_MC"),this.loaderMC.gotoAndPlay(0),this.container.addChild(this.loaderMC)},onGameLoaded:function(){this.loaderMC&&this.container.removeChild(this.loaderMC),this.addOkButton()},addOkButton:function(){var e=this.pixiGameScreenAssets.spriteFromID("OK"),i=this.pixiGameScreenAssets.spriteFromID("OK_CLICK"),s=new l({graphic:e,rollover:i});s.addMouseUpEvent(t.bind(this.onMouseUpStartGame,this)),this.container.addChild(s.graphic),this.container.addChild(s.graphicRollover)},addInstructionsCopy:function(){var e=this.gameModel.gameIndex+1,t=n.FLOW===n.FLOWS.MOBILE||n.FLOW===n.FLOWS.TABLET?"_MOBILE":"",i=this.pixiGameScreenAssets.spriteFromID("INSTRUCTIONS_DESCRIPTION_"+e+t);this.container.addChild(i)},onMouseUpStartGame:function(){this.gameModel.trigger(a.EVENTS.GAME.SCREENS.IN_GAME.COUNTDOWN)},onGameStateChange:function(){this.gameModel.state===this.gameModel.GAMESTATE_INSTRUCTIONS?this.show():this.hide()},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!0},hide:function(){this.shown=!1,n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!1},render:function(){},destroy:function(){this.stopListening(),this.off()}});return d}),define("game/game_base/view/screens/game_screen_intro",["jquery","underscore","backbone","model/loader_collection","config","pixi","shims/shim_resn_utils","view/common/communicator","model/app_model","TweenMax"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=i.View.extend({uiFont:{font:"8px slkscrb",fill:"black"},uiFontLarge:{font:"30px slkscrb",fill:"white"},redColor:11346176,greenColor:2817792,greyColor:6974058,whiteColor:16777215,initialize:function(e){t.bindAll(this,"onDelayComplete","onButtonPress"),this.viewContainer=e.viewContainer,this.gameModel=e.gameModel,this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight,this.gameInputModel=this.gameModel.gameInputModel,this.createScreen()},screenIsActive:function(){return this.gameModel.state===this.gameModel.GAMESTATE_INTRO&&this.shown&&this.gameModel.isCurrentGame()&&h.get("page")===h.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:a.trigger(a.EVENTS.GAME.AUDIO.CLICK),this.onDelayComplete()}},createScreen:function(){this.container=new o.DisplayObjectContainer,this.viewContainer.addChild(this.container);var e=this.gameModel.gameShellModel.pixiGameScreenAssets,t=e.spriteFromID("BG_GRAY");this.container.addChild(t);var i=e.spriteFromID("TITLE_LEVEL_"+(this.gameModel.gameIndex+1));if(this.container.addChild(i),!n.EMBEDDED){var s=this.gameModel.gameIndex;!n.SHOW_TRAIN&&s>n.TRAIN_GAME_INDEX&&(s-=1);var r=e.spriteFromID("LEVEL_"+(s+1));this.container.addChild(r)}},onDelayComplete:function(){l.killDelayedCallsTo(this.onDelayComplete),this.gameModel.trigger(a.EVENTS.GAME.SCREENS.IN_GAME.INSTRUCTIONS)},onGameStateChange:function(){this.gameModel.state===this.gameModel.GAMESTATE_INTRO?this.show():this.hide()},hide:function(){this.shown=!1,n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),l.killDelayedCallsTo(this.onDelayComplete),this.container.visible=!1},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!0,l.killDelayedCallsTo(this.onDelayComplete),l.delayedCall(3,this.onDelayComplete)},render:function(){},destroy:function(){l.killDelayedCallsTo(this.onDelayComplete),this.stopListening(),this.off()}});return c}),define("game/game_base/view/screens/game_screen_lose",["jquery","underscore","backbone","model/loader_collection","config","pixi","shims/shim_resn_utils","view/common/communicator","game/game_base/view/arcade_button_view","model/app_model","data/tracking_data"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";var d=i.View.extend({uiFont:{font:"8px slkscrb",fill:"black"},uiFontLarge:{font:"30px slkscrb",fill:"white"},redColor:11346176,greenColor:2817792,greyColor:6974058,whiteColor:16777215,currentLoseMessage:0,messageArray:[],initialize:function(e){t.bindAll(this,"onSkipClick","onLevelSelectClick","onRestartClick","onButtonPress"),this.viewContainer=e.viewContainer,this.gameModel=e.gameModel,this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight,this.gameInputModel=this.gameModel.gameInputModel,this.createScreen()},screenIsActive:function(){return this.gameModel.state===this.gameModel.GAMESTATE_END_GAME_LOSE&&this.shown&&this.gameModel.isCurrentGame()&&l.get("page")===l.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:a.trigger(a.EVENTS.GAME.AUDIO.CLICK),this.onRestartClick();break;case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:e===this.gameInputModel.BUTTONS.BUTTON_RIGHT&&this.levelSelectButtonView?(a.trigger(a.EVENTS.GAME.AUDIO.CLICK),this.onLevelSelectClick()):this.onNextClick()}},onNextClick:function(){n.EMBEDDED||(a.trigger(a.EVENTS.GAME.AUDIO.CLICK),this.continueButtonView.graphic.visible?this.onSkipClick():this.onRestartClick())},createScreen:function(){this.container=new o.DisplayObjectContainer,this.pixiGameScreenAssets=this.gameModel.gameShellModel.pixiGameScreenAssets;var e=this.pixiGameScreenAssets.spriteFromID("BG_GRAY");this.container.addChild(e),n.EMBEDDED?this.createPlayMoreBtn():(this.createContinueBtn(),this.createLevelSelectBtn()),this.createRestartBtn(),this.viewContainer.addChild(this.container),this.initLoseMessages(),n.EMBEDDED||this.manuallyAdjustButtonLayout()},initLoseMessages:function(){this.loseMessageContainer=new o.DisplayObjectContainer;var e=this.pixiGameScreenAssets.spriteFromID("TARNATION!"),t=this.pixiGameScreenAssets.spriteFromID("FAILURE"),i=this.pixiGameScreenAssets.spriteFromID("NEXT_TIME"),s=this.pixiGameScreenAssets.spriteFromID("YOU_LOSE");this.messageArray.push(e),this.messageArray.push(t),this.messageArray.push(i),this.messageArray.push(s),this.container.addChild(this.loseMessageContainer)
},updateLoseMessages:function(){this.loseMessageContainer.removeChildren(),this.loseMessageContainer.addChild(this.messageArray[this.currentLoseMessage]),this.currentLoseMessage=(this.currentLoseMessage+1)%this.messageArray.length},createContinueBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("CONTINUE"),i=this.pixiGameScreenAssets.spriteFromID("CONTINUE_CLICK");this.continueButtonView=new h({graphic:e,rollover:i}),this.continueButtonView.setPosition(60),this.continueButtonView.addMouseUpEvent(t.bind(this.onSkipClick,this)),this.container.addChild(this.continueButtonView.graphic),this.container.addChild(this.continueButtonView.graphicRollover)},createLevelSelectBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("LEVEL_SELECT"),i=this.pixiGameScreenAssets.spriteFromID("LEVEL_SELECT_HOVER");this.levelSelectButtonView=new h({graphic:e,rollover:i}),this.levelSelectButtonView.addMouseDownEvent(t.bind(this.onLevelSelectClick,this)),this.container.addChild(this.levelSelectButtonView.graphic),this.container.addChild(this.levelSelectButtonView.graphicRollover)},manuallyAdjustButtonLayout:function(){this.restartButtonView.graphic.x=this.restartButtonView.graphicRollover.x=this.restartButtonView.graphic.x-28-8,this.continueButtonView.graphic.x=this.continueButtonView.graphicRollover.x=this.continueButtonView.graphic.x-32-8+2,this.levelSelectButtonView.graphic.x=this.levelSelectButtonView.graphicRollover.x=this.continueButtonView.graphic.x+this.continueButtonView.graphic.texture.trim.x+60-2,this.levelSelectButtonView.graphic.y=this.levelSelectButtonView.graphicRollover.y=this.continueButtonView.graphic.y+this.continueButtonView.graphic.texture.trim.y},createPlayMoreBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("PLAY_MORE"),i=this.pixiGameScreenAssets.spriteFromID("PLAY_MORE_CLICK");this.playMoreButtonView=new h({graphic:e,rollover:i}),this.playMoreButtonView.addMouseDownEvent(t.bind(this.onPlayMoreClick,this)),this.container.addChild(this.playMoreButtonView.graphic),this.container.addChild(this.playMoreButtonView.graphicRollover)},createRestartBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("RESTART"),i=this.pixiGameScreenAssets.spriteFromID("RESTART_CLICK");this.restartButtonView=new h({graphic:e,rollover:i}),this.restartButtonView.addMouseDownEvent(t.bind(this.onRestartClick,this)),this.container.addChild(this.restartButtonView.graphic),this.container.addChild(this.restartButtonView.graphicRollover)},onSkipClick:function(){a.trigger(a.EVENTS.GAME.NEXT)},onLevelSelectClick:function(){a.trigger(a.EVENTS.GAME.SCREENS.SHELL.CAREER)},onPlayMoreClick:function(){a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.EMBED_PLAY_MORE),a.trigger(a.EVENTS.TRACKING,c.TRACK_IDS.GASOLINE_GUN_FIGHT_EVENT_GO_TO_FULL_SITE),a.trigger(a.EVENTS.GAME.PLAY_MORE)},onRestartClick:function(){this.gameModel.trigger(a.EVENTS.GAME.RESTART)},onGameStateChange:function(){this.gameModel.state===this.gameModel.GAMESTATE_END_GAME_LOSE?this.show():this.hide()},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!0,a.trigger(a.EVENTS.GAME.AUDIO.LOSE,!0),a.trigger(a.EVENTS.GAME.AUDIO.CUTSCREEN_MUSIC,!0),this.updateLoseMessages()},playLoseAudio:function(){},hide:function(){this.shown=!1,a.trigger(a.EVENTS.GAME.AUDIO.LOSE,!1),n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!1},render:function(){},destroy:function(){this.stopListening(),this.off()}});return d}),define("game/game_base/view/screens/game_screen_win",["jquery","underscore","backbone","model/loader_collection","config","pixi","shims/shim_resn_utils","view/common/communicator","game/game_base/view/arcade_button_view","model/app_model","data/tracking_data"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";var d=i.View.extend({uiFont:{font:"8px slkscrb",fill:"black"},uiFontLarge:{font:"30px slkscrb",fill:"white"},redColor:11346176,greenColor:3453478,greyColor:6974058,whiteColor:16777215,pixiGameAssets:null,currentWinMessage:0,initialize:function(e){t.bindAll(this,"onContinueClick","onLevelSelectClick","onRestartClick","onButtonPress"),this.viewContainer=e.viewContainer,this.gameModel=e.gameModel,this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight,this.gameInputModel=this.gameModel.gameInputModel,this.createScreen()},screenIsActive:function(){return this.gameModel.state===this.gameModel.GAMESTATE_END_GAME_WIN&&this.shown&&this.gameModel.isCurrentGame()&&l.get("page")===l.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:a.trigger(a.EVENTS.GAME.AUDIO.CLICK),this.onRestartClick();break;case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:a.trigger(a.EVENTS.GAME.AUDIO.CLICK),e===this.gameInputModel.BUTTONS.BUTTON_RIGHT&&this.levelSelectButtonView?this.onLevelSelectClick():this.onContinueClick()}},createScreen:function(){this.pixiGameScreenAssets=this.gameModel.gameShellModel.pixiGameScreenAssets,this.container=new o.DisplayObjectContainer;var e=this.pixiGameScreenAssets.spriteFromID("BG_GRAY");this.container.addChild(e),this.medalContainer=new o.DisplayObjectContainer,this.container.visible=!1,this.container.addChild(this.medalContainer),this.viewContainer.addChild(this.container),n.EMBEDDED?this.createPlayMoreBtn():(this.createContinueBtn(),this.createLevelSelectBtn()),this.createReplayBtn(),this.addWinText(),this.initWinMessages(),n.EMBEDDED||this.manuallyAdjustButtonLayout()},addWinText:function(){var e=this.pixiGameScreenAssets.spriteFromID("TEXT_YOU"),t=this.pixiGameScreenAssets.spriteFromID("TEXT_WIN");this.container.addChild(e),this.container.addChild(t)},initWinMessages:function(){this.winMessageContainer=new o.DisplayObjectContainer},updateWinMessage:function(){this.winMessageContainer&&this.winMessageContainer.removeChildren()},createContinueBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("CONTINUE"),i=this.pixiGameScreenAssets.spriteFromID("CONTINUE_CLICK");this.continueButtonView=new h({graphic:e,rollover:i}),this.continueButtonView.setPosition(60),this.continueButtonView.addMouseUpEvent(t.bind(this.onContinueClick,this)),this.container.addChild(this.continueButtonView.graphic),this.container.addChild(this.continueButtonView.graphicRollover)},createLevelSelectBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("LEVEL_SELECT"),i=this.pixiGameScreenAssets.spriteFromID("LEVEL_SELECT_HOVER");this.levelSelectButtonView=new h({graphic:e,rollover:i}),this.levelSelectButtonView.addMouseDownEvent(t.bind(this.onLevelSelectClick,this)),this.container.addChild(this.levelSelectButtonView.graphic),this.container.addChild(this.levelSelectButtonView.graphicRollover)},manuallyAdjustButtonLayout:function(){this.restartButtonView.graphic.x=this.restartButtonView.graphicRollover.x=this.restartButtonView.graphic.x-28-8,this.continueButtonView.graphic.x=this.continueButtonView.graphicRollover.x=this.continueButtonView.graphic.x-32-8+2,this.levelSelectButtonView.graphic.x=this.levelSelectButtonView.graphicRollover.x=this.continueButtonView.graphic.x+this.continueButtonView.graphic.texture.trim.x+60-2,this.levelSelectButtonView.graphic.y=this.levelSelectButtonView.graphicRollover.y=this.continueButtonView.graphic.y+this.continueButtonView.graphic.texture.trim.y},createPlayMoreBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("PLAY_MORE"),i=this.pixiGameScreenAssets.spriteFromID("PLAY_MORE_CLICK");this.playMoreButtonView=new h({graphic:e,rollover:i}),this.playMoreButtonView.addMouseDownEvent(t.bind(this.onPlayMoreClick,this)),this.container.addChild(this.playMoreButtonView.graphic),this.container.addChild(this.playMoreButtonView.graphicRollover)},createReplayBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("REPLAY-COPY"),i=this.pixiGameScreenAssets.spriteFromID("REPLAY_CLICK");this.restartButtonView=new h({graphic:e,rollover:i}),this.restartButtonView.setPosition(-60),this.restartButtonView.addMouseUpEvent(t.bind(this.onRestartClick,this)),this.container.addChild(this.restartButtonView.graphic),this.container.addChild(this.restartButtonView.graphicRollover)},updateMedal:function(){this.medalContainer.removeChildren();var e=this.getMedalSprite();if(!e)throw new Error("No such medal sprite exists. What did you do wrong Joe?");this.medalContainer.addChild(e)},playWinAudio:function(e){if(e>0){var t=[this.gameModel.gameShellModel.manifest.AUDIO_BRONZE.id,this.gameModel.gameShellModel.manifest.AUDIO_SILVER.id,this.gameModel.gameShellModel.manifest.AUDIO_GOLD.id],i=e-1,s=t[i];this.gameModel.gameShellModel.gameSoundModel.play(s,{loop:0})}},playLoseAudio:function(){this.gameModel.gameShellModel.gameSoundModel.play(this.gameModel.gameShellModel.manifest.FAIL.id,{loop:0})},getMedalSprite:function(){var e=this.gameModel.medalIndex;switch(e){case 1:return this.pixiGameScreenAssets.spriteFromID("BRONZE_MEDAL_WIN");case 2:return this.pixiGameScreenAssets.spriteFromID("SILVER_MEDAL_WIN");case 3:return this.pixiGameScreenAssets.spriteFromID("GOLD_MEDAL_WIN");default:return null}},onContinueClick:function(){a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.LEVEL_COMPLETE_CONTINUE_BTN,this.gameModel.getTrackData()),a.trigger(a.EVENTS.GAME.NEXT)},onPlayMoreClick:function(){a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.EMBED_PLAY_MORE),a.trigger(a.EVENTS.TRACKING,c.TRACK_IDS.GASOLINE_GUN_FIGHT_EVENT_GO_TO_FULL_SITE),a.trigger(a.EVENTS.GAME.PLAY_MORE)},onRestartClick:function(){this.gameModel.trigger(a.EVENTS.GAME.RESTART)},onLevelSelectClick:function(){a.trigger(a.EVENTS.GAME.SCREENS.SHELL.CAREER)},onGameStateChange:function(){this.gameModel.state===this.gameModel.GAMESTATE_END_GAME_WIN?this.show():this.hide()},hide:function(){this.shown=!1,n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!1},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),a.trigger(a.EVENTS.GAME.AUDIO.CUTSCREEN_MUSIC,!0),this.updateMedal(),this.updateWinMessage(),this.container.visible=!0,this.playWinAudio(this.gameModel.medalIndex)},render:function(){},destroy:function(){this.stopListening(),this.off()}});return d}),define("game/game_base/view/screens/game_screen_pause",["jquery","underscore","backbone","model/loader_collection","model/copy_model","config","pixi","shims/shim_resn_utils","view/common/communicator","game/game_base/view/arcade_button_view","model/app_model"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";var d=i.View.extend({uiFont:{font:"8px slkscrb",fill:"black"},uiFontLarge:{font:"30px slkscrb",fill:"white"},redColor:11346176,greenColor:2817792,greyColor:6974058,whiteColor:16777215,initialize:function(e){t.bindAll(this,"onResumeClick","onRestartClick","onLevelSelectClick","onButtonPress"),this.viewContainer=e.viewContainer,this.gameModel=e.gameModel,this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight,this.gameInputModel=this.gameModel.gameInputModel,this.createScreen()},screenIsActive:function(){return this.gameModel.state===this.gameModel.GAMESTATE_GAME_PAUSED&&this.shown&&this.gameModel.isCurrentGame()&&c.get("page")===c.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!o.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:h.trigger(h.EVENTS.GAME.AUDIO.CLICK),this.onRestartClick();break;case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:h.trigger(h.EVENTS.GAME.AUDIO.CLICK),e===this.gameInputModel.BUTTONS.BUTTON_RIGHT&&this.levelSelectButtonView?this.onLevelSelectClick():this.onResumeClick()}},createScreen:function(){this.container=new r.DisplayObjectContainer,this.container.visible=!1,this.pixiGameScreenAssets=this.gameModel.gameShellModel.pixiGameScreenAssets,this.bg=this.pixiGameScreenAssets.spriteFromID("BG_PAUSE_GRAY"),this.bg.alpha=.9,this.container.addChild(this.bg),this.createResumeBtn(),this.createRestartBtn(),o.EMBEDDED||(this.createLevelSelectBtn(),this.manuallyAdjustButtonLayout()),this.addInstructionsCopy(),this.viewContainer.addChild(this.container)},createRestartBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("RESTART"),i=this.pixiGameScreenAssets.spriteFromID("RESTART_CLICK");this.restartButtonView=new l({graphic:e,rollover:i}),this.restartButtonView.addMouseUpEvent(t.bind(this.onRestartClick,this)),this.container.addChild(this.restartButtonView.graphic),this.container.addChild(this.restartButtonView.graphicRollover)},createResumeBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("RESUME"),i=this.pixiGameScreenAssets.spriteFromID("RESUME_CLICK");this.resumeButtonView=new l({graphic:e,rollover:i}),this.resumeButtonView.addMouseUpEvent(t.bind(this.onResumeClick,this)),this.container.addChild(this.resumeButtonView.graphic),this.container.addChild(this.resumeButtonView.graphicRollover)},createLevelSelectBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("LEVEL_SELECT"),i=this.pixiGameScreenAssets.spriteFromID("LEVEL_SELECT_HOVER");this.levelSelectButtonView=new l({graphic:e,rollover:i}),this.levelSelectButtonView.addMouseDownEvent(t.bind(this.onLevelSelectClick,this)),this.container.addChild(this.levelSelectButtonView.graphic),this.container.addChild(this.levelSelectButtonView.graphicRollover)},manuallyAdjustButtonLayout:function(){this.restartButtonView.graphic.x=this.restartButtonView.graphicRollover.x=this.restartButtonView.graphic.x-28-8,this.resumeButtonView.graphic.x=this.resumeButtonView.graphicRollover.x=this.resumeButtonView.graphic.x-32-8,this.levelSelectButtonView.graphic.x=this.levelSelectButtonView.graphicRollover.x=this.resumeButtonView.graphic.x+this.resumeButtonView.graphic.texture.trim.x+60,this.levelSelectButtonView.graphic.y=this.levelSelectButtonView.graphicRollover.y=this.resumeButtonView.graphic.y+this.resumeButtonView.graphic.texture.trim.y},addInstructionsCopy:function(){var e=this.pixiGameScreenAssets.spriteFromID("INSTRUCTIONS_TITLE_BIG");this.container.addChild(e);var t=this.gameModel.gameIndex+1,i=o.FLOW===o.FLOWS.MOBILE||o.FLOW===o.FLOWS.TABLET?"_MOBILE":"",s=this.pixiGameScreenAssets.spriteFromID("INSTRUCTIONS_DESCRIPTION_"+t+i);this.container.addChild(s)},onResumeClick:function(){this.gameModel.togglePause()},onRestartClick:function(){this.gameModel.trigger(h.EVENTS.GAME.RESTART)},onLevelSelectClick:function(){h.trigger(h.EVENTS.GAME.SCREENS.SHELL.CAREER)},onGameStateChange:function(){this.gameModel.state===this.gameModel.GAMESTATE_GAME_PAUSED?this.show():this.hide()},show:function(){this.shown=!0,o.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!0},hide:function(){this.shown=!1,o.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!1},render:function(){},destroy:function(){this.stopListening(),this.off()}});return d}),define("game/game_base/view/screens/game_screen_cutscene",["jquery","underscore","backbone","model/loader_collection","config","pixi","shims/shim_resn_utils","view/common/communicator","model/copy_model","game/game_base/view/arcade_button_view","model/app_model","console"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";var d=i.View.extend({cutSceneIndex:0,initialize:function(e,i){t.bindAll(this,"onNextCutScene","onFinalCutScene","onNextScreen","onSkipButtonPress"),this.viewContainer=e.viewContainer,this.gameModel=e.gameModel,this.cutSceneMC=e.cutsceneMC,this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight,this.cutSceneArray=i,this.gameInputModel=this.gameModel.gameInputModel,this.createScreen()},screenIsActive:function(){return this.gameModel.state===this.gameModel.GAMESTATE_CUTSCENE&&this.shown&&this.gameModel.isCurrentGame()&&c.get("page")===c.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:a.trigger(a.EVENTS.GAME.AUDIO.CLICK),this.nextButtonView.graphic.visible?this.onNextCutScene():this.onSkipButtonPress()}},createScreen:function(){this.container=new o.DisplayObjectContainer,this.cutSceneContainer=new o.DisplayObjectContainer,this.pixiGameScreenAssets=this.gameModel.gameShellModel.pixiGameScreenAssets,this.bgSprite=this.pixiGameScreenAssets.spriteFromID("BG_CUTSCENE"),this.container.addChild(this.bgSprite),this.cutSceneMovieClip=this.pixiGameScreenAssets.movieClipFromID(this.cutSceneMC.id),this.cutSceneMovieClip.gotoAndPlay(0),this.container.addChild(this.cutSceneMovieClip),this.container.addChild(this.cutSceneContainer),this.viewContainer.addChild(this.container),this.addSkipButton(),this.addNextButton(),this.addContinueButton()},initCutScenes:function(){if(!this.cutSceneArray||0===this.cutSceneArray.length)throw new Error("Missing cut scenes");this.nextScene(),1===this.cutSceneArray.length?this.onFinalCutScene():(this.nextButtonView.setVisible(!0),this.skipButtonView.setVisible(!0))},onNextCutScene:function(){this.cutSceneIndex++,this.nextScene(),this.cutSceneIndex+1===this.cutSceneArray.length&&this.onFinalCutScene()},nextScene:function(){this.cutSceneContainer.removeChildren();var e=this.pixiGameScreenAssets.spriteFromID(this.cutSceneArray[this.cutSceneIndex]);this.cutSceneContainer.addChild(e)},onFinalCutScene:function(){this.continueButtonView.setVisible(!0),this.nextButtonView.setVisible(!1),this.skipButtonView.setVisible(!1)},onSkipButtonPress:function(){a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.LEVEL_SKIP_CUTSCENE,this.gameModel.getTrackData()),this.onNextScreen()},onNextScreen:function(){this.gameModel.trigger(a.EVENTS.GAME.SCREENS.IN_GAME.INTRO)},addNextButton:function(){var e=this.pixiGameScreenAssets.spriteFromID("NEXT_CUTSCENE"),t=this.pixiGameScreenAssets.spriteFromID("NEXT_CUTSCENE_CLICK");this.nextButtonView=new l({graphic:e,rollover:t}),this.nextButtonView.addMouseDownEvent(this.onNextCutScene),this.nextButtonView.setVisible(!1),this.container.addChild(this.nextButtonView.graphic),this.container.addChild(this.nextButtonView.graphicRollover)},addSkipButton:function(){var e=this.pixiGameScreenAssets.spriteFromID("SKIP_CUTSCENE"),t=this.pixiGameScreenAssets.spriteFromID("SKIP_CUTSCENE_CLICK");this.skipButtonView=new l({graphic:e,rollover:t}),this.skipButtonView.addMouseDownEvent(this.onSkipButtonPress),this.skipButtonView.setVisible(!1),this.container.addChild(this.skipButtonView.graphic),this.container.addChild(this.skipButtonView.graphicRollover)},addContinueButton:function(){var e=this.pixiGameScreenAssets.spriteFromID("CONTINUE_CUTSCENE"),t=this.pixiGameScreenAssets.spriteFromID("CONTINUE_CUTSCENE_CLICK");this.continueButtonView=new l({graphic:e,rollover:t}),this.continueButtonView.addMouseDownEvent(this.onNextScreen),this.continueButtonView.setVisible(!1),this.container.addChild(this.continueButtonView.graphic),this.container.addChild(this.continueButtonView.graphicRollover)},onGameStateChange:function(){this.gameModel.state===this.gameModel.GAMESTATE_CUTSCENE?this.show():this.hide()},hide:function(){this.shown=!1,n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!1},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&(this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress)),this.container.visible=!0,this.cutSceneIndex=0,this.nextButtonView.setVisible(!1),this.skipButtonView.setVisible(!1),this.continueButtonView.setVisible(!1),this.initCutScenes()},render:function(){},destroy:function(){this.stopListening(),this.off()}});return d}),define("game/game_base/view/screens/game_screen_countdown",["jquery","underscore","backbone","model/loader_collection","config","pixi","shims/shim_resn_utils","view/common/communicator","model/app_model","TweenMax"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=i.View.extend({NUMBER_DELAY:.7,GO_DELAY:.35,initialize:function(e){t.bindAll(this,"onCountdown3Finished","onCountdown2Finished","onCountdown1Finished","onCountdownGoFinished","onButtonPress"),this.viewContainer=e.viewContainer,this.gameModel=e.gameModel,this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight,this.gameSoundModel=this.gameModel.gameSoundModel,this.gameInputModel=this.gameModel.gameInputModel,this.halfGameWidth=Math.round(this.gameWidth/2),this.halfGameHeight=Math.round(this.gameHeight/2),this.createScreen()},screenIsActive:function(){return this.gameModel.state===this.gameModel.GAMESTATE_COUNTDOWN&&this.shown&&this.gameModel.isCurrentGame()&&h.get("page")===h.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:}},createScreen:function(){this.container=new o.DisplayObjectContainer,this.viewContainer.addChild(this.container),this.pixiGameScreenAssets=this.gameModel.gameShellModel.pixiGameScreenAssets;var e=this.pixiGameScreenAssets.spriteFromID("BG_GRAY");this.container.addChild(e),this.countdown3=this.pixiGameScreenAssets.spriteFromID("COUNTDOWN_3"),this.container.addChild(this.countdown3),this.countdown2=this.pixiGameScreenAssets.spriteFromID("COUNTDOWN_2"),this.container.addChild(this.countdown2),this.countdown1=this.pixiGameScreenAssets.spriteFromID("COUNTDOWN_1"),this.container.addChild(this.countdown1),this.countdownGo=this.pixiGameScreenAssets.spriteFromID("COUNTDOWN_GO"),this.container.addChild(this.countdownGo)},onGameStateChange:function(){this.gameModel.state===this.gameModel.GAMESTATE_COUNTDOWN?this.show():this.hide()},hide:function(){this.shown=!1,n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.killTweens(),this.container.visible=!1},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.container.visible=!0,this.countdown3.visible=!0,this.countdown2.visible=!1,this.countdown1.visible=!1,this.countdownGo.visible=!1,l.delayedCall(this.NUMBER_DELAY,this.onCountdown3Finished),a.trigger(a.EVENTS.GAME.AUDIO.CUTSCREEN_MUSIC,!1),a.trigger(a.EVENTS.GAME.AUDIO.COUNTDOWN.THREE)},onCountdown3Finished:function(){this.countdown3.visible=!1,this.countdown2.visible=!0,l.delayedCall(this.NUMBER_DELAY,this.onCountdown2Finished),a.trigger(a.EVENTS.GAME.AUDIO.COUNTDOWN.TWO)},onCountdown2Finished:function(){this.countdown2.visible=!1,this.countdown1.visible=!0,l.delayedCall(this.NUMBER_DELAY,this.onCountdown1Finished),a.trigger(a.EVENTS.GAME.AUDIO.COUNTDOWN.ONE)},onCountdown1Finished:function(){this.countdown1.visible=!1,this.countdownGo.visible=!0,l.delayedCall(this.GO_DELAY,this.onCountdownGoFinished),a.trigger(a.EVENTS.GAME.AUDIO.COUNTDOWN.GO)},onCountdownGoFinished:function(){this.killTweens(),this.gameModel.trigger(a.EVENTS.GAME.START)},killTweens:function(){l.killDelayedCallsTo(this.onCountdown3Finished),l.killDelayedCallsTo(this.onCountdown2Finished),l.killDelayedCallsTo(this.onCountdown1Finished),l.killDelayedCallsTo(this.onCountdownGoFinished)},render:function(){},destroy:function(){this.killTweens(),this.stopListening(),this.off()}});return c}),define("game/game_base/view/screens/game_screen_pause_btn",["jquery","underscore","backbone","model/loader_collection","config","pixi","shims/shim_resn_utils","view/common/communicator"],function(e,t,i,s,n,o,r,a){"use strict";var h=i.View.extend({initialize:function(e){t.bindAll(this,"onPauseClick","onMouseOver","onMouseOut"),this.viewContainer=e.viewContainer,this.gameModel=e.gameModel,this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight,this.createScreen(),this.addEvents()},createScreen:function(){this.container=new o.DisplayObjectContainer,this.container.visible=!1,this.pixiGameScreenAssets=this.gameModel.gameShellModel.pixiGameScreenAssets,this.createPauseBtn(),this.viewContainer.addChild(this.container)},createPauseBtn:function(){this.button=this.pixiGameScreenAssets.spriteFromID("GAME_PAUSE_BTN"),this.buttonRollover=this.pixiGameScreenAssets.spriteFromID("GAME_PAUSE_BTN_HOVER"),this.container.x=228,this.container.y=10,this.container.addChild(this.button),this.container.addChild(this.buttonRollover),this.button.hitArea=new o.Rectangle(this.button.texture.trim.x,this.button.texture.trim.y,this.button.width,this.button.height),this.button.alpha=1,this.buttonRollover.hitArea=new o.Rectangle(this.buttonRollover.texture.trim.x,this.buttonRollover.texture.trim.y,this.buttonRollover.width,this.buttonRollover.height),this.buttonRollover.mouseout=this.onMouseOut,this.buttonRollover.mouseover=this.onMouseOver,this.buttonRollover.alpha=0,this.buttonRollover.interactive=this.button.interactive=!0,this.buttonRollover.buttonMode=this.button.buttonMode=!0},addEvents:function(){this.button.mouseup=this.onPauseClick,this.button.touchstart=this.onPauseClick,this.buttonRollover.mouseup=this.onPauseClick,this.buttonRollover.touchstart=this.onPauseClick},onMouseOver:function(){this.buttonRollover.alpha=1,a.trigger(a.EVENTS.GAME.AUDIO.MOUSEOVER)},onMouseOut:function(){this.buttonRollover.alpha=0},onPauseClick:function(){a.trigger(a.EVENTS.GAME.AUDIO.CLICK),this.gameModel.pause()},onGameStateChange:function(){this.gameModel.state===this.gameModel.GAMESTATE_GAME_PLAYING?this.show():this.hide()},hide:function(){this.container.visible=!1},show:function(){this.container.visible=!0},render:function(){},destroy:function(){this.stopListening(),this.off()}});return h}),define("game/games/courtroom/view/courtroom_game_screens_view",["jquery","underscore","backbone","model/loader_collection","config","pixi","game/game_base/view/screens/game_screen_instructions","game/game_base/view/screens/game_screen_intro","game/game_base/view/screens/game_screen_lose","game/game_base/view/screens/game_screen_win","game/game_base/view/screens/game_screen_pause","game/game_base/view/screens/game_screen_cutscene","game/game_base/view/screens/game_screen_countdown","game/game_base/view/game_screens_view","shims/shim_resn_utils","game/game_base/view/screens/game_screen_pause_btn"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m){"use strict";var _=g.extend({initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.createScreens(),this.addEvents()},addEvents:function(){this.listenTo(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE,this.onGameStateChange)},removeEvents:function(){this.stopListening(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE)},onGameStateChange:function(){t.each(this.screens,function(e){e.onGameStateChange()})},createScreens:function(){var e={gameModel:this.gameModel,viewContainer:this.viewContainer,cutsceneMC:{id:"COURTROOM_CUTSCENE_MC"}},t=["COURTROOM_CUTSCENE_1","COURTROOM_CUTSCENE_2"];this.screens=[new r(e),new a(e),new u(e),new h(e),new l(e),new c(e),new m(e),new d(e,t)]},show:function(){this["super"].show.apply(this,arguments)},render:function(){},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}});return _}),define("game/games/courtroom/courtroom_game_main",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/game_main","game/game_config","game/games/courtroom/model/courtroom_game_model","game/games/courtroom/model/courtroom_asset_manifest","game/games/courtroom/view/courtroom_game_view","game/games/courtroom/view/courtroom_game_ui_view","game/games/courtroom/view/courtroom_game_screens_view"],function(e,t,i,s,n,o,r,a,h,l,c,d){"use strict";var u=o.extend({initialize:function(e){this["super"]=this.constructor.__super__;var i=t.extend({},e),s=new a({gameShellModel:e.gameShellModel,gameInputModel:e.gameInputModel,gameId:e.gameId,gameIndex:e.gameIndex,manifest:h});i.gameModel=s,i.gameView=new l({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameUIView=new c({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameScreensView=new d({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),this["super"].initialize.apply(this,[i])}});return u}),define("game/game_base/model/vo/sprite_vo",[],function(){var e=function(){this.active=!0,this.visible=!0,this.pivotX=0,this.pivotY=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.tint=16777215,this.alpha=1,this.initWidth=1,this.initHeight=1,this.currentAnimationId="",this.currentFrame=0};return e}),define("game/game_base/model/movieclip_frame_model",["jquery","underscore","backbone","console","shims/shim_resn_utils"],function(e,t,i,s,n){"use strict";function o(){this.frameLength=0,this.currentFrame=0,this.currentFrameFloat=0,this.loop=!1,this.playSpeed=.125,this.playing=!1,this.setFrameViaUnitary=function(e){e=n.math.clamp(e,0,1),this.currentFrameFloat=(this.frameLength-.001)*e,this.setFrame(Math.floor(this.currentFrameFloat))},this.setFrame=function(e){this.currentFrame=e},this.play=function(e){e=e||0,this.playing=!0,this.currentFrameFloat=e,this.setFrame(e)},this.stop=function(e){e=e||this.currentFrame,this.playing=!1,this.currentFrameFloat=e,this.setFrame(e)},this.nextFrame=function(){var e=this.currentFrameFloat;this.playing&&(e+=this.playSpeed,this.frameLength<=e&&(e=this.loop===!0?0:this.frameLength-1,this.playing=this.loop===!0)),this.currentFrameFloat=e,this.setFrame(Math.floor(e))},this.tick=function(){this.nextFrame()}}return o}),define("game/games/baby/model/colonel_entity_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax","game/game_base/model/movieclip_frame_model","console"],function(e,t,i,s){function n(i){this.spriteVO=new t,this.spriteVO.pivotX=0,this.spriteVO.pivotY=0,this.gameTweenMax=i.gameModel.gameTweenMax,this.gameRect=i.gameModel.gameRect,this.gameModel=i.gameModel,this.gameSoundModel=this.gameModel.gameSoundModel,this.catchPositionIndex=0,this.catchPositions=[{y:.7,x:1/6*1},{y:.7,x:.5},{y:.7,x:1/6*5}],this.moveUnitarys=[0,.5,1];var n=this.gameModel.manifest;this.STATES={MOVE:"move",BOUNCE:"bounce",IDLE:"idle",WIN:"win",WIN_2:"win_2",LOSE:"lose"},this.MOVE_STATES={LEFT:-1,RIGHT:1},this.ANIMATION_STATES={MID_IDLE:n.COLONEL_MID_IDLE_MC.id,LEFT_IDLE:n.COLONEL_LEFT_IDLE_MC.id,RIGHT_IDLE:n.COLONEL_RIGHT_IDLE_MC.id,MID_BOUNCE:n.COLONEL_MID_BOUNCE_MC.id,LEFT_BOUNCE:n.COLONEL_LEFT_BOUNCE_MC.id,RIGHT_BOUNCE:n.COLONEL_RIGHT_BOUNCE_MC.id,MOVE_LEFT:n.COLONEL_MOVE_LEFT_MC.id,MOVE_RIGHT:n.COLONEL_MOVE_RIGHT_MC.id,INACTIVE:n.COLONEL_MID_IDLE_MC.id,WIN_1:n.COLONEL_WIN_1_MC.id,WIN_2:n.COLONEL_WIN_2_MC.id,LOSE:n.COLONEL_LOSE_MC.id},this.indexStates={idle:[this.ANIMATION_STATES.LEFT_IDLE,this.ANIMATION_STATES.MID_IDLE,this.ANIMATION_STATES.RIGHT_IDLE],bounce:[this.ANIMATION_STATES.LEFT_BOUNCE,this.ANIMATION_STATES.MID_BOUNCE,this.ANIMATION_STATES.RIGHT_BOUNCE]},this.state=this.STATES.IDLE,this.moveState=this.MOVE_STATES.RIGHT,this.animationState=this.ANIMATION_STATES.MID_IDLE,this.spriteVO.currentAnimationId=this.animationState,this.frametweens={},this.frametweens.move={unitary:0},this.frametweens.bounce={unitary:0},this.frametweens.idle={unitary:0},this.frametweens.win={unitary:0},this.frametweens.win_2={unitary:0},this.frametweens.lose={unitary:0},this.movieClipModel=new s,this.tick=function(){this.calculateAnimationState(),this.movieClipModel.setFrameViaUnitary(this.frametweens[this.state].unitary),this.movieClipModel.tick(),this.spriteVO.currentFrame=this.movieClipModel.currentFrame
},this.reset=function(){this.setColonelPositionIndex(0,!0)},this.calculateAnimationState=function(){var e=this.catchPositionIndex,t=this.moveState===this.MOVE_STATES.RIGHT,i=this.ANIMATION_STATES;switch(this.state){case this.STATES.MOVE:this.setAnimationState(t?i.MOVE_LEFT:i.MOVE_RIGHT);break;case this.STATES.BOUNCE:this.setAnimationState(this.indexStates.bounce[e]);break;case this.STATES.IDLE:this.setAnimationState(this.indexStates.idle[e])}},this.setAnimationState=function(e){this.animationState=e,this.spriteVO.active=e!==this.STATES.INACTIVE,this.spriteVO.currentAnimationId=this.animationState,this.movieClipModel.frameLength=this.gameModel.manifest[e].frameNames.length},this.setMoveState=function(e){this.moveState=e,this.calculateAnimationState()},this.setState=function(e){var t=this.catchPositionIndex,i=.2,s=.25,n=1,o=1,r=.5,a=.5;switch(e){case this.STATES.MOVE:this.state=e,this.gameTweenMax.killDelayedCallsTo(this.setState),this.calculateAnimationState();var h=this.catchPositions[this.catchPositionIndex],l={x:Math.round(h.x*this.gameRect.width),y:Math.round(h.y*this.gameRect.height)};this.gameTweenMax.killTweensOf(this.spriteVO),this.gameTweenMax.to(this.spriteVO,i,{x:l.x,ease:window.Back.easeOut}),this.spriteVO.y=l.y;var c=this.moveUnitarys[t];this.gameTweenMax.killTweensOf(this.frametweens.move),this.gameTweenMax.to(this.frametweens.move,i,{unitary:c,ease:window.Linear.easeNone}),this.gameTweenMax.delayedCall(.25,this.setState,[this.STATES.IDLE]);break;case this.STATES.BOUNCE:if(this.playBabyBounceAudio(),this.state===this.STATES.MOVE)return;this.state=e,this.gameTweenMax.killDelayedCallsTo(this.setState),this.calculateAnimationState(),this.frametweens.move.unitary=this.moveUnitarys[this.catchPositionIndex],this.frametweens.bounce.unitary=0,this.gameTweenMax.killTweensOf(this.frametweens.move),this.gameTweenMax.killTweensOf(this.frametweens.bounce),this.gameTweenMax.to(this.frametweens.bounce,s,{unitary:1,ease:window.Linear.easeNone}),this.gameTweenMax.delayedCall(s,this.setState,[this.STATES.IDLE]);break;case this.STATES.IDLE:this.state=e,this.calculateAnimationState(),this.frametweens.move.unitary=this.moveUnitarys[this.catchPositionIndex],this.frametweens.idle.unitary=0,this.gameTweenMax.killTweensOf(this.frametweens.move),this.gameTweenMax.killTweensOf(this.frametweens.idle),this.frametweens.move.unitary=this.moveUnitarys[this.catchPositionIndex],this.frametweens.idle.unitary=0,this.gameTweenMax.to(this.frametweens.idle,n,{unitary:1,ease:window.Linear.easeNone}),this.gameTweenMax.delayedCall(n,this.setState,[this.STATES.IDLE]);break;case this.STATES.WIN:this.state=e,this.gameTweenMax.killDelayedCallsTo(this.setState),this.frametweens.win.unitary=0,this.gameTweenMax.killTweensOf(this.frametweens.win),this.gameTweenMax.to(this.frametweens.win,o,{unitary:1,ease:window.Linear.easeNone}),this.gameTweenMax.delayedCall(o,this.setState,[this.STATES.WIN_2]),this.setAnimationState(this.ANIMATION_STATES.WIN_1);break;case this.STATES.WIN_2:this.state=e,this.gameTweenMax.killDelayedCallsTo(this.setState),this.frametweens.win_2.unitary=0,this.gameTweenMax.killTweensOf(this.frametweens.win),this.gameTweenMax.to(this.frametweens.win_2,r,{unitary:1,ease:window.Linear.easeNone}),this.gameTweenMax.delayedCall(r,this.setState,[this.STATES.WIN_2]),this.setAnimationState(this.ANIMATION_STATES.WIN_2);break;case this.STATES.LOSE:this.state=e,this.gameTweenMax.killDelayedCallsTo(this.setState),this.frametweens.lose.unitary=0,this.gameTweenMax.killTweensOf(this.frametweens.lose),this.gameTweenMax.to(this.frametweens.lose,a,{unitary:1,ease:window.Linear.easeNone}),this.gameTweenMax.delayedCall(a,this.setState,[this.STATES.LOSE]),this.setAnimationState(this.ANIMATION_STATES.LOSE)}},this.playBabyBounceAudio=function(){var e;0===this.catchPositionIndex?e=n.AUDIO_BABY_BOUNCE_0.id:1===this.catchPositionIndex?e=n.AUDIO_BABY_BOUNCE_1.id:2===this.catchPositionIndex&&(e=n.AUDIO_BABY_BOUNCE_2.id),this.gameSoundModel.play(e,{loop:0})},e.bindAll(this,"setState"),this.bounce=function(){this.setState(this.STATES.BOUNCE)},this.moveLeft=function(){var e=this.catchPositionIndex;--e<0&&(e=0),this.setMoveState(this.MOVE_STATES.LEFT),this.setColonelPositionIndex(e)},this.moveRight=function(){var e=this.catchPositionIndex,t=this.catchPositions.length-1;++e>t&&(e=t),this.setMoveState(this.MOVE_STATES.RIGHT),this.setColonelPositionIndex(e)},this.setColonelPositionIndex=function(e){this.playMoveAudio(e),this.catchPositionIndex=e,this.setState(this.STATES.MOVE)},this.playMoveAudio=function(e){if(this.catchPositionIndex!==e){var t;0===e?t=n.AUDIO_PLAYER_MOVE_0.id:1===e?t=n.AUDIO_PLAYER_MOVE_1.id:2===e&&(t=n.AUDIO_PLAYER_MOVE_2.id),this.gameSoundModel.play(t,{loop:0})}},this.destroy=function(){this.gameTweenMax.killTweensOf(this.spriteVO),this.gameRect=null}}return n}),define("game/games/baby/model/baby_entity_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax","shims/shim_resn_utils"],function(e,t,i,s){function n(i){this.index=i.index,this.gameModel=i.gameModel,this.gameTweenMax=i.gameModel.gameTweenMax,this.rescuerModel=i.rescuerModel,this.gameRect=i.gameModel.gameRect,this.spriteVO=new t,this.spriteVO.pivotX=16,this.spriteVO.pivotY=20,this.state=-3,this.vector={x:0,y:0},this.lastPos={x:0,y:0};var n=this.gameModel.manifest;this.COLOR_STATES=["PINK","TAN","BROWN","DARK"],this.RESCUE_ANIMATION_STATES={CATCH:n.RESCUER_CATCH.id,OPEN:n.RESCUER.id},this.colorState=this.COLOR_STATES[this.index%this.COLOR_STATES.length],this.ACTION_STATES={UP:"UP",DOWN:"DOWN",NEUTRAL:"NEUTRAL"},this.actionState=this.ACTION_STATES.DOWN,this.animationState="BABY_"+this.colorState+"_"+this.actionState,this.STATES={CART_RETURN:-1,REACHED_FINISH:-2},this.animationParameters={bounceArcSeconds:1.5,maxSteps:4,stageStep:3,startStageStepOffset:-.5,up:{y:.2,ease:window.Sine.easeOut},down:{y:.85,ease:window.Sine.easeIn}},this.reset=function(){this.setActionState(this.ACTION_STATES.DOWN),this.state=-1,this.vector={x:0,y:0},this.lastPos={x:0,y:0},this.spriteVO.x=-100,this.gameTweenMax.killDelayedCallsTo(this.setState)},this.removeLife=function(){this.gameModel.removeLife()},this.addScore=function(){this.gameModel.addScore()},this.setActionState=function(e){this.actionState=e,this.animationState="BABY_"+this.colorState+"_"+this.actionState,this.spriteVO.currentAnimationId=this.animationState},this.setState=function(e){var t=this.spriteVO,i=this.rescuerModel,n=i.spriteVO,o=this.gameRect.width,r=this.gameRect.height;this.state=e,this.gameTweenMax.killTweensOf(t),this.gameTweenMax.killTweensOf(n),this.gameTweenMax.killDelayedCallsTo(this.setState),this.gameTweenMax.killDelayedCallsTo(this.setActionState);var a=s.math.isOdd,h=e+1,l=this.animationParameters,c=this.gameRect.width/l.stageStep,d=c*l.startStageStepOffset,u=l.bounceArcSeconds,g=(a(h)?l.up:l.down,a(h)?l.down:l.up);if(e===this.STATES.REACHED_FINISH)return this.addScore(),t.x=-50,void(n.x=-50);if(e===this.STATES.CART_RETURN){this.setActionState(this.ACTION_STATES.NEUTRAL),this.removeLife();var p=-1===n.scaleX?-.2:1.2;return this.gameTweenMax.to(t,.2*u,{delay:.1*u,x:o*p,ease:window.Back.easeIn}),n.currentAnimationId=this.RESCUE_ANIMATION_STATES.CATCH,void this.gameTweenMax.to(n,.2*u,{delay:.1*u,x:o*p,ease:window.Back.easeIn})}0===e&&(t.x=d+e*c,t.y=g.y*r,t.rotation=0),this.gameTweenMax.to(t,u,{x:d+h*c,ease:window.Linear.easeNone}),this.gameTweenMax.to(t,.5*u,{y:l.up.y*r,ease:l.up.ease}),this.setActionState(this.ACTION_STATES.NEUTRAL),this.gameTweenMax.delayedCall(.08*u,this.setActionState,[this.ACTION_STATES.UP]),this.gameTweenMax.delayedCall(.5*u,this.setActionState,[this.ACTION_STATES.NEUTRAL]),this.gameTweenMax.delayedCall(.58*u,this.setActionState,[this.ACTION_STATES.DOWN]),this.gameTweenMax.to(t,.5*u,{delay:.5*u,y:l.down.y*r,ease:l.down.ease}),this.gameTweenMax.delayedCall(u,this.setState,[this.STATES.CART_RETURN]),n.scaleX=1,n.x=o*-.3,n.scaleX=-1,n.y=l.down.y*r,n.currentAnimationId=this.RESCUE_ANIMATION_STATES.CATCH,this.gameTweenMax.to(n,.05*u,{delay:.95*u,x:d+h*c,ease:window.Power2.easeOut})},e.bindAll(this,"setState","setActionState")}return n}),define("game/games/baby/model/rescuer_entity_model",["underscore","game/game_base/model/vo/sprite_vo"],function(e,t){function i(e){this.index=e.index,this.spriteVO=new t,this.spriteVO.pivotX=45,this.spriteVO.pivotY=10,this.spriteVO.y=200,this.STATES={STATE_CART_RETURN:-1,STATE_REACHED_FINISH:-2,STATE_INACTIVE:-3},this.state=this.STATE_INACTIVE,this.animationParameters={bounceArcSeconds:1.5},this.reset=function(){this.state=this.STATE_INACTIVE,this.spriteVO.x=-100}}return i}),define("game/games/baby/model/baby_spawn_model",["underscore","TweenMax","game/games/baby/model/baby_entity_model","game/games/baby/model/rescuer_entity_model","console"],function(e,t,i,s){function n(t){this.gameModel=t.gameModel,this.gameTweenMax=this.gameModel.gameTweenMax,this.spawnIndex=5,this.poolsTotal=10,this.babyModelPool=[],this.rescuerModelPool=[],this.spawnSecsArcIndex=0,this.bounceArcSeconds=1.5,this.spawnSecsArcSeq=[2.7,1.5,2.7,.2,2.7,.2,.2,.2,2.7,.15,1.15,.15,2.7,1.2,1.2,2.7,1.5,1.5,1.5,2.7,1.2,1.5,1.2,.2,1.2,2.7,.15,1.15,.15,1.15,.15,2.6,.15,2.2,.5,2.6,.15,.15,2.35,1.2,1.5,2.5,.15,.45,2.35,.15,.45,2.5,.35,1.2,2.35,.35,1.2,1.5],this.babyTotal=this.spawnSecsArcSeq.length+1,this.reset=function(){this.gameTweenMax.killDelayedCallsTo(this.spawnBaby),this.spawnIndex=0,this.spawnSecsArcIndex=0,this._resetModels()},this.killTweens=function(){this.gameTweenMax.killDelayedCallsTo(this.spawnBaby);for(var e=0,t=this.babyModelPool.length;t>e;e++){var i=this.babyModelPool[e],s=this.rescuerModelPool[e];this.gameTweenMax.killTweensOf(i),this.gameTweenMax.killTweensOf(s)}},this._resetModels=function(){this.killTweens();for(var e=0,t=this.babyModelPool.length;t>e;e++){var i=this.babyModelPool[e],s=this.rescuerModelPool[e];i.reset(),s.reset()}},this.makePools=function(){this._makeRescuers(),this._makeBabies()},this._makeRescuers=function(){this.rescuerModelPool=[];for(var e=0,t=this.poolsTotal;t>e;e++)this.rescuerModelPool.push(new s({index:e,gameModel:this.gameModel}))},this._makeBabies=function(){this.babyModelPool=[];for(var e=0,t=this.poolsTotal;t>e;e++)this.babyModelPool.push(new i({index:e,gameModel:this.gameModel,rescuerModel:this.rescuerModelPool[e]}))},this.spawnBaby=function(){this.spawnIndex++,this.spawnIndex>this.babyModelPool.length-1&&(this.spawnIndex=0),this._setNextSpawnTimer();var e=this.spawnIndex,t=this.babyModelPool[e];t.setState(0)},this._setNextSpawnTimer=function(){if(this.gameTweenMax.killDelayedCallsTo(this.spawnBaby),!(this.spawnSecsArcIndex>this.spawnSecsArcSeq.length-1)){var e=this.spawnSecsArcSeq[this.spawnSecsArcIndex];this.gameTweenMax.delayedCall(this.bounceArcSeconds*e,this.spawnBaby),this.spawnSecsArcIndex++}},e.bindAll(this,"spawnBaby")}return n}),define("game/games/baby/model/baby_game_model",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/model/game_model","console","game/games/baby/model/colonel_entity_model","game/games/baby/model/baby_spawn_model","TweenMax"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=o.extend({babiesTotal:0,babiesResolved:0,score:0,scoreMultiplier:1,livesMax:5,lives:5,babySpawnModel:null,colonelModel:null,gameSpeed:1,initialize:function(e){this.EVENTS.UI_UPDATE="UI_UPDATE",this["super"]=this.constructor.__super__,this.gameInputModel=e.gameInputModel,this["super"].initialize.apply(this,arguments),this.colonelModel=new a({gameModel:this}),this.spawnModel=new h({gameModel:this})},setMobileGameSpeed:function(){(n.flow===n.MOBILE||n.flow===n.TABLET)&&(this.gameSpeed=1.03)},setup:function(){this.setMobileGameSpeed(),this["super"].setup.apply(this,arguments),this.spawnModel.makePools(),t.bindAll(this,"start","showOutroWin","showOutroLose")},reset:function(){this["super"].reset.apply(this,arguments),this.spawnModel.reset(),this.colonelModel.reset(),this.score=0,this.babiesResolved=0,this.babiesTotal=this.spawnModel.spawnSecsArcSeq.length+1,this.lives=this.livesMax,this.updateReadOuts()},start:function(){this["super"].start.apply(this,arguments)},startGame:function(){this["super"].startGame.apply(this,arguments),this.spawnModel.spawnBaby(),this.gameTweenMax.timeline.timeScale(this.gameSpeed),this.playGameMusic()},playGameMusic:function(){this.gameSoundModel.play(this.manifest.AUDIO_MUSIC.id,{})},endGame:function(){this["super"].endGame.apply(this,arguments),this.spawnModel.killTweens()},removeLife:function(){this.lives--,this.babyResolved(),this.lives<1,this.updateReadOuts(),this.playBabyFailAudio()},babyResolved:function(){this.babiesResolved++,this.babiesResolved>this.spawnModel.spawnSecsArcSeq.length&&this.showOutro()},addScore:function(){this.score+=this.scoreMultiplier,this.babyResolved(),this.updateReadOuts(),this.playBabySavedAudio()},playBabyFailAudio:function(){var e=this.babiesResolved%2,t=[this.manifest.AUDIO_BABY_FAIL_0.id,this.manifest.AUDIO_BABY_FAIL_1.id],i=t[e];this.gameSoundModel.play(i,{loop:0})},playBabySavedAudio:function(){var e=this.babiesResolved%4,t=[this.manifest.AUDIO_BABY_LAUGH_0.id,this.manifest.AUDIO_BABY_LAUGH_1.id,this.manifest.AUDIO_BABY_LAUGH_2.id,this.manifest.AUDIO_BABY_LAUGH_3.id],i=t[e];this.gameSoundModel.play(i,{loop:0})},updateReadOuts:function(){this.trigger(this.EVENTS.UI_UPDATE)},buttonLeftPress:function(){this.moveLeft()},buttonRightPress:function(){this.moveRight()},moveLeft:function(){this.state===this.GAMESTATE_GAME_PLAYING&&this.colonelModel.moveLeft()},moveRight:function(){this.state===this.GAMESTATE_GAME_PLAYING&&this.colonelModel.moveRight()},showOutro:function(){this.gameTweenMax.killDelayedCallsTo(this.colonelModel.setState),this.calculateMedalIndex(),this.setGameState(this.GAMESTATE_GAME_OUTRO),this.colonelModel.setColonelPositionIndex(1),this.medalIndex>0?l.delayedCall(.3,this.showOutroWin):l.delayedCall(.3,this.showOutroLose),l.killDelayedCallsTo(this.resolveWinOrLose),l.delayedCall(4,this.resolveWinOrLose)},showOutroWin:function(){this.colonelModel.setState(this.colonelModel.STATES.WIN)},showOutroLose:function(){this.playFailSound(),this.colonelModel.setState(this.colonelModel.STATES.LOSE)},frameTick:function(){this["super"].frameTick.apply(this,arguments),this.state===this.GAMESTATE_GAME_PLAYING&&(this.colonelModel.tick(),this.checkCollision()),this.state===this.GAMESTATE_GAME_OUTRO&&this.colonelModel.tick()},checkCollision:function(){for(var e=0,t=this.spawnModel.babyModelPool.length;t>e;e++){var i=this.spawnModel.babyModelPool[e];if(i.active!==!1){var s=(i.lastPos.x,i.lastPos.y);i.vector.x=i.spriteVO.x-i.lastPos.x,i.vector.y=i.spriteVO.y-i.lastPos.y,i.lastPos.x=i.spriteVO.x,i.lastPos.y=i.spriteVO.y;var n=i.spriteVO.x>=this.gameRect.width;if(n)i.setState(i.STATES.REACHED_FINISH);else{var o=i.vector.y>=0;if(o){var r=Math.abs(i.spriteVO.x-this.colonelModel.spriteVO.x)<20;if(r){var a=i.spriteVO.y>=this.colonelModel.spriteVO.y&&s<this.colonelModel.spriteVO.y;a&&(i.lastPos.y=i.y,i.vector.y=0,i.setState(i.state+1),this.colonelModel.bounce())}}}}}},calculateMedalIndex:function(){var e=this.spawnModel.spawnSecsArcSeq.length+1;this.medalIndex=0,this.score/e>=.995?this.medalIndex=3:this.score/e>=.75?this.medalIndex=2:this.score/e>=.5&&(this.medalIndex=1)},destroy:function(){this["super"].destroy.apply(this,arguments)}});return c}),define("game/games/baby/view/baby_game_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_view","pixi","console"],function(e,t,i,s,n,o,r){"use strict";var a=o.extend({colonelSprite:null,colonelAnimations:{},bg:null,spritePool:{babies:[],rescuers:[]},babyAnimations:{},initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.end_game_screen=new r.DisplayObjectContainer,this.bg=this.spriteFromID(this.manifest.BACKGROUND.id),this.bg.alpha=1,this.gameContainer.addChild(this.bg),this.makeSprites(),t.bindAll(this,"setGameState"),this.updateSprites()},makeSprites:function(){this.makeColonel(),this.makeRescuers(),this.makeBabies(),this.updateSprites()},makeColonel:function(){this.colonelSprite=this.movieClipFromID(this.manifest.COLONEL_MID_IDLE_MC.id),this.colonelSprite.loop=!1,this.colonelSprite.animationSpeed=1;for(var e=[this.manifest.COLONEL_MID_IDLE_MC.id,this.manifest.COLONEL_LEFT_IDLE_MC.id,this.manifest.COLONEL_RIGHT_IDLE_MC.id,this.manifest.COLONEL_MID_BOUNCE_MC.id,this.manifest.COLONEL_LEFT_BOUNCE_MC.id,this.manifest.COLONEL_RIGHT_BOUNCE_MC.id,this.manifest.COLONEL_MOVE_LEFT_MC.id,this.manifest.COLONEL_MOVE_RIGHT_MC.id,this.manifest.COLONEL_WIN_1_MC.id,this.manifest.COLONEL_WIN_2_MC.id,this.manifest.COLONEL_LOSE_MC.id],t=0,i=e.length;i>t;t++){var s=e[t];this.colonelAnimations[s]=this.movieClipFramesFromID(s)}this.gameContainer.addChild(this.colonelSprite)},makeBabies:function(){this.spritePool.babies=[],this.babyAnimations={};for(var e=[this.manifest.BABY_PINK_NEUTRAL.id,this.manifest.BABY_PINK_UP.id,this.manifest.BABY_PINK_DOWN.id,this.manifest.BABY_TAN_NEUTRAL.id,this.manifest.BABY_TAN_UP.id,this.manifest.BABY_TAN_DOWN.id,this.manifest.BABY_BROWN_NEUTRAL.id,this.manifest.BABY_BROWN_UP.id,this.manifest.BABY_BROWN_DOWN.id,this.manifest.BABY_DARK_NEUTRAL.id,this.manifest.BABY_DARK_UP.id,this.manifest.BABY_DARK_DOWN.id],t=0,i=e.length;i>t;t++){var s=e[t];this.babyAnimations[s]=this.textureFromID(s)}for(var n=this.gameModel.spawnModel.poolsTotal,o=this.textureFromID(this.manifest.BABY_BROWN_NEUTRAL.id),a=0,h=n;h>a;a++)this.spritePool.babies.push(new r.Sprite(o)),this.gameContainer.addChild(this.spritePool.babies[a])},makeRescuers:function(){this.spritePool.rescuers=[],this.rescueAnimations={};for(var e=[this.manifest.RESCUER_CATCH.id,this.manifest.RESCUER.id],t=0,i=e.length;i>t;t++){var s=e[t];this.rescueAnimations[s]=this.textureFromID(s)}for(var n=this.gameModel.spawnModel.poolsTotal,o=this.textureFromID(this.manifest.RESCUER.id),a=0,h=n;h>a;a++)this.spritePool.rescuers.push(new r.Sprite(o)),this.gameContainer.addChild(this.spritePool.rescuers[a])},show:function(){this["super"].show.apply(this,arguments)},render:function(){this.gameModel.isAnimating()&&this.updateSprites()},updateSprites:function(){var e=this.gameModel.spawnModel;this.updateSpritesFromModels(this.spritePool.babies,e.babyModelPool),this.updateAnimationsFromModels(this.spritePool.babies,this.babyAnimations,e.babyModelPool),this.updateSpritesFromModels(this.spritePool.rescuers,e.rescuerModelPool),this.updateAnimationsFromModels(this.spritePool.rescuers,this.rescueAnimations,e.rescuerModelPool),this.updateSpriteFromModel(this.colonelSprite,this.gameModel.colonelModel),this.updateMovieClipFromModel(this.colonelSprite,this.colonelAnimations,this.gameModel.colonelModel,!0),this.colonelSprite.position.x=0,this.colonelSprite.position.y=0},destroy:function(){this.stopListening(),this.off(),this["super"].destroy.apply(this,arguments)},setGameState:function(){}});return a}),define("game/games/school/view/school_progress_bar",["jquery","underscore","backbone","config","pixi","console"],function(e,t,i,s,n){"use strict";function o(e){this.gameModel=e.gameModel,this.manifest=this.gameModel.manifest,this.progress=0,this.mc=new n.DisplayObjectContainer,this.bgGraphics=this.gameModel.pixiAssetLibrary.newSprite(this.manifest.UI_BAR_BG),this.mc.addChild(this.bgGraphics),this.barFill=this.gameModel.pixiAssetLibrary.newSprite(this.manifest.UI_BAR),this.barFill.x=9,this.barFill.y=8,this.barFill.scale.x=0,this.mc.addChild(this.barFill),this.setProgress=function(e){this.progress=e,this.barFill.scale.x=e},t.bindAll(this,"setProgress")}return o}),define("game/games/baby/view/baby_game_ui_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_ui_view","pixi","console","game/games/school/view/school_progress_bar"],function(e,t,i,s,n,o,r){"use strict";var a=o.extend({scoreLabel:null,livesLabel:null,uiFont:{font:"16px frucade"},uiFontDrop:{font:"16px frucade"},initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.makeUI(),t.bindAll(this,"updateReadOuts"),this.gameModel.on(this.gameModel.EVENTS.UI_UPDATE,this.updateReadOuts)},show:function(){this["super"].show.apply(this,arguments)},updateReadOuts:function(){this.scoreLabel.setText(this.gameModel.score+"/"+this.gameModel.babiesTotal),this.scoreLabelDrop.setText(this.gameModel.score+"/"+this.gameModel.babiesTotal)},makeUI:function(){this.icon=this.gameModel.pixiAssetLibrary.newSprite(this.manifest.UI_BABY_ICON),this.icon.x=10,this.icon.y=5,this.viewContainer.addChild(this.icon),this.scoreLabelDrop=new r.BitmapText("0/0",this.uiFontDrop),this.scoreLabelDrop.x=40,this.scoreLabelDrop.y=10,this.scoreLabelDrop.tint=14942251,this.viewContainer.addChild(this.scoreLabelDrop),this.scoreLabel=new r.BitmapText("0/0",this.uiFont),this.scoreLabel.x=40,this.scoreLabel.y=9,this.viewContainer.addChild(this.scoreLabel)},render:function(){},destroy:function(){this.stopListening(),this.off()}});return a}),define("game/games/baby/view/baby_game_screens_view",["jquery","underscore","backbone","model/loader_collection","config","pixi","game/game_base/view/screens/game_screen_instructions","game/game_base/view/screens/game_screen_intro","game/game_base/view/screens/game_screen_lose","game/game_base/view/screens/game_screen_win","game/game_base/view/screens/game_screen_pause","game/game_base/view/screens/game_screen_cutscene","game/game_base/view/screens/game_screen_countdown","game/game_base/view/game_screens_view","shims/shim_resn_utils","game/game_base/view/screens/game_screen_pause_btn"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m){"use strict";var _=g.extend({initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.createScreens(),this.addEvents()},addEvents:function(){this.listenTo(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE,this.onGameStateChange)},removeEvents:function(){this.stopListening(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE)},onGameStateChange:function(){t.each(this.screens,function(e){e.onGameStateChange()})},createScreens:function(){var e={gameModel:this.gameModel,viewContainer:this.viewContainer,cutsceneMC:{id:"BABY_CUTSCENE_MC"}},t=["BABY_CUTSCENE_1","BABY_CUTSCENE_2"];this.screens=[new r(e),new a(e),new u(e),new h(e),new l(e),new c(e),new m(e),new d(e,t)]},show:function(){this["super"].show.apply(this,arguments)},render:function(){},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}});return _}),define("game/games/baby/sprites/baby_sheet_1",[],function(){"use strict";return{ns:"baby-sheet1",manifest:[{src:"/img/games/baby/baby-sheet1_0_sheet.png",spritesheet:{ns:"baby-sheet1",sprites:[{x:513,y:434,width:61,height:10,id:"baby__bouncer.png",trim:{origWidth:256,origHeight:192,width:61,height:10,offsetX:97,offsetY:165}},{x:578,y:459,width:25,height:24,id:"baby_brown_down.png",trim:{origWidth:36,origHeight:36,width:25,height:24,offsetX:7,offsetY:3}},{x:578,y:359,width:34,height:20,id:"baby_brown_neutral.png",trim:{origWidth:36,origHeight:36,width:34,height:20,offsetX:1,offsetY:6}},{x:578,y:185,width:25,height:34,id:"baby_brown_up.png",trim:{origWidth:36,origHeight:36,width:25,height:34,offsetX:7,offsetY:1}},{x:130,y:260,width:63,height:73,id:"baby_colonel_celebration_1_1.png",trim:{origWidth:256,origHeight:192,width:63,height:73,offsetX:96,offsetY:91}},{x:130,y:412,width:63,height:71,id:"baby_colonel_celebration_1_2.png",trim:{origWidth:256,origHeight:192,width:63,height:71,offsetX:96,offsetY:93}},{x:65,y:260,width:63,height:74,id:"baby_colonel_celebration_1_3.png",trim:{origWidth:256,origHeight:192,width:63,height:74,offsetX:97,offsetY:90}},{x:321,y:0,width:61,height:139,id:"baby_colonel_celebration_1_4.png",trim:{origWidth:256,origHeight:192,width:61,height:139,offsetX:98,offsetY:22}},{x:258,y:0,width:61,height:160,id:"baby_colonel_celebration_1_5.png",trim:{origWidth:256,origHeight:192,width:61,height:160,offsetX:97,offsetY:4}},{x:321,y:141,width:41,height:73,id:"baby_colonel_celebration_2_1.png",trim:{origWidth:256,origHeight:192,width:41,height:73,offsetX:113,offsetY:91}},{x:578,y:74,width:38,height:73,id:"baby_colonel_celebration_2_2.png",trim:{origWidth:256,origHeight:192,width:38,height:73,offsetX:113,offsetY:91}},{x:578,y:0,width:41,height:72,id:"baby_colonel_cry_1.png",trim:{origWidth:256,origHeight:192,width:41,height:72,offsetX:108,offsetY:92}},{x:325,y:260,width:41,height:73,id:"baby_colonel_cry_2.png",trim:{origWidth:256,origHeight:192,width:41,height:73,offsetX:105,offsetY:91}},{x:384,y:336,width:62,height:73,id:"baby_colonel_left_bounce_0.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:19,offsetY:91}},{x:513,y:361,width:62,height:71,id:"baby_colonel_left_bounce_1.png",trim:{origWidth:256,origHeight:192,width:62,height:71,offsetX:19,offsetY:93}},{x:256,y:336,width:62,height:73,id:"baby_colonel_left_bounce_2.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:19,offsetY:91}},{x:384,y:225,width:62,height:74,id:"baby_colonel_left_bounce_3.png",trim:{origWidth:256,origHeight:192,width:62,height:74,offsetX:19,offsetY:91}},{x:320,y:336,width:62,height:73,id:"baby_colonel_left_idle_0.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:19,offsetY:91}},{x:513,y:288,width:62,height:71,id:"baby_colonel_left_idle_1.png",trim:{origWidth:256,origHeight:192,width:62,height:71,offsetX:19,offsetY:93}},{x:64,y:336,width:62,height:73,id:"baby_colonel_left_move_0.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:19,offsetY:91}},{x:513,y:0,width:63,height:70,id:"baby_colonel_left_move_1.png",trim:{origWidth:256,origHeight:192,width:63,height:70,offsetX:41,offsetY:94}},{x:129,y:485,width:63,height:66,id:"baby_colonel_left_move_2.png",trim:{origWidth:256,origHeight:192,width:63,height:66,offsetX:61,offsetY:98}},{x:325,y:412,width:63,height:70,id:"baby_colonel_left_move_3.png",trim:{origWidth:256,origHeight:192,width:63,height:70,offsetX:78,offsetY:94}},{x:384,y:150,width:63,height:73,id:"baby_colonel_left_move_4.png",trim:{origWidth:256,origHeight:192,width:63,height:73,offsetX:96,offsetY:91}},{x:513,y:216,width:63,height:70,id:"baby_colonel_left_move_5.png",trim:{origWidth:256,origHeight:192,width:63,height:70,offsetX:116,offsetY:94}},{x:259,y:485,width:63,height:66,id:"baby_colonel_left_move_6.png",trim:{origWidth:256,origHeight:192,width:63,height:66,offsetX:126,offsetY:98}},{x:195,y:412,width:63,height:70,id:"baby_colonel_left_move_7.png",trim:{origWidth:256,origHeight:192,width:63,height:70,offsetX:149,offsetY:94}},{x:449,y:75,width:62,height:73,id:"baby_colonel_left_move_8.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:176,offsetY:91}},{x:260,y:260,width:63,height:73,id:"baby_colonel_mid_bounce_0.png",trim:{origWidth:256,origHeight:192,width:63,height:73,offsetX:96,offsetY:91}},{x:65,y:412,width:63,height:71,id:"baby_colonel_mid_bounce_1.png",trim:{origWidth:256,origHeight:192,width:63,height:71,offsetX:96,offsetY:93}},{x:195,y:260,width:63,height:73,id:"baby_colonel_mid_bounce_2.png",trim:{origWidth:256,origHeight:192,width:63,height:73,offsetX:96,offsetY:91}},{x:0,y:260,width:63,height:74,id:"baby_colonel_mid_bounce_3.png",trim:{origWidth:256,origHeight:192,width:63,height:74,offsetX:96,offsetY:90}},{x:384,y:75,width:63,height:73,id:"baby_colonel_mid_idle_0.png",trim:{origWidth:256,origHeight:192,width:63,height:73,offsetX:96,offsetY:91}},{x:0,y:412,width:63,height:71,id:"baby_colonel_mid_idle_1.png",trim:{origWidth:256,origHeight:192,width:63,height:71,offsetX:96,offsetY:93}},{x:192,y:336,width:62,height:73,id:"baby_colonel_right_bounce_0.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:176,offsetY:91}},{x:449,y:300,width:62,height:71,id:"baby_colonel_right_bounce_1.png",trim:{origWidth:256,origHeight:192,width:62,height:71,offsetX:176,offsetY:92}},{x:449,y:150,width:62,height:73,id:"baby_colonel_right_bounce_2.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:176,offsetY:91}},{x:0,y:336,width:62,height:74,id:"baby_colonel_right_bounce_3.png",trim:{origWidth:256,origHeight:192,width:62,height:74,offsetX:176,offsetY:90}},{x:128,y:336,width:62,height:73,id:"baby_colonel_right_idle_0.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:176,offsetY:91}},{x:0,y:485,width:62,height:71,id:"baby_colonel_right_idle_1.png",trim:{origWidth:256,origHeight:192,width:62,height:71,offsetX:176,offsetY:93}},{x:449,y:0,width:62,height:73,id:"baby_colonel_right_move_0.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:19,offsetY:91}},{x:260,y:412,width:63,height:70,id:"baby_colonel_right_move_1.png",trim:{origWidth:256,origHeight:192,width:63,height:70,offsetX:39,offsetY:94}},{x:194,y:485,width:63,height:66,id:"baby_colonel_right_move_2.png",trim:{origWidth:256,origHeight:192,width:63,height:66,offsetX:61,offsetY:98}},{x:390,y:412,width:63,height:70,id:"baby_colonel_right_move_3.png",trim:{origWidth:256,origHeight:192,width:63,height:70,offsetX:78,offsetY:94}},{x:384,y:0,width:63,height:73,id:"baby_colonel_right_move_4.png",trim:{origWidth:256,origHeight:192,width:63,height:73,offsetX:96,offsetY:91}},{x:513,y:72,width:63,height:70,id:"baby_colonel_right_move_5.png",trim:{origWidth:256,origHeight:192,width:63,height:70,offsetX:120,offsetY:94}},{x:64,y:485,width:63,height:66,id:"baby_colonel_right_move_6.png",trim:{origWidth:256,origHeight:192,width:63,height:66,offsetX:126,offsetY:98}},{x:513,y:144,width:63,height:70,id:"baby_colonel_right_move_7.png",trim:{origWidth:256,origHeight:192,width:63,height:70,offsetX:155,offsetY:94}},{x:449,y:225,width:62,height:73,id:"baby_colonel_right_move_8.png",trim:{origWidth:256,origHeight:192,width:62,height:73,offsetX:176,offsetY:91}},{x:578,y:433,width:25,height:24,id:"baby_dark_down.png",trim:{origWidth:36,origHeight:36,width:25,height:24,offsetX:7,offsetY:3}},{x:578,y:337,width:34,height:20,id:"baby_dark_neutral.png",trim:{origWidth:36,origHeight:36,width:34,height:20,offsetX:1,offsetY:6}},{x:578,y:149,width:25,height:34,id:"baby_dark_up.png",trim:{origWidth:36,origHeight:36,width:25,height:34,offsetX:7,offsetY:1}},{x:578,y:485,width:21,height:16,id:"baby_icon.png",trim:{origWidth:26,origHeight:25,width:21,height:16,offsetX:3,offsetY:4}},{x:578,y:407,width:25,height:24,id:"baby_pink_down.png",trim:{origWidth:36,origHeight:36,width:25,height:24,offsetX:7,offsetY:3}},{x:578,y:315,width:34,height:20,id:"baby_pink_neutral.png",trim:{origWidth:36,origHeight:36,width:34,height:20,offsetX:1,offsetY:6}},{x:578,y:257,width:25,height:34,id:"baby_pink_up.png",trim:{origWidth:36,origHeight:36,width:25,height:34,offsetX:7,offsetY:1}},{x:578,y:381,width:25,height:24,id:"baby_tan_down.png",trim:{origWidth:36,origHeight:36,width:25,height:24,offsetX:7,offsetY:3}},{x:578,y:293,width:34,height:20,id:"baby_tan_neutral.png",trim:{origWidth:36,origHeight:36,width:34,height:20,offsetX:1,offsetY:6}},{x:578,y:221,width:25,height:34,id:"baby_tan_up.png",trim:{origWidth:36,origHeight:36,width:25,height:34,offsetX:7,offsetY:1}},{x:0,y:0,width:256,height:192,id:"bg.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:605,y:149,width:13,height:11,id:"pause_topright.png",trim:{origWidth:26,origHeight:25,width:13,height:11,offsetX:2,offsetY:13}},{x:0,y:227,width:299,height:31,id:"rescuer.png",trim:{origWidth:300,origHeight:33,width:299,height:31,offsetX:1,offsetY:1}},{x:0,y:194,width:299,height:31,id:"rescuer_catch.png",trim:{origWidth:300,origHeight:33,width:299,height:31,offsetX:1,offsetY:1}}]},width:619,height:556}]}}),define("game/games/baby/model/baby_asset_manifest",["underscore","game/games/baby/sprites/baby_sheet_1"],function(e,t){var i=e.flatten([t.manifest],!0);e.each(i,function(e){e.spritesheet&&(e.pixijs=e.spritesheet)});var s=[{src:"/font/frucade.xml",id:"font/frucade.xml",type:"xml",pixijs:{font:{name:"frucade",bitmap:"font/frucade.png"}}},{id:"AUDIO_MUSIC",priority:1,type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_music.mp3"},{id:"AUDIO_PLAYER_MOVE_0",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_move01.mp3"},{id:"AUDIO_PLAYER_MOVE_1",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_move02.mp3"},{id:"AUDIO_PLAYER_MOVE_2",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_move03.mp3"},{id:"AUDIO_BABY_BOUNCE_0",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_bounce01.mp3"},{id:"AUDIO_BABY_BOUNCE_1",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_bounce02.mp3"},{id:"AUDIO_BABY_BOUNCE_2",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_bounce03.mp3"},{id:"AUDIO_BABY_LAUGH_0",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_baby_laugh_01.mp3"},{id:"AUDIO_BABY_LAUGH_1",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_baby_laugh_02.mp3"},{id:"AUDIO_BABY_LAUGH_2",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_baby_laugh_03.mp3"},{id:"AUDIO_BABY_LAUGH_3",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_baby_laugh_04.mp3"},{id:"AUDIO_BABY_FAIL_0",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_baby_thumpcry_01.mp3"},{id:"AUDIO_BABY_FAIL_1",type:"sound",volume:1,src:"/audio/games/baby/baby_bounce_baby_thumpcry_02.mp3"}];
s=s.concat(i);var n={frucade:{id:"frucade",type:"FONT",url:"font/frucade.xml"},UI_BABY_ICON:{id:"UI_BABY_ICON",type:"SPRITE",url:"baby_icon.png"},COLONEL_WIN_1_MC:{id:"COLONEL_WIN_1_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_celebration_1_1.png","baby_colonel_celebration_1_2.png","baby_colonel_celebration_1_3.png","baby_colonel_celebration_1_4.png","baby_colonel_celebration_1_5.png"]},COLONEL_WIN_2_MC:{id:"COLONEL_WIN_2_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_celebration_2_1.png","baby_colonel_celebration_2_1.png","baby_colonel_celebration_2_2.png","baby_colonel_celebration_2_2.png"]},COLONEL_LOSE_MC:{id:"COLONEL_LOSE_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_cry_1.png","baby_colonel_cry_2.png"]},COLONEL_MID_IDLE_MC:{id:"COLONEL_MID_IDLE_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_mid_idle_0.png","baby_colonel_mid_idle_0.png","baby_colonel_mid_idle_1.png"]},COLONEL_LEFT_IDLE_MC:{id:"COLONEL_LEFT_IDLE_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_left_idle_0.png","baby_colonel_left_idle_0.png","baby_colonel_left_idle_1.png"]},COLONEL_RIGHT_IDLE_MC:{id:"COLONEL_RIGHT_IDLE_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_right_idle_0.png","baby_colonel_right_idle_0.png","baby_colonel_right_idle_1.png"]},COLONEL_MID_BOUNCE_MC:{id:"COLONEL_MID_BOUNCE_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_mid_bounce_0.png","baby_colonel_mid_bounce_1.png","baby_colonel_mid_bounce_2.png","baby_colonel_mid_bounce_3.png"]},COLONEL_LEFT_BOUNCE_MC:{id:"COLONEL_LEFT_BOUNCE_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_left_bounce_0.png","baby_colonel_left_bounce_1.png","baby_colonel_left_bounce_2.png","baby_colonel_left_bounce_3.png"]},COLONEL_RIGHT_BOUNCE_MC:{id:"COLONEL_RIGHT_BOUNCE_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_right_bounce_0.png","baby_colonel_right_bounce_1.png","baby_colonel_right_bounce_2.png","baby_colonel_right_bounce_3.png"]},COLONEL_MOVE_LEFT_MC:{id:"COLONEL_MOVE_LEFT_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_left_move_0.png","baby_colonel_left_move_1.png","baby_colonel_left_move_2.png","baby_colonel_left_move_3.png","baby_colonel_left_move_4.png","baby_colonel_left_move_5.png","baby_colonel_left_move_6.png","baby_colonel_left_move_7.png","baby_colonel_left_move_8.png"]},COLONEL_MOVE_RIGHT_MC:{id:"COLONEL_MOVE_RIGHT_MC",type:"MOVIECLIP",speedRatio:.5,frameNames:["baby_colonel_right_move_0.png","baby_colonel_right_move_1.png","baby_colonel_right_move_2.png","baby_colonel_right_move_3.png","baby_colonel_right_move_4.png","baby_colonel_right_move_5.png","baby_colonel_right_move_6.png","baby_colonel_right_move_7.png","baby_colonel_right_move_8.png"]},BABY_PINK_NEUTRAL:{id:"BABY_PINK_NEUTRAL",type:"SPRITE",url:"baby_pink_neutral.png"},BABY_PINK_UP:{id:"BABY_PINK_UP",type:"SPRITE",url:"baby_pink_up.png"},BABY_PINK_DOWN:{id:"BABY_PINK_DOWN",type:"SPRITE",url:"baby_pink_down.png"},BABY_TAN_NEUTRAL:{id:"BABY_TAN_NEUTRAL",type:"SPRITE",url:"baby_tan_neutral.png"},BABY_TAN_UP:{id:"BABY_TAN_UP",type:"SPRITE",url:"baby_tan_up.png"},BABY_TAN_DOWN:{id:"BABY_TAN_DOWN",type:"SPRITE",url:"baby_tan_down.png"},BABY_BROWN_NEUTRAL:{id:"BABY_BROWN_NEUTRAL",type:"SPRITE",url:"baby_brown_neutral.png"},BABY_BROWN_UP:{id:"BABY_BROWN_UP",type:"SPRITE",url:"baby_brown_up.png"},BABY_BROWN_DOWN:{id:"BABY_BROWN_DOWN",type:"SPRITE",url:"baby_brown_down.png"},BABY_DARK_NEUTRAL:{id:"BABY_DARK_NEUTRAL",type:"SPRITE",url:"baby_dark_neutral.png"},BABY_DARK_UP:{id:"BABY_DARK_UP",type:"SPRITE",url:"baby_dark_up.png"},BABY_DARK_DOWN:{id:"BABY_DARK_DOWN",type:"SPRITE",url:"baby_dark_down.png"},RESCUER:{id:"RESCUER",type:"SPRITE",url:"rescuer.png"},RESCUER_CATCH:{id:"RESCUER_CATCH",type:"SPRITE",url:"rescuer_catch.png"},BACKGROUND:{id:"BACKGROUND",type:"SPRITE",url:"bg.png"}};for(var o in n)n[o].ns=t.ns;for(var r in n){var a=n[r];if(a.url&&(a.ns_url=a.ns+a.url),a.frameNames){a.ns_frameNames=[];for(var h=0,l=a.frameNames.length;l>h;h++)a.ns_frameNames.push(a.ns+a.frameNames[h])}}return n.assetManifest=s,n}),define("game/games/baby/baby_game_main",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/game_main","game/games/baby/model/baby_game_model","game/games/baby/view/baby_game_view","game/games/baby/view/baby_game_ui_view","game/games/baby/view/baby_game_screens_view","game/game_config","game/games/baby/model/baby_asset_manifest"],function(e,t,i,s,n,o,r,a,h,l,c,d){"use strict";var u=o.extend({initialize:function(e){this["super"]=this.constructor.__super__;var i=t.extend({},e),s=new r({gameShellModel:e.gameShellModel,gameInputModel:e.gameInputModel,gameId:e.gameId,gameIndex:e.gameIndex,manifest:d});i.gameModel=s,i.gameView=new a({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameUIView=new h({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameScreensView=new l({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),this["super"].initialize.apply(this,[i])}});return u}),define("game/games/hangry/model/hangry_player_states",[],function(){"use strict";return{SERVE:"serve",PREP:"prep",RUN_TO_KITCHEN:"RUN_TO_KITCHEN",RUN_TO_CUSTOMERS:"RUN_TO_CUSTOMERS",RUN_UP:"RUN_UP",RUN_DOWN:"RUN_DOWN",LOSE:"LOSE",WIN:"WIN"}}),define("game/games/hangry/model/hangry_customer_states",[],function(){"use strict";return{WAITING:"waiting",EATING:"eating",SAD:"hangry",HANGRY:"sad"}}),define("game/games/hangry/model/hangry_game_config",["jquery","underscore","backbone","model/loader_collection","config"],function(e,t,i){"use strict";return i.Model.extend({initialValues:{gameDuration:91,medalMealCount:{gold:60,silver:40,bronze:20},showEndScreenDelayTimeWin:5,showEndScreenDelayTimeLose:5,showEndScreenDelayWin:2,showEndScreenDelayLose:2,restartDelay:4,enableTimer:!0,showScore:!0,useSeparatePrepKeys:!0,allowNegativeScore:!0,hitScoreInc:1,missScoreDec:1,penaliseMisses:!0,livesMax:3,kitchenPosition:{x:54,y:17},kitchenEndPosition:{x:59,y:82},servePositions:[{x:-1,y:3},{x:-1,y:43},{x:-1,y:83}],colonelKitchenTransitionDuration:.15,colonelServeTransitionDuration:.2,colonelServeDownTransitionDuration:.1,colonelServeUpTransitionDuration:.2,customerCharTypes:6,customerSpeeds:[10,15,20,25,30,40],customerMinSpeed:2,customerMaxSpeed:7,customerAddDelay:1,customerAddDelayVar:.5,customerAddDelayEnd:.2,customerAddDelayEndVar:.2,customerAddDelayEndAccel:.05,customerInitialAddDelay:1,customerEatingDuration:.2,customerSadDelay:1.5,customerHangryLeaveDuration:2,customerMaxCount:18,customerStartX:290,customerSlideAmountX:40,customerMinSlideAmountX:185,customerHitOffsetX:13,customerHitWidth:20,customerStartPositions:[{x:-1,y:0},{x:-1,y:40},{x:-1,y:80}],scoreLossGraphicOffset:{x:230,y:30},scoreWinGraphicOffset:{x:20,y:0},maxWinLabelX:240,showPrepProgress:!0,punishBadPrep:!1,allowSlowerPrep:!1,prepDecaySpeed:0,prepAmountInc:1,prepAmountIncSlow:.25,prepAmountDec:.5,counterOffsetX:-60,singleTapPrep:!1,cycleToPrepTable:!1,cyclePrepWhenEmpty:!0,scenePanDuration:.3,prepEnableDelay:.2,serveEnableDelay:.2,scenePrepPanX:0,sceneServePanX:-60,colonelServePositionX:80,throwGestureDuration:.2,mealThrowDuration:1,minNextMealDelay:.1,useSeparatePrepStages:!0,frierStage2ProgThreshold:.33,numPrepStages:3,maxAvailableMeals:5,mealMaxCount:10,mealStartX:122,mealEndPositionX:341,mealOffsetY:-12,mealStartPositions:[{x:-1,y:50},{x:-1,y:90},{x:-1,y:130}]},initialize:function(){this.reset()},reset:function(){t.extend(this,this.initialValues)}})}),define("game/games/hangry/model/hangry_score_model",["jquery","underscore","backbone","model/loader_collection","config"],function(e,t,i){"use strict";return i.Model.extend({initialValues:{score:0},initialize:function(){this.reset()},reset:function(){t.extend(this,this.initialValues)}})}),define("game/games/hangry/model/hangry_game_model",["jquery","underscore","backbone","model/loader_collection","config","TweenMax","game/game_base/model/game_model","game/games/hangry/model/hangry_player_states","game/games/hangry/model/hangry_customer_states","game/games/hangry/model/hangry_game_config","game/games/hangry/model/hangry_score_model","console","view/common/communicator"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";return r.extend({initialized:!1,scoreModel:null,initialPlayerState:null,mealModels:[],customerModels:[],throwAudioIndex:0,fryAudioIndex:0,chompAudioIndex:0,customersLines:null,customersLine1:null,customersLine2:null,customersLine3:null,colonelKitchenTransition:{amount:0},colonelServeTableTransition:{amount:0},easeNone:window.Linear.easeNone,initialValues:t.defaults({gameTime:0,gameTimeRemaining:0,colonelState:a.SERVE,colonelThrowing:!1,inPrepStateA:!0,curPrepStageIndex:0,sceneTransitioning:!1,mealStartPositionIndex:0,livesLost:0,servePosition:0,lastServePosition:0,minNextMealTime:0,availableMeals:0,mealIndex:0,customerIndex:0,curSpeedMultiplier:1},r.prototype.initialValues),defaults:t.defaults({},r.prototype.defaults),EVENTS:t.defaults({SET_TO_PREP_MODE:"SET_TO_PREP_MODE",SET_TO_SERVE_MODE:"SET_TO_SERVE_MODE",MEAL_ADDED:"MEAL_ADDED",CUSTOMER_ADDED:"CUSTOMER_ADDED",CUSTOMER_MISSED:"CUSTOMER_MISSED",CUSTOMER_SERVED:"CUSTOMER_SERVED"},r.prototype.EVENTS),initialize:function(e){this["super"]=this.constructor.__super__,this.gameConfig=new l,this.gameInputModel=e.gameInputModel,this.scoreModel=new c,this["super"].initialize.apply(this,arguments),this.gameTweenMax.resume(),this.initialPlayerState=this.colonelState,t.bindAll(this,"addCustomer","resetColonelState","enableScene","mealLost","endThrow","start","onKitchenTransitionComplete","onServeTransitionComplete","onServeTableTransitionComplete")},load:function(){this["super"].load.apply(this,arguments)},onLoadComplete:function(){this["super"].onLoadComplete.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.initialized||(this.initialized=!0,this.makeMeals(),this.makeCustomers())},reset:function(){this["super"].reset.apply(this,arguments),this.resetModel(),this.wasTimeup=!1,this.scoreModel.reset(),this.killTweens(),this.clearMeals(),this.resetColonelState(),this.resetCustomers(),this.clearCustomers(),this.updateScore()},resetColonelState:function(){this.setColonelState(this.initialPlayerState)},resetCustomers:function(){this.customersLine1=[],this.customersLine2=[],this.customersLine3=[],this.customersLines=[this.customersLine1,this.customersLine2,this.customersLine3]},killTweens:function(){this.gameTweenMax.killDelayedCallsTo(this.addCustomer),this.gameTweenMax.killDelayedCallsTo(this.resetColonelState),this.gameTweenMax.killDelayedCallsTo(this.endThrow),this.gameTweenMax.killTweensOf(this.colonelKitchenTransition),this.gameTweenMax.killTweensOf(this.colonelServeTableTransition),this.sceneTransitioning=!1,this.stopMeals()},calculateMedalIndex:function(){this.medalIndex=this.getMedalIndex()},getMedalIndex:function(){var e,t=this.scoreModel.score;return e=t>=this.gameConfig.medalMealCount.gold?3:t>=this.gameConfig.medalMealCount.silver?2:t>=this.gameConfig.medalMealCount.bronze?1:0},start:function(){this["super"].start.apply(this,arguments)},startGame:function(){this["super"].startGame.apply(this,arguments),this.gameTweenMax.delayedCall(this.gameConfig.customerInitialAddDelay,this.addCustomer),this.playGameMusic()},playGameMusic:function(){this.gameSoundModel.play(this.manifest.AUDIO_MUSIC.id,{loop:0})},buttonLeftPress:function(){this.colonelState===a.SERVE||this.gameConfig.cycleToPrepTable?this.toggleColonelPosition():this.colonelState===a.PREP&&this.prepA()},buttonRightPress:function(){this.colonelState===a.SERVE?this.throwMeal():this.colonelState===a.PREP&&this.prepB()},buttonLeftRelease:function(){},buttonRightRelease:function(){},toggleColonelPosition:function(){if(this.isPlaying()&&!this.sceneTransitioning)if(this.gameConfig.cycleToPrepTable&&this.colonelState===a.PREP)this.setToServeMode(),this.servePosition=0;else if(this.colonelState===a.SERVE)if(this.gameConfig.cycleToPrepTable&&this.availableMeals<=0&&this.gameConfig.cyclePrepWhenEmpty)this.setToPrepMode();else switch(this.lastServePosition=this.servePosition,this.servePosition){case 0:this.servePosition=1,this.colonelServeTableTransition.amount=0,this.gameTweenMax.killTweensOf(this.colonelServeTableTransition),this.gameTweenMax.to(this.colonelServeTableTransition,this.gameConfig.colonelServeDownTransitionDuration,{amount:1,ease:this.easeNone,onComplete:this.onServeTableTransitionComplete}),this.setColonelState(a.RUN_DOWN);break;case 1:this.servePosition=2,this.colonelServeTableTransition.amount=0,this.gameTweenMax.killTweensOf(this.colonelServeTableTransition),this.gameTweenMax.to(this.colonelServeTableTransition,this.gameConfig.colonelServeDownTransitionDuration,{amount:1,ease:this.easeNone,onComplete:this.onServeTableTransitionComplete}),this.setColonelState(a.RUN_DOWN);break;case 2:this.gameConfig.cycleToPrepTable?this.setToPrepMode():(this.servePosition=0,this.colonelServeTableTransition.amount=0,this.gameTweenMax.killTweensOf(this.colonelServeTableTransition),this.gameTweenMax.to(this.colonelServeTableTransition,this.gameConfig.colonelServeUpTransitionDuration,{amount:1,ease:this.easeNone,onComplete:this.onServeTableTransitionComplete}),this.setColonelState(a.RUN_UP))}},prepA:function(){!this.isPlaying()||this.gameConfig.singleTapPrep||this.sceneTransitioning||(this.gameConfig.useSeparatePrepKeys?this.availableMeals>=this.gameConfig.maxAvailableMeals&&(this.curPrepStageIndex++,this.curPrepStageIndex>=this.gameConfig.numPrepStages?this.setToServeMode():this.availableMeals=0):this.inPrepStateA?(this.inPrepStateA=!1,this.incPrepAmount()):this.gameConfig.punishBadPrep?this.decPrepAmount():this.gameConfig.allowSlowerPrep&&this.incPrepAmount(!0))},prepB:function(){this.isPlaying()&&!this.sceneTransitioning&&(this.gameConfig.useSeparatePrepKeys?this.incPrepAmount():!this.inPrepStateA||this.gameConfig.singleTapPrep||this.gameConfig.cycleToPrepTable?(this.inPrepStateA=!0,this.incPrepAmount()):this.gameConfig.punishBadPrep?this.decPrepAmount():this.gameConfig.allowSlowerPrep&&this.incPrepAmount(!0))},incPrepAmount:function(e){this.availableMeals<this.gameConfig.maxAvailableMeals&&(this.availableMeals+=e?this.gameConfig.prepAmountIncSlow:this.gameConfig.prepAmountInc,this.playFryAudio(),this.availableMeals>=this.gameConfig.maxAvailableMeals&&this.playDingAudio()),this.gameConfig.useSeparatePrepKeys?this.availableMeals>this.gameConfig.maxAvailableMeals&&(this.availableMeals=this.gameConfig.maxAvailableMeals):this.gameConfig.cycleToPrepTable||(this.gameConfig.useSeparatePrepStages?this.availableMeals>this.gameConfig.maxAvailableMeals&&(this.availableMeals=this.gameConfig.maxAvailableMeals,this.curPrepStageIndex++,this.curPrepStageIndex>=this.gameConfig.numPrepStages?this.setToServeMode():this.availableMeals=0):this.availableMeals>=this.gameConfig.maxAvailableMeals&&(this.availableMeals=this.gameConfig.maxAvailableMeals,this.setToServeMode()))},decPrepAmount:function(){this.availableMeals-=this.gameConfig.prepAmountDec,this.availableMeals<0&&(this.availableMeals=0)},makeMeals:function(){this.mealModels=[];for(var e=0,t=this.gameConfig.mealMaxCount;t>e;e++){var i={index:e,active:!1,state:0,x:0,y:0};this.mealModels.push(i)}},makeCustomers:function(){this.customerModels=[];for(var e=0,t=this.gameConfig.customerMaxCount;t>e;e++){var i={state:h.WAITING,index:e,active:!1,x:0,y:0};i.typeIndex=e%this.gameConfig.customerCharTypes,i.customerSpeed=this.gameConfig.customerSpeeds[i.typeIndex],this.customerModels.push(i)}},throwMeal:function(){if(this.isPlaying()&&!this.sceneTransitioning&&this.colonelState===a.SERVE&&this.time>this.minNextMealTime&&this.availableMeals>0){this.mealIndex++,this.playThrowAudio(),this.colonelThrowing=!0,this.gameTweenMax.killDelayedCallsTo(this.endThrow),this.gameTweenMax.delayedCall(this.gameConfig.throwGestureDuration,this.endThrow),this.minNextMealTime=this.time+this.gameConfig.minNextMealDelay,this.mealIndex>this.mealModels.length-1&&(this.mealIndex=0);var e=this.mealIndex,t=this.mealModels[e];t.active=!0,t.eating=!1,this.setMealState(t,0),this.availableMeals--,this.availableMeals<=0&&(this.availableMeals=0,this.gameConfig.cycleToPrepTable||this.setToPrepMode())}},endThrow:function(){this.colonelThrowing=!1},setToPrepMode:function(){this.sceneTransitioning=!0,this.colonelThrowing=!1,this.gameTweenMax.delayedCall(this.gameConfig.prepEnableDelay,this.enableScene),this.inPrepStateA=!0,this.setColonelState(a.RUN_TO_KITCHEN),this.gameTweenMax.killTweensOf(this.colonelKitchenTransition),this.gameTweenMax.to(this.colonelKitchenTransition,this.gameConfig.colonelKitchenTransitionDuration,{amount:1,ease:this.easeNone,onComplete:this.onKitchenTransitionComplete}),this.curPrepStageIndex=0,this.trigger(this.EVENTS.SET_TO_PREP_MODE)},setToServeMode:function(){this.colonelThrowing=!1,this.servePosition=0,this.sceneTransitioning=!0,this.gameTweenMax.killDelayedCallsTo(this.enableScene),this.gameTweenMax.delayedCall(this.gameConfig.serveEnableDelay,this.enableScene),this.setColonelState(a.RUN_TO_CUSTOMERS),this.gameTweenMax.killTweensOf(this.colonelKitchenTransition),this.gameTweenMax.to(this.colonelKitchenTransition,this.gameConfig.colonelServeTransitionDuration,{amount:0,ease:this.easeNone,onComplete:this.onServeTransitionComplete}),this.trigger(this.EVENTS.SET_TO_SERVE_MODE)},setColonelState:function(e){this.state!==this.GAMESTATE_GAME_OUTRO&&(this.colonelState=e)},onKitchenTransitionComplete:function(){this.setColonelState(a.PREP)},onServeTransitionComplete:function(){this.setColonelState(a.SERVE)},onServeTableTransitionComplete:function(){this.setColonelState(a.SERVE)},enableScene:function(){this.sceneTransitioning=!1},setMealState:function(e,t){e.state=t,this.gameTweenMax.killTweensOf(e);var i=this.gameConfig.mealThrowDuration;if(0===t){var s={};s.x=this.gameConfig.mealEndPositionX,this.mealStartPositionIndex=this.servePosition;var n=this.gameConfig.mealStartPositions[this.mealStartPositionIndex],o={};o.x=n.x,o.y=n.y,o.x=this.gameConfig.mealStartX,o.y+=this.gameConfig.mealOffsetY,e.positionIndex=this.servePosition,e.customersLine=this.customersLines[e.positionIndex],e.x=o.x,e.y=o.y,this.gameTweenMax.to(e,i,{x:s.x,ease:this.easeNone,onComplete:this.mealLost,onCompleteParams:[e,e.positionIndex]}),this.trigger(this.EVENTS.MEAL_ADDED,e)}},mealLost:function(e,t){this.playSmashAudio(),this.gameConfig.penaliseMisses&&this.decScore(),this.trigger(this.EVENTS.CUSTOMER_MISSED,t),this.removeMeal(e)},setNextCustomerAddTime:function(){this.gameTweenMax.killTweensOf(this.addCustomer);var e=Math.min(1,this.gameTime/this.gameConfig.gameDuration),t=this.gameConfig.customerAddDelay+(this.gameConfig.customerAddDelayEnd-this.gameConfig.customerAddDelay)*e,i=this.gameConfig.customerAddDelayVar+(this.gameConfig.customerAddDelayEndVar-this.gameConfig.customerAddDelayVar)*e,s=t+Math.random()*i;this.gameTweenMax.delayedCall(s,this.addCustomer)},addCustomer:function(){if(this.isPlaying()){this.curSpeedMultiplier=this.gameConfig.customerMinSpeed+(this.gameConfig.customerMaxSpeed-this.gameConfig.customerMinSpeed)*Math.min(1,this.gameTime/this.gameConfig.gameDuration);var e=Math.floor(Math.random()*this.gameConfig.customerStartPositions.length),t=this.gameConfig.customerStartPositions[e];t.x=this.gameConfig.customerStartX;var i;switch(e){case 0:i=this.customersLine1;break;case 1:i=this.customersLine2;break;case 2:i=this.customersLine3}if(0===i.length||i[i.length-1].x<this.gameConfig.customerStartX-this.gameConfig.customerSlideAmountX){var s=this.customerIndex,n=this.customerModels[s];this.removeCustomer(n),n.active=!0,n.meal=null,n.state=h.WAITING,n.lineIndex=e,n.customerSpeedMultiplier=this.curSpeedMultiplier,this.customerIndex++,this.customerIndex>this.customerModels.length-1&&(this.customerIndex=0),n.customersLine=i,n.customersLine.push(n),n.x=t.x,n.y=t.y,this.trigger(this.EVENTS.CUSTOMER_ADDED,n)}this.setNextCustomerAddTime(!0)}else this.setNextCustomerAddTime(!1)},updateCustomers:function(){for(var e,t,i,s=0;s<this.customersLines.length;s++){e=this.customersLines[s];for(var n=0;n<e.length;n++)if(i=n>0?e[n-1]:{x:-1e6},t=e[n],t.active&&this.isPlaying())switch(t.state){case h.WAITING:t.x>this.gameConfig.customerMinSlideAmountX+this.gameConfig.counterOffsetX?(t.x>i.x+this.gameConfig.customerSlideAmountX&&(t.x-=this.timeDelta*t.customerSpeed*t.customerSpeedMultiplier*this.pixelScaleMultiplier),t.x<i.x+this.gameConfig.customerSlideAmountX&&(t.x=i.x+this.gameConfig.customerSlideAmountX)):(t.state=h.HANGRY,t.hangrySadTime=this.time+3*this.getAnimationDuration(this.manifest.CUSTOMER_1_BASH_MC)),t.x<this.gameConfig.customerMinSlideAmountX+this.gameConfig.counterOffsetX&&(t.x=this.gameConfig.customerMinSlideAmountX+this.gameConfig.counterOffsetX);break;case h.EATING:this.time>t.eatingEndTime&&(this.removeMeal(t.meal),this.removeCustomer(t));break;case h.HANGRY:this.time>t.hangrySadTime&&(t.state=h.SAD,t.hangryLeaveTime=this.time+2*this.getAnimationDuration(this.manifest.CUSTOMER_1_CRY_MC));break;case h.SAD:this.time>t.hangryLeaveTime&&this.customerLeave(t)}}},clearCustomers:function(){for(var e,t=0,i=this.customerModels.length;i>t;t++)e=this.customerModels[t],e.active&&(e.active=!1)},incScore:function(){this.scoreModel.score+=this.gameConfig.hitScoreInc,this.updateScore()},decScore:function(){this.scoreModel.score-=this.gameConfig.missScoreDec,this.updateScore()},customerLeave:function(e){this.isPlaying()&&(this.livesLost++,this.updateScore(),this.livesLost>=this.gameConfig.livesMax?this.determineOutro():this.removeCustomer(e))},determineOutro:function(){this.getMedalIndex()>0?this.colonelWin():this.colonelLose()},colonelLose:function(){var e=this.wasTimeup,t=e?this.gameConfig.showEndScreenDelayTimeLose:this.gameConfig.showEndScreenDelayLose;this.playFailSound(),this.setColonelState(a.LOSE),this.showOutro(t)},colonelWin:function(){var e=this.wasTimeup,t=e?this.gameConfig.showEndScreenDelayTimeWin:this.gameConfig.showEndScreenDelayWin;this.clearCustomers(),this.setColonelState(a.WIN),this.showOutro(t)},showOutro:function(e){this.state!==this.GAMESTATE_GAME_OUTRO&&(this.setGameState(this.GAMESTATE_GAME_OUTRO),this.gameTweenMax.killDelayedCallsTo(this.resolveWinOrLose),this.gameTweenMax.delayedCall(e,this.resolveWinOrLose))},timeUp:function(){this.wasTimeup=!0,this.determineOutro(),this.trigger(this.EVENTS.TIME_UP)},stopMeals:function(){for(var e=0,t=this.mealModels.length;t>e;e++){var i=this.mealModels[e];this.gameTweenMax.killTweensOf(i)}},clearMeals:function(){for(var e=0,t=this.mealModels.length;t>e;e++){var i=this.mealModels[e];this.gameTweenMax.killTweensOf(i),i.active=!1}},removeMeal:function(e){e.active=!1},removeCustomer:function(e){if(e.active=!1,e.customersLine){var t=e.customersLine.indexOf(e);e.customersLine.splice(t,1),e.customersLine=null}},checkCustomerEating:function(){for(var e=0,t=this.mealModels.length;t>e;e++){var i=this.mealModels[e];if(i.active&&!i.eating)for(var s,n=i.customersLine,o=0;o<n.length;o++)s=n[o],!s.meal&&i.x>=s.x+this.gameConfig.customerHitOffsetX&&i.x<=s.x+this.gameConfig.customerHitOffsetX+this.gameConfig.customerHitWidth&&(this.gameTweenMax.killTweensOf(i),i.eating=!0,i.active=!1,this.trigger(this.EVENTS.CUSTOMER_SERVED,s,i.positionIndex),this.playChompAudio(),this.incScore(i,s),s.state=h.EATING,s.meal=i,s.eatingEndTime=this.time+this.gameConfig.customerEatingDuration)}},frameTick:function(){this["super"].frameTick.apply(this,arguments),this.isPlaying()&&(this.gameTime+=this.timeDelta,this.gameTimeRemaining=Math.max(0,this.gameConfig.gameDuration-this.gameTime),this.gameConfig.enableTimer&&this.gameTimeRemaining<=0&&(this.gameTimeRemaining=0,this.timeUp()),this.colonelState===a.PREP?(this.availableMeals-=this.gameConfig.prepDecaySpeed*this.timeDelta,this.availableMeals<0&&(this.availableMeals=0)):this.colonelState===a.SERVE&&this.availableMeals<=0&&(this.availableMeals=0,this.gameConfig.cycleToPrepTable||this.setToPrepMode()),this.updateCustomers(),this.checkCustomerEating()),this.updateScore()},updateScore:function(){!this.gameConfig.allowNegativeScore&&this.scoreModel.score<0&&(this.scoreModel.score=0)},playThrowAudio:function(){var e=[this.manifest.AUDIO_THROW_0.id,this.manifest.AUDIO_THROW_1.id];this.throwAudioIndex++;var t=Math.floor(Math.random()*e.length),i=e[t];this.gameSoundModel.play(i,{loop:0})},playFryAudio:function(){var e=[this.manifest.AUDIO_FRY_0.id,this.manifest.AUDIO_FRY_1.id];this.fryAudioIndex++;var t=this.fryAudioIndex%e.length,i=e[t];this.gameSoundModel.play(i,{loop:0})},playDingAudio:function(){this.gameSoundModel.play(this.manifest.AUDIO_DING.id,{loop:0})},playChompAudio:function(){var e=[this.manifest.AUDIO_CHOMP_0.id,this.manifest.AUDIO_CHOMP_1.id];this.chompAudioIndex++;var t=this.chompAudioIndex%e.length,i=e[t];this.gameSoundModel.play(i,{loop:0})},playSmashAudio:function(){this.gameSoundModel.play(this.manifest.AUDIO_SMASH.id,{loop:0})},endGame:function(){this["super"].endGame.apply(this,arguments),this.killTweens()},hide:function(){this.killTweens(),this["super"].hide.apply(this,arguments)},destroy:function(){this.killTweens(),this["super"].destroy.apply(this,arguments)}})}),define("game/games/hangry/sprites/hangry-sheet",[],function(){"use strict";return{ns:"hangry-sheet",manifest:[{src:"/img/games/hangry/hangry-sheet_0_sheet.png",spritesheet:{ns:"hangry-sheet",sprites:[{x:595,y:416,width:35,height:40,id:"back_customer1_bash_1.png",trim:{origWidth:63,origHeight:70,width:35,height:40,offsetX:13,offsetY:22}},{x:259,y:648,width:35,height:34,id:"back_customer1_bash_2.png",trim:{origWidth:63,origHeight:70,width:35,height:34,offsetX:13,offsetY:21}},{x:333,y:648,width:33,height:32,id:"back_customer1_cry_1.png",trim:{origWidth:63,origHeight:70,width:33,height:32,offsetX:15,offsetY:22}},{x:368,y:648,width:33,height:31,id:"back_customer1_cry_2.png",trim:{origWidth:63,origHeight:70,width:33,height:31,offsetX:15,offsetY:23}},{x:753,y:578,width:35,height:41,id:"back_customer1_happy.png",trim:{origWidth:63,origHeight:70,width:35,height:41,offsetX:13,offsetY:22}},{x:558,y:416,width:35,height:40,id:"back_customer1_hungry_1.png",trim:{origWidth:63,origHeight:70,width:35,height:40,offsetX:13,offsetY:22}},{x:753,y:289,width:35,height:42,id:"back_customer1_hungry_2.png",trim:{origWidth:63,origHeight:70,width:35,height:42,offsetX:13,offsetY:21}},{x:413,y:219,width:30,height:47,id:"back_customer2_bash_1.png",trim:{origWidth:63,origHeight:70,width:30,height:47,offsetX:15,offsetY:14}},{x:525,y:405,width:30,height:42,id:"back_customer2_bash_2.png",trim:{origWidth:63,origHeight:70,width:30,height:42,offsetX:15,offsetY:13}},{x:579,y:562,width:33,height:40,id:"back_customer2_cry_1.png",trim:{origWidth:63,origHeight:70,width:33,height:40,offsetX:11,offsetY:14}},{x:509,y:309,width:33,height:41,id:"back_customer2_cry_2.png",trim:{origWidth:63,origHeight:70,width:33,height:41,offsetX:11,offsetY:13}},{x:753,y:53,width:32,height:50,id:"back_customer2_happy.png",trim:{origWidth:63,origHeight:70,width:32,height:50,offsetX:12,offsetY:13}},{x:753,y:478,width:30,height:48,id:"back_customer2_hungry_1.png",trim:{origWidth:63,origHeight:70,width:30,height:48,offsetX:15,offsetY:13}},{x:753,y:528,width:30,height:48,id:"back_customer2_hungry_2.png",trim:{origWidth:63,origHeight:70,width:30,height:48,offsetX:15,offsetY:14}},{x:0,y:0,width:341,height:192,id:"bg.png",trim:{origWidth:341,origHeight:192,width:341,height:192,offsetX:0,offsetY:0}},{x:203,y:301,width:65,height:51,id:"bread_sans_colonel.png",trim:{origWidth:123,origHeight:113,width:65,height:51,offsetX:7,offsetY:55}},{x:270,y:301,width:63,height:51,id:"brine_sans_colonel.png",trim:{origWidth:123,origHeight:112,width:63,height:51,offsetX:7,offsetY:55}},{x:658,y:616,width:20,height:22,id:"bucket.png",trim:{origWidth:32,origHeight:32,width:20,height:22,offsetX:6,offsetY:6}},{x:632,y:458,width:13,height:41,id:"chicken_bar.png",trim:{origWidth:13,origHeight:41,width:13,height:41,offsetX:0,offsetY:0}},{x:785,y:190,width:11,height:39,id:"chicken_bar_inner.png",trim:{origWidth:11,origHeight:39,width:11,height:39,offsetX:0,offsetY:0}},{x:784,y:669,width:13,height:41,id:"chicken_bar_stroke.png",trim:{origWidth:13,origHeight:41,width:13,height:41,offsetX:0,offsetY:0}},{x:282,y:458,width:78,height:89,id:"colonel_bread_chicken_1.png",trim:{origWidth:123,origHeight:113,width:78,height:89,offsetX:29,offsetY:5}},{x:362,y:458,width:77,height:89,id:"colonel_bread_chicken_2.png",trim:{origWidth:123,origHeight:113,width:77,height:89,offsetX:31,offsetY:5}},{x:200,y:458,width:80,height:89,id:"colonel_bread_chicken_3.png",trim:{origWidth:123,origHeight:113,width:80,height:89,offsetX:27,offsetY:5}},{x:441,y:458,width:74,height:89,id:"colonel_bread_chicken_4.png",trim:{origWidth:123,origHeight:113,width:74,height:89,offsetX:32,offsetY:5}},{x:0,y:458,width:98,height:102,id:"colonel_brine_chicken_down_1.png",trim:{origWidth:123,origHeight:112,width:98,height:102,offsetX:7,offsetY:4}},{x:558,y:312,width:98,height:102,id:"colonel_brine_chicken_down_2.png",trim:{origWidth:123,origHeight:112,width:98,height:102,offsetX:7,offsetY:4}},{x:558,y:208,width:98,height:102,id:"colonel_brine_chicken_down_3.png",trim:{origWidth:123,origHeight:112,width:98,height:102,offsetX:7,offsetY:4}},{x:558,y:104,width:98,height:102,id:"colonel_brine_chicken_down_4.png",trim:{origWidth:123,origHeight:112,width:98,height:102,offsetX:7,offsetY:4}},{x:558,y:0,width:98,height:102,id:"colonel_brine_chicken_up.png",trim:{origWidth:123,origHeight:112,width:98,height:102,offsetX:7,offsetY:4}},{x:0,y:562,width:54,height:84,id:"colonel_celebration_1.png",trim:{origWidth:72,origHeight:101,width:54,height:84,offsetX:1,offsetY:11}},{x:573,y:458,width:57,height:84,id:"colonel_celebration_2.png",trim:{origWidth:72,origHeight:101,width:57,height:84,offsetX:0,offsetY:11}},{x:315,y:355,width:103,height:101,id:"colonel_chicken_in_fryer_1.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:210,y:355,width:103,height:101,id:"colonel_chicken_in_fryer_2.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:0,y:194,width:119,height:105,id:"colonel_chicken_in_fryer_3.png",trim:{origWidth:129,origHeight:118,width:119,height:105,offsetX:7,offsetY:11}},{x:343,y:0,width:108,height:110,id:"colonel_chicken_in_fryer_4.png",trim:{origWidth:129,origHeight:118,width:108,height:110,offsetX:7,offsetY:6}},{x:343,y:112,width:103,height:105,id:"colonel_chicken_in_fryer_5.png",trim:{origWidth:129,origHeight:118,width:103,height:105,offsetX:7,offsetY:11}},{x:121,y:194,width:109,height:101,id:"colonel_chicken_out_fryer_1.png",trim:{origWidth:129,origHeight:118,width:109,height:101,offsetX:7,offsetY:15}},{x:232,y:194,width:103,height:101,id:"colonel_chicken_out_fryer_2.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:453,y:103,width:103,height:101,id:"colonel_chicken_out_fryer_3.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:100,y:458,width:98,height:101,id:"colonel_chicken_out_fryer_4.png",trim:{origWidth:129,origHeight:118,width:98,height:101,offsetX:7,offsetY:15}},{x:420,y:355,width:103,height:101,id:"colonel_chicken_out_fryer_5.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:453,y:206,width:103,height:101,id:"colonel_chicken_out_fryer_6.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:658,y:262,width:46,height:84,id:"colonel_cry_1.png",trim:{origWidth:72,origHeight:101,width:46,height:84,offsetX:7,offsetY:11}},{x:56,y:562,width:43,height:83,id:"colonel_cry_2.png",trim:{origWidth:72,origHeight:101,width:43,height:83,offsetX:10,offsetY:12}},{x:0,y:355,width:103,height:101,id:"colonel_fry_chicken_1.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:105,y:355,width:103,height:101,id:"colonel_fry_chicken_2.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:453,y:0,width:103,height:101,id:"colonel_fry_chicken_3.png",trim:{origWidth:129,origHeight:118,width:103,height:101,offsetX:7,offsetY:15}},{x:712,y:0,width:39,height:91,id:"colonel_run_down_1.png",trim:{origWidth:72,origHeight:101,width:39,height:91,offsetX:10,offsetY:4}},{x:0,y:648,width:35,height:90,id:"colonel_run_down_2.png",trim:{origWidth:72,origHeight:101,width:35,height:90,offsetX:13,offsetY:5}},{x:37,y:648,width:35,height:89,id:"colonel_run_down_3.png",trim:{origWidth:72,origHeight:101,width:35,height:89,offsetX:10,offsetY:4}},{x:74,y:648,width:35,height:89,id:"colonel_run_down_4.png",trim:{origWidth:72,origHeight:101,width:35,height:89,offsetX:12,offsetY:6}},{x:658,y:87,width:50,height:85,id:"colonel_run_to_customers_1.png",trim:{origWidth:72,origHeight:101,width:50,height:85,offsetX:6,offsetY:5}},{x:712,y:274,width:39,height:88,id:"colonel_run_to_customers_2.png",trim:{origWidth:72,origHeight:101,width:39,height:88,offsetX:9,offsetY:7}},{x:101,y:562,width:39,height:83,id:"colonel_run_to_customers_3.png",trim:{origWidth:72,origHeight:101,width:39,height:83,offsetX:7,offsetY:6}},{x:712,y:364,width:39,height:88,id:"colonel_run_to_customers_4.png",trim:{origWidth:72,origHeight:101,width:39,height:88,offsetX:9,offsetY:7}},{x:658,y:0,width:52,height:85,id:"colonel_run_to_kitchen_1.png",trim:{origWidth:72,origHeight:101,width:52,height:85,offsetX:4,offsetY:4}},{x:712,y:184,width:39,height:88,id:"colonel_run_to_kitchen_2.png",trim:{origWidth:72,origHeight:101,width:39,height:88,offsetX:12,offsetY:7}},{x:712,y:544,width:39,height:83,id:"colonel_run_to_kitchen_3.png",trim:{origWidth:72,origHeight:101,width:39,height:83,offsetX:13,offsetY:5}},{x:712,y:454,width:39,height:88,id:"colonel_run_to_kitchen_4.png",trim:{origWidth:72,origHeight:101,width:39,height:88,offsetX:12,offsetY:7}},{x:658,y:348,width:42,height:90,id:"colonel_run_up_1.png",trim:{origWidth:72,origHeight:101,width:42,height:90,offsetX:7,offsetY:5}},{x:658,y:440,width:42,height:87,id:"colonel_run_up_2.png",trim:{origWidth:72,origHeight:101,width:42,height:87,offsetX:9,offsetY:7}},{x:658,y:174,width:46,height:86,id:"colonel_run_up_3.png",trim:{origWidth:72,origHeight:101,width:46,height:86,offsetX:7,offsetY:6}},{x:658,y:529,width:42,height:85,id:"colonel_run_up_4.png",trim:{origWidth:72,origHeight:101,width:42,height:85,offsetX:9,offsetY:8}},{x:712,y:93,width:39,height:89,id:"colonel_serve.png",trim:{origWidth:72,origHeight:101,width:39,height:89,offsetX:6,offsetY:6}},{x:517,y:458,width:54,height:89,id:"colonel_serve_throw.png",trim:{origWidth:72,origHeight:101,width:54,height:89,offsetX:6,offsetY:6}},{x:0,y:301,width:201,height:52,id:"counter.png",trim:{origWidth:207,origHeight:64,width:201,height:52,offsetX:6,offsetY:6}},{x:632,y:416,width:19,height:22,id:"dollar.png",trim:{origWidth:19,origHeight:22,width:19,height:22,offsetX:0,offsetY:0}},{x:326,y:562,width:48,height:50,id:"front_customer1_bash_1.png",trim:{origWidth:63,origHeight:70,width:48,height:50,offsetX:9,offsetY:15}},{x:529,y:562,width:48,height:42,id:"front_customer1_bash_2.png",trim:{origWidth:63,origHeight:70,width:48,height:42,offsetX:9,offsetY:14}},{x:393,y:301,width:51,height:41,id:"front_customer1_cry_1.png",trim:{origWidth:63,origHeight:70,width:51,height:41,offsetX:7,offsetY:15}},{x:453,y:309,width:54,height:42,id:"front_customer1_cry_2.png",trim:{origWidth:63,origHeight:70,width:54,height:42,offsetX:4,offsetY:14}},{x:376,y:562,width:48,height:50,id:"front_customer1_happy.png",trim:{origWidth:63,origHeight:70,width:48,height:50,offsetX:8,offsetY:14}},{x:426,y:562,width:48,height:50,id:"front_customer1_hungry_1.png",trim:{origWidth:63,origHeight:70,width:48,height:50,offsetX:9,offsetY:14}},{x:111,y:648,width:48,height:49,id:"front_customer1_hungry_2.png",trim:{origWidth:63,origHeight:70,width:48,height:49,offsetX:9,offsetY:14}},{x:280,y:562,width:44,height:56,id:"front_customer2_bash_1.png",trim:{origWidth:63,origHeight:70,width:44,height:56,offsetX:11,offsetY:8}},{x:753,y:0,width:44,height:51,id:"front_customer2_bash_2.png",trim:{origWidth:63,origHeight:70,width:44,height:51,offsetX:11,offsetY:6}},{x:476,y:562,width:51,height:47,id:"front_customer2_cry_1.png",trim:{origWidth:63,origHeight:70,width:51,height:47,offsetX:4,offsetY:7}},{x:335,y:301,width:56,height:45,id:"front_customer2_cry_2.png",trim:{origWidth:63,origHeight:70,width:56,height:45,offsetX:2,offsetY:9}},{x:142,y:562,width:44,height:58,id:"front_customer2_happy.png",trim:{origWidth:63,origHeight:70,width:44,height:58,offsetX:11,offsetY:7}},{x:188,y:562,width:44,height:56,id:"front_customer2_hungry_1.png",trim:{origWidth:63,origHeight:70,width:44,height:56,offsetX:11,offsetY:7}},{x:234,y:562,width:44,height:56,id:"front_customer2_hungry_2.png",trim:{origWidth:63,origHeight:70,width:44,height:56,offsetX:11,offsetY:6}},{x:343,y:219,width:68,height:57,id:"fryer_sans_colonel.png",trim:{origWidth:129,origHeight:118,width:68,height:57,offsetX:7,offsetY:59}},{x:680,y:616,width:19,height:22,id:"loss.png",trim:{origWidth:19,origHeight:22,width:19,height:22,offsetX:0,offsetY:0}},{x:525,y:355,width:29,height:48,id:"mid_customer1_bash_1.png",trim:{origWidth:63,origHeight:70,width:29,height:48,offsetX:15,offsetY:14}},{x:195,y:648,width:29,height:42,id:"mid_customer1_bash_2.png",trim:{origWidth:63,origHeight:70,width:29,height:42,offsetX:15,offsetY:13}},{x:753,y:105,width:37,height:41,id:"mid_customer1_cry_1.png",trim:{origWidth:63,origHeight:70,width:37,height:41,offsetX:8,offsetY:13}},{x:753,y:148,width:37,height:40,id:"mid_customer1_cry_2.png",trim:{origWidth:63,origHeight:70,width:37,height:40,offsetX:8,offsetY:14}},{x:753,y:190,width:30,height:49,id:"mid_customer1_happy.png",trim:{origWidth:63,origHeight:70,width:30,height:49,offsetX:15,offsetY:13}},{x:753,y:669,width:29,height:49,id:"mid_customer1_hungry_1.png",trim:{origWidth:63,origHeight:70,width:29,height:49,offsetX:15,offsetY:13}},{x:753,y:428,width:30,height:48,id:"mid_customer1_hungry_2.png",trim:{origWidth:63,origHeight:70,width:30,height:48,offsetX:14,offsetY:15}},{x:753,y:621,width:31,height:46,id:"mid_customer2_bash_1.png",trim:{origWidth:63,origHeight:70,width:31,height:46,offsetX:16,offsetY:17}},{x:226,y:648,width:31,height:39,id:"mid_customer2_bash_2.png",trim:{origWidth:63,origHeight:70,width:31,height:39,offsetX:16,offsetY:16}},{x:614,y:562,width:34,height:36,id:"mid_customer2_cry_1.png",trim:{origWidth:63,origHeight:70,width:34,height:36,offsetX:13,offsetY:18}},{x:296,y:648,width:35,height:34,id:"mid_customer2_cry_2.png",trim:{origWidth:63,origHeight:70,width:35,height:34,offsetX:12,offsetY:20}},{x:753,y:382,width:33,height:44,id:"mid_customer2_happy.png",trim:{origWidth:63,origHeight:70,width:33,height:44,offsetX:14,offsetY:18}},{x:753,y:241,width:32,height:46,id:"mid_customer2_hungry_1.png",trim:{origWidth:63,origHeight:70,width:32,height:46,offsetX:15,offsetY:18}},{x:753,y:333,width:31,height:47,id:"mid_customer2_hungry_2.png",trim:{origWidth:63,origHeight:70,width:31,height:47,offsetX:16,offsetY:16}},{x:753,y:720,width:26,height:5,id:"score.png",trim:{origWidth:26,origHeight:5,width:26,height:5,offsetX:0,offsetY:0}},{x:161,y:648,width:32,height:43,id:"timer.png",trim:{origWidth:32,origHeight:43,width:32,height:43,offsetX:0,offsetY:0}}]},width:797,height:738}]}
}),define("game/games/hangry/model/hangry_asset_manifest",["config","underscore","game/games/hangry/sprites/hangry-sheet","game/sprites/game_screen_assets"],function(e,t,i,s){var n=t.flatten([i.manifest],!0);t.each(n,function(e){e.spritesheet&&(e.pixijs=e.spritesheet)});var o=[{src:"/font/frucade.xml",id:"font/frucade.xml",type:"xml",pixijs:{font:{name:"frucade",bitmap:"font/frucade.png"}}},{id:"AUDIO_MUSIC",priority:1,type:"sound",volume:1,src:"/audio/games/hangry/hangry_music.mp3"},{id:"AUDIO_THROW_0",type:"sound",volume:1,src:"/audio/games/hangry/hangry_throw1.mp3"},{id:"AUDIO_THROW_1",type:"sound",volume:1,src:"/audio/games/hangry/hangry_throw2.mp3"},{id:"AUDIO_FRY_0",type:"sound",volume:1,src:"/audio/games/hangry/hangry_fry01.mp3"},{id:"AUDIO_FRY_1",type:"sound",volume:1,src:"/audio/games/hangry/hangry_fry02.mp3"},{id:"AUDIO_DING",type:"sound",volume:1,src:"/audio/games/hangry/hangry_ding.mp3"},{id:"AUDIO_CHOMP_0",type:"sound",volume:1,src:"/audio/games/hangry/hangry_chomp1.mp3"},{id:"AUDIO_CHOMP_1",type:"sound",volume:1,src:"/audio/games/hangry/hangry_chomp2.mp3"},{id:"AUDIO_SMASH",type:"sound",volume:1,src:"/audio/games/hangry/hangry_smash.mp3"}];o=o.concat(n);var r={BG:{id:"BG",type:"SPRITE",url:"bg.png",ns:i.ns},COLONEL_SERVE:{id:"COLONEL_SERVE",type:"SPRITE",url:"colonel_serve.png",ns:i.ns},COLONEL_SERVE_THROW:{id:"COLONEL_SERVE_THROW",type:"SPRITE",url:"colonel_serve_throw.png",ns:i.ns},COLONEL_CELEBRATE_MC:{id:"COLONEL_CELEBRATE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_celebration_1.png","colonel_celebration_2.png"],ns:i.ns},COLONEL_CRY_MC:{id:"COLONEL_CRY_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_cry_1.png","colonel_cry_2.png"],ns:i.ns},COLONEL_RUN_TO_KITCHEN_MC:{id:"COLONEL_RUN_TO_KITCHEN_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_run_to_kitchen_1.png","colonel_run_to_kitchen_2.png","colonel_run_to_kitchen_3.png","colonel_run_to_kitchen_4.png"],ns:i.ns},COLONEL_RUN_TO_CUSTOMERS_MC:{id:"COLONEL_RUN_TO_CUSTOMERS_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_run_to_customers_1.png","colonel_run_to_customers_2.png","colonel_run_to_customers_3.png","colonel_run_to_customers_4.png"],ns:i.ns},COLONEL_RUN_DOWN_MC:{id:"COLONEL_RUN_DOWN_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_run_down_1.png","colonel_run_down_2.png","colonel_run_down_3.png","colonel_run_down_4.png"],ns:i.ns},COLONEL_RUN_UP_MC:{id:"COLONEL_RUN_UP_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_run_up_1.png","colonel_run_up_2.png","colonel_run_up_3.png","colonel_run_up_4.png"],ns:i.ns},BUCKET:{id:"BUCKET",type:"SPRITE",url:"bucket.png",ns:i.ns},CUSTOMER_1_MC:{id:"CUSTOMER_1_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["front_customer1_hungry_1.png","front_customer1_hungry_2.png"],ns:i.ns},CUSTOMER_2_MC:{id:"CUSTOMER_2_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["front_customer2_hungry_1.png","front_customer2_hungry_2.png"],ns:i.ns},CUSTOMER_3_MC:{id:"CUSTOMER_3_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["back_customer2_hungry_1.png","back_customer2_hungry_2.png"],ns:i.ns},CUSTOMER_4_MC:{id:"CUSTOMER_4_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["mid_customer2_hungry_1.png","mid_customer2_hungry_2.png"],ns:i.ns},CUSTOMER_5_MC:{id:"CUSTOMER_5_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["mid_customer1_hungry_1.png","mid_customer1_hungry_2.png"],ns:i.ns},CUSTOMER_6_MC:{id:"CUSTOMER_6_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["back_customer1_hungry_1.png","back_customer1_hungry_2.png"],ns:i.ns},CUSTOMER_1_BASH_MC:{id:"CUSTOMER_1_BASH_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["front_customer1_bash_1.png","front_customer1_bash_2.png"],ns:i.ns},CUSTOMER_2_BASH_MC:{id:"CUSTOMER_2_BASH_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["front_customer2_bash_1.png","front_customer2_bash_2.png"],ns:i.ns},CUSTOMER_3_BASH_MC:{id:"CUSTOMER_3_BASH_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["back_customer2_bash_1.png","back_customer2_bash_2.png"],ns:i.ns},CUSTOMER_4_BASH_MC:{id:"CUSTOMER_4_BASH_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["mid_customer2_bash_1.png","mid_customer2_bash_2.png"],ns:i.ns},CUSTOMER_5_BASH_MC:{id:"CUSTOMER_5_BASH_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["mid_customer1_bash_1.png","mid_customer1_bash_2.png"],ns:i.ns},CUSTOMER_6_BASH_MC:{id:"CUSTOMER_6_BASH_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["back_customer1_bash_1.png","back_customer1_bash_2.png"],ns:i.ns},CUSTOMER_1_CRY_MC:{id:"CUSTOMER_1_CRY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["front_customer1_cry_1.png","front_customer1_cry_2.png"],ns:i.ns},CUSTOMER_2_CRY_MC:{id:"CUSTOMER_2_CRY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["front_customer2_cry_1.png","front_customer2_cry_2.png"],ns:i.ns},CUSTOMER_3_CRY_MC:{id:"CUSTOMER_3_CRY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["back_customer2_cry_1.png","back_customer2_cry_2.png"],ns:i.ns},CUSTOMER_4_CRY_MC:{id:"CUSTOMER_4_CRY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["mid_customer2_cry_1.png","mid_customer2_cry_2.png"],ns:i.ns},CUSTOMER_5_CRY_MC:{id:"CUSTOMER_5_CRY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["mid_customer1_cry_1.png","mid_customer1_cry_2.png"],ns:i.ns},CUSTOMER_6_CRY_MC:{id:"CUSTOMER_6_CRY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["back_customer1_cry_1.png","back_customer1_cry_2.png"],ns:i.ns},CUSTOMER_1_HAPPY_MC:{id:"CUSTOMER_1_HAPPY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["front_customer1_happy.png"],ns:i.ns},CUSTOMER_2_HAPPY_MC:{id:"CUSTOMER_2_HAPPY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["front_customer2_happy.png"],ns:i.ns},CUSTOMER_3_HAPPY_MC:{id:"CUSTOMER_3_HAPPY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["back_customer2_happy.png"],ns:i.ns},CUSTOMER_4_HAPPY_MC:{id:"CUSTOMER_4_HAPPY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["mid_customer2_happy.png"],ns:i.ns},CUSTOMER_5_HAPPY_MC:{id:"CUSTOMER_5_HAPPY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["mid_customer1_happy.png"],ns:i.ns},CUSTOMER_6_HAPPY_MC:{id:"CUSTOMER_6_HAPPY_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["back_customer1_happy.png"],ns:i.ns},COUNTER:{id:"COUNTER",type:"SPRITE",url:"counter.png",ns:i.ns},PREP_BRINE_MC:{id:"PREP_BRINE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_brine_chicken_up.png","colonel_brine_chicken_down_1.png","colonel_brine_chicken_down_2.png","colonel_brine_chicken_down_3.png","colonel_brine_chicken_down_4.png","colonel_brine_chicken_down_1.png"],ns:i.ns},PREP_BREAD_MC:{id:"PREP_BREAD_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_bread_chicken_1.png","colonel_bread_chicken_2.png","colonel_bread_chicken_3.png","colonel_bread_chicken_4.png"],ns:i.ns},PREP_FRY_MC:{id:"PREP_FRY_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_chicken_in_fryer_1.png","colonel_chicken_in_fryer_2.png","colonel_chicken_in_fryer_3.png","colonel_chicken_in_fryer_4.png","colonel_chicken_in_fryer_5.png","colonel_fry_chicken_1.png","colonel_fry_chicken_2.png","colonel_fry_chicken_3.png","colonel_chicken_out_fryer_1.png","colonel_chicken_out_fryer_2.png","colonel_chicken_out_fryer_3.png","colonel_chicken_out_fryer_4.png","colonel_chicken_out_fryer_5.png","colonel_chicken_out_fryer_6.png"],ns:i.ns},PREP_WASHING:{id:"PREP_WASHING",type:"SPRITE",url:"brine_sans_colonel.png",ns:i.ns},PREP_BREADING:{id:"PREP_BREADING",type:"SPRITE",url:"bread_sans_colonel.png",ns:i.ns},PREP_FRIER:{id:"PREP_FRIER",type:"SPRITE",url:"fryer_sans_colonel.png",ns:i.ns},UI_CHICKEN_BAR:{id:"UI_CHICKEN_BAR",type:"SPRITE",url:"chicken_bar.png",ns:i.ns},UI_CHICKEN_BAR_INNER:{id:"UI_CHICKEN_BAR_INNER",type:"SPRITE",url:"chicken_bar_inner.png",ns:i.ns},UI_CHICKEN_BAR_STROKE:{id:"UI_CHICKEN_BAR_STROKE",type:"SPRITE",url:"chicken_bar_stroke.png",ns:i.ns},UI_LOSS:{id:"UI_LOSS",type:"SPRITE",url:"loss.png",ns:i.ns},UI_DOLLAR:{id:"UI_DOLLAR",type:"SPRITE",url:"dollar.png",ns:i.ns},UI_SCORE:{id:"UI_SCORE",type:"SPRITE",url:"score.png",ns:i.ns},UI_TIMER:{id:"UI_TIMER",type:"SPRITE",url:"timer.png",ns:i.ns},UI_HEART_X:{id:"UI_HEART_X",type:"SPRITE",url:"ui_health_X.png",ns:s.ns},UI_HEART_0:{id:"UI_HEART_0",type:"SPRITE",url:"ui_health_0.png",ns:s.ns},UI_HEART_1:{id:"UI_HEART_1",type:"SPRITE",url:"ui_health_1.png",ns:s.ns},UI_HEART_2:{id:"UI_HEART_2",type:"SPRITE",url:"ui_health_2.png",ns:s.ns},UI_HEART_3:{id:"UI_HEART_3",type:"SPRITE",url:"ui_health_3.png",ns:s.ns},UI_HEART_ICON_BG:{id:"UI_HEART_ICON_BG",type:"SPRITE",url:"ui_health_heart_bg.png",ns:s.ns},UI_HEART_ICON:{id:"UI_HEART_ICON",type:"SPRITE",url:"ui_health_heart.png",ns:s.ns},UI_HEART_POLE:{id:"UI_HEART_POLE",type:"SPRITE",url:"ui_health_pole.png",ns:s.ns},UI_HEART_BG:{id:"UI_HEART_BG",type:"SPRITE",url:"ui_health_bg.png",ns:s.ns}};for(var a in r){var h=r[a];if(h.url&&(h.ns_url=h.ns+h.url),h.frameNames){h.ns_frameNames=[];for(var l=0,c=h.frameNames.length;c>l;l++)h.ns_frameNames.push(h.ns+h.frameNames[l])}}return r.assetManifest=o,r}),define("game/games/hangry/view/hangry_game_view",["jquery","underscore","backbone","model/loader_collection","config","util/resn/math","game/game_base/view/game_view","pixi","game/games/hangry/model/hangry_player_states","game/games/hangry/model/hangry_customer_states"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=r.extend({initialized:!1,uiFont:{font:"20px slkscrb",fill:"black"},mealSprites:[],customerSprites:[],bg:null,customers1Clip:null,customers2Clip:null,customers3Clip:null,meals1Clip:null,meals2Clip:null,meals3Clip:null,mealClips:null,colonelServeClip:null,colonelServeThrowClip:null,prepWashingClip:null,prepBreadingClip:null,prepFrierClip:null,scoreLoseLabel1:null,scoreLoseLabel2:null,scoreLoseLabel3:null,loseLabels:[],scoreWinLabel1:null,scoreWinLabel2:null,scoreWinLabel3:null,winLabels:[],initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.initialized||(this.initialized=!0,this.initScene(),this.initInGameUI(),this.makeMeals(),this.makeCustomers(),this.gameModel.on(this.gameModel.EVENTS.STARTED,this.onGameStart,this),this.gameModel.on(this.gameModel.EVENTS.GAME_END,this.onGameEnd,this),this.gameModel.on(this.gameModel.EVENTS.SET_TO_PREP_MODE,this.onPrepModeSet,this),this.gameModel.on(this.gameModel.EVENTS.SET_TO_SERVE_MODE,this.onServeModeSet,this),this.gameModel.on(this.gameModel.EVENTS.MEAL_ADDED,this.onMealAdded,this),this.gameModel.on(this.gameModel.EVENTS.CUSTOMER_ADDED,this.onCustomerAdded,this),this.gameModel.on(this.gameModel.EVENTS.CUSTOMER_MISSED,this.onCustomerMissed,this),this.gameModel.on(this.gameModel.EVENTS.CUSTOMER_SERVED,this.onCustomerServed,this))},initScene:function(){this.sceneContainer=new a.DisplayObjectContainer,this.gameContainer.addChild(this.sceneContainer),this.bgClip=this.newSprite(this.manifest.BG),this.sceneContainer.addChild(this.bgClip),this.table1Clip=this.newSprite(this.manifest.COUNTER),this.sceneContainer.addChild(this.table1Clip),this.table1Clip.x=196+this.gameConfig.counterOffsetX,this.table1Clip.y=48,this.customers1Clip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.customers1Clip),this.meals1Clip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.meals1Clip),this.table2Clip=this.newSprite(this.manifest.COUNTER),this.sceneContainer.addChild(this.table2Clip),this.table2Clip.x=195+this.gameConfig.counterOffsetX,this.table2Clip.y=88,this.customers2Clip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.customers2Clip),this.meals2Clip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.meals2Clip),this.table3Clip=this.newSprite(this.manifest.COUNTER),this.sceneContainer.addChild(this.table3Clip),this.table3Clip.x=194+this.gameConfig.counterOffsetX,this.table3Clip.y=128,this.customers3Clip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.customers3Clip),this.meals3Clip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.meals3Clip),this.mealClips=[this.meals1Clip,this.meals2Clip,this.meals3Clip],this.colonelClip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.colonelClip),this.colonelClip.x=this.gameConfig.colonelServePositionX,this.colonelClip.y=3,this.colonelRunClip=this.newMovieClip(this.manifest.COLONEL_RUN_DOWN_MC,{loop:!0,autoplay:!0}),this.colonelRunClip.runDownAnimation=this.colonelRunClip.textures,this.colonelRunClip.runUpAnimation=this.getAnimation(this.manifest.COLONEL_RUN_UP_MC),this.colonelRunClip.runToCustomersAnimation=this.getAnimation(this.manifest.COLONEL_RUN_TO_CUSTOMERS_MC),this.colonelRunClip.runToKitchenAnimation=this.getAnimation(this.manifest.COLONEL_RUN_TO_KITCHEN_MC),this.colonelClip.addChild(this.colonelRunClip),this.colonelEndClip=this.newMovieClip(this.manifest.COLONEL_CELEBRATE_MC,{loop:!0,autoplay:!0}),this.colonelEndClip.winAnimation=this.colonelEndClip.textures,this.colonelEndClip.loseAnimation=this.getAnimation(this.manifest.COLONEL_CRY_MC),this.colonelClip.addChild(this.colonelEndClip),this.colonelServeClip=this.newSprite(this.manifest.COLONEL_SERVE),this.colonelClip.addChild(this.colonelServeClip),this.colonelServeThrowClip=this.newSprite(this.manifest.COLONEL_SERVE_THROW),this.colonelClip.addChild(this.colonelServeThrowClip),this.prepWashingClip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.prepWashingClip),this.prepWashingClip.x=0,this.prepWashingClip.y=20,this.prepWashingBaseClip=this.newSprite(this.manifest.PREP_WASHING),this.prepWashingClip.addChild(this.prepWashingBaseClip),this.prepWashingColonelClip=this.newMovieClip(this.manifest.PREP_BRINE_MC,{loop:!0,autoplay:!0}),this.prepWashingClip.addChild(this.prepWashingColonelClip),this.prepBreadingClip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.prepBreadingClip),this.prepBreadingClip.x=0,this.prepBreadingClip.y=52,this.prepBreadingBaseClip=this.newSprite(this.manifest.PREP_BREADING),this.prepBreadingClip.addChild(this.prepBreadingBaseClip),this.prepBreadingColonelClip=this.newMovieClip(this.manifest.PREP_BREAD_MC,{loop:!0,autoplay:!0}),this.prepBreadingClip.addChild(this.prepBreadingColonelClip),this.prepFrierClip=new a.DisplayObjectContainer,this.sceneContainer.addChild(this.prepFrierClip),this.prepFrierClip.x=0,this.prepFrierClip.y=74,this.prepFrierBaseClip=this.newSprite(this.manifest.PREP_FRIER),this.prepFrierClip.addChild(this.prepFrierBaseClip),this.prepFrierColonel1Clip=this.newMovieClip(this.manifest.PREP_FRY_MC,{loop:!0,autoplay:!0}),this.prepFrierClip.addChild(this.prepFrierColonel1Clip)},initInGameUI:function(){this.scoreLoseLabel1=this.newSprite(this.manifest.UI_LOSS),this.scoreLoseLabel1.x=this.gameConfig.scoreLossGraphicOffset.x,this.scoreLoseLabel1.y=this.gameConfig.customerStartPositions[0].y+this.gameConfig.scoreLossGraphicOffset.y,this.viewContainer.addChild(this.scoreLoseLabel1),this.scoreLoseLabel1.basePosition={x:this.scoreLoseLabel1.x,y:this.scoreLoseLabel1.y},this.scoreLoseLabel1.visible=!1,this.scoreLoseLabel2=this.newSprite(this.manifest.UI_LOSS),this.scoreLoseLabel2.x=this.gameConfig.scoreLossGraphicOffset.x,this.scoreLoseLabel2.y=this.gameConfig.customerStartPositions[1].y+this.gameConfig.scoreLossGraphicOffset.y,this.scoreLoseLabel2.basePosition={x:this.scoreLoseLabel2.x,y:this.scoreLoseLabel2.y},this.viewContainer.addChild(this.scoreLoseLabel2),this.scoreLoseLabel2.visible=!1,this.scoreLoseLabel3=this.newSprite(this.manifest.UI_LOSS),this.scoreLoseLabel3.x=this.gameConfig.scoreLossGraphicOffset.x,this.scoreLoseLabel3.y=this.gameConfig.customerStartPositions[2].y+this.gameConfig.scoreLossGraphicOffset.y,this.scoreLoseLabel3.basePosition={x:this.scoreLoseLabel3.x,y:this.scoreLoseLabel3.y},this.viewContainer.addChild(this.scoreLoseLabel3),this.scoreLoseLabel3.visible=!1,this.loseLabels=[this.scoreLoseLabel1,this.scoreLoseLabel2,this.scoreLoseLabel3],this.scoreWinLabel1=this.newSprite(this.manifest.UI_DOLLAR),this.scoreWinLabel1.x=this.gameConfig.scoreWinGraphicOffset.x,this.scoreWinLabel1.y=this.gameConfig.customerStartPositions[0].y+this.gameConfig.scoreWinGraphicOffset.y,this.scoreWinLabel1.basePosition={x:this.scoreWinLabel1.x,y:this.scoreWinLabel1.y},this.viewContainer.addChild(this.scoreWinLabel1),this.scoreWinLabel1.visible=!1,this.scoreWinLabel2=this.newSprite(this.manifest.UI_DOLLAR),this.scoreWinLabel2.x=this.gameConfig.scoreWinGraphicOffset.x,this.scoreWinLabel2.y=this.gameConfig.customerStartPositions[1].y+this.gameConfig.scoreWinGraphicOffset.y,this.scoreWinLabel2.basePosition={x:this.scoreWinLabel2.x,y:this.scoreWinLabel2.y},this.viewContainer.addChild(this.scoreWinLabel2),this.scoreWinLabel2.visible=!1,this.scoreWinLabel3=this.newSprite(this.manifest.UI_DOLLAR),this.scoreWinLabel3.x=this.gameConfig.scoreWinGraphicOffset.x,this.scoreWinLabel3.y=this.gameConfig.customerStartPositions[2].y+this.gameConfig.scoreWinGraphicOffset.y,this.scoreWinLabel3.basePosition={x:this.scoreWinLabel3.x,y:this.scoreWinLabel3.y},this.viewContainer.addChild(this.scoreWinLabel3),this.scoreWinLabel3.visible=!1,this.winLabels=[this.scoreWinLabel1,this.scoreWinLabel2,this.scoreWinLabel3],this.loseLabels=[this.scoreLoseLabel1,this.scoreLoseLabel2,this.scoreLoseLabel3]},onGameStart:function(){this.killTweens(),this.sceneContainer.x=this.gameModel.colonelState===h.PREP?this.gameConfig.scenePrepPanX:this.gameConfig.sceneServePanX},killTweens:function(){this.gameModel.gameTweenMax.killTweensOf(this.scoreLoseLabel1),this.gameModel.gameTweenMax.killTweensOf(this.scoreLoseLabel2),this.gameModel.gameTweenMax.killTweensOf(this.scoreLoseLabel3),this.gameModel.gameTweenMax.killTweensOf(this.scoreWinLabel1),this.gameModel.gameTweenMax.killTweensOf(this.scoreWinLabel2),this.gameModel.gameTweenMax.killTweensOf(this.scoreWinLabel3),this.scoreLoseLabel1.visible=!1,this.scoreLoseLabel2.visible=!1,this.scoreLoseLabel3.visible=!1,this.scoreWinLabel1.visible=!1,this.scoreWinLabel2.visible=!1,this.scoreWinLabel3.visible=!1,this.gameModel.gameTweenMax.killTweensOf(this.sceneContainer)},onGameEnd:function(){this.gameModel.gameTweenMax.killTweensOf(this.sceneContainer)},onPrepModeSet:function(){this.gameModel.gameTweenMax.killTweensOf(this.sceneContainer),this.gameModel.gameTweenMax.to(this.sceneContainer,this.gameConfig.scenePanDuration,{x:this.gameConfig.scenePrepPanX,roundProps:["x","y"]})},onServeModeSet:function(){this.gameModel.gameTweenMax.killTweensOf(this.sceneContainer),this.gameModel.gameTweenMax.to(this.sceneContainer,this.gameConfig.scenePanDuration,{x:this.gameConfig.sceneServePanX,roundProps:["x","y"]})},onMealAdded:function(e){var t=this.mealClips[e.positionIndex],i=this.mealSprites[e.index];t.addChild(i)},onCustomerAdded:function(e){var t=this.customerSprites[e.index];switch(e.lineIndex){case 0:this.customers1Clip.addChild(t);break;case 1:this.customers2Clip.addChild(t);break;case 2:this.customers3Clip.addChild(t)}},onCustomerMissed:function(e){var t=this.loseLabels[e];t.visible=!0,t.alpha=1,t.position.y=t.basePosition.y,this.gameModel.gameTweenMax.killTweensOf(t),this.gameModel.gameTweenMax.to(t,.5,{y:t.basePosition.y+5,roundProps:["y"],onComplete:this.onLabelAnimationComplete,onCompleteParams:[t]})},onCustomerServed:function(e,t){var i=this.winLabels[t];i.visible=!0,i.alpha=1,i.position.x=Math.round(this.sceneContainer.x+e.x+this.gameConfig.scoreWinGraphicOffset.x),i.position.x=Math.min(this.gameConfig.maxWinLabelX,i.position.x),i.position.y=i.basePosition.y,this.gameModel.gameTweenMax.killTweensOf(i),this.gameModel.gameTweenMax.to(i,.5,{y:i.basePosition.y-5,roundProps:["y"],onComplete:this.onLabelAnimationComplete,onCompleteParams:[i]})},onLabelAnimationComplete:function(e){e.visible=!1},show:function(){this["super"].show.apply(this,arguments)},render:function(){this.initialized&&(this.updateMealSprites(),this.updateCustomerSprites(),this.updateColonelState()),this["super"].render.apply(this,arguments)},makeMeals:function(){this.mealSprites=[];for(var e=0,t=this.gameConfig.mealMaxCount;t>e;e++){var i=this.newSprite(this.manifest.BUCKET);this.sceneContainer.addChild(i),this.mealSprites.push(i),i.visible=!1}},makeCustomers:function(){this.customerSprites=[];for(var e,t,i=0,s=this.gameConfig.customerMaxCount;s>i;i++){switch(e=this.gameModel.customerModels[i],e.typeIndex){case 0:t=this.newMovieClip(this.manifest.CUSTOMER_1_MC),t.waitingAnimation=t.textures,t.bashAnimation=this.getAnimation(this.manifest.CUSTOMER_1_BASH_MC),t.cryAnimation=this.getAnimation(this.manifest.CUSTOMER_1_CRY_MC),t.happyAnimation=this.getAnimation(this.manifest.CUSTOMER_1_HAPPY_MC);break;case 1:t=this.newMovieClip(this.manifest.CUSTOMER_2_MC),t.waitingAnimation=t.textures,t.bashAnimation=this.getAnimation(this.manifest.CUSTOMER_2_BASH_MC),t.cryAnimation=this.getAnimation(this.manifest.CUSTOMER_2_CRY_MC),t.happyAnimation=this.getAnimation(this.manifest.CUSTOMER_2_HAPPY_MC);break;case 2:t=this.newMovieClip(this.manifest.CUSTOMER_3_MC),t.waitingAnimation=t.textures,t.bashAnimation=this.getAnimation(this.manifest.CUSTOMER_3_BASH_MC),t.cryAnimation=this.getAnimation(this.manifest.CUSTOMER_3_CRY_MC),t.happyAnimation=this.getAnimation(this.manifest.CUSTOMER_3_HAPPY_MC);break;case 3:t=this.newMovieClip(this.manifest.CUSTOMER_4_MC),t.waitingAnimation=t.textures,t.bashAnimation=this.getAnimation(this.manifest.CUSTOMER_4_BASH_MC),t.cryAnimation=this.getAnimation(this.manifest.CUSTOMER_4_CRY_MC),t.happyAnimation=this.getAnimation(this.manifest.CUSTOMER_4_HAPPY_MC);break;case 4:t=this.newMovieClip(this.manifest.CUSTOMER_5_MC),t.waitingAnimation=t.textures,t.bashAnimation=this.getAnimation(this.manifest.CUSTOMER_5_BASH_MC),t.cryAnimation=this.getAnimation(this.manifest.CUSTOMER_5_CRY_MC),t.happyAnimation=this.getAnimation(this.manifest.CUSTOMER_5_HAPPY_MC);break;case 5:t=this.newMovieClip(this.manifest.CUSTOMER_6_MC),t.waitingAnimation=t.textures,t.bashAnimation=this.getAnimation(this.manifest.CUSTOMER_6_BASH_MC),t.cryAnimation=this.getAnimation(this.manifest.CUSTOMER_6_CRY_MC),t.happyAnimation=this.getAnimation(this.manifest.CUSTOMER_6_HAPPY_MC)}t.loop=!0,t.play(),this.customerSprites.push(t),t.visible=!1}},updateMealSprites:function(){for(var e=0,t=this.gameModel.mealModels.length;t>e;e++){var i=this.gameModel.mealModels[e],s=this.mealSprites[e];i.active!==!1?(s.visible=!0,s.position.y=Math.round(i.y),s.position.x=Math.round(i.x)):s.visible=!1}},updateCustomerSprites:function(){for(var e=0,t=this.gameModel.customerModels.length;t>e;e++){var i=this.gameModel.customerModels[e],s=this.customerSprites[e];i.active!==!1?(s.visible=!0,i.state===l.EATING?this.setSpriteAnimation(s,s.happyAnimation):i.state===l.HANGRY?this.setSpriteAnimation(s,s.bashAnimation):i.state===l.SAD?this.setSpriteAnimation(s,s.cryAnimation):this.setSpriteAnimation(s,s.waitingAnimation),s.position.y=Math.round(i.y),s.position.x=Math.round(i.x)):s.visible=!1}},updateColonelState:function(){var e={};e.y=this.gameConfig.servePositions[this.gameModel.servePosition].y,e.x=this.gameConfig.colonelServePositionX;var t={};switch(this.gameModel.colonelState){case h.RUN_TO_CUSTOMERS:t=o.lerpPoint(e,this.gameConfig.kitchenEndPosition,this.gameModel.colonelKitchenTransition.amount);break;case h.RUN_TO_KITCHEN:t=o.lerpPoint(e,this.gameConfig.kitchenPosition,this.gameModel.colonelKitchenTransition.amount);break;case h.RUN_DOWN:case h.RUN_UP:var i={};i.y=this.gameConfig.servePositions[this.gameModel.lastServePosition].y,i.x=this.gameConfig.colonelServePositionX,t=o.lerpPoint(i,e,this.gameModel.colonelServeTableTransition.amount);break;default:t=o.copyPoint(e)}this.colonelClip.x=Math.round(t.x),this.colonelClip.y=Math.round(t.y),this.colonelRunClip.visible=!1,this.colonelServeClip.visible=!1,this.colonelServeThrowClip.visible=!1,this.colonelEndClip.visible=!1,this.gameModel.colonelState===h.WIN?(this.colonelEndClip.visible=!0,this.setSpriteAnimation(this.colonelEndClip,this.colonelEndClip.winAnimation)):this.gameModel.colonelState===h.LOSE?(this.colonelEndClip.visible=!0,this.setSpriteAnimation(this.colonelEndClip,this.colonelEndClip.loseAnimation)):this.gameModel.colonelState===h.RUN_TO_KITCHEN?(this.colonelRunClip.visible=!0,this.setSpriteAnimation(this.colonelRunClip,this.colonelRunClip.runToKitchenAnimation)):this.gameModel.colonelState===h.RUN_TO_CUSTOMERS?(this.colonelRunClip.visible=!0,this.setSpriteAnimation(this.colonelRunClip,this.colonelRunClip.runToCustomersAnimation)):this.gameModel.colonelState===h.RUN_DOWN?(this.colonelRunClip.visible=!0,this.setSpriteAnimation(this.colonelRunClip,this.colonelRunClip.runDownAnimation)):this.gameModel.colonelState===h.RUN_UP?(this.colonelRunClip.visible=!0,this.setSpriteAnimation(this.colonelRunClip,this.colonelRunClip.runUpAnimation)):this.gameModel.colonelState===h.SERVE&&(this.gameModel.colonelThrowing?this.colonelServeThrowClip.visible=!0:this.colonelServeClip.visible=!0);var s=this.gameModel.availableMeals/this.gameConfig.maxAvailableMeals,n=Math.min(3,Math.floor(4*s*1.1));if(this.gameConfig.useSeparatePrepStages&&(n=this.gameModel.curPrepStageIndex),this.prepWashingColonelClip.visible=!1,this.prepBreadingColonelClip.visible=!1,this.prepFrierColonel1Clip.visible=!1,this.gameModel.colonelState===h.PREP)switch(n){case 0:this.prepWashingColonelClip.visible=!0;break;case 1:this.prepBreadingColonelClip.visible=!0;break;case 2:this.prepFrierColonel1Clip.visible=!0}this.prepWashingBaseClip.visible=!this.prepWashingColonelClip.visible,this.prepFrierBaseClip.visible=!this.prepFrierColonel1Clip.visible},hide:function(){this.killTweens(),this["super"].hide.apply(this,arguments)},destroy:function(){this.stopListening(),this.off(),this["super"].destroy.apply(this,arguments)}});return c}),define("game/games/ui/game_base_ui_view",["jquery","underscore","backbone","config","pixi"],function(e,t,i,s,n){"use strict";var o=i.View.extend({gameModel:null,manifest:null,viewContainer:null,UIContainer:null,x:0,y:0,initialize:function(e){this.gameModel=e.gameModel,this.viewContainer=e.viewContainer,this.manifest=this.gameModel.manifest,this.UIContainer=new n.DisplayObjectContainer,this.viewContainer.addChild(this.UIContainer),this.UIContainer.x=e.x,this.UIContainer.y=e.y},spriteFromFrameID:function(e){return this.gameModel.pixiAssetLibrary.spriteFromFrameID(e)},setup:function(){},render:function(){},show:function(){},hide:function(){},destroy:function(){this.stopListening(),this.off()},addEvents:function(){},removeEvents:function(){}});return o}),define("game/games/ui/health/game_health_ui_view",["jquery","underscore","backbone","pixi","game/games/ui/game_base_ui_view"],function(e,t,i,s,n){"use strict";var o=n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.createUI()},createUI:function(){this.poleSprite=this.spriteFromFrameID(this.manifest.UI_HEART_POLE.ns_url),this.heartBgSprite=this.spriteFromFrameID(this.manifest.UI_HEART_ICON_BG.ns_url),this.heartSprite=this.spriteFromFrameID(this.manifest.UI_HEART_ICON.ns_url),this.bgSprite=this.spriteFromFrameID(this.manifest.UI_HEART_BG.ns_url),this.addDigits(),this.panelContainer=new s.DisplayObjectContainer,this.panelContainer.x=7,this.poleSprite.y=10,this.heartBgSprite.x=6,this.heartBgSprite.y=6,this.heartSprite.x=6,this.heartSprite.y=4,this.UIContainer.addChild(this.poleSprite),this.UIContainer.addChild(this.panelContainer),this.panelContainer.addChild(this.bgSprite),this.panelContainer.addChild(this.heartBgSprite),this.panelContainer.addChild(this.heartSprite),this.panelContainer.addChild(this.digitContainer)},addDigits:function(){this.digitContainer=new s.DisplayObjectContainer,this.digits=[this.spriteFromFrameID(this.manifest.UI_HEART_0.ns_url),this.spriteFromFrameID(this.manifest.UI_HEART_1.ns_url),this.spriteFromFrameID(this.manifest.UI_HEART_2.ns_url),this.spriteFromFrameID(this.manifest.UI_HEART_3.ns_url)],this.xSprite=this.spriteFromFrameID(this.manifest.UI_HEART_X.ns_url),this.digitContainer.addChild(this.xSprite),this.digitContainer.y=7,this.digitContainer.x=24,t.each(this.digits,function(e){e.x=5,this.digitContainer.addChild(e)},this)},updateCount:function(e){t.each(this.digits,function(t,i){t.alpha=i===e?1:0})},render:function(){},show:function(){},hide:function(){},onResize:function(){},destroy:function(){this.stopListening(),this.off()},addEvents:function(){},removeEvents:function(){}});return o}),define("game/games/hangry/view/hangry_game_ui_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_ui_view","pixi","game/games/ui/health/game_health_ui_view"],function(e,t,i,s,n,o,r,a){"use strict";var h=o.extend({initialized:!1,uiFont:{font:"8px frucade"},scoreTitle:null,scoreLabel:null,scoreLabelShadow:null,ammoBarClip:null,ammoBarInnerClip:null,ammoBarInnerClipContainer:null,ammoBarHeight:39,settingsGui:null,initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.initialized||(this.initialized=!0,this.initUI(),this.updateUI())},updateTimerVisibility:function(){this.timeLabel.visible=this.gameConfig.enableTimer,this.timeLabelShadow.visible=this.gameConfig.enableTimer},initAmmoBar:function(){this.ammoBarClip=this.newSprite(this.manifest.UI_CHICKEN_BAR),this.ammoBarClip.x=8,this.ammoBarClip.y=46,this.viewContainer.addChild(this.ammoBarClip),this.ammoBarInnerClipContainer=new r.DisplayObjectContainer,this.ammoBarInnerClipContainer.x=1,this.ammoBarInnerClipContainer.y=1+this.ammoBarHeight,this.ammoBarInnerClipContainer.scale.y=-1,this.ammoBarClip.addChild(this.ammoBarInnerClipContainer),this.ammoBarInnerClip=this.newSprite(this.manifest.UI_CHICKEN_BAR_INNER),this.ammoBarInnerClipContainer.addChild(this.ammoBarInnerClip),this.ammoBarStrokeClip=this.newSprite(this.manifest.UI_CHICKEN_BAR_STROKE),this.ammoBarClip.addChild(this.ammoBarStrokeClip)},initUI:function(){this.scoreTitle=this.newSprite(this.manifest.UI_SCORE),this.scoreTitle.x=116,this.scoreTitle.y=32,this.viewContainer.addChild(this.scoreTitle),this.scoreLabel=new r.BitmapText("$0",this.uiFont),this.scoreLabel.x=117,this.scoreLabel.y=39,this.scoreLabelShadow=new r.BitmapText("$0",this.uiFont),this.scoreLabelShadow.tint=51,this.scoreLabelShadow.x=this.scoreLabel.x,this.scoreLabelShadow.y=this.scoreLabel.y+1,this.gameUIHeartView=new a({viewContainer:this.viewContainer,gameModel:this.gameModel,x:0,y:7}),this.viewContainer.addChild(this.scoreLabelShadow),this.viewContainer.addChild(this.scoreLabel),this.timerClip=this.newSprite(this.manifest.UI_TIMER),this.timerClip.x=112,this.timerClip.y=-11,this.viewContainer.addChild(this.timerClip),this.timeLabel=new r.BitmapText("60",this.uiFont),this.timeLabel.x=12,this.timeLabel.y=29,this.timeLabelShadow=new r.BitmapText("60",this.uiFont),this.timeLabelShadow.tint=51,this.timeLabelShadow.x=this.timeLabel.x,this.timeLabelShadow.y=this.timeLabel.y+1,this.timerClip.addChild(this.timeLabelShadow),this.timerClip.addChild(this.timeLabel),this.initAmmoBar()},show:function(){this["super"].show.apply(this,arguments),this.updateTimerVisibility()},render:function(){this.initialized&&this.updateUI(),this["super"].render.apply(this,arguments)},updateUI:function(){this.initialized&&(this.ammoBarClip.visible=this.gameConfig.showPrepProgress,this.ammoBarInnerClip.scale.y=this.gameModel.availableMeals/this.gameConfig.maxAvailableMeals,this.gameConfig.showScore?(this.scoreLabel.visible=!0,this.scoreLabelShadow.visible=!0,this.gameModel.scoreModel.score<0?(this.scoreLabel.setText("-$"+Math.abs(this.gameModel.scoreModel.score)),this.scoreLabelShadow.setText("-$"+Math.abs(this.gameModel.scoreModel.score))):(this.scoreLabel.setText("$"+this.gameModel.scoreModel.score),this.scoreLabelShadow.setText("$"+this.gameModel.scoreModel.score))):(this.scoreLabel.visible=!1,this.scoreLabelShadow.visible=!1),this.gameUIHeartView.updateCount(this.gameConfig.livesMax-this.gameModel.livesLost),this.gameConfig.enableTimer&&(this.timeLabel.setText(""+Math.floor(this.gameModel.gameTimeRemaining)),this.timeLabelShadow.setText(""+Math.floor(this.gameModel.gameTimeRemaining))))},destroy:function(){this.stopListening(),this.off()
}});return h}),define("game/games/hangry/view/hangry_game_screens_view",["jquery","underscore","backbone","model/loader_collection","config","pixi","game/game_base/view/screens/game_screen_instructions","game/game_base/view/screens/game_screen_intro","game/game_base/view/screens/game_screen_lose","game/game_base/view/screens/game_screen_win","game/game_base/view/screens/game_screen_pause","game/game_base/view/screens/game_screen_cutscene","game/game_base/view/screens/game_screen_countdown","game/game_base/view/game_screens_view","shims/shim_resn_utils","game/game_base/view/screens/game_screen_pause_btn"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m){"use strict";var _=g.extend({initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.createScreens(),this.addEvents()},addEvents:function(){this.listenTo(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE,this.onGameStateChange)},removeEvents:function(){this.stopListening(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE)},onGameStateChange:function(){t.each(this.screens,function(e){e.onGameStateChange()})},createScreens:function(){var e={gameModel:this.gameModel,viewContainer:this.viewContainer,cutsceneMC:{id:"CHICKEN_CUTSCENE_MC"}},t=["CHICKEN_CUTSCENE_1","CHICKEN_CUTSCENE_2"];this.screens=[new r(e),new a(e),new u(e),new h(e),new l(e),new c(e),new m(e),new d(e,t)]},show:function(){this["super"].show.apply(this,arguments)},render:function(){},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}});return _}),define("game/games/hangry/hangry_game_main",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/game_main","game/game_config","game/games/hangry/model/hangry_game_model","game/games/hangry/model/hangry_asset_manifest","game/games/hangry/view/hangry_game_view","game/games/hangry/view/hangry_game_ui_view","game/games/hangry/view/hangry_game_screens_view"],function(e,t,i,s,n,o,r,a,h,l,c,d){"use strict";var u=o.extend({initialize:function(e){this["super"]=this.constructor.__super__;var i=t.extend({},e),s=new a({gameShellModel:e.gameShellModel,gameInputModel:e.gameInputModel,gameId:e.gameId,gameIndex:e.gameIndex,manifest:h});i.gameModel=s,i.gameView=new l({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameUIView=new c({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameScreensView=new d({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),this["super"].initialize.apply(this,[i])}});return u}),define("TweenMaxEasing",["TweenMax"],function(){"use strict";return{RoughEase:window.RoughEase,Expo:window.Expo,Sine:window.Sine,Power0:window.Power0,Power1:window.Power1,Power2:window.Power2,Power3:window.Power3,Power4:window.Power4}}),define("game/games/gun_fight/model/gun_fight_colonel_model",["jquery","underscore","backbone","config","TweenMaxEasing"],function(e,t,i,s,n){"use strict";return i.Model.extend({STATE_COLONEL_IDLE:"STATE_COLONEL_IDLE",STATE_COLONEL_HIDE:"STATE_COLONEL_HIDE",STATE_COLONEL_HIT:"STATE_COLONEL_HIT",STATE_COLONEL_SHOOT:"STATE_COLONEL_SHOOT",state:"STATE_COLONEL_IDLE",EVENTS:{STATE_CHANGE:"STATE_CHANGE",COLONEL_SHOOT:"COLONEL_SHOOT",COLONEL_HIT:"COLONEL_HIT",COLONEL_RELOAD:"COLONEL_RELOAD"},hitCount:3,hitIndex:0,prevHitIndex:-1,numOfShots:5,shotIndex:0,prevShotIndex:-1,nextReloadTime:0,reloadCoolDownTime:.7,nextShotTime:0,shotCoolDownTime:.5,gameModel:null,sceneYRatio:0,displayHit:!1,displayReloadUI:!1,recoilPos:null,gunWidth:86,gunHeight:70,gunPt:{x:0,y:0,ox:0,oy:0},initialize:function(e){t.bindAll(this,"reload","disableGunfire","disableHitUI","setState"),this.gameModel=e.gameModel,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.halfGameWidth=e.halfGameWidth,this.gameTweenMax=e.gameTweenMax,this.gameSoundModel=this.gameModel.gameSoundModel,this.manifest=this.gameModel.manifest,this.gunPt.x=this.gunPt.ox=this.halfGameWidth,this.gunPt.y=this.gunPt.oy=this.gameHeight+.2*this.gunHeight},reset:function(){this.hitIndex=0,this.prevHitIndex=-1,this.shotIndex=0,this.prevShotIndex=-1,this.displayReloadUI=!1,this.displayHitUI=!1,this.gunFire=!1,this.recoilPos={y:0,x:0}},start:function(){this.setState(this.STATE_COLONEL_IDLE)},buttonLeftPress:function(){this.setState(this.STATE_COLONEL_HIDE)},buttonRightPress:function(){this.checkAttack()},buttonLeftRelease:function(){this.setState(this.STATE_COLONEL_IDLE)},buttonRightRelease:function(){this.displayReloadUI=!1},setState:function(e){switch(e){case this.STATE_COLONEL_SHOOT:this.shoot();break;case this.STATE_COLONEL_HIDE:this.hide();break;case this.STATE_COLONEL_IDLE:this.idle();break;case this.STATE_COLONEL_RELOAD:this.reload()}this.state=e,this.trigger(this.EVENTS.STATE_CHANGE,this.state)},idle:function(){this.gameTweenMax.killDelayedCallsTo(this.setState)},reload:function(){this.shotIndex>0&&(this.shotIndex--,this.gameTweenMax.delayedCall(this.reloadCoolDownTime,this.setState,[this.STATE_COLONEL_RELOAD]),this.playReloadAudio(),this.trigger(this.EVENTS.COLONEL_RELOAD))},playReloadAudio:function(){0===this.shotIndex?this.gameSoundModel.play(this.manifest.AUDIO_COLONEL_RELOAD_FINAL.id,{loop:0}):this.gameSoundModel.play(this.manifest.AUDIO_COLONEL_RELOAD.id,{loop:0})},checkAttack:function(){this.state!==this.STATE_COLONEL_HIDE&&(this.shotIndex<this.numOfShots?this.gameTweenMax.time()>this.nextShotTime&&(this.nextShotTime=this.gameTweenMax.time()+this.shotCoolDownTime,this.setState(this.STATE_COLONEL_SHOOT),this.gameSoundModel.play(this.manifest.AUDIO_COLONEL_SHOOTS.id,{loop:0})):(this.displayReloadUI=!0,this.gameSoundModel.play(this.manifest.AUDIO_COLONEL_EMPTY_CLIP.id,{loop:0})))},shoot:function(){this.shotIndex++,this.trigger(this.EVENTS.COLONEL_SHOOT),this.recoil(),this.enableGunfire()},enableGunfire:function(){this.gunFire=!0,this.gameTweenMax.delayedCall(.1,this.disableGunfire)},disableGunfire:function(){this.gunFire=!1},recoil:function(){this.gameModel.sceneModel.yRatio=1.5,this.gameModel.targetModel.recoil=-100,this.gameTweenMax.to(this.gameModel.targetModel,this.shotCoolDownTime,{recoil:0,ease:n.Expo.easeOut}),this.recoilPos.y=17,this.gameTweenMax.to(this.recoilPos,this.shotCoolDownTime,{y:0,ease:n.Expo.easeOut})},hide:function(){this.gameTweenMax.killDelayedCallsTo(this.setState),this.gameTweenMax.delayedCall(this.reloadCoolDownTime,this.setState,[this.STATE_COLONEL_RELOAD])},hit:function(){this.hitIndex++,this.hitIndex+1<=this.hitCount?(this.displayHitUI=!0,this.gameTweenMax.delayedCall(.2,this.disableHitUI)):(this.state=this.STATE_COLONEL_HIT,this.gameModel.allLivesLost()),this.playHitAudio()},disableHitUI:function(){this.displayHitUI=!1},playHitAudio:function(){var e=[this.manifest.AUDIO_COLONEL_HIT_0.id,this.manifest.AUDIO_COLONEL_HIT_1.id];this.gameSoundModel.play(e[t.random(0,e.length-1)],{loop:0})},getHealthCount:function(){return this.hitCount-this.hitIndex},frameTick:function(){this.sceneYRatio=this.gameModel.sceneModel.yRatio,this.updateGunPosition()},updateGunPosition:function(){var e=this.gameModel.targetModel.getOffset();this.gunPt.x=Math.floor(e.x*this.sceneYRatio+(this.halfGameWidth-this.halfGameWidth*this.sceneYRatio)),this.gunPt.y=Math.floor(this.gunPt.oy+.4*e.y)},destroy:function(){}})}),define("game/games/gun_fight/sprites/gunfight-gunman",[],function(){"use strict";return{ns:"gunfight-gunman",manifest:[{src:"/img/games/gunfight/gunfight-gunman_0_sheet.png",spritesheet:{ns:"gunfight-gunman",sprites:[{x:252,y:0,width:47,height:111,id:"gunman_attack_0.png",trim:{origWidth:106,origHeight:111,width:47,height:111,offsetX:32,offsetY:0}},{x:48,y:218,width:52,height:98,id:"gunman_attack_1.png",trim:{origWidth:106,origHeight:111,width:52,height:98,offsetX:43,offsetY:8}},{x:492,y:426,width:14,height:14,id:"gunman_flash.png",trim:{origWidth:14,origHeight:14,width:14,height:14,offsetX:0,offsetY:0}},{x:146,y:262,width:42,height:18,id:"gunman_hat_fly_off_0.png",trim:{origWidth:42,origHeight:42,width:42,height:18,offsetX:0,offsetY:7}},{x:190,y:218,width:42,height:25,id:"gunman_hat_fly_off_1.png",trim:{origWidth:42,origHeight:42,width:42,height:25,offsetX:0,offsetY:8}},{x:102,y:218,width:42,height:42,id:"gunman_hat_fly_off_2.png",trim:{origWidth:42,origHeight:42,width:42,height:42,offsetX:0,offsetY:0}},{x:278,y:218,width:42,height:25,id:"gunman_hat_fly_off_3.png",trim:{origWidth:42,origHeight:42,width:42,height:25,offsetX:0,offsetY:9}},{x:102,y:262,width:42,height:18,id:"gunman_hat_fly_off_4.png",trim:{origWidth:42,origHeight:42,width:42,height:18,offsetX:0,offsetY:18}},{x:252,y:190,width:42,height:25,id:"gunman_hat_fly_off_5.png",trim:{origWidth:42,origHeight:42,width:42,height:25,offsetX:0,offsetY:9}},{x:146,y:218,width:42,height:42,id:"gunman_hat_fly_off_6.png",trim:{origWidth:42,origHeight:42,width:42,height:42,offsetX:0,offsetY:0}},{x:234,y:218,width:42,height:25,id:"gunman_hat_fly_off_7.png",trim:{origWidth:42,origHeight:42,width:42,height:25,offsetX:0,offsetY:9}},{x:301,y:113,width:42,height:91,id:"gunman_hide_0.png",trim:{origWidth:106,origHeight:111,width:42,height:91,offsetX:32,offsetY:20}},{x:252,y:113,width:42,height:75,id:"gunman_hide_1.png",trim:{origWidth:106,origHeight:111,width:42,height:75,offsetX:43,offsetY:1}},{x:398,y:0,width:48,height:103,id:"gunman_hit_0.png",trim:{origWidth:106,origHeight:111,width:48,height:103,offsetX:23,offsetY:8}},{x:126,y:112,width:51,height:103,id:"gunman_hit_1.png",trim:{origWidth:106,origHeight:111,width:51,height:103,offsetX:20,offsetY:8}},{x:350,y:0,width:46,height:110,id:"gunman_run_left_A-0.png",trim:{origWidth:106,origHeight:111,width:46,height:110,offsetX:31,offsetY:0}},{x:350,y:112,width:46,height:110,id:"gunman_run_left_A-1.png",trim:{origWidth:106,origHeight:111,width:46,height:110,offsetX:31,offsetY:0}},{x:0,y:218,width:46,height:111,id:"gunman_run_left_A-2.png",trim:{origWidth:106,origHeight:111,width:46,height:111,offsetX:31,offsetY:0}},{x:63,y:0,width:61,height:110,id:"gunman_run_left_A-3.png",trim:{origWidth:106,origHeight:111,width:61,height:110,offsetX:23,offsetY:0}},{x:63,y:112,width:61,height:104,id:"gunman_run_left_B-0.png",trim:{origWidth:106,origHeight:111,width:61,height:104,offsetX:23,offsetY:6}},{x:492,y:107,width:40,height:105,id:"gunman_run_left_B-1.png",trim:{origWidth:106,origHeight:111,width:40,height:105,offsetX:37,offsetY:6}},{x:398,y:217,width:46,height:104,id:"gunman_run_left_B-2.png",trim:{origWidth:106,origHeight:111,width:46,height:104,offsetX:31,offsetY:6}},{x:492,y:214,width:40,height:104,id:"gunman_run_left_B-3.png",trim:{origWidth:106,origHeight:111,width:40,height:104,offsetX:37,offsetY:6}},{x:0,y:112,width:61,height:104,id:"gunman_run_left_C-0.png",trim:{origWidth:106,origHeight:111,width:61,height:104,offsetX:23,offsetY:6}},{x:492,y:0,width:40,height:105,id:"gunman_run_left_C-1.png",trim:{origWidth:106,origHeight:111,width:40,height:105,offsetX:37,offsetY:6}},{x:350,y:224,width:46,height:104,id:"gunman_run_left_C-2.png",trim:{origWidth:106,origHeight:111,width:46,height:104,offsetX:31,offsetY:6}},{x:492,y:320,width:40,height:104,id:"gunman_run_left_C-3.png",trim:{origWidth:106,origHeight:111,width:40,height:104,offsetX:37,offsetY:6}},{x:45,y:331,width:42,height:110,id:"gunman_run_right_A-0.png",trim:{origWidth:106,origHeight:111,width:42,height:110,offsetX:32,offsetY:0}},{x:398,y:105,width:44,height:110,id:"gunman_run_right_A-1.png",trim:{origWidth:106,origHeight:111,width:44,height:110,offsetX:30,offsetY:0}},{x:0,y:331,width:43,height:111,id:"gunman_run_right_A-2.png",trim:{origWidth:106,origHeight:111,width:43,height:111,offsetX:33,offsetY:0}},{x:0,y:0,width:61,height:110,id:"gunman_run_right_A-3.png",trim:{origWidth:106,origHeight:111,width:61,height:110,offsetX:22,offsetY:0}},{x:189,y:0,width:61,height:104,id:"gunman_run_right_B-0.png",trim:{origWidth:106,origHeight:111,width:61,height:104,offsetX:22,offsetY:6}},{x:448,y:0,width:42,height:105,id:"gunman_run_right_B-1.png",trim:{origWidth:106,origHeight:111,width:42,height:105,offsetX:33,offsetY:6}},{x:89,y:331,width:43,height:104,id:"gunman_run_right_B-2.png",trim:{origWidth:106,origHeight:111,width:43,height:104,offsetX:30,offsetY:6}},{x:448,y:320,width:41,height:104,id:"gunman_run_right_B-3.png",trim:{origWidth:106,origHeight:111,width:41,height:104,offsetX:32,offsetY:6}},{x:126,y:0,width:61,height:104,id:"gunman_run_right_C-0.png",trim:{origWidth:106,origHeight:111,width:61,height:104,offsetX:22,offsetY:6}},{x:448,y:107,width:42,height:105,id:"gunman_run_right_C-1.png",trim:{origWidth:106,origHeight:111,width:42,height:105,offsetX:33,offsetY:6}},{x:134,y:331,width:43,height:104,id:"gunman_run_right_C-2.png",trim:{origWidth:106,origHeight:111,width:43,height:104,offsetX:30,offsetY:6}},{x:448,y:214,width:41,height:104,id:"gunman_run_right_C-3.png",trim:{origWidth:106,origHeight:111,width:41,height:104,offsetX:32,offsetY:6}},{x:301,y:0,width:47,height:111,id:"gunman_shoot_0.png",trim:{origWidth:106,origHeight:111,width:47,height:111,offsetX:32,offsetY:0}},{x:179,y:112,width:52,height:98,id:"gunman_shoot_1.png",trim:{origWidth:106,origHeight:111,width:52,height:98,offsetX:43,offsetY:8}}]},width:532,height:442}]}}),define("game/games/gun_fight/sprites/gunfight-obstacles",[],function(){"use strict";return{ns:"gunfight-obstacles",manifest:[{src:"/img/games/gunfight/gunfight-obstacles_0_sheet.png",spritesheet:{ns:"gunfight-obstacles",sprites:[{x:0,y:120,width:154,height:113,id:"car_0.png",trim:{origWidth:154,origHeight:123,width:154,height:113,offsetX:0,offsetY:0}},{x:310,y:0,width:154,height:113,id:"car_1.png",trim:{origWidth:154,origHeight:123,width:154,height:113,offsetX:0,offsetY:0}},{x:0,y:235,width:153,height:113,id:"car_2.png",trim:{origWidth:154,origHeight:123,width:153,height:113,offsetX:1,offsetY:0}},{x:310,y:115,width:153,height:113,id:"car_3.png",trim:{origWidth:154,origHeight:123,width:153,height:113,offsetX:1,offsetY:0}},{x:94,y:453,width:153,height:58,id:"car_ambient_0.png",trim:{origWidth:154,origHeight:123,width:153,height:58,offsetX:1,offsetY:57}},{x:560,y:57,width:153,height:55,id:"car_ambient_1.png",trim:{origWidth:154,origHeight:123,width:153,height:55,offsetX:1,offsetY:60}},{x:249,y:453,width:153,height:56,id:"car_ambient_2.png",trim:{origWidth:154,origHeight:123,width:153,height:56,offsetX:1,offsetY:59}},{x:404,y:453,width:153,height:56,id:"car_ambient_3.png",trim:{origWidth:154,origHeight:123,width:153,height:56,offsetX:1,offsetY:59}},{x:310,y:350,width:153,height:59,id:"car_ambient_4.png",trim:{origWidth:154,origHeight:123,width:153,height:59,offsetX:1,offsetY:56}},{x:560,y:263,width:153,height:51,id:"car_ambient_5.png",trim:{origWidth:154,origHeight:123,width:153,height:51,offsetX:1,offsetY:64}},{x:560,y:0,width:153,height:55,id:"car_ambient_6.png",trim:{origWidth:154,origHeight:123,width:153,height:55,offsetX:1,offsetY:60}},{x:766,y:383,width:12,height:11,id:"car_bullet_0.png",trim:{origWidth:12,origHeight:11,width:12,height:11,offsetX:0,offsetY:0}},{x:781,y:362,width:14,height:11,id:"car_bullet_1.png",trim:{origWidth:14,origHeight:11,width:14,height:11,offsetX:0,offsetY:0}},{x:780,y:383,width:10,height:10,id:"car_bullet_2.png",trim:{origWidth:12,origHeight:11,width:10,height:10,offsetX:1,offsetY:0}},{x:0,y:350,width:153,height:101,id:"car_explode_0.png",trim:{origWidth:154,origHeight:123,width:153,height:101,offsetX:1,offsetY:12}},{x:310,y:235,width:153,height:107,id:"car_explode_1.png",trim:{origWidth:154,origHeight:123,width:153,height:107,offsetX:1,offsetY:8}},{x:0,y:0,width:153,height:118,id:"car_explode_2.png",trim:{origWidth:154,origHeight:123,width:153,height:118,offsetX:1,offsetY:3}},{x:155,y:0,width:153,height:116,id:"car_explode_3.png",trim:{origWidth:154,origHeight:123,width:153,height:116,offsetX:1,offsetY:7}},{x:155,y:235,width:153,height:109,id:"car_explode_4.png",trim:{origWidth:154,origHeight:123,width:153,height:109,offsetX:1,offsetY:12}},{x:155,y:350,width:153,height:74,id:"car_explode_5.png",trim:{origWidth:154,origHeight:123,width:153,height:74,offsetX:1,offsetY:42}},{x:156,y:120,width:142,height:109,id:"car_hitarea.png",trim:{origWidth:154,origHeight:123,width:142,height:109,offsetX:12,offsetY:2}},{x:560,y:114,width:153,height:55,id:"car_inactive.png",trim:{origWidth:154,origHeight:123,width:153,height:55,offsetX:1,offsetY:60}},{x:0,y:554,width:87,height:90,id:"oil_0.png",trim:{origWidth:87,origHeight:90,width:87,height:90,offsetX:0,offsetY:0}},{x:560,y:408,width:87,height:90,id:"oil_1.png",trim:{origWidth:87,origHeight:90,width:87,height:90,offsetX:0,offsetY:0}},{x:89,y:554,width:87,height:90,id:"oil_2.png",trim:{origWidth:87,origHeight:90,width:87,height:90,offsetX:0,offsetY:0}},{x:715,y:247,width:57,height:72,id:"oil_3.png",trim:{origWidth:87,origHeight:90,width:57,height:72,offsetX:12,offsetY:13}},{x:715,y:321,width:53,height:60,id:"oil_4.png",trim:{origWidth:87,origHeight:90,width:53,height:60,offsetX:19,offsetY:23}},{x:715,y:0,width:84,height:83,id:"oil_5.png",trim:{origWidth:87,origHeight:90,width:84,height:83,offsetX:1,offsetY:5}},{x:178,y:554,width:86,height:90,id:"oil_6.png",trim:{origWidth:87,origHeight:90,width:86,height:90,offsetX:1,offsetY:0}},{x:715,y:85,width:82,height:84,id:"oil_7.png",trim:{origWidth:87,origHeight:90,width:82,height:84,offsetX:0,offsetY:4}},{x:715,y:171,width:77,height:74,id:"oil_8.png",trim:{origWidth:87,origHeight:90,width:77,height:74,offsetX:3,offsetY:9}},{x:715,y:383,width:39,height:23,id:"oil_9.png",trim:{origWidth:87,origHeight:90,width:39,height:23,offsetX:22,offsetY:60}},{x:560,y:316,width:87,height:90,id:"oil_hitarea.png",trim:{origWidth:87,origHeight:90,width:87,height:90,offsetX:0,offsetY:0}},{x:466,y:0,width:92,height:99,id:"pump_0.png",trim:{origWidth:92,origHeight:99,width:92,height:99,offsetX:0,offsetY:0}},{x:466,y:303,width:92,height:99,id:"pump_1.png",trim:{origWidth:92,origHeight:99,width:92,height:99,offsetX:0,offsetY:0}},{x:466,y:202,width:92,height:99,id:"pump_2.png",trim:{origWidth:92,origHeight:99,width:92,height:99,offsetX:0,offsetY:0}},{x:0,y:453,width:92,height:99,id:"pump_3.png",trim:{origWidth:92,origHeight:99,width:92,height:99,offsetX:0,offsetY:0}},{x:186,y:646,width:91,height:58,id:"pump_ambient_0.png",trim:{origWidth:92,origHeight:99,width:91,height:58,offsetX:1,offsetY:38}},{x:558,y:646,width:91,height:54,id:"pump_ambient_1.png",trim:{origWidth:92,origHeight:99,width:91,height:54,offsetX:1,offsetY:42}},{x:93,y:646,width:91,height:59,id:"pump_ambient_2.png",trim:{origWidth:92,origHeight:99,width:91,height:59,offsetX:1,offsetY:37}},{x:372,y:646,width:91,height:54,id:"pump_ambient_3.png",trim:{origWidth:92,origHeight:99,width:91,height:54,offsetX:1,offsetY:42}},{x:279,y:646,width:91,height:58,id:"pump_ambient_4.png",trim:{origWidth:92,origHeight:99,width:91,height:58,offsetX:1,offsetY:38}},{x:465,y:646,width:91,height:54,id:"pump_ambient_5.png",trim:{origWidth:92,origHeight:99,width:91,height:54,offsetX:1,offsetY:42}},{x:794,y:171,width:5,height:30,id:"pump_bullet_0.png",trim:{origWidth:5,origHeight:31,width:5,height:30,offsetX:0,offsetY:0}},{x:794,y:203,width:5,height:23,id:"pump_bullet_1.png",trim:{origWidth:5,origHeight:24,width:5,height:23,offsetX:0,offsetY:1}},{x:770,y:362,width:9,height:19,id:"pump_bullet_A_0.png",trim:{origWidth:12,origHeight:45,width:9,height:19,offsetX:3,offsetY:26}},{x:751,y:455,width:8,height:25,id:"pump_bullet_A_1.png",trim:{origWidth:12,origHeight:45,width:8,height:25,offsetX:3,offsetY:20}},{x:776,y:408,width:8,height:28,id:"pump_bullet_A_2.png",trim:{origWidth:12,origHeight:45,width:8,height:28,offsetX:3,offsetY:17}},{x:724,y:455,width:7,height:33,id:"pump_bullet_A_3.png",trim:{origWidth:12,origHeight:45,width:7,height:33,offsetX:2,offsetY:12}},{x:745,y:408,width:8,height:37,id:"pump_bullet_A_4.png",trim:{origWidth:12,origHeight:45,width:8,height:37,offsetX:2,offsetY:8}},{x:715,y:455,width:7,height:41,id:"pump_bullet_A_5.png",trim:{origWidth:12,origHeight:45,width:7,height:41,offsetX:2,offsetY:4}},{x:715,y:408,width:8,height:45,id:"pump_bullet_A_6.png",trim:{origWidth:12,origHeight:45,width:8,height:45,offsetX:2,offsetY:0}},{x:755,y:408,width:8,height:35,id:"pump_bullet_B_0.png",trim:{origWidth:10,origHeight:40,width:8,height:35,offsetX:0,offsetY:5}},{x:733,y:455,width:7,height:32,id:"pump_bullet_B_1.png",trim:{origWidth:10,origHeight:40,width:7,height:32,offsetX:1,offsetY:8}},{x:786,y:408,width:8,height:25,id:"pump_bullet_B_2.png",trim:{origWidth:10,origHeight:40,width:8,height:25,offsetX:0,offsetY:15}},{x:756,y:383,width:8,height:21,id:"pump_bullet_B_3.png",trim:{origWidth:10,origHeight:40,width:8,height:21,offsetX:0,offsetY:19}},{x:742,y:455,width:7,height:30,id:"pump_bullet_B_4.png",trim:{origWidth:10,origHeight:40,width:7,height:30,offsetX:1,offsetY:10}},{x:735,y:408,width:8,height:40,id:"pump_bullet_B_5.png",trim:{origWidth:10,origHeight:40,width:8,height:40,offsetX:0,offsetY:0}},{x:725,y:408,width:8,height:40,id:"pump_bullet_B_6.png",trim:{origWidth:10,origHeight:40,width:8,height:40,offsetX:0,offsetY:0}},{x:765,y:408,width:9,height:31,id:"pump_bullet_C_0.png",trim:{origWidth:11,origHeight:41,width:9,height:31,offsetX:2,offsetY:10}},{x:774,y:290,width:10,height:27,id:"pump_bullet_C_1.png",trim:{origWidth:11,origHeight:41,width:10,height:27,offsetX:1,offsetY:14}},{x:786,y:290,width:10,height:21,id:"pump_bullet_C_2.png",trim:{origWidth:11,origHeight:41,width:10,height:21,offsetX:1,offsetY:20}},{x:774,y:247,width:10,height:41,id:"pump_bullet_C_3.png",trim:{origWidth:11,origHeight:41,width:10,height:41,offsetX:1,offsetY:0}},{x:782,y:321,width:10,height:37,id:"pump_bullet_C_4.png",trim:{origWidth:11,origHeight:41,width:10,height:37,offsetX:1,offsetY:4}},{x:770,y:321,width:10,height:39,id:"pump_bullet_C_5.png",trim:{origWidth:11,origHeight:41,width:10,height:39,offsetX:1,offsetY:2}},{x:786,y:247,width:11,height:36,id:"pump_bullet_C_6.png",trim:{origWidth:11,origHeight:41,width:11,height:36,offsetX:0,offsetY:5}},{x:453,y:554,width:91,height:80,id:"pump_explode_0.png",trim:{origWidth:92,origHeight:99,width:91,height:80,offsetX:1,offsetY:16}},{x:0,y:646,width:91,height:64,id:"pump_explode_1.png",trim:{origWidth:92,origHeight:99,width:91,height:64,offsetX:1,offsetY:32}},{x:360,y:554,width:91,height:83,id:"pump_explode_2.png",trim:{origWidth:92,origHeight:99,width:91,height:83,offsetX:1,offsetY:14}},{x:560,y:171,width:91,height:90,id:"pump_explode_3.png",trim:{origWidth:92,origHeight:99,width:91,height:90,offsetX:1,offsetY:9}},{x:266,y:554,width:92,height:84,id:"pump_explode_4.png",trim:{origWidth:92,origHeight:99,width:92,height:84,offsetX:0,offsetY:13}},{x:546,y:554,width:91,height:78,id:"pump_explode_5.png",trim:{origWidth:92,origHeight:99,width:91,height:78,offsetX:1,offsetY:18}},{x:466,y:101,width:92,height:99,id:"pump_hitarea.png",trim:{origWidth:92,origHeight:99,width:92,height:99,offsetX:0,offsetY:0}}]},width:799,height:710}]}}),define("game/games/gun_fight/sprites/gunfight-stage",[],function(){"use strict";return{ns:"gunfight-stage",manifest:[{src:"/img/games/gunfight/gunfight-stage_0_sheet.png",spritesheet:{ns:"gunfight-stage",sprites:[{x:0,y:229,width:149,height:156,id:"barrel.png",trim:{origWidth:151,origHeight:157,width:149,height:156,offsetX:1,offsetY:0}},{x:342,y:0,width:256,height:192,id:"bg.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:186,y:331,width:28,height:28,id:"crosshair.png",trim:{origWidth:30,origHeight:31,width:28,height:28,offsetX:1,offsetY:2}},{x:436,y:258,width:42,height:63,id:"gun.png",trim:{origWidth:86,origHeight:85,width:42,height:63,offsetX:22,offsetY:22}},{x:0,y:387,width:42,height:85,id:"gun_flash.png",trim:{origWidth:86,origHeight:85,width:42,height:85,offsetX:22,offsetY:0}},{x:328,y:258,width:52,height:63,id:"gun_reload_0.png",trim:{origWidth:86,origHeight:85,width:52,height:63,offsetX:22,offsetY:22}},{x:212,y:258,width:59,height:63,id:"gun_reload_1.png",trim:{origWidth:86,origHeight:85,width:59,height:63,offsetX:22,offsetY:22}},{x:273,y:258,width:53,height:63,id:"gun_reload_2.png",trim:{origWidth:86,origHeight:85,width:53,height:63,offsetX:22,offsetY:22}},{x:151,y:258,width:59,height:63,id:"gun_reload_3.png",trim:{origWidth:86,origHeight:85,width:59,height:63,offsetX:22,offsetY:22}},{x:382,y:258,width:52,height:63,id:"gun_reload_4.png",trim:{origWidth:86,origHeight:85,width:52,height:63,offsetX:22,offsetY:22}},{x:0,y:0,width:340,height:227,id:"midground.png",trim:{origWidth:340,origHeight:227,width:340,height:227,offsetX:0,offsetY:0}},{x:151,y:229,width:362,height:27,id:"mud_0.png",trim:{origWidth:362,origHeight:29,width:362,height:27,offsetX:0,offsetY:2}},{x:151,y:323,width:362,height:6,id:"mud_1.png",trim:{origWidth:362,origHeight:6,width:362,height:6,offsetX:0,offsetY:0}},{x:342,y:194,width:251,height:14,id:"mud_2.png",trim:{origWidth:251,origHeight:14,width:251,height:14,offsetX:0,offsetY:0}},{x:550,y:258,width:16,height:16,id:"obstacle_ricochet.png",trim:{origWidth:28,origHeight:28,width:16,height:16,offsetX:6,offsetY:5}},{x:151,y:331,width:33,height:32,id:"ricochet.png",trim:{origWidth:35,origHeight:32,width:33,height:32,offsetX:1,offsetY:0}},{x:342,y:210,width:26,height:13,id:"ui_bg_accuracy.png",trim:{origWidth:26,origHeight:13,width:26,height:13,offsetX:0,offsetY:0}},{x:585,y:229,width:6,height:15,id:"ui_bullet.png"},{x:480,y:258,width:68,height:21,id:"ui_bullets_bg.png"},{x:480,y:281,width:61,height:21,id:"ui_bullets_fg.png"},{x:568,y:258,width:14,height:14,id:"ui_colonel_accuracy.png",trim:{origWidth:14,origHeight:14,width:14,height:14,offsetX:0,offsetY:0}},{x:543,y:281,width:6,height:15,id:"ui_colonel_bullet.png",trim:{origWidth:6,origHeight:15,width:6,height:15,offsetX:0,offsetY:0}},{x:584,y:258,width:6,height:14,id:"ui_colonel_bullet_bg.png",trim:{origWidth:6,origHeight:15,width:6,height:14,offsetX:0,offsetY:0}},{x:370,y:210,width:13,height:12,id:"ui_health.png"},{x:515,y:229,width:68,height:22,id:"ui_health_bg.png"}]},width:598,height:472}]}}),define("game/games/gun_fight/model/gun_fight_asset_manifest",["underscore","config","game/games/gun_fight/sprites/gunfight-gunman","game/games/gun_fight/sprites/gunfight-obstacles","game/games/gun_fight/sprites/gunfight-stage","game/sprites/game_screen_assets"],function(e,t,i,s,n,o){var r=e.flatten([i.manifest,s.manifest,n.manifest],!0);e.each(r,function(e){e.spritesheet&&(e.pixijs=e.spritesheet)});var a=[{src:"/font/frucade.xml",id:"font/frucade.xml",type:"xml",pixijs:{font:{name:"frucade",bitmap:"font/frucade.png"}}},{id:"AUDIO_MUSIC",priority:1,type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_music.mp3"},{id:"AUDIO_MUSIC_RUNS",priority:1,type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_music_runs.mp3"},{id:"AUDIO_STAGE_RICOCHET_0",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_ricochet1.mp3"},{id:"AUDIO_STAGE_RICOCHET_1",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_ricochet2.mp3"},{id:"AUDIO_STAGE_HIT_WOOD",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_hitwood.mp3"},{id:"AUDIO_STAGE_HIT_METAL",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_hitmetal.mp3"},{id:"AUDIO_COLONEL_EMPTY_CLIP",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_empty.mp3"},{id:"AUDIO_COLONEL_HIT_0",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_playerhit1.mp3"},{id:"AUDIO_COLONEL_HIT_1",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_playerhit2.mp3"},{id:"AUDIO_COLONEL_SHOOTS",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_playershoots.mp3"},{id:"AUDIO_COLONEL_RELOAD",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_reload.mp3"},{id:"AUDIO_COLONEL_RELOAD_FINAL",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_reloadfinal.mp3"},{id:"AUDIO_GUNMAN_EMPTY_SHOT",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_enemyshoots.mp3"},{id:"AUDIO_GUNMAN_SPEECH_MY_HAT",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_speech_myhat.mp3"},{id:"AUDIO_GUNMAN_SPEECH_OW_0",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_speech_ow.mp3"},{id:"AUDIO_GUNMAN_SPEECH_OW_1",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_speech_ow2.mp3"},{id:"AUDIO_GUNMAN_SPEECH_HIT",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_speech_yagotme.mp3"},{id:"AUDIO_OBSTACLE_EXPLOSION_0",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_explosion_01.mp3"},{id:"AUDIO_OBSTACLE_EXPLOSION_1",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_explosion_02.mp3"},{id:"AUDIO_OBSTACLE_EXPLOSION_2",type:"sound",volume:1,src:"/audio/games/gun_fight/shootout_explosion_03.mp3"}];a=a.concat(r);var h={BACKGROUND:{id:"BACKGROUND",type:"SPRITE",url:"bg.png",ns:n.ns},CROSSHAIR:{id:"CROSSHAIR",type:"SPRITE",url:"crosshair.png",ns:n.ns},MUD_0:{id:"MUD_0",type:"SPRITE",url:"mud_0.png",ns:n.ns},MUD_1:{id:"MUD_1",type:"SPRITE",url:"mud_1.png",ns:n.ns},MUD_2:{id:"MUD_2",type:"SPRITE",url:"mud_2.png",ns:n.ns},BARREL:{id:"BARREL",type:"SPRITE",url:"barrel.png",ns:n.ns},MIDGROUND:{id:"MIDGROUND",type:"SPRITE",url:"midground.png",ns:n.ns},CAR_0:{id:"CAR_0",type:"SPRITE",url:"car_0.png",ns:s.ns},CAR_1:{id:"CAR_1",type:"SPRITE",url:"car_1.png",ns:s.ns},CAR_2:{id:"CAR_2",type:"SPRITE",url:"car_2.png",ns:s.ns},CAR_3:{id:"CAR_3",type:"SPRITE",url:"car_3.png",ns:s.ns},CAR_BULLET_0:{id:"CAR_BULLET_0",type:"SPRITE",url:"car_bullet_0.png",ns:s.ns},CAR_BULLET_1:{id:"CAR_BULLET_1",type:"SPRITE",url:"car_bullet_1.png",ns:s.ns},CAR_BULLET_2:{id:"CAR_BULLET_2",type:"SPRITE",url:"car_bullet_2.png",ns:s.ns},CAR_HITAREA:{id:"CAR_HITAREA",type:"SPRITE",url:"car_hitarea.png",ns:s.ns},CAR_INACTIVE_EXPLODE_MC:{id:"CAR_INACTIVE_EXPLODE_MC",type:"MOVIECLIP",speedRatio:.25,ns:s.ns,frameNames:["car_explode_0.png","car_explode_1.png","car_explode_2.png","car_explode_3.png","car_explode_4.png","car_explode_5.png"]},CAR_INACTIVE_AMBIENT_MC:{id:"CAR_INACTIVE_AMBIENT_MC",type:"MOVIECLIP",speedRatio:.25,ns:s.ns,frameNames:["car_ambient_0.png","car_ambient_1.png","car_ambient_2.png","car_ambient_3.png","car_ambient_4.png","car_ambient_5.png","car_ambient_6.png"]},GUN:{id:"GUN",type:"SPRITE",url:"gun.png",ns:n.ns},GUN_FLASH:{id:"GUN_FLASH",type:"SPRITE",url:"gun_flash.png",ns:n.ns},GUN_RELOAD:{id:"GUN_RELOAD",type:"MOVIECLIP",speedRatio:.25,ns:n.ns,frameNames:["gun_reload_0.png","gun_reload_1.png","gun_reload_2.png","gun_reload_3.png","gun_reload_4.png"]},OIL_0:{id:"OIL_0",type:"SPRITE",url:"oil_0.png",ns:s.ns},OIL_1:{id:"OIL_1",type:"SPRITE",url:"oil_1.png",ns:s.ns},OIL_2:{id:"OIL_2",type:"SPRITE",url:"oil_2.png",ns:s.ns},OIL_HITAREA:{id:"OIL_HITAREA",type:"SPRITE",url:"oil_hitarea.png",ns:s.ns},OIL_INACTIVE_EXPLODE_MC:{id:"OIL_INACTIVE_EXPLODE_MC",type:"MOVIECLIP",speedRatio:.25,ns:s.ns,frameNames:["oil_4.png","oil_5.png","oil_6.png","oil_7.png","oil_8.png","oil_9.png"]},OPPONENT_HIDE_0:{id:"OPPONENT_HIDE_0",type:"SPRITE",url:"gunman_hide_0.png",ns:i.ns},OPPONENT_ATTACK_0:{id:"OPPONENT_ATTACK_0",type:"SPRITE",url:"gunman_attack_0.png",ns:i.ns},OPPONENT_FLASH_0:{id:"OPPONENT_FLASH_0",type:"SPRITE",url:"gunman_shoot_0.png",ns:i.ns},OPPONENT_HIDE_1:{id:"OPPONENT_HIDE_1",type:"SPRITE",url:"gunman_hide_1.png",ns:i.ns},OPPONENT_ATTACK_1:{id:"OPPONENT_ATTACK_1",type:"SPRITE",url:"gunman_attack_1.png",ns:i.ns},OPPONENT_FLASH_1:{id:"OPPONENT_FLASH_1",type:"SPRITE",url:"gunman_shoot_1.png",ns:i.ns},OPPONENT_RUN_FLASH:{id:"OPPONENT_RUN_FLASH",type:"SPRITE",url:"gunman_flash.png",ns:i.ns},OPPONENT_HIT:{id:"OPPONENT_HIT",type:"MOVIECLIP",speedRatio:.1,ns:i.ns,frameNames:["gunman_hit_0.png","gunman_hit_1.png"]},OPPONENT_RUN_LEFT_0:{id:"OPPONENT_RUN_LEFT_0",type:"MOVIECLIP",speedRatio:.2,ns:i.ns,frameNames:["gunman_run_left_A-0.png","gunman_run_left_A-1.png","gunman_run_left_A-2.png","gunman_run_left_A-3.png"]},OPPONENT_RUN_RIGHT_0:{id:"OPPONENT_RUN_RIGHT_0",type:"MOVIECLIP",speedRatio:.2,ns:i.ns,frameNames:["gunman_run_right_A-0.png","gunman_run_right_A-1.png","gunman_run_right_A-2.png","gunman_run_right_A-3.png"]},OPPONENT_RUN_LEFT_1:{id:"OPPONENT_RUN_LEFT_1",type:"MOVIECLIP",speedRatio:.2,ns:i.ns,frameNames:["gunman_run_left_B-0.png","gunman_run_left_B-1.png","gunman_run_left_B-2.png","gunman_run_left_B-3.png"]},OPPONENT_RUN_RIGHT_1:{id:"OPPONENT_RUN_RIGHT_1",type:"MOVIECLIP",speedRatio:.2,ns:i.ns,frameNames:["gunman_run_right_B-0.png","gunman_run_right_B-1.png","gunman_run_right_B-2.png","gunman_run_right_B-3.png"]},OPPONENT_RUN_LEFT_2:{id:"OPPONENT_RUN_LEFT_2",type:"MOVIECLIP",speedRatio:.2,ns:i.ns,frameNames:["gunman_run_left_C-0.png","gunman_run_left_C-1.png","gunman_run_left_C-2.png","gunman_run_left_C-3.png"]},OPPONENT_RUN_RIGHT_2:{id:"OPPONENT_RUN_RIGHT_2",type:"MOVIECLIP",speedRatio:.2,ns:i.ns,frameNames:["gunman_run_right_C-0.png","gunman_run_right_C-1.png","gunman_run_right_C-2.png","gunman_run_right_C-3.png"]},OPPONENT_RUN_HAT_REMOVED:{id:"OPPONENT_RUN_HAT_REMOVED",type:"MOVIECLIP",speedRatio:.2,ns:i.ns,frameNames:["gunman_hat_fly_off_0.png","gunman_hat_fly_off_1.png","gunman_hat_fly_off_2.png","gunman_hat_fly_off_3.png","gunman_hat_fly_off_4.png","gunman_hat_fly_off_5.png","gunman_hat_fly_off_6.png","gunman_hat_fly_off_7.png"]},PUMP_HITAREA:{id:"PUMP_HITAREA",type:"SPRITE",ns:s.ns,url:"pump_hitarea.png"},PUMP_0:{id:"PUMP_0",type:"SPRITE",url:"pump_0.png",ns:s.ns},PUMP_1:{id:"PUMP_1",type:"SPRITE",url:"pump_1.png",ns:s.ns},PUMP_2:{id:"PUMP_2",type:"SPRITE",url:"pump_2.png",ns:s.ns},PUMP_3:{id:"PUMP_3",type:"SPRITE",url:"pump_3.png",ns:s.ns},PUMP_4:{id:"PUMP_4",type:"SPRITE",url:"pump_4.png",ns:s.ns},PUMP_5:{id:"PUMP_5",type:"SPRITE",url:"pump_5.png",ns:s.ns},PUMP_INACTIVE:{id:"PUMP_INACTIVE",type:"SPRITE",url:"pump_inactive.png",ns:s.ns},PUMP_BULLET_0_MC:{id:"PUMP_BULLET_0_MC",type:"MOVIECLIP",speedRatio:.25,ns:s.ns,frameNames:["pump_bullet_A_0.png","pump_bullet_A_1.png","pump_bullet_A_2.png","pump_bullet_A_3.png","pump_bullet_A_4.png","pump_bullet_A_5.png","pump_bullet_A_6.png"]},PUMP_BULLET_1_MC:{id:"PUMP_BULLET_1_MC",type:"MOVIECLIP",speedRatio:.25,ns:s.ns,frameNames:["pump_bullet_B_0.png","pump_bullet_B_1.png","pump_bullet_B_2.png","pump_bullet_B_3.png","pump_bullet_B_4.png","pump_bullet_B_5.png","pump_bullet_B_6.png"]},PUMP_BULLET_2_MC:{id:"PUMP_BULLET_2_MC",type:"MOVIECLIP",speedRatio:.25,ns:s.ns,frameNames:["pump_bullet_C_0.png","pump_bullet_C_1.png","pump_bullet_C_2.png","pump_bullet_C_3.png","pump_bullet_C_4.png","pump_bullet_C_5.png","pump_bullet_C_6.png"]},PUMP_INACTIVE_EXPLODE_MC:{id:"PUMP_INACTIVE_EXPLODE_MC",type:"MOVIECLIP",speedRatio:.25,ns:s.ns,frameNames:["pump_explode_0.png","pump_explode_1.png","pump_explode_2.png","pump_explode_3.png","pump_explode_4.png","pump_explode_5.png"]},PUMP_INACTIVE_AMBIENT_MC:{id:"PUMP_INACTIVE_AMBIENT_MC",type:"MOVIECLIP",speedRatio:.25,ns:s.ns,frameNames:["pump_ambient_0.png","pump_ambient_1.png","pump_ambient_2.png","pump_ambient_3.png","pump_ambient_4.png","pump_ambient_5.png"]},RICOCHET:{id:"RICOCHET",type:"SPRITE",url:"ricochet.png",ns:n.ns},OBSTACLE_RICOCHET:{id:"OBSTACLE_RICOCHET",type:"SPRITE",ns:n.ns,url:"obstacle_ricochet.png"},UI_BG_ACCURACY:{id:"UI_BG_ACCURACY",type:"SPRITE",url:"ui_bg_accuracy.png",ns:n.ns},UI_COLONEL_ACCURACY:{id:"UI_COLONEL_BULLETS_BG",type:"SPRITE",url:"ui_colonel_accuracy.png",ns:n.ns},UI_COLONEL_BULLETS_BG:{id:"UI_COLONEL_BULLETS_BG",type:"SPRITE",url:"ui_colonel_bullet_bg.png",ns:n.ns},UI_COLONEL_BULLETS:{id:"UI_COLONEL_BULLETS",type:"SPRITE",url:"ui_colonel_bullet.png",ns:n.ns},UI_HEART_X:{id:"UI_HEART_X",type:"SPRITE",url:"ui_health_X.png",ns:o.ns},UI_HEART_0:{id:"UI_HEART_0",type:"SPRITE",url:"ui_health_0.png",ns:o.ns},UI_HEART_1:{id:"UI_HEART_1",type:"SPRITE",url:"ui_health_1.png",ns:o.ns},UI_HEART_2:{id:"UI_HEART_2",type:"SPRITE",url:"ui_health_2.png",ns:o.ns},UI_HEART_3:{id:"UI_HEART_3",type:"SPRITE",url:"ui_health_3.png",ns:o.ns},UI_HEART_ICON_BG:{id:"UI_HEART_ICON_BG",type:"SPRITE",url:"ui_health_heart_bg.png",ns:o.ns},UI_HEART_ICON:{id:"UI_HEART_ICON",type:"SPRITE",url:"ui_health_heart.png",ns:o.ns},UI_HEART_POLE:{id:"UI_HEART_POLE",type:"SPRITE",url:"ui_health_pole.png",ns:o.ns},UI_HEART_BG:{id:"UI_HEART_BG",type:"SPRITE",url:"ui_health_bg.png",ns:o.ns}};
for(var l in h){var c=h[l];if(c.url&&(c.ns_url=c.ns+c.url),c.frameNames){c.ns_frameNames=[];for(var d=0,u=c.frameNames.length;u>d;d++)c.ns_frameNames.push(c.ns+c.frameNames[d])}}return h.assetManifest=a,h}),define("game/games/gun_fight/model/gun_fight_gunman_data",["game/games/gun_fight/model/gun_fight_asset_manifest"],function(e){"use strict";return{obstacles:[{id:0,positions:{x:35,y:0,hide:{x:0,y:5},attack:{x:10,y:-10}},frames:{hide:e.OPPONENT_HIDE_1.ns_url,attack:e.OPPONENT_ATTACK_1.ns_url,shoot:e.OPPONENT_FLASH_1.ns_url}},{id:1,positions:{x:133,y:-5,hide:{x:0,y:-5},attack:{x:0,y:-15}},frames:{hide:e.OPPONENT_HIDE_0.ns_url,attack:e.OPPONENT_ATTACK_0.ns_url,shoot:e.OPPONENT_FLASH_0.ns_url}},{id:2,positions:{x:245,y:-5,hide:{x:0,y:-6},attack:{x:0,y:-10}},frames:{hide:e.OPPONENT_HIDE_0.ns_url,attack:e.OPPONENT_ATTACK_0.ns_url,shoot:e.OPPONENT_FLASH_0.ns_url}}],running:[{movieclips:{left:e.OPPONENT_RUN_LEFT_0.id,right:e.OPPONENT_RUN_RIGHT_0.id}},{movieclips:{left:e.OPPONENT_RUN_LEFT_1.id,right:e.OPPONENT_RUN_RIGHT_1.id}},{movieclips:{left:e.OPPONENT_RUN_LEFT_2.id,right:e.OPPONENT_RUN_RIGHT_2.id}}]}}),define("game/games/gun_fight/model/gun_fight_gunman_model",["jquery","underscore","backbone","config","shims/shim_resn_utils","TweenMaxEasing","game/games/gun_fight/model/gun_fight_gunman_data"],function(e,t,i,s,n,o,r){"use strict";return i.Model.extend({STATE_GUNMAN_ATTACK:"STATE_GUNMAN_ATTACK",STATE_GUNMAN_RELOAD:"STATE_GUNMAN_RELOAD",STATE_GUNMAN_DUCK:"STATE_GUNMAN_DUCK",STATE_GUNMAN_HIT:"STATE_GUNMAN_HIT",STATE_GUNMAN_SHOOT:"STATE_GUNMAN_SHOOT",STATE_GUNMAN_RUN:"STATE_GUNMAN_RUN",STATE_GUNMAN_RUN_SHOOT:"STATE_GUNMAN_RUN_SHOOT",state:"STATE_GUNMAN_RELOAD",EVENTS:{STATE_CHANGE:"STATE_CHANGE",HAT_REMOVED:"HAT_REMOVED",GUNMAN_SHOOT:"GUNMAN_SHOOT"},hitCount:2,hitIndex:0,prevHitIndex:0,hitRate:.1,hitRateIncrement:.05,numOfShots:5,shotIndex:0,initialDelay:2,attackDuration:0,minAttackTime:2,maxAttackTime:5,shotIntervalArray:[],minReloadTime:3,maxReloadTime:5,nextShotTime:0,shotCoolDownTime:0,width:50,height:100,hatPt:{x:{current:0,left:30,right:33},y:-7},pt:{x:0,y:0},innerPt:{x:0,y:0},prevX:0,runningDirection:-1,tgObstacleModel:null,obstacleData:null,runningData:null,initialize:function(e){t.bindAll(this,"attack","detectDuck","onShotComplete","onDuckComplete","onSetAttackState","setState","onRunShotComplete"),this.gameModel=e.gameModel,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.pixelScaleMultiplier=e.pixelScaleMultiplier,this.gameTweenMax=e.gameTweenMax,this.gameSoundModel=this.gameModel.gameSoundModel,this.manifest=this.gameModel.manifest,this.obstacleData=r.obstacles,this.runningData=r.running},start:function(){var e=this.getRunOrReloadState();this.setState(e)},reset:function(){this.tgObstacleModel=null,this.hitIndex=this.prevHitIndex=0,this.hitCount=this.runningData.length,this.hitRate=.1,this.hitRateMultipler=1,this.gunFire=!1,this.hatPt.y=-7,this.trigger(this.EVENTS.HAT_REMOVED,!1)},setState:function(e){switch(e){case this.STATE_GUNMAN_ATTACK:this.attack();break;case this.STATE_GUNMAN_SHOOT:this.shoot();break;case this.STATE_GUNMAN_RELOAD:this.reload();break;case this.STATE_GUNMAN_DUCK:this.duck();break;case this.STATE_GUNMAN_RUN:this.run();break;case this.STATE_GUNMAN_RUN_SHOOT:this.runShoot();break;case this.STATE_GUNMAN_HIT:this.hit()}this.state=e,this.trigger(this.EVENTS.STATE_CHANGE,this.state)},reload:function(){this.shotIndex=0,this.calcShotIntervals(),this.gameTweenMax.killTweensOf(this.innerPt),this.gameTweenMax.to(this.innerPt,.5,{y:this.obstacleData[this.tgObstacleModel.index].positions.hide.y,x:this.obstacleData[this.tgObstacleModel.index].positions.hide.x,ease:o.Expo.easeOut});var e=n.math.randomIntInRange(this.minReloadTime,this.maxReloadTime);this.gameTweenMax.delayedCall(e,this.setState,[this.STATE_GUNMAN_ATTACK])},duck:function(){this.gameTweenMax.killTweensOf(this.innerPt),this.gameTweenMax.to(this.innerPt,.3,{y:this.obstacleData[this.tgObstacleModel.index].positions.hide.y,x:this.obstacleData[this.tgObstacleModel.index].positions.hide.x,ease:o.Power3.easeOut,onComplete:this.onDuckComplete})},onDuckComplete:function(){var e=.85*this.shotIntervalArray[this.shotIndex].interval;this.gameTweenMax.delayedCall(e,this.onSetAttackState)},attack:function(){this.gameTweenMax.killTweensOf(this.innerPt),this.gameTweenMax.to(this.innerPt,.3,{y:this.obstacleData[this.tgObstacleModel.index].positions.attack.y,x:this.obstacleData[this.tgObstacleModel.index].positions.attack.x,ease:o.Power3.easeOut,onComplete:this.detectDuck})},detectDuck:function(){if(this.shotIntervalArray[this.shotIndex].duck)this.setState(this.STATE_GUNMAN_DUCK);else{var e=this.shotIntervalArray[this.shotIndex].interval;this.gameTweenMax.delayedCall(e,this.setState,[this.STATE_GUNMAN_SHOOT])}},shoot:function(){this.gameTweenMax.delayedCall(.05,this.onShotComplete),this.playShotAudio()},playShotAudio:function(){this.gameSoundModel.play(this.manifest.AUDIO_GUNMAN_EMPTY_SHOT.id,{loop:0})},onShotComplete:function(){this.trigger(this.EVENTS.GUNMAN_SHOOT),this.onSetAttackState()},onSetAttackState:function(){if(this.shotIndex++,this.shotIndex<this.numOfShots)this.setState(this.STATE_GUNMAN_ATTACK);else{var e=this.getRunOrReloadState();this.setState(e)}},onObstacleInactive:function(){this.killDelayedCalls();var e=this.getRunOrReloadState();this.setState(e)},getRunOrReloadState:function(){var e=this.gameModel.obstaclesModel.getActiveObstacles(),t=this.tgObstacleModel,i=this.getRandomObstacle();return 0===e.length?this.STATE_GUNMAN_RUN:e.length>0?t===i&&this.state!==this.STATE_GUNMAN_RUN?this.STATE_GUNMAN_RELOAD:(this.tgObstacleModel=i,this.STATE_GUNMAN_RUN):void 0},getRandomObstacle:function(){var e=this.gameModel.obstaclesModel.getActiveObstacles(),t=n.math.randomIntInRange(0,e.length-1);return e[t]},run:function(){if(this.gameTweenMax.killTweensOf(this.innerPt),this.gameTweenMax.to(this.innerPt,.2,{y:0,x:0,ease:o.Power3.easeOut}),this.gameModel.sceneModel.state===this.gameModel.sceneModel.STATE_SCENE_OBSTACLES){var e=this.obstacleData[this.tgObstacleModel.index].positions.x;this.gameTweenMax.killTweensOf(this.pt),this.gameTweenMax.to(this.pt,1.5,{x:e,ease:o.Power4.easeInOut,onComplete:this.setState,onCompleteParams:[this.STATE_GUNMAN_RELOAD]})}else this.runReload()},hit:function(){this.killDelayedCalls(),this.gameModel.onGameWin()},runReload:function(){this.killDelayedCalls(),this.shotIndex=0,this.calcShotIntervals();var e=n.math.randomIntInRange(this.minReloadTime,this.maxReloadTime);e*=.5,this.gameTweenMax.delayedCall(e,this.setState,[this.STATE_GUNMAN_RUN_SHOOT])},runAttack:function(){var e=this.shotIntervalArray[this.shotIndex].interval;this.gameTweenMax.delayedCall(e,this.setState,[this.STATE_GUNMAN_RUN_SHOOT])},runShoot:function(){this.gameTweenMax.delayedCall(.1,this.onRunShotComplete),this.playShotAudio()},onRunShotComplete:function(){this.trigger(this.EVENTS.GUNMAN_SHOOT),this.shotIndex++,this.shotIndex<this.numOfShots?(this.runAttack(),this.state=this.STATE_GUNMAN_RUN):this.setState(this.STATE_GUNMAN_RUN)},colonelHit:function(){return n.math.randomInRange(0,1)<=this.hitRate},calcShotIntervals:function(){this.shotIndex=this.nextShotTime=0,this.shotIntervalArray=[],this.attackDuration=n.math.randomInRange(this.minAttackTime,this.maxAttackTime);for(var e=0,i=0,s=1.2,o=0;o<this.numOfShots;o++){var r,a,h=0;if(0===o)r=.1*this.attackDuration;else{for(var l=0,c=0;c<this.shotIntervalArray.length;c++)l+=this.shotIntervalArray[c].interval;r=this.attackDuration-l}a=o===this.numOfShots-1?this.attackDuration-e:n.math.randomDist(h,r,2),e+=a,this.shotIntervalArray.push({interval:a,duck:!1}),i=a>i?a:i}t.each(this.shotIntervalArray,function(e){i===e.interval&&(e.duck=e.interval>s)})},detectCollision:function(e){var i=this.getPoint(),s=!1,r=n.collision.rectCollision(e.x,e.y,i.x,i.y,this.width,this.height);if(r){if(this.hitIndex++,this.hitIndex>=this.hitCount){this.onGunmanDead();var a=this;t.delay(function(){a.gameSoundModel.play(a.manifest.AUDIO_GUNMAN_SPEECH_HIT.id,{loop:0})},300),this.gameSoundModel.stop(this.manifest.AUDIO_MUSIC_RUNS.id)}else 1===this.hitIndex?(this.gameTweenMax.to(this.hatPt,.6,{y:-30,ease:o.Power3.easeOut}),this.trigger(this.EVENTS.HAT_REMOVED,!0),this.gameSoundModel.play(this.manifest.AUDIO_GUNMAN_SPEECH_MY_HAT.id,{loop:0})):this.gameSoundModel.play(this.manifest.AUDIO_GUNMAN_SPEECH_OW_0.id,{loop:0});s=!0}return s},getPoint:function(){var e=this.gunmanGraphic.toGlobal(this.gameContainer);return e.x*=this.pixelScaleMultiplier,e.y*=this.pixelScaleMultiplier,e},onGunmanDead:function(){this.gameTweenMax.killDelayedCallsTo(this.setState),this.gameTweenMax.killDelayedCallsTo(this.onRunShotComplete),this.setState(this.STATE_GUNMAN_HIT)},increaseDifficulty:function(){this.hitRate+=this.hitRateIncrement},frameTick:function(){this.updateRunning()},updateRunning:function(){if(this.gameModel.sceneModel.state===this.gameModel.sceneModel.STATE_SCENE_GUNMAN){if(this.state!==this.STATE_GUNMAN_HIT){var e=.5*this.gameWidth;this.pt.x=e+50*-this.gameModel.targetModel.wiggle.y}this.hatPt.x.current=-1===this.runningDirection?this.hatPt.x.right:this.hatPt.x.left}this.runningDirection=this.prevX<this.pt.x?-1:1,this.prevX=this.pt.x},killDelayedCalls:function(){this.gameTweenMax.killTweensOf(this.pt,!0),this.gameTweenMax.killDelayedCallsTo(this.onSetAttackState),this.gameTweenMax.killDelayedCallsTo(this.onShotComplete),this.gameTweenMax.killDelayedCallsTo(this.setState)},destroy:function(){}})}),define("game/games/gun_fight/model/gun_fight_obstacle_model",["jquery","underscore","backbone","shims/shim_resn_utils"],function(e,t,i,s){"use strict";return i.Model.extend({STATE_OBSTACLE_INACTIVE:"STATE_OBSTACLE_INACTIVE",STATE_OBSTACLE_ACTIVE:"STATE_OBSTACLE_ACTIVE",state:"STATE_OBSTACLE_ACTIVE",hitIndex:0,EVENTS:{OBSTACLE_HIT:"OBSTACLE_HIT",OBSTACLE_INACTIVE:"OBSTACLE_INACTIVE",STATE_CHANGE:"STATE_CHANGE"},hitType:{BULLET_HOLE:"BULLET_HOLE",RICOCHET:"RICOCHET"},initialize:function(e){this.gameModel=e.gameModel,this.index=e.index,this.width=e.width,this.height=e.height,this.x=e.x,this.y=e.y,this.assets=e.assets,this.hitCount=e.hitCount,this.pixelScaleMultiplier=e.pixelScaleMultiplier,this.gameSoundModel=this.gameModel.gameSoundModel,this.manifest=this.gameModel.manifest},start:function(){},reset:function(){this.hitIndex=0,this.setState(this.STATE_OBSTACLE_ACTIVE)},setState:function(e){switch(e){case this.STATE_OBSTACLE_INACTIVE:break;case this.STATE_OBSTACLE_ACTIVE:}this.state=e,this.trigger(this.EVENTS.STATE_CHANGE)},detectCollision:function(e){var t=this.getPoint(),i=!1;if(this.state===this.STATE_OBSTACLE_ACTIVE){var n=s.collision.rectCollision(e.x,e.y,t.x,t.y,this.width,this.height);if(n){var o={x:e.x-t.x,y:e.y-t.y},r=s.pixi.pointToBitmapDetection(this.obstacle,o);if(r.result){if(this.hitIndex++,this.hitIndex===this.hitCount)this.setState(this.STATE_OBSTACLE_INACTIVE),this.trigger(this.EVENTS.OBSTACLE_INACTIVE),this.playInactiveAudio();else if(this.hitIndex<this.hitCount){var a=this.obstacle.children[0],h=s.pixi.pointToBitmapDetection(a,o),l={x:o.x,y:o.y,hitType:h.result?this.hitType.BULLET_HOLE:this.hitType.RICOCHET};this.trigger(this.EVENTS.OBSTACLE_HIT,l),this.playHitAudio()}i=!0}}}return i},getPoint:function(){var e=this.obstacle.toGlobal(this.gameContainer);return e.x*=this.pixelScaleMultiplier,e.y*=this.pixelScaleMultiplier,e},playHitAudio:function(){var e=[this.manifest.AUDIO_STAGE_RICOCHET_0.id,this.manifest.AUDIO_STAGE_RICOCHET_1.id,this.manifest.AUDIO_STAGE_HIT_METAL.id];this.gameSoundModel.play(e[t.random(0,e.length-1)],{loop:0})},playInactiveAudio:function(){var e=[this.manifest.AUDIO_OBSTACLE_EXPLOSION_0.id,this.manifest.AUDIO_OBSTACLE_EXPLOSION_1.id,this.manifest.AUDIO_OBSTACLE_EXPLOSION_2.id];this.gameSoundModel.play(e[this.index],{loop:0})},frameTick:function(){},destroy:function(){}})}),define("game/games/gun_fight/model/gun_fight_obstacles_data",["game/games/gun_fight/model/gun_fight_asset_manifest"],function(e){"use strict";return[{width:92,height:99,x:20,y:112,assets:{item:[e.PUMP_0.id,e.PUMP_1.id,e.PUMP_2.id,e.PUMP_3.id],bulletsReg:{x:.5,y:1},bullets:[e.PUMP_BULLET_0_MC,e.PUMP_BULLET_1_MC,e.PUMP_BULLET_2_MC],hitarea:e.PUMP_HITAREA.id,inactive:{explode:e.PUMP_INACTIVE_EXPLODE_MC.id,ambient:e.PUMP_INACTIVE_AMBIENT_MC.id}}},{width:87,height:90,x:120,y:115,assets:{item:[e.OIL_0.id,e.OIL_1.id,e.OIL_2.id],bullets:[],hitarea:e.OIL_HITAREA.id,inactive:{explode:e.OIL_INACTIVE_EXPLODE_MC.id}}},{width:154,height:123,x:200,y:117,assets:{item:[e.CAR_0.id,e.CAR_1.id,e.CAR_2.id,e.CAR_3.id],bullets:[e.CAR_BULLET_0,e.CAR_BULLET_1,e.CAR_BULLET_2],bulletsReg:{x:.5,y:.5},hitarea:e.CAR_HITAREA.id,inactive:{explode:e.CAR_INACTIVE_EXPLODE_MC.id,ambient:e.CAR_INACTIVE_AMBIENT_MC.id}}}]}),define("game/games/gun_fight/model/gun_fight_obstacles_model",["jquery","underscore","backbone","config","shims/shim_resn_utils","game/games/gun_fight/model/gun_fight_obstacle_model","game/games/gun_fight/model/gun_fight_obstacles_data"],function(e,t,i,s,n,o,r){"use strict";return i.Model.extend({EVENTS:{OBSTACLE_INACTIVE:"OBSTACLE_INACTIVE"},initialize:function(e){this.gameModel=e.gameModel,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.halfGameWidth=e.halfGameWidth,this.halfGameHeight=e.halfGameHeight,this.pixelScaleMultiplier=e.pixelScaleMultiplier,this.gameTweenMax=e.gameTweenMax,this.createObstacles(),this.addEvents()},addEvents:function(){t.each(this.modelPool,function(e){this.listenTo(e,e.EVENTS.OBSTACLE_INACTIVE,this.onObstacleInactive)},this)},removeEvents:function(){t.each(this.modelPool,function(e){this.stopListening(e,e.EVENTS.OBSTACLE_INACTIVE)},this)},start:function(){},reset:function(){t.each(this.modelPool,function(e){e.reset()},this)},createObstacles:function(){this.modelPool=t.map(r,function(e,t){var i=new o({gameModel:this.gameModel,index:t,width:e.width,height:e.height,x:e.x,assets:e.assets,y:e.y,hitCount:e.assets.item.length,pixelScaleMultiplier:this.pixelScaleMultiplier});return i},this)},onObstacleInactive:function(){this.trigger(this.EVENTS.OBSTACLE_INACTIVE)},detectCollision:function(e){var i=t.find(this.modelPool,function(t){return t.detectCollision(e)});return i?!0:!1},getActiveObstacles:function(){return t.filter(this.modelPool,function(e){return e.state===e.STATE_OBSTACLE_ACTIVE})},frameTick:function(){},destroy:function(){this.removeEvents()}})}),define("game/games/gun_fight/model/gun_fight_target_data",[],function(){"use strict";return{obstacles:{wRatio:.9,hRatio:.33,xRatio:.5,yRatio:.6},gunman:{wRatio:.5,hRatio:.1,xRatio:.5,yRatio:.45},singleLeft:{wRatio:.3,hRatio:.33,xRatio:.15,yRatio:.6},singleMiddle:{wRatio:.4,hRatio:.33,xRatio:.5,yRatio:.6},singleRight:{wRatio:.4,hRatio:.33,xRatio:.8,yRatio:.6},doubleLeft:{wRatio:.45,hRatio:.33,xRatio:.3,yRatio:.6},doubleRight:{wRatio:.5,hRatio:.33,xRatio:.6,yRatio:.6}}}),define("game/games/gun_fight/model/gun_fight_target_model",["jquery","underscore","backbone","config","shims/shim_resn_utils","TweenMaxEasing","game/games/gun_fight/model/gun_fight_target_data"],function(e,t,i,s,n,o,r){"use strict";return i.Model.extend({STATE_TARGET_OBSTACLES:"STATE_TARGET_OBSTACLES",STATE_TARGET_GUNMAN:"STATE_TARGET_GUNMAN",STATE_TARGET_SINGLE_LEFT:"STATE_TARGET_SINGLE_LEFT",STATE_TARGET_SINGLE_MIDDLE:"STATE_TARGET_SINGLE_MIDDLE",STATE_TARGET_SINGLE_RIGHT:"STATE_TARGET_SINGLE_RIGHT",STATE_TARGET_DOUBLE_LEFT:"STATE_TARGET_DOUBLE_LEFT",STATE_TARGET_DOUBLE_RIGHT:"STATE_TARGET_DOUBLE_RIGHT",state:"STATE_TARGET_OBSTACLES",recoil:0,targetPt:{x:0,y:0},containerPt:{x:0,y:0},wiggleContainerPt:{x:0,y:0},wiggle:{x:0,y:0,index:0,xDist:.016,yDist:.017,xDist2:.037,yDist2:.042,speedMultipler:1},difficultyMultiplier:1,difficultyIncrement:.17,wRatio:0,hRatio:0,xRatio:0,yRatio:0,tgWRatio:0,tgHRatio:0,tgXRatio:0,tgYRatio:0,tgAreaWidth:0,tgAreaHeight:0,baseInterval:.8,visible:!0,showTargetArea:!1,initialize:function(e){t.bindAll(this,"updateDartingTarget"),this.gameModel=e.gameModel,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.halfGameWidth=e.halfGameWidth,this.halfGameHeight=e.halfGameHeight,this.pixelScaleMultiplier=e.pixelScaleMultiplier,this.gameTweenMax=e.gameTweenMax,this.listenTo(this.gameModel.colonelModel,this.gameModel.colonelModel.EVENTS.STATE_CHANGE,this.onColonelStateChange),this.listenTo(this.gameModel.gunmanModel,this.gameModel.gunmanModel.EVENTS.STATE_CHANGE,this.onGunmanStateChange)},onGunmanStateChange:function(e){switch(e){case this.gameModel.gunmanModel.STATE_GUNMAN_HIT:this.onGunmanHit()}},onColonelStateChange:function(e){switch(e){case this.gameModel.colonelModel.STATE_COLONEL_SHOOT:this.onShoot();break;case this.gameModel.colonelModel.STATE_COLONEL_HIDE:this.onHide();break;case this.gameModel.colonelModel.STATE_COLONEL_IDLE:this.onIdle()}},onHide:function(){this.gameModel.gunmanModel.state!==this.gameModel.gunmanModel.STATE_GUNMAN_HIT&&(this.visible=!1)},onIdle:function(){this.gameModel.gunmanModel.state!==this.gameModel.gunmanModel.STATE_GUNMAN_HIT&&(this.visible=!0)},onShoot:function(){this.gameModel.gunmanModel.state!==this.gameModel.gunmanModel.STATE_GUNMAN_HIT&&(this.visible=!0)},onGunmanHit:function(){this.visible=!1},start:function(){this.updateDartingTarget()},reset:function(){this.difficultyMultiplier=this.wiggle.speedMultipler=1,this.recoil=0,this.visible=!0},getPoint:function(){var e=this.target.toGlobal(this.gameContainer);return e.x*=this.pixelScaleMultiplier,e.y*=this.pixelScaleMultiplier,e},updateDartingTarget:function(){var e=this.tgAreaWidth*this.wiggle.x,t=this.tgAreaHeight*this.wiggle.y,i=this.getInterval(e,t);this.gameTweenMax.killTweensOf(this.targetPt),this.gameTweenMax.to(this.targetPt,i,{x:e,y:t,ease:o.Expo.easeOut,onComplete:this.updateDartingTarget})},getInterval:function(e,t){var i=this.baseInterval*(1-(this.difficultyMultiplier-1)),s={x:this.targetPt.x,y:this.targetPt.y},o={x:e,y:t},r=n.math.getPointDistance(s,o);return i+=.002*r},updateTarget:function(){this.hRatio+=n.math.simpleEasing(this.tgHRatio,this.hRatio,.07),this.wRatio+=n.math.simpleEasing(this.tgWRatio,this.wRatio,.07),this.yRatio+=n.math.simpleEasing(this.tgYRatio,this.yRatio,.07),this.xRatio+=n.math.simpleEasing(this.tgXRatio,this.xRatio,.07)},setState:function(e){var t;switch(e){case this.STATE_TARGET_GUNMAN:t="gunman";break;case this.STATE_TARGET_OBSTACLES:t="obstacles";break;case this.STATE_TARGET_SINGLE_LEFT:t="singleLeft";break;case this.STATE_TARGET_SINGLE_MIDDLE:t="singleMiddle";break;case this.STATE_TARGET_SINGLE_RIGHT:t="singleRight";break;case this.STATE_TARGET_DOUBLE_LEFT:t="doubleLeft";break;case this.STATE_TARGET_DOUBLE_RIGHT:t="doubleRight"}this.tgXRatio=r[t].xRatio,this.tgYRatio=r[t].yRatio,this.tgHRatio=r[t].hRatio,this.tgWRatio=r[t].wRatio,this.state=e},increaseDifficulty:function(){this.difficultyMultiplier+=this.difficultyIncrement},updateWiggle:function(){var e=this.wiggle.xDist,t=this.wiggle.xDist2,i=this.wiggle.yDist,s=this.wiggle.yDist2;this.wiggle.x=Math.sin(this.wiggle.index*e)*Math.sin(this.wiggle.index*t),this.wiggle.y=Math.cos(this.wiggle.index*i)*Math.cos(this.wiggle.index*s),this.wiggle.index+=this.difficultyMultiplier},updateWiggleContainer:function(){var e=.2*this.tgAreaWidth*this.wiggle.x,t=.2*this.tgAreaHeight*this.wiggle.y+this.recoil;this.wiggleContainerPt={x:Math.floor(e),y:Math.floor(t)}},getOffset:function(){return{x:this.wiggleContainerPt.x+this.containerWidth+this.containerPt.x+this.targetPt.x,y:this.wiggleContainerPt.y+this.containerPt.y+this.targetPt.y}},frameTick:function(){this.tgAreaWidth=this.wRatio*this.halfGameWidth,this.tgAreaHeight=this.hRatio*this.halfGameHeight,this.containerWidth=this.gameWidth*this.xRatio,this.containerHeight=this.gameHeight*this.yRatio,this.updateWiggle(),this.updateWiggleContainer(),this.updateTarget()},destroy:function(){}})}),define("game/games/gun_fight/model/gun_fight_scene_model",["jquery","underscore","backbone","config","shims/shim_resn_utils"],function(e,t,i,s,n){"use strict";return i.Model.extend({STATE_SCENE_OBSTACLES:"STATE_SCENE_OBSTACLES",STATE_SCENE_GUNMAN:"STATE_SCENE_GUNMAN",state:"STATE_SCENE_OBSTACLES",ricochetCount:10,ricochetArray:[],ricochetIndex:0,ricochetDisplay:!1,tgyRatio:0,yRatio:0,cameraPt:{y:0,x:0},initialize:function(e){this.gameModel=e.gameModel,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.halfGameWidth=e.halfGameWidth,this.halfGameHeight=e.halfGameHeight,this.pixelScaleMultiplier=e.pixelScaleMultiplier,this.gameTweenMax=e.gameTweenMax,this.manifest=this.gameModel.manifest,this.gameSoundModel=this.gameModel.gameSoundModel},start:function(){},reset:function(){this.state=this.STATE_SCENE_OBSTACLES,this.yRatio=0,this.ricochetDisplay=!1},setState:function(e){switch(e){case this.STATE_SCENE_OBSTACLES:break;case this.STATE_SCENE_GUNMAN:}this.state=e},ricochet:function(){var e=this.ricochetArray.length-1,t=this;this.ricochetIndex=n.math.randomIntInRange(0,e),this.ricochetDisplay=!0,this.gameTweenMax.delayedCall(.1,function(){t.ricochetDisplay=!1}),this.playRicochetAudio()},playRicochetAudio:function(){var e=[this.manifest.AUDIO_STAGE_RICOCHET_0.id,this.manifest.AUDIO_STAGE_RICOCHET_1.id,this.manifest.AUDIO_STAGE_HIT_WOOD.id];this.gameSoundModel.play(e[t.random(0,e.length-1)],{loop:0})},frameTick:function(){this.updateYRatio(),this.updateCameraPt()},updateYRatio:function(){switch(this.gameModel.colonelModel.state){case this.gameModel.colonelModel.STATE_COLONEL_HIDE:case this.gameModel.colonelModel.STATE_COLONEL_RELOAD:this.tgyRatio=0;break;case this.gameModel.colonelModel.STATE_COLONEL_SHOOT:case this.gameModel.colonelModel.STATE_COLONEL_IDLE:this.tgyRatio=1}this.yRatio+=n.math.simpleEasing(this.tgyRatio,this.yRatio,.15)},updateCameraPt:function(){this.cameraPt.x=-(.1*this.gameModel.targetModel.targetPt.x)*this.yRatio,this.cameraPt.y=10*this.yRatio},destroy:function(){}})}),define("game/games/gun_fight/model/gun_fight_game_model",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/model/game_model","game/games/gun_fight/model/gun_fight_colonel_model","game/games/gun_fight/model/gun_fight_gunman_model","game/games/gun_fight/model/gun_fight_obstacles_model","game/games/gun_fight/model/gun_fight_target_model","game/games/gun_fight/model/gun_fight_scene_model","util/tweenmax_wrapper","TweenMax","shims/shim_resn_utils"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g){"use strict";return o.extend({models:null,colonelModel:null,gunmanModel:null,obstaclesModel:null,targetModel:null,sceneModel:null,accuracyPercentage:0,pt:{x:0},initialize:function(e){t.bindAll(this,"start","setGameState"),this["super"]=this.constructor.__super__,this.gameInputModel=e.gameInputModel,this["super"].initialize.apply(this,arguments)},load:function(){this["super"].load.apply(this,arguments)},onLoadComplete:function(){this["super"].onLoadComplete.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.createModels()},createModels:function(){var e={gameModel:this,gameWidth:this.get("gameWidth"),gameHeight:this.get("gameHeight"),halfGameWidth:.5*this.get("gameWidth"),halfGameHeight:.5*this.get("gameHeight"),pixelScaleMultiplier:this.get("pixelScaleMultiplier"),gameTweenMax:this.gameTweenMax};this.colonelModel=new r(e),this.gunmanModel=new a(e),this.obstaclesModel=new h(e),this.targetModel=new l(e),this.sceneModel=new c(e),this.models=[this.colonelModel,this.gunmanModel,this.obstaclesModel,this.targetModel,this.sceneModel],this.addEvents()},addEvents:function(){this.listenTo(this.gunmanModel,this.gunmanModel.EVENTS.GUNMAN_SHOOT,this.onGunmanShoot),this.listenTo(this.colonelModel,this.colonelModel.EVENTS.COLONEL_SHOOT,this.onColonelShoot),this.listenTo(this.obstaclesModel,this.obstaclesModel.EVENTS.OBSTACLE_INACTIVE,this.onObstacleInactive)},removeEvents:function(){this.stopListening(this.gunmanModel,this.gunmanModel.EVENTS.GUNMAN_SHOOT),this.stopListening(this.colonelModel,this.colonelModel.EVENTS.COLONEL_SHOOT),this.stopListening(this.obstaclesModel,this.obstaclesModel.EVENTS.OBSTACLE_INACTIVE)},onColonelShoot:function(){this.detectGunmanCollision()},onGunmanShoot:function(){this.detectColonelCollision()},reset:function(){this["super"].reset.apply(this,arguments),t.each(this.models,function(e){e.reset()},this),this.collisions=[],this.accuracyPercentage=0},start:function(){this["super"].start.apply(this,arguments)},startGame:function(){this["super"].startGame.apply(this,arguments),t.each(this.models,function(e){e.start()},this),this.updateTargetArea(),this.playGameMusic()},playGameMusic:function(){this.musicId=this.manifest.AUDIO_MUSIC.id,this.gameSoundModel.play(this.musicId,{loop:-1})},buttonLeftPress:function(){this.colonelModel.buttonLeftPress()},buttonRightPress:function(){this.colonelModel.buttonRightPress()},buttonLeftRelease:function(){this.colonelModel.buttonLeftRelease()},buttonRightRelease:function(){this.colonelModel.buttonRightRelease()},frameTick:function(){if(this["super"].frameTick.apply(this,arguments),this.models)for(var e=0;e<this.models.length;e++)this.models[e].frameTick()},detectColonelCollision:function(){switch(this.colonelModel.state){case this.colonelModel.STATE_COLONEL_SHOOT:case this.colonelModel.STATE_COLONEL_IDLE:this.gunmanModel.colonelHit()?this.colonelModel.hit():this.sceneModel.ricochet();break;case this.colonelModel.STATE_COLONEL_HIDE:case this.colonelModel.STATE_COLONEL_RELOAD:this.sceneModel.ricochet()}},detectGunmanCollision:function(){var e=this.targetModel.getPoint(),t=!1;switch(this.sceneModel.state){case this.sceneModel.STATE_SCENE_OBSTACLES:t=this.obstaclesModel.detectCollision(e);break;case this.sceneModel.STATE_SCENE_GUNMAN:t=this.gunmanModel.detectCollision(e)}this.collisions.push(t),this.updateAccuracy()},onObstacleInactive:function(){this.updateTargetArea(),this.increaseDifficulty(),this.gunmanModel.onObstacleInactive(),this.explode()},explode:function(){this.gameTweenMax.killTweensOf(this.pt);for(var e=6,t=15,i=e;i>-1;i--){var s=i/e*t,n=g.math.isOdd(i)?-1:1,o=(t-2*i)*(1/30);this.gameTweenMax.to(this.pt,.05,{delay:o,x:s*n,overwrite:"auto"})}},updateTargetArea:function(){var e=this.obstaclesModel.getActiveObstacles();0===e.length?(this.targetModel.setState(this.targetModel.STATE_TARGET_GUNMAN),this.sceneModel.setState(this.sceneModel.STATE_SCENE_GUNMAN),this.playGunmanStateAudio()):(this.targetModel.setState(this.targetModel.STATE_TARGET_OBSTACLES),this.sceneModel.setState(this.sceneModel.STATE_SCENE_OBSTACLES),1===e.length?0===e[0].index?this.targetModel.setState(this.targetModel.STATE_TARGET_SINGLE_LEFT):1===e[0].index?this.targetModel.setState(this.targetModel.STATE_TARGET_SINGLE_MIDDLE):2===e[0].index&&this.targetModel.setState(this.targetModel.STATE_TARGET_SINGLE_RIGHT):2===e.length&&this.targetModel.setState(0===e[0].index&&1===e[1].index?this.targetModel.STATE_TARGET_DOUBLE_LEFT:1===e[0].index&&2===e[1].index?this.targetModel.STATE_TARGET_DOUBLE_RIGHT:this.targetModel.STATE_TARGET_OBSTACLES))},playGunmanStateAudio:function(){this.gameSoundModel.stop(this.musicId),this.gameSoundModel.play(this.manifest.AUDIO_MUSIC_RUNS.id,{loop:-1})},increaseDifficulty:function(){this.gunmanModel.increaseDifficulty(),this.targetModel.increaseDifficulty()},onGameWin:function(){this.gameTweenMax.delayedCall(2,this.resolveWinOrLose)},endGameDelay:function(){u.delayedCall(3,this.endGame)},allLivesLost:function(){this.calculateMedalIndex(),0===this.medalIndex&&this.playFailSound(),this.resolveWinOrLose()},endGame:function(){this["super"].endGame.apply(this,arguments)},calculateMedalIndex:function(){if(this.colonelModel){var e,t=this.colonelModel.getHealthCount();0===t?e=0:this.accuracyPercentage>=99.9999?e=3:this.accuracyPercentage>=75?e=2:this.accuracyPercentage>=0&&(e=1),this.medalIndex=e}},updateAccuracy:function(){var e=this.collisions.length,i=t.filter(this.collisions,function(e){return e===!0}).length;this.accuracyPercentage=+(i/e*100).toFixed(0)},getAccuracy:function(){return this.accuracyPercentage},destroy:function(){this.removeEvents(),t.each(this.models,function(e){e.destroy()},this),this["super"].destroy.apply(this,arguments)}})}),define("game/games/gun_fight/view/gun_fight_gunman_view",["jquery","underscore","backbone","config","shims/shim_resn_utils","pixi"],function(e,t,i,s,n,o){"use strict";return i.View.extend({initialize:function(e){t.bindAll(this,"onHatComplete"),this.gameContainer=e.gameContainer,this.gameTweenMax=e.gameTweenMax,this.gameModel=e.gameModel,this.movieClips=e.movieClips,this.model=this.gameModel.gunmanModel,this.createGunman(),this.addEvents(),this.model.gunmanGraphic=this.gunmanGraphic,this.model.gameContainer=this.gameContainer},createGunman:function(){this.container=new o.DisplayObjectContainer,this.innerContainer=new o.DisplayObjectContainer,this.createObstacleStateSprites(),this.createHatMovieclip(),this.createRunningStateMovieclips(),this.createHiStateMovieclip(),this.gunmanGraphic=new o.Graphics,this.gunmanGraphic.beginFill(16231162),this.gunmanGraphic.alpha=0,this.gunmanGraphic.x=25,this.gunmanGraphic.drawRect(0,0,this.model.width,this.model.height),this.container.pivot.x=.5*this.model.width,this.container.pivot.y=this.model.height,this.container.x=this.container.ox=0,this.container.y=this.container.oy=.5*this.model.gameHeight,this.container.width=this.model.width,this.container.height=this.model.height,this.innerContainer.addChild(this.gunmanGraphic),this.container.addChild(this.innerContainer)},createObstacleStateSprites:function(){this.obstacleStateSprites=t.map(this.model.obstacleData,function(e){var t=this.spriteFromFrameID(e.frames.hide),i=this.spriteFromFrameID(e.frames.attack),s=this.spriteFromFrameID(e.frames.shoot);return this.innerContainer.addChild(t),this.innerContainer.addChild(i),this.innerContainer.addChild(s),{hide:t,attack:i,shoot:s}},this)},createRunningStateMovieclips:function(){this.runningStateMCs=t.map(this.model.runningData,function(e){var t=this.createMovieClipFromID(e.movieclips.left),i=this.createMovieClipFromID(e.movieclips.right);return t.loop=!0,i.loop=!0,t.gotoAndPlay(0),i.gotoAndPlay(0),this.innerContainer.addChild(t),this.innerContainer.addChild(i),{left:t,right:i}},this),this.flashLeftRunSprite=this.spriteFromFrameID(this.gameModel.manifest.OPPONENT_RUN_FLASH.ns_url),this.flashRightRunSprite=this.spriteFromFrameID(this.gameModel.manifest.OPPONENT_RUN_FLASH.ns_url),this.flashLeftRunSprite.y=47,this.flashLeftRunSprite.x=35,this.flashRightRunSprite.y=47,this.flashRightRunSprite.x=30,this.innerContainer.addChild(this.flashRightRunSprite),this.innerContainer.addChild(this.flashLeftRunSprite)},createHiStateMovieclip:function(){this.hitMC=this.createMovieClipFromID(this.gameModel.manifest.OPPONENT_HIT.id),this.hitMC.loop=!1,this.innerContainer.addChild(this.hitMC)},createHatMovieclip:function(){this.hatMC=this.createMovieClipFromID(this.gameModel.manifest.OPPONENT_RUN_HAT_REMOVED.id),this.hatMC.loop=!1,this.hatMC.visible=!1,this.hatMC.onComplete=this.onHatComplete,this.innerContainer.addChild(this.hatMC)},spriteFromFrameID:function(e){return this.gameModel.pixiAssetLibrary.spriteFromFrameID(e)},createMovieClipFromID:function(e){var t=this.gameModel.pixiAssetLibrary.movieClipAssets[e].newMovieClip();return this.movieClips.push(t),t},onStateChange:function(){switch(this.model.state){case this.model.STATE_GUNMAN_ATTACK:this.updateSprites();break;case this.model.STATE_GUNMAN_SHOOT:this.updateSprites();break;case this.model.STATE_GUNMAN_RELOAD:case this.model.STATE_GUNMAN_DUCK:this.updateSprites();break;case this.model.STATE_GUNMAN_HIT:this.onHit();break;case this.model.STATE_GUNMAN_RUN:this.updateSprites();break;case this.model.STATE_GUNMAN_RUN_SHOOT:}},onHit:function(){this.hitMC.visible=!0,this.hitMC.gotoAndPlay(0)},updateSprites:function(){t.each(this.obstacleStateSprites,function(e,t){t===this.model.tgObstacleModel.index?(e.hide.visible=this.model.state===this.model.STATE_GUNMAN_RELOAD||this.model.state===this.model.STATE_GUNMAN_DUCK,e.attack.visible=this.model.state===this.model.STATE_GUNMAN_ATTACK,e.shoot.visible=this.model.state===this.model.STATE_GUNMAN_SHOOT):(e.hide.visible=!1,e.attack.visible=!1,e.shoot.visible=!1)},this),this.hitMC.visible=!1
},render:function(){this.container.x=Math.floor(this.model.pt.x),this.innerContainer.x=Math.floor(this.model.innerPt.x),this.innerContainer.y=Math.floor(this.model.innerPt.y),this.pollRunningStates()},pollRunningStates:function(){var e=-1!==this.model.runningDirection,t=-1===this.model.runningDirection;this.flashLeftRunSprite.visible=e&&this.model.state===this.model.STATE_GUNMAN_RUN_SHOOT,this.flashRightRunSprite.visible=t&&this.model.state===this.model.STATE_GUNMAN_RUN_SHOOT,this.updateHatPos();for(var i=this.runningStateMCs.length-1;i>=0;i--)this.model.hitIndex===i?(this.runningStateMCs[i].left.visible=e&&(this.model.state===this.model.STATE_GUNMAN_RUN||this.model.state===this.model.STATE_GUNMAN_RUN_SHOOT),this.runningStateMCs[i].right.visible=t&&(this.model.state===this.model.STATE_GUNMAN_RUN||this.model.state===this.model.STATE_GUNMAN_RUN_SHOOT)):(this.runningStateMCs[i].left.visible=!1,this.runningStateMCs[i].right.visible=!1)},updateHatPos:function(){this.hatMC.x=this.model.hatPt.x.current,this.hatMC.y=Math.floor(this.model.hatPt.y)},onHatChange:function(e){e?(this.hatMC.visible=!0,this.hatMC.gotoAndPlay(0)):this.onHatComplete()},onHatComplete:function(){this.hatMC.visible=!1},addEvents:function(){this.listenTo(this.model,this.model.EVENTS.STATE_CHANGE,this.onStateChange),this.listenTo(this.model,this.model.EVENTS.HAT_REMOVED,this.onHatChange)},removeEvents:function(){this.stopListening(this.model,this.model.EVENTS.STATE_CHANGE),this.stopListening(this.model,this.model.EVENTS.HAT_REMOVED)},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}})}),define("game/games/gun_fight/view/gun_fight_obstacle_view",["jquery","underscore","backbone","TweenMax","TweenMaxEasing","config","pixi","shims/shim_resn_utils"],function(e,t,i,s,n,o,r,a){"use strict";return i.View.extend({container:null,initialize:function(e){t.bindAll(this,"onExplodeComplete"),this.gameContainer=e.gameContainer,this.gameTweenMax=e.gameTweenMax,this.gameModel=e.gameModel,this.movieClips=e.movieClips,this.createObstacle(),this.addEvents(),this.model.obstacle=this.container,this.model.gameContainer=this.gameContainer},createObstacle:function(){this.container=new r.DisplayObjectContainer,this.container.pivot.x=0,this.container.pivot.y=this.model.height,this.container.x=this.model.x,this.container.y=this.model.y,this.container.width=this.model.width,this.container.height=this.model.height;var e=this.gameModel.manifest[this.model.assets.hitarea].ns_url;this.hitareaSprite=this.gameModel.pixiAssetLibrary.spriteFromFrameID(e),this.hitareaSprite.alpha=.01,this.inactiveExplodeMC=this.createMovieClipFromID(this.model.assets.inactive.explode),this.inactiveExplodeMC.gotoAndStop(0),this.inactiveExplodeMC.loop=!1,this.inactiveExplodeMC.visible=!1,this.spriteContainer=new r.DisplayObjectContainer,this.bulletContainer=new r.DisplayObjectContainer,this.container.addChild(this.hitareaSprite),this.container.addChild(this.spriteContainer),this.container.addChild(this.bulletContainer),this.container.addChild(this.inactiveExplodeMC),this.model.assets.inactive.ambient&&(this.inactiveAmbientMC=this.createMovieClipFromID(this.model.assets.inactive.ambient),this.inactiveAmbientMC.gotoAndStop(0),this.inactiveAmbientMC.loop=!0,this.inactiveAmbientMC.visible=!1,this.container.addChild(this.inactiveAmbientMC),this.inactiveExplodeMC.onComplete=this.onExplodeComplete),this.createHitstateSprites()},createMovieClipFromID:function(e){var t=this.gameModel.pixiAssetLibrary.movieClipAssets[e].newMovieClip();return this.movieClips.push(t),t},createSpriteFromID:function(e){var t=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest[e]);return t},createHitstateSprites:function(){t.each(this.model.assets.item,function(e){var t=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest[e]);this.spriteContainer.addChild(t)},this),this.updateSprite()},addEvents:function(){this.listenTo(this.model,this.model.EVENTS.STATE_CHANGE,this.onStateChange),this.listenTo(this.model,this.model.EVENTS.OBSTACLE_HIT,this.onObstacleHit)},removeEvents:function(){this.stopListening(this.model,this.model.EVENTS.STATE_CHANGE),this.stopListening(this.model,this.model.EVENTS.OBSTACLE_HIT)},onObstacleHit:function(e){switch(this.updateSprite(),e.hitType){case this.model.hitType.BULLET_HOLE:this.appendBulletHole(e);break;case this.model.hitType.RICOCHET:this.appendRicochet(e)}},updateSprite:function(){for(var e=0;e<this.spriteContainer.children.length;e++)this.spriteContainer.children[e].visible=this.model.hitIndex===e},appendBulletHole:function(e){var i=this.model.assets.bullets.length;if(i>0){var s,n=this.model.assets.bullets[t.random(0,i-1)];"MOVIECLIP"===n.type?(s=this.createMovieClipFromID(n.id),s.gotoAndPlay(0)):s=this.createSpriteFromID(n.id),s.x=e.x,s.y=e.y,s.anchor.x=this.model.assets.bulletsReg.x,s.anchor.y=this.model.assets.bulletsReg.y,this.bulletContainer.addChild(s)}},appendRicochet:function(e){var i=[0,90,180,270],s=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest.OBSTACLE_RICOCHET);s.x=e.x,s.y=e.y,s.rotation=a.math.toRadians(i[t.random(0,3)]),s.pivot.x=.5*s.width,s.pivot.y=.5*s.height,this.bulletContainer.addChild(s);var n=this;this.gameTweenMax.delayedCall(.15,function(){n.bulletContainer.removeChild(s)})},onStateChange:function(){switch(this.model.state){case this.model.STATE_OBSTACLE_INACTIVE:this.onInactive();break;case this.model.STATE_OBSTACLE_ACTIVE:this.onActive()}},render:function(){},onExplodeComplete:function(){this.inactiveExplodeMC.visible=!1,this.inactiveExplodeMC.gotoAndStop(0),this.inactiveAmbientMC.visible=!0,this.inactiveAmbientMC.gotoAndPlay(0)},onInactive:function(){this.spriteContainer.visible=!1,this.bulletContainer.removeChildren(),this.inactiveExplodeMC.visible=!0,this.inactiveExplodeMC.gotoAndPlay(0)},onActive:function(){this.inactiveAmbientMC&&(this.inactiveAmbientMC.gotoAndStop(0),this.inactiveAmbientMC.visible=!1),this.inactiveExplodeMC.gotoAndStop(0),this.inactiveExplodeMC.visible=!1,this.spriteContainer.visible=!0,this.updateSprite(),this.bulletContainer.removeChildren()},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}})}),define("game/games/gun_fight/view/gun_fight_obstacles_view",["jquery","underscore","backbone","config","pixi","shims/shim_resn_utils","game/games/gun_fight/view/gun_fight_obstacle_view"],function(e,t,i,s,n,o,r){"use strict";return i.View.extend({pumpView:null,barrelView:null,carView:null,views:null,initialize:function(e){this.gameContainer=e.gameContainer,this.gunmanContainer=e.gunmanContainer,this.gameTweenMax=e.gameTweenMax,this.gameModel=e.gameModel,this.movieClips=e.movieClips,this.model=this.gameModel.obstaclesModel,this.createObstacles(),this.model.gameContainer=this.gameContainer},createObstacles:function(){var e=0;this.obstaclesContainer=new n.DisplayObjectContainer,this.obstaclesContainer.addChild(this.gunmanContainer),this.views=t.map(this.model.modelPool,function(t){var i=new r({model:t,gameModel:this.gameModel,gameContainer:this.gameContainer,gameTweenMax:this.gameTweenMax,movieClips:this.movieClips});return this.obstaclesContainer.addChild(i.container),e+=t.width,i},this),this.obstaclesContainer.oy=this.obstaclesContainer.y=20,this.obstaclesContainer.ox=this.obstaclesContainer.x=this.model.halfGameWidth-.5*e},render:function(){for(var e=0;e<this.views.length;e++)this.views[e].render()},destroy:function(){this.stopListening(),this.off()}})}),define("game/games/gun_fight/view/gun_fight_scene_view",["jquery","underscore","backbone","config","pixi","shims/shim_resn_utils","game/games/gun_fight/view/gun_fight_gunman_view","game/games/gun_fight/view/gun_fight_obstacles_view"],function(e,t,i,s,n,o,r,a){"use strict";return i.View.extend({initialize:function(e){this.gameContainer=e.gameContainer,this.gameTweenMax=e.gameTweenMax,this.gameModel=e.gameModel,this.movieClips=e.movieClips,this.model=this.gameModel.sceneModel,this.pixelScaleMultiplier=this.model.pixelScaleMultiplier,this.sceneContainer=new n.DisplayObjectContainer,this.createBg(),this.createGunman(),this.createObstacles(),this.createBarrel(),this.sceneContainer.addChildAt(this.mudSprite0,1),this.sceneContainer.addChildAt(this.mudSprite1,3),this.sceneContainer.addChildAt(this.mudSprite2,3)},createBg:function(){this.midgroundSprite=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest.MIDGROUND),this.midgroundSprite.pivot.x=.65*this.model.gameWidth,this.midgroundSprite.pivot.y=.6*this.model.gameHeight,this.midgroundSprite.x=this.midgroundSprite.ox=.5*this.model.gameWidth,this.midgroundSprite.y=this.midgroundSprite.oy=.5*this.model.gameHeight,this.sceneContainer.addChild(this.midgroundSprite),this.mudSprite0=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest.MUD_0),this.mudSprite1=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest.MUD_1),this.mudSprite2=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest.MUD_2),this.mudSprite0.y=this.mudSprite0.oy=.4*this.model.gameHeight,this.mudSprite1.y=this.mudSprite1.oy=.8*this.model.gameHeight,this.mudSprite2.y=this.mudSprite2.oy=.69*this.model.gameHeight,this.mudSprite0.x=this.mudSprite0.ox=0,this.mudSprite1.x=this.mudSprite1.ox=0,this.mudSprite2.x=this.mudSprite2.ox=0},createGunman:function(){this.gunmanView=new r({gameModel:this.gameModel,gameContainer:this.gameContainer,gameTweenMax:this.gameTweenMax,movieClips:this.movieClips})},createObstacles:function(){this.obstaclesView=new a({gameModel:this.gameModel,gameContainer:this.gameContainer,gunmanContainer:this.gunmanView.container,gameTweenMax:this.gameTweenMax,movieClips:this.movieClips}),this.sceneContainer.addChild(this.obstaclesView.obstaclesContainer)},createBarrel:function(){this.barrelSprite=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest.BARREL);var e=151,t=157,i=new n.DisplayObjectContainer;this.barrelContainerInner=new n.DisplayObjectContainer,i.pivot.x=.5*t,i.pivot.y=0,i.x=i.ox=.5*this.model.gameWidth,i.y=i.oy=this.model.gameHeight-.8*e,this.createRicochets(t),this.barrelContainerInner.addChild(this.barrelSprite),i.addChild(this.barrelContainerInner),this.sceneContainer.addChild(i)},createRicochets:function(){for(var e=[0,90,180,270],i=0;i<this.model.ricochetCount;i++){var s=o.math.randomInRange(15,150),n=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.pixiAssetLibrary.manifest.RICOCHET);n.x=s,n.visible=!1,n.pivot.x=16,n.pivot.y=16,n.rotation=o.math.toRadians(e[t.random(0,3)]),this.barrelContainerInner.addChild(n),this.model.ricochetArray.push(n)}},createMud:function(){},updateScene:function(){this.barrelContainerInner.y=30*this.model.yRatio;for(var e=0;e<this.sceneContainer.children.length;e++){var t=this.sceneContainer.children[e].ox+this.model.cameraPt.x*(e+.5),i=this.sceneContainer.children[e].oy+this.model.cameraPt.y*(e+.5);this.sceneContainer.children[e].x=Math.floor(t),this.sceneContainer.children[e].y=Math.floor(i)}},render:function(){this.updateScene(),this.updateRicochet(),this.gunmanView&&this.gunmanView.render(),this.obstaclesView&&this.obstaclesView.render()},updateRicochet:function(){for(var e=0;e<this.model.ricochetArray.length;e++)this.model.ricochetDisplay?e===this.model.ricochetIndex&&(this.model.ricochetArray[e].visible=!0):this.model.ricochetArray[e].visible=!1},destroy:function(){this.stopListening(),this.off()}})}),define("game/games/gun_fight/view/gun_fight_colonel_view",["jquery","underscore","backbone","TweenMax","TweenMaxEasing","config","pixi","shims/shim_resn_utils","game/games/gun_fight/view/gun_fight_scene_view"],function(e,t,i,s,n,o,r){"use strict";return i.View.extend({initialize:function(e){t.bindAll(this,"onReloadComplete"),this.gameContainer=e.gameContainer,this.gameTweenMax=e.gameTweenMax,this.gameModel=e.gameModel,this.sprites=e.sprites,this.movieClips=e.movieClips,this.model=this.gameModel.colonelModel,this.createColonel(),this.addEvents()},createColonel:function(){this.gunContainer=new r.DisplayObjectContainer,this.gunContainer.pivot.x=.5*this.model.gunWidth,this.gunContainer.pivot.y=this.model.gunHeight,this.gunRecoilContainer=new r.DisplayObjectContainer,this.gunFlashSprite=this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest.GUN_FLASH),this.gunRecoilContainer.addChild(this.gunFlashSprite),this.gunRecoilContainer.addChild(this.gameModel.pixiAssetLibrary.newSprite(this.gameModel.manifest.GUN)),this.gunContainer.addChild(this.gunRecoilContainer),this.gameContainer.addChild(this.gunContainer),this.createReloadMovieclip()},createReloadMovieclip:function(){this.reloadMC=this.createMovieClipFromID(this.gameModel.manifest.GUN_RELOAD.id),this.reloadMC.loop=!1,this.reloadMC.visible=!1,this.reloadMC.onComplete=this.onReloadComplete,this.gunRecoilContainer.addChild(this.reloadMC)},createMovieClipFromID:function(e){var t=this.gameModel.pixiAssetLibrary.movieClipAssets[e].newMovieClip();return this.movieClips.push(t),t},onStateChange:function(){switch(this.model.state){case this.model.STATE_COLONEL_SHOOT:this.onShoot();break;case this.model.STATE_COLONEL_RELOAD:this.onReload();break;case this.model.STATE_COLONEL_HIDE:this.onHide();break;case this.model.STATE_COLONEL_IDLE:this.onIdle()}},onShoot:function(){},onReload:function(){this.model.shotIndex>0&&(this.reloadMC.visible=!0,this.reloadMC.gotoAndPlay(0))},onReloadComplete:function(){this.reloadMC.visible=!1},onHide:function(){},onIdle:function(){},addEvents:function(){this.listenTo(this.model,this.model.EVENTS.STATE_CHANGE,this.onStateChange)},removeEvents:function(){this.stopListening(this.model,this.model.EVENTS.STATE_CHANGE)},render:function(){this.setGunPosition(),this.setGunFire(),this.setRecoil()},setGunPosition:function(){this.gunContainer.x=this.model.gunPt.x,this.gunContainer.y=this.model.gunPt.y},setGunFire:function(){this.gunFlashSprite.visible=this.model.gunFire},setRecoil:function(){this.gunRecoilContainer.y=this.model.recoilPos.y},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}})}),define("game/games/gun_fight/view/gun_fight_target_view",["jquery","underscore","backbone","config","pixi","TweenMax","TweenMaxEasing"],function(e,t,i,s,n){"use strict";return i.View.extend({target:null,tgContainer:null,targetAreaBg:null,targetWiggleContainer:null,initialize:function(e){this.gameContainer=e.gameContainer,this.gameTweenMax=e.gameTweenMax,this.gameModel=e.gameModel,this.model=this.gameModel.targetModel,this.createTarget()},createTarget:function(){this.tgContainer=new n.DisplayObjectContainer,this.targetWiggleContainer=new n.DisplayObjectContainer,this.updateTargetArea(),this.target=this.spriteFromFrameID(this.gameModel.manifest.CROSSHAIR.ns_url),this.target.anchor.x=this.target.anchor.y=.5,this.targetWiggleContainer.addChild(this.target),this.tgContainer.addChild(this.targetWiggleContainer),this.gameContainer.addChild(this.tgContainer),this.model.target=this.target,this.model.gameContainer=this.gameContainer},spriteFromFrameID:function(e){return this.gameModel.pixiAssetLibrary.spriteFromFrameID(e)},render:function(){this.updateWiggleContainer(),this.updateTarget(),this.updateTargetArea(),this.target.visible=this.model.visible},updateWiggleContainer:function(){this.targetWiggleContainer.x=this.model.wiggleContainerPt.x,this.targetWiggleContainer.y=this.model.wiggleContainerPt.y},updateTarget:function(){this.target.x=this.model.targetPt.x,this.target.y=this.model.targetPt.y},updateTargetArea:function(){if(this.model.showTargetArea){this.targetAreaBg.clear();var e=this.model.wRatio*this.model.gameWidth,t=this.model.hRatio*this.model.gameHeight;this.targetAreaBg.beginFill(2948866),this.targetAreaBg.alpha=.5,this.targetAreaBg.drawRect(-e/2,-t/2,e,t)}this.tgContainer.x=this.model.containerWidth,this.tgContainer.y=this.model.containerHeight},destroy:function(){this.stopListening(),this.off()}})}),define("game/games/gun_fight/view/gun_fight_game_view",["jquery","underscore","backbone","model/loader_collection","config","shims/shim_resn_utils","game/game_base/view/game_view","game/games/gun_fight/view/gun_fight_colonel_view","game/games/gun_fight/view/gun_fight_target_view","game/games/gun_fight/view/gun_fight_scene_view","pixi"],function(e,t,i,s,n,o,r,a,h,l){"use strict";return r.extend({views:null,initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments),this.views=[]},setup:function(){this["super"].setup.apply(this,arguments),this.gameTweenMax=this.gameModel.gameTweenMax,this.createBg(),this.createScene(),this.createTarget(),this.createColonel()},createBg:function(){this.gameContainer.addChild(this.newSprite(this.manifest.BACKGROUND))},createTarget:function(){var e=new h({gameModel:this.gameModel,gameContainer:this.gameContainer,gameTweenMax:this.gameTweenMax});this.views.push(e)},createColonel:function(){var e=new a({gameModel:this.gameModel,gameContainer:this.gameContainer,gameTweenMax:this.gameTweenMax,movieClips:this.movieClips});this.views.push(e)},createScene:function(){var e=new l({gameModel:this.gameModel,gameContainer:this.gameContainer,gameTweenMax:this.gameTweenMax,movieClips:this.movieClips});this.views.push(e),this.gameContainer.addChild(e.sceneContainer)},show:function(){this["super"].show.apply(this,arguments)},render:function(){if(this.gameModel.state===this.gameModel.GAMESTATE_GAME_PLAYING)for(var e=this.views.length-1;e>=0;e--)this.views[e].render();this.gameContainer&&(this.gameContainer.x=this.gameModel.pt.x)},destroy:function(){t.each(this.views,function(e){e.destroy()}),this.views=[],this.stopListening(),this.off(),this["super"].destroy.apply(this,arguments)}})}),define("game/games/gun_fight/view/ui/game_bullets_ui_view",["jquery","underscore","backbone","pixi","game/games/ui/game_base_ui_view"],function(e,t,i,s,n){"use strict";var o=n.extend({width:6,padding:3,initialize:function(){n.prototype.initialize.apply(this,arguments),this.numOfShots=this.gameModel.colonelModel.numOfShots,this.createUI()},createUI:function(){this.createBg(),this.createBullets()},createBg:function(){for(var e=0;e<this.numOfShots;e++){var t=this.spriteFromFrameID(this.manifest.UI_COLONEL_BULLETS_BG.ns_url);t.x=e*(this.width+this.padding),this.UIContainer.addChild(t)}},createBullets:function(){this.bulletContainer=new s.DisplayObjectContainer;for(var e=0;e<this.numOfShots;e++){var t=this.spriteFromFrameID(this.manifest.UI_COLONEL_BULLETS.ns_url);t.x=e*(this.width+this.padding),this.bulletContainer.addChild(t)}this.UIContainer.addChild(this.bulletContainer)},render:function(){for(var e=this.bulletContainer.children.length,t=this.gameModel.colonelModel.shotIndex,i=0;e>i;i++){var s=e-i>t;this.bulletContainer.children[i].visible=s}},show:function(){},hide:function(){},onResize:function(){},destroy:function(){this.stopListening(),this.off()}});return o}),define("game/games/gun_fight/view/ui/game_accuracy_ui_view",["jquery","underscore","backbone","pixi","game/games/ui/game_base_ui_view"],function(e,t,i,s,n){"use strict";var o=n.extend({uiFont:{font:"8px frucade"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.createUI()},createUI:function(){var e=this.spriteFromFrameID(this.manifest.UI_BG_ACCURACY.ns_url);e.x=20;var t=this.spriteFromFrameID(this.manifest.UI_COLONEL_ACCURACY.ns_url);this.label=new s.BitmapText(this.gameModel.getAccuracy()+"%",this.uiFont),this.label.x=22,this.label.y=3,this.UIContainer.addChild(e),this.UIContainer.addChild(this.label),this.UIContainer.addChild(t)},updateAccuracy:function(){var e=this.gameModel.getAccuracy();this.label.setText(e+"%"),this.label.updateText(),this.label.x=33-.5*this.label.textWidth},render:function(){this.updateAccuracy()},destroy:function(){this.stopListening(),this.off()}});return o}),define("game/games/gun_fight/view/gun_fight_game_ui_view",["jquery","underscore","backbone","model/loader_collection","config","pixi","shims/shim_resn_utils","game/game_base/view/game_ui_view","game/games/ui/health/game_health_ui_view","game/games/gun_fight/view/ui/game_bullets_ui_view","game/games/gun_fight/view/ui/game_accuracy_ui_view"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";var d=a.extend({uiFontLarge:{font:"40px frucade"},redColor:11346176,initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments),this.gameWidth=this.gameModel.gameWidth,this.gameHeight=this.gameModel.gameHeight},setup:function(){this["super"].setup.apply(this,arguments),this.createBulletsUI(),this.createAccuracyUI(),this.createHealthUI(),this.createHitScreenUI(),this.createReloadScreenUI()},createHitScreenUI:function(){this.hitScreenContainer=new o.DisplayObjectContainer;var e=new o.Graphics;e.beginFill(this.redColor),e.drawRect(0,0,this.gameWidth,this.gameHeight),this.hitScreenContainer.addChild(e),this.hitScreenContainer.alpha=.5,this.hitScreenContainer.visible=!1,e.cacheAsBitmap=!0,this.viewContainer.addChild(this.hitScreenContainer)},createBulletsUI:function(){this.gameUIBulletsView=new l({viewContainer:this.viewContainer,gameModel:this.gameModel,x:12,y:166})},createAccuracyUI:function(){this.gameUIAccuracyView=new c({viewContainer:this.viewContainer,gameModel:this.gameModel,x:199,y:166})},createHealthUI:function(){this.gameUIHeartView=new h({viewContainer:this.viewContainer,gameModel:this.gameModel,x:0,y:7})},createReloadScreenUI:function(){this.reloadLabel=new o.BitmapText("RELOAD",this.uiFontLarge),this.reloadLabel.x=.5*this.gameModel.gameWidth-75,this.reloadLabel.y=.4*this.gameModel.gameHeight,r.pixi.setBitmapTextColor(this.reloadLabel,16569857),this.viewContainer.addChild(this.reloadLabel)},updateHitCountUI:function(){var e=this.gameModel.colonelModel.getHealthCount();this.gameUIHeartView.updateCount(e)},updateHitScreenUI:function(){this.hitScreenContainer.visible=this.gameModel.colonelModel.displayHitUI},updateReloadScreenUI:function(){this.reloadLabel.visible=this.gameModel.colonelModel.displayReloadUI},show:function(){this["super"].show.apply(this,arguments)},render:function(){this.gameModel.state===this.gameModel.GAMESTATE_GAME_PLAYING&&(this.gameUIBulletsView.render(),this.gameUIAccuracyView.render(),this.updateHitCountUI(),this.updateHitScreenUI(),this.updateReloadScreenUI())},destroy:function(){this.stopListening(),this.off()}});return d}),define("game/games/gun_fight/view/gun_fight_game_screens_view",["jquery","underscore","backbone","model/loader_collection","config","pixi","game/game_base/view/screens/game_screen_instructions","game/game_base/view/screens/game_screen_intro","game/game_base/view/screens/game_screen_lose","game/game_base/view/screens/game_screen_win","game/game_base/view/screens/game_screen_pause","game/game_base/view/screens/game_screen_cutscene","game/game_base/view/screens/game_screen_countdown","game/game_base/view/game_screens_view","shims/shim_resn_utils","game/game_base/view/screens/game_screen_pause_btn"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m){"use strict";var _=g.extend({initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.createScreens(),this.addEvents()},addEvents:function(){this.listenTo(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE,this.onGameStateChange)},removeEvents:function(){this.stopListening(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE)},onGameStateChange:function(){t.each(this.screens,function(e){e.onGameStateChange()})},createScreens:function(){var e={gameModel:this.gameModel,viewContainer:this.viewContainer,cutsceneMC:{id:"GUNFIGHT_CUTSCENE_MC"}},t=n.EMBEDDED?"GUNFIGHT_CUTSCENE_1_EMBED":"GUNFIGHT_CUTSCENE_1",i=[t,"GUNFIGHT_CUTSCENE_2"];this.screens=[new r(e),new a(e),new u(e),new h(e),new l(e),new c(e),new m(e),new d(e,i)]},show:function(){this["super"].show.apply(this,arguments)},render:function(){},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}});return _}),define("game/games/gun_fight/gun_fight_game_main",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/game_main","game/game_config","game/games/gun_fight/model/gun_fight_game_model","game/games/gun_fight/model/gun_fight_asset_manifest","game/games/gun_fight/view/gun_fight_game_view","game/games/gun_fight/view/gun_fight_game_ui_view","game/games/gun_fight/view/gun_fight_game_screens_view"],function(e,t,i,s,n,o,r,a,h,l,c,d){"use strict";var u=o.extend({initialize:function(e){this["super"]=this.constructor.__super__;var i=t.extend({},e),s=new a({gameShellModel:e.gameShellModel,gameInputModel:e.gameInputModel,manifest:h,gameId:e.gameId,gameIndex:e.gameIndex});i.gameModel=s,i.gameView=new l({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameUIView=new c({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameScreensView=new d({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),this["super"].initialize.apply(this,[i])}});return u}),define("game/games/train/model/wheel_entity_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax"],function(e,t){function i(e){this.spriteVO=new t,this.spriteVO.pivotX=0,this.spriteVO.pivotY=49,this.gameTweenMax=e.gameModel.gameTweenMax,this.gameRect=e.gameModel.gameRect,this.gameModel=e.gameModel,this.id="cart",this.reset=function(){},this.reset()}return i}),define("game/games/train/model/colonel_entity_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax","game/games/train/model/wheel_entity_model","shims/shim_resn_utils","console"],function(e,t,i,s,n,o){function r(i){this.spriteVO=new t,this.spriteVO.pivotX=61,this.spriteVO.pivotY=85,this.gameTweenMax=i.gameModel.gameTweenMax,this.gameRect=i.gameModel.gameRect,this.gameModel=i.gameModel,this.gameSoundModel=this.gameModel.gameSoundModel,this.id="colonel",this.initPos={x:22,y:164},this.jumpPixelHeight=60;var r=this.gameModel.manifest;this.ANIMATION_STATES={JUMP:r.JUMP_MC.id,JUMP_THROW:r.JUMP_MC_THROW.id,PUMP:r.PUMP_MC.id,PUMP_THROW:r.PUMP_MC_THROW.id,CRASHED:r.CART_FIRE_MC.id,CRASHED_CHICKEN:r.CART_CHICKEN_MC.id,WIN:r.CART_WIN_MC.id,LOSE:r.CART_LOSE_MC.id,INACTIVE:"STATE_INACTIVE"},this.animationState=this.ANIMATION_STATES.PUMP,this.frameLength=0,this.currentFrame=0,this.currentFrameFloat=0,this.loop=!1,this.playSpeed=.125,this.frameTween={unitary:0},this.STATES={THROW:{THROW:"THROW",RELOAD:"RELOAD",READY:"READY"},CART:{JUMPING:"JUMP",MOVING:"PUMP",CRASHED:"CRASHED",WIN:"WIN",LOSE:"LOSE",INACTIVE:"INACTIVE"}},this.wheelModels=[new s({gameModel:i.gameModel}),new s({gameModel:i.gameModel}),new s({gameModel:i.gameModel}),new s({gameModel:i.gameModel})],this.wheelPositions={spriteOffset:{x:-60,y:-36}},this.wheelPositions.normal=[{x:73,y:87},{x:96,y:87},{x:80,y:77},{x:101,y:77}],this.wheelPositions[this.STATES.CART.JUMPING]=[[{x:73,y:87},{x:96,y:87},{x:80,y:77},{x:101,y:77}],[{x:73,y:84},{x:96,y:77},{x:79,y:72},{x:99,y:65}],[{x:83,y:81},{x:101,y:65},{x:83,y:70},{x:99,y:54}],[{x:72,y:84},{x:94,y:78},{x:77,y:74},{x:98,y:67}],[{x:73,y:87},{x:96,y:87},{x:79,y:78},{x:101,y:78}],[{x:72,y:77},{x:97,y:84},{x:73,y:67},{x:97,y:75}],[{x:68,y:72},{x:85,y:88},{x:69,y:61},{x:85,y:77}],[{x:74,y:80},{x:97,y:85},{x:75,y:71},{x:97,y:77}]],this.throwState=this.STATES.THROW.READY,this.cartState=this.STATES.CART.MOVING,this.crashedType="WOOD",this.reset=function(){this.setThrowState(this.STATES.THROW.READY),this.setCartState(this.STATES.CART.MOVING),this.stopJiggerAudio()},this.removeLife=function(){this.gameModel.removeLife()},this.throwCard=function(){this.gameModel.throwCard()},this.setAnimationState=function(e,t){var i=e;t===this.STATES.THROW.THROW&&(i+="_THROW"),i=this.ANIMATION_STATES[i],e===this.STATES.CART.CRASHED&&"CHICKEN"===this.crashedType&&(i=this.ANIMATION_STATES.CRASHED_CHICKEN),this.animationState=i,this.spriteVO.active=this.animationState!==this.STATES.INACTIVE,this.spriteVO.currentAnimationId=this.animationState,this.frameLength=this.gameModel.manifest[this.animationState].frameNames.length},this.updateWheels=function(){var e=this.wheelPositions.normal;this.cartState===this.STATES.CART.JUMPING&&(e=this.wheelPositions[this.STATES.CART.JUMPING][this.currentFrame]);for(var t,i,s=0;4>s;s++)t=e[s],i=this.wheelModels[s].spriteVO,i.x=t.x+this.wheelPositions.spriteOffset.x,i.y=t.y+this.wheelPositions.spriteOffset.y},this.updateUnitary=function(){this.setFrameViaUnitary(this.frameTween.unitary)},this.setFrameViaUnitary=function(e){this.currentFrameFloat=(this.frameLength-.001)*e,this.setFrame(Math.floor(this.currentFrameFloat))},this.setFrame=function(e){this.currentFrame=e,this.spriteVO.currentFrame=e,this.updateWheels()},this.play=function(e){e=e||0,this.playing=!0,this.currentFrameFloat=e,this.setFrame(e),this.playJiggerAudio()},this.playJiggerAudio=function(){r.AUDIO_JIGGER&&this.gameSoundModel.setVolume(r.AUDIO_JIGGER.id,1)},this.stop=function(e){e=e||this.currentFrame,this.playing=!1,this.currentFrameFloat=e,this.setFrame(e),this.stopJiggerAudio()},this.stopJiggerAudio=function(){r.AUDIO_JIGGER&&this.gameSoundModel.setVolume(r.AUDIO_JIGGER.id,0)},this.nextFrame=function(){var e=this.currentFrameFloat;this.playing&&(e+=this.playSpeed,this.frameLength<=e&&(e=this.loop===!0?0:this.frameLength-1,this.playing=this.loop===!0)),this.currentFrameFloat=e,this.setFrame(Math.floor(e))},this.tick=function(){this.nextFrame(),this.cartState===this.STATES.CART.JUMPING&&this.updateUnitary()},this.coolDownRamp=.1,this.calculateCoolDown=function(){void 0===this.lastThrow&&(this.lastThrow=new Date);var e=new Date,t=(e-this.lastThrow)/1e3;return t=n.math.clamp(t,0,6),.45>t?this.coolDownRamp*=2:.65>t?this.coolDownRamp*=1.5:t>1&&(this.coolDownRamp=.1),this.coolDownRamp=n.math.clamp(this.coolDownRamp,.1,.9),this.lastThrow=e,this.coolDownRamp},this.setThrowState=function(e){switch(e){case this.STATES.THROW.THROW:if(this.throwState!==this.STATES.THROW.READY)return;if(this.cartState===this.STATES.CART.CRASHED)return;this.throwCard(),this.gameTweenMax.killDelayedCallsTo(this.setThrowState),this.coolDown=this.calculateCoolDown(),this.gameTweenMax.delayedCall(this.coolDown,this.setThrowState,[this.STATES.THROW.READY]),this.throwState=e,this.setAnimationState(this.cartState,this.throwState);break;case this.STATES.THROW.RELOAD:this.throwState=e,this.setThrowState(this.STATES.THROW.READY);break;case this.STATES.THROW.READY:this.throwState=e,this.setAnimationState(this.cartState,this.throwState)}},this.showWheels=function(e){for(var t,i=0;4>i;i++)t=this.wheelModels[i].spriteVO,t.visible=e},this.setCartState=function(e){o.log("setCartState:",e);var t=this.initPos;switch(e){case this.STATES.CART.JUMPING:var i=this.cartState===this.STATES.CART.MOVING;if(!i)return;this.gameTweenMax.killTweensOf(this.frameTween),this.gameTweenMax.killTweensOf(this.spriteVO),this.gameTweenMax.to(this.spriteVO,.05,{y:t.y+3,x:this.initPos.x,ease:window.Power2.easeInOut}),this.gameTweenMax.to(this.spriteVO,.35,{delay:.05,y:t.y-this.jumpPixelHeight,ease:window.Power1.easeOut}),this.gameTweenMax.to(this.spriteVO,.35,{delay:.4,y:t.y-3,ease:window.Power1.easeIn}),this.frameTween.unitary=0,this.gameTweenMax.to(this.frameTween,.75,{unitary:1,ease:window.Power0.easeInOut}),this.gameTweenMax.killDelayedCallsTo(this.setCartState),this.gameTweenMax.delayedCall(.75,this.setCartState,[this.STATES.CART.MOVING]),this.cartState=e,this.setAnimationState(this.cartState,this.throwState),this.loop=!1,this.stop(0),this.playJumpAudio();break;case this.STATES.CART.MOVING:this.showWheels(!0),this.gameTweenMax.killTweensOf(this.frameTween),this.gameTweenMax.to(this.spriteVO,.05,{x:t.x,y:t.y,ease:window.Power2.easeInOut}),this.rotation=0,this.cartState=e,this.setAnimationState(this.cartState,this.throwState),this.loop=!0,this.play(0);break;case this.STATES.CART.CRASHED:if(this.cartState===this.STATES.CART.CRASHED)return;this.setThrowState(this.STATES.THROW.READY),this.gameTweenMax.killTweensOf(this.frameTween),this.gameTweenMax.killTweensOf(this.spriteVO),this.gameTweenMax.to(this.spriteVO,.25,{x:t.x,y:this.spriteVO.y-10}),this.gameTweenMax.to(this.spriteVO,.25,{delay:.25,x:t.x,y:t.y}),this.gameTweenMax.killDelayedCallsTo(this.setCartState),this.gameTweenMax.delayedCall(.65,this.setCartState,[this.STATES.CART.MOVING]),this.cartState=e,this.setAnimationState(this.cartState,this.throwState),this.loop=!0,this.play(0),this.gameModel.sounds.crash(),this.removeLife();
break;case this.STATES.CART.WIN:o.log("setCartState?:",e,this.STATES.CART.WIN),this.showWheels(!1),this.setThrowState(this.STATES.THROW.READY),this.gameTweenMax.killDelayedCallsTo(this.setCartState),this.cartState=e,this.setAnimationState(this.cartState,this.throwState),this.gameTweenMax.to(this.spriteVO,1.6,{x:t.x+70,y:t.y,ease:window.Power2.easeInOut});break;case this.STATES.CART.LOSE:o.log("setCartState?:",e,this.STATES.CART.LOSE),this.setThrowState(this.STATES.THROW.READY),this.gameTweenMax.killDelayedCallsTo(this.setCartState),this.cartState=e,this.setAnimationState(this.cartState,this.throwState),this.gameTweenMax.to(this.spriteVO,1.6,{x:t.x+70,y:t.y,ease:window.Power2.easeInOut})}},this.playJumpAudio=function(){this.gameSoundModel.play(r.AUDIO_JUMP.id,{loop:0})},this.destroy=function(){this.gameTweenMax.killTweensOf(this.spriteVO),this.gameRect=null},this.reset(),e.bindAll(this,"setCartState","setThrowState","setAnimationState","updateUnitary")}return r}),define("game/games/train/model/survivor_entity_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax","shims/shim_resn_utils"],function(e,t,i){function s(s){this.index=s.index,this.typeIndex=this.index%8,this.id=s.id,this.type="SURVIVOR",this.yIndex=s.yIndex;var n=s.gameModel.manifest;this.types=[{type:"FAR",groundY:75,pivot:{x:5,y:31},hitRect:{x:0,y:-31,width:20,height:24},animationStates:{CARDED:n["SURVIVOR_FAR_"+this.typeIndex+"_CARDED_MC"].id,WAVING:n["SURVIVOR_FAR_"+this.typeIndex+"_WAVE_MC"].id}},{type:"MID",groundY:95,pivot:{x:5,y:36},hitRect:{x:0,y:-36,width:25,height:25},animationStates:{CARDED:n["SURVIVOR_MID_"+this.typeIndex+"_CARDED_MC"].id,WAVING:n["SURVIVOR_MID_"+this.typeIndex+"_WAVE_MC"].id}},{type:"NEAR",groundY:132,pivot:{x:5,y:58},hitRect:{x:0,y:-58,width:34,height:38},animationStates:{CARDED:n["SURVIVOR_NEAR_"+this.typeIndex+"_CARDED_MC"].id,WAVING:n["SURVIVOR_NEAR_"+this.typeIndex+"_WAVE_MC"].id}}],this.gameModel=s.gameModel,this.gameTweenMax=s.gameModel.gameTweenMax,this.gameRect=s.gameModel.gameRect;var o=this.types[this.yIndex];this.survivorType=o.type,this.spriteVO=new t,this.spriteVO.pivotX=o.pivot.x,this.spriteVO.pivotY=o.pivot.y,this.last={x:0,y:0},this.initPos={x:307.2,y:o.groundY},this.hitRect=o.hitRect,this.ANIMATION_STATES=o.animationStates,this.animationState=this.ANIMATION_STATES.WAVING,this.STATES={CARDED:"CARDED",WAVING:"WAVING",INACTIVE:"INACTIVE"},this.addScore=function(){this.gameModel.addScore()},this.addToGround=function(){var e=this.initPos;this.spriteVO.x=e.x,this.spriteVO.y=e.y,this.gameModel.groundModel.addToGround(this,this.spriteVO.y)},this.reset=function(){this.setState(this.STATES.INACTIVE),this.last={x:0,y:0},this.spriteVO.x=-100,this.gameTweenMax.killDelayedCallsTo(this.setState)},this.setAnimationState=function(e){this.animationState=e,this.spriteVO.currentAnimationId=this.animationState},this.setState=function(e){switch(this.state=e,e){case this.STATES.CARDED:this.addScore(),this.setAnimationState(this.ANIMATION_STATES.CARDED),this.gameModel.sounds.cardCaught();break;case this.STATES.WAVING:i.killTweensOf(this.spriteVO),this.setAnimationState(this.ANIMATION_STATES.WAVING),this.addToGround();break;case this.STATES.INACTIVE:this.state=e}},e.bindAll(this,"setState","setAnimationState")}return s}),define("game/games/train/model/debris_entity_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax","shims/shim_resn_utils"],function(e,t){function i(i){this.index=i.index,this.id="DEBRIS_"+this.index,this.debrisTypes=["WOOD","BAG","CHICKEN"],this.debrisType=this.debrisTypes[this.index%this.debrisTypes.length],this.gameModel=i.gameModel,this.gameTweenMax=i.gameModel.gameTweenMax,this.gameRect=i.gameModel.gameRect,this.spriteVO=new t,this.spriteVO.pivotX=0,this.spriteVO.pivotY=37,this.vector={x:0,y:0},this.last={x:0,y:0},this.initPos={x:307.2,y:174};var s=this.gameModel.manifest;this.ANIMATION_STATES={CRASHED:s["DEBRIS_"+this.debrisType+"_FIRE_MC"].id,COLLIDABLE:s["DEBRIS_"+this.debrisType+"_FIRE_MC"].id,INACTIVE:s["DEBRIS_"+this.debrisType+"_FIRE_MC"].id},this.animationState=this.ANIMATION_STATES.THROWN,this.STATES={CRASHED:"CRASHED",COLLIDABLE:"COLLIDABLE",INACTIVE:"INACTIVE"},this.reset=function(){this.setState(this.STATES.INACTIVE),this.setAnimationState(this.ANIMATION_STATES.INACTIVE),this.state=-1,this.vector={x:0,y:0},this.lastPos={x:0,y:0},this.spriteVO.x=-100,this.spriteVO.y=this.initPos.y,this.gameTweenMax.killDelayedCallsTo(this.setState)},this.setAnimationState=function(e){this.animationState=e,this.spriteVO.currentAnimationId=this.animationState},this.setState=function(e){this.state=e;var t=this.gameModel,i=this.initPos;switch(e){case this.STATES.CRASHED:this.spriteVO.visible=!1;break;case this.STATES.COLLIDABLE:this.gameTweenMax.killTweensOf(this.spriteVO),this.spriteVO.x=i.x,this.spriteVO.y=i.y,this.spriteVO.rotation=0,this.spriteVO.visible=!0,t.groundModel.addToGround(this,this.spriteVO.y);break;case this.STATES.INACTIVE:this.spriteVO.visible=!1,this.spriteVO.x=-20,this.spriteVO.y=-20}},e.bindAll(this,"setState","setAnimationState")}return i}),define("game/games/train/model/card_entity_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax","shims/shim_resn_utils"],function(e,t){function i(i){this.index=i.index,this.id="CARD_"+this.index,this.gameModel=i.gameModel,this.gameTweenMax=i.gameModel.gameTweenMax,this.gameRect=i.gameModel.gameRect,this.gameSoundModel=this.gameModel.gameSoundModel,this.spriteVO=new t,this.spriteVO.pivotX=6,this.spriteVO.pivotY=7,this.vector={x:0,y:0},this.last={x:0,y:0},this.groundY=50,this.throwOffset={x:36,y:-30};var s=this.gameModel.manifest;this.ANIMATION_STATES={THROWN:"UP",FALLEN:"FALLEN"},this.animationState=this.ANIMATION_STATES.THROWN,this.STATES={FALLEN:"FALLEN",THOWN:"THOWN",CAUGHT:"CAUGHT",INACTIVE:"INACTIVE"},this.reset=function(){this.setState(this.STATES.INACTIVE),this.state=-1,this.vector={x:0,y:0},this.lastPos={x:0,y:0},this.spriteVO.x=-100,this.gameTweenMax.killDelayedCallsTo(this.setState)},this.setAnimationState=function(e){this.animationState=e,this.spriteVO.currentAnimationId=this.animationState},this.playThownAudio=function(){this.gameSoundModel.play(s.AUDIO_THROW.id,{loop:0})},this.playFallenAudio=function(){this.gameSoundModel.play(s.AUDIO_MISS.id,{loop:0})},this.setState=function(e){var t=this.gameModel;switch(this.state=e,this.gameTweenMax.killDelayedCallsTo(this.setState),e){case this.STATES.CAUGHT:this.gameTweenMax.killTweensOf(this.spriteVO),this.spriteVO.rotation=.75*Math.PI,t.shotsCaught++,t.calculateAim(),this.setState(this.STATES.INACTIVE);break;case this.STATES.THOWN:var i={x:t.colonelModel.spriteVO.x+this.throwOffset.x,y:t.colonelModel.spriteVO.y+this.throwOffset.y};this.gameTweenMax.killTweensOf(this.spriteVO),this.spriteVO.x=i.x,this.spriteVO.y=i.y,this.spriteVO.rotation=0,this.spriteVO.scaleX=1,this.spriteVO.scaleY=1,this.gameTweenMax.to(this.spriteVO,1.3,{scaleX:.33,scaleY:.33,ease:window.Power1.easeOut}),this.gameTweenMax.to(this.spriteVO,1.3,{x:i.x+70,rotation:3*Math.PI,ease:window.Power0.easeOut}),this.gameTweenMax.to(this.spriteVO,1.3,{y:50,ease:window.Power2.easeOut}),this.gameTweenMax.delayedCall(1.05,this.setState,[this.STATES.FALLEN]),this.playThownAudio(),this.gameModel.shotsFired++;break;case this.STATES.FALLEN:this.gameTweenMax.killTweensOf(this.spriteVO),t.shotsMissed++,t.calculateAim(),this.playFallenAudio(),this.setState(this.STATES.INACTIVE);break;case this.STATES.INACTIVE:this.gameTweenMax.killDelayedCallsTo(this.setState),this.spriteVO.x=-100,this.spriteVO.y=-100}},e.bindAll(this,"setState","setAnimationState")}return i}),define("game/games/train/model/train_spawn_model",["underscore","TweenMax","game/games/train/model/survivor_entity_model","game/games/train/model/debris_entity_model","game/games/train/model/card_entity_model","console","shims/shim_resn_utils"],function(e,t,i,s,n,o,r){function a(t){this.gameModel=t.gameModel,this.gameTweenMax=this.gameModel.gameTweenMax,this.total={cards:10,survivors_near:8,survivors_mid:8,survivors_far:10,debris:10},this.pool={cards:[],survivors:[],survivors_near:[],survivors_mid:[],survivors_far:[],debris:[]},this.survivorYIndexKeys=["far","mid","near"],this.survivorModules=[],this.survivorModules[0]=[{d:1.2,y:0},{d:.8,y:1},{d:1.2,y:2},{d:.5,y:0}],this.survivorModules[1]=[{d:1.2,y:2},{d:.5,y:1},{d:1.2,y:2},{d:.5,y:1}],this.survivorModules[2]=[{d:1.2,y:1},{d:.5,y:1},{d:1.2,y:1},{d:.1,y:0}],this.moduleOrder=[0,1,2,0,1,1,2,0,1,2,2,1],this.survivorSpawnSeq=[];for(var o=0,a=this.moduleOrder.length;a>o;o++){var h=this.survivorModules[this.moduleOrder[o]];this.survivorSpawnSeq=this.survivorSpawnSeq.concat(h)}this.survivorYIndex=this.survivorSpawnSeq[0].y,this.reset=function(){this.survivorYIndex=this.survivorSpawnSeq[0].y,this.survivorSpawnSeq.poolIndex=0,this._resetModels()},this._resetModels=function(){for(var e in this.pool){var t=this.pool[e];if(void 0!==t)for(var i=t.length-1;i>-1;i--)t[i].reset()}},this.killTweens=function(){this.gameTweenMax.killDelayedCallsTo(this.spawnSurvivor),this.gameTweenMax.killDelayedCallsTo(this.spawnDebris)},this.makePools=function(){this._makePool("survivors_near",i,{idPrefix:"SURVIVOR_near",yIndex:2,gameModel:this.gameModel}),this._makePool("survivors_mid",i,{idPrefix:"SURVIVOR_mid",yIndex:1,gameModel:this.gameModel}),this._makePool("survivors_far",i,{idPrefix:"SURVIVOR_far",yIndex:0,gameModel:this.gameModel}),this._makePool("cards",n,{gameModel:this.gameModel}),this._makePool("debris",s,{gameModel:this.gameModel}),this.pool.survivors=[],this.pool.survivors=this.pool.survivors.concat(this.pool.survivors_near),this.pool.survivors=this.pool.survivors.concat(this.pool.survivors_mid),this.pool.survivors=this.pool.survivors.concat(this.pool.survivors_far)},this._makePool=function(e,t,i){this.pool[e]=[];for(var s=0,n=this.total[e];n>s;s++)i.index=s,void 0!==i.idPrefix&&(i.id=i.idPrefix+"_"+s),this.pool[e].push(new t(i))},this.spawnCard=function(){var e=r.array.getNextInPool(this.pool.cards);e&&e.setState(e.STATES.THOWN)},this.spawnDebris=function(){var e=r.array.getNextInPool(this.pool.debris);e&&e.setState(e.STATES.COLLIDABLE),this.gameTweenMax.killDelayedCallsTo(this.spawnDebris);var t=[1,1.5,1.5,2,3];this.gameTweenMax.delayedCall(t[r.array.getRandomIndex(t)],this.spawnDebris)},this.spawnSurvivor=function(){this.gameModel.survivorReleased();var e=this.survivorYIndexKeys[this.survivorYIndex],t=r.array.getNextInPool(this.pool["survivors_"+e]);t&&t.setState(t.STATES.WAVING);var i=r.array.getNextInPoolFinite(this.survivorSpawnSeq);if(null!==i){var s=i.d;this.survivorYIndex=i.y,this.gameTweenMax.killDelayedCallsTo(this.spawnSurvivor),this.gameTweenMax.delayedCall(s,this.spawnSurvivor)}},e.bindAll(this,"spawnDebris","spawnSurvivor","spawnCard")}return a}),define("game/games/train/model/ground_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax","shims/shim_resn_utils"],function(e,t,i,s){function n(e){this.gameModel=e.gameModel,this.gameTweenMax=e.gameModel.gameTweenMax,this.gameRect=e.gameModel.gameRect,this.items=[],this.y=0,this.x=0,this.last={x:0,y:0,milliSecs:null},this.pixelsPerSecondVector={x:-5,y:0},this.vector={x:0,y:0},this.maxY=190,this.minY=30,this.perspectiveCenter={x:.5,y:.15},this.pixelPerspectiveCenter={y:256*this.perspectiveCenter.y},this.bounds={minX:-76.8},this.reset=function(){this.removeAllFromGround(),this.pixelsPerSecondVector.x=-5,this.y=0,this.x=0,this.last={x:0,y:0,milliSecs:null}},this.addToGround=function(e,t){e.isOnGround=!0,e.groundY=t,this.isOnGround(e)||this.items.push(e)},this.removeAllFromGround=function(){for(var e=this.items.length-1;e>-1;e--)this.removeFromGround(this.items[e])},this.removeFromGround=function(e){e.isOnGround=!1,e.state="STATE_INACTIVE";for(var t=this.items,i=t.length-1;i>=0;i--)t[i].id===e.id&&t.splice(i,1)},this.isOnGround=function(e){for(var t=this.items,i=0;i<t.length;i++)if(t[i].id===e.id)return!0;return!1},this.getXIncrementViaGroundY=function(e){var t=this;e=s.math.clamp(e,t.minY,t.maxY);var i=(e-this.pixelPerspectiveCenter.y)/(t.maxY-this.pixelPerspectiveCenter.y);return i=s.math.clamp(i,0,1),i*t.vector.x},this.moveGround=function(){var e=this;null===e.last.milliSecs&&(e.last.milliSecs=new Date);var t=new Date,i=t-e.last.milliSecs,n=i/1e3;n=s.math.clamp(n,0,.1),e.last.milliSecs=t,e.last.x=e.x,e.last.y=e.y,e.y+=n*e.pixelsPerSecondVector.y,e.x+=n*e.pixelsPerSecondVector.x,e.vector.x=e.x-e.last.x,e.vector.y=e.y-e.last.y;for(var o,r=0,a=0,h=0,l=e.items.length;l>h;h++)o=e.items[h],a=s.math.clamp(o.groundY,e.minY,e.maxY),r=(a-this.pixelPerspectiveCenter.y)/(e.maxY-this.pixelPerspectiveCenter.y),r=s.math.clamp(r,0,1),o.spriteVO.x+=r*e.vector.x;for(h=l-1;h>-1;h--)o=e.items[h],"SURVIVOR"===o.type&&o.state!==o.STATES.INACTIVE?o.spriteVO.x<-10&&(o.setState(o.STATES.INACTIVE),this.gameModel.survivorPassed()):o.spriteVO.x<e.bounds.minX&&(o.loopGround===!0?o.x+=280:this.removeFromGround(o))}}return n}),define("game/games/train/model/train_sounds",["underscore","TweenMax","console","shims/shim_resn_utils"],function(){function e(e){this.gameModel=e.gameModel,this.gameTweenMax=this.gameModel.gameTweenMax,this.soundModel=this.gameModel.gameSoundModel,this.manifest=this.gameModel.manifest,this.count={duck:0,jump:0,crash:0},this.survivorCry=function(){},this.cardCaught=function(){this.soundModel.play(this.manifest.AUDIO_CATCH.id,{loop:0})},this.crash=function(){this.soundModel.play(this.manifest.AUDIO_CRASH.id,{loop:0})}}return e}),define("game/games/train/model/train_game_model",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/model/game_model","console","game/games/train/model/colonel_entity_model","game/games/train/model/train_spawn_model","TweenMax","game/games/train/model/ground_model","shims/shim_resn_utils","game/games/train/model/train_sounds"],function(e,t,i,s,n,o,r,a,h,l,c,d,u){"use strict";var g=o.extend({gameSpeed:.75,gameSpeedMin:.75,gameSpeedMax:1.05,aim:0,shotsFired:0,shotsMissed:0,shotsCaught:0,survivorsPassed:0,survivorsResolved:0,survivorsTotal:0,survivorsReleased:0,score:0,scoreMultiplier:1,livesMax:3,lives:3,spawnModel:null,colonelModel:null,initialize:function(e){this.EVENTS.UI_UPDATE="UI_UPDATE",this["super"]=this.constructor.__super__,this.gameInputModel=e.gameInputModel,this["super"].initialize.apply(this,arguments),this.sounds=new u({gameModel:this}),this.colonelModel=new a({gameModel:this}),this.spawnModel=new h({gameModel:this}),this.groundModel=new c({gameModel:this}),this.defineUtils()},defineUtils:function(){this.clamp=d.math.clamp},setup:function(){this.setupComplete!==!0&&(this.setupComplete=!0,this["super"].setup.apply(this,arguments),this.spawnModel.makePools(),t.bindAll(this,"start","showOutroLose","showOutroWin"))},reset:function(){this["super"].reset.apply(this,arguments),this.gameSpeed=this.gameSpeedMin,this.spawnModel.reset(),this.colonelModel.reset(),this.groundModel.reset(),this.score=0,this.lives=this.livesMax,this.survivorsPassed=0,this.survivorsTotal=this.spawnModel.survivorSpawnSeq.length,this.survivorsReleased=0,this.shotsFired=0,this.shotsMissed=0,this.shotsCaught=0,this.aim=0,this.updateReadOuts()},start:function(){this["super"].start.apply(this,arguments)},startGame:function(){this["super"].startGame.apply(this,arguments),this.gameTweenMax.resume(),this.gameTweenMax.timeline.timeScale(this.gameSpeed),this.gameTweenMax.delayedCall(8,this.spawnModel.spawnDebris),this.gameTweenMax.delayedCall(3,this.spawnModel.spawnSurvivor),this.gameTweenMax.to(this,30,{gameSpeed:this.gameSpeedMax}),this.playGameAudio()},playGameAudio:function(){this.gameSoundModel.play(this.manifest.AUDIO_MUSIC.id,{loop:-1}),this.gameSoundModel.play(this.manifest.AUDIO_JIGGER.id,{loop:-1})},endGame:function(){this["super"].endGame.apply(this,arguments),this.gameTweenMax.pause(),this.spawnModel.killTweens()},calculateMedalIndex:function(){var e=this.survivorsTotal+1;r.log("this.score: ",this.score," total: ",e),this.medalIndex=0,this.score/e>=.999?this.medalIndex=3:this.score/e>=.75?this.medalIndex=2:this.score/e>=.5&&(this.medalIndex=1)},calculateAim:function(){var e=this.shotsCaught/(this.shotsMissed+this.shotsCaught);0===this.shotsCaught&&(e=0),this.aim=parseInt(100*e),this.updateReadOuts()},removeLife:function(){this.lives>0&&this.lives--,this.lives<1&&this.showOutro(),this.updateReadOuts()},survivorReleased:function(){this.survivorsReleased++,this.updateReadOuts()},survivorPassed:function(){this.survivorsPassed++;var e=this.survivorsTotal;this.survivorsPassed>e-3&&this.gameTweenMax.killDelayedCallsTo(this.spawnModel.spawnDebris),this.survivorsPassed>e&&this.showOutro()},addScore:function(){this.score+=this.scoreMultiplier,this.updateReadOuts()},updateReadOuts:function(){this.trigger(this.EVENTS.UI_UPDATE)},buttonLeftPress:function(){this.fire()},buttonRightPress:function(){this.jump()},jump:function(){this.colonelModel.setCartState(this.colonelModel.STATES.CART.JUMPING)},fire:function(){this.colonelModel.setThrowState(this.colonelModel.STATES.THROW.THROW)},throwCard:function(){this.spawnModel.spawnCard()},showOutro:function(){this.gameTweenMax.killDelayedCallsTo(this.spawnModel.spawnDebris),this.gameTweenMax.killDelayedCallsTo(this.colonelModel.setCartState),this.calculateMedalIndex(),this.setGameState(this.GAMESTATE_GAME_OUTRO),this.medalIndex>0?l.delayedCall(.7,this.showOutroWin):l.delayedCall(.7,this.showOutroLose),l.killDelayedCallsTo(this.resolveWinOrLose),l.delayedCall(4,this.resolveWinOrLose)},showOutroWin:function(){this.colonelModel.setCartState(this.colonelModel.STATES.CART.WIN)},showOutroLose:function(){this.colonelModel.setCartState(this.colonelModel.STATES.CART.LOSE)},frameTick:function(){this.gameTweenMax.timeline.timeScale(this.gameSpeed),this["super"].frameTick.apply(this,arguments),this.state===this.GAMESTATE_GAME_PLAYING&&(this.colonelModel.tick(),this.groundModel.pixelsPerSecondVector.x*=1.05,this.groundModel.pixelsPerSecondVector.x=this.clamp(this.groundModel.pixelsPerSecondVector.x,-270*this.gameSpeed,0),this.groundModel.moveGround(),this.checkCollision()),this.state===this.GAMESTATE_GAME_OUTRO&&(this.colonelModel.cartState===this.colonelModel.STATES.CART.LOSE&&(this.groundModel.pixelsPerSecondVector.x*=.95,this.groundModel.pixelsPerSecondVector.x=this.clamp(this.groundModel.pixelsPerSecondVector.x,-270*this.gameSpeed,-90*this.gameSpeed)),this.colonelModel.cartState===this.colonelModel.STATES.CART.WIN&&(this.groundModel.pixelsPerSecondVector.x*=1.07,this.groundModel.pixelsPerSecondVector.x=this.clamp(this.groundModel.pixelsPerSecondVector.x,-340*this.gameSpeed,0)),this.colonelModel.tick(),this.groundModel.moveGround())},checkCollision:function(){this.checkCollideCards(),this.checkCollideDebris()},checkCollideDebris:function(){var e,t=0,i=this.spawnModel.total.debris,s=this.colonelModel;for(t=0;i>t;t++)if(e=this.spawnModel.pool.debris[t],e.state===e.STATES.COLLIDABLE&&Math.abs(s.spriteVO.x-e.spriteVO.x)<16&&Math.abs(s.spriteVO.y+10-e.spriteVO.y)<30){s.crashedType=e.debrisType,s.setCartState(s.STATES.CART.CRASHED),e.setState(e.STATES.CRASHED);break}},checkCollideCards:function(){var e,t,i=0,s=0,n=this.spawnModel.total.cards,o=this.spawnModel.pool.survivors.length;e:for(i=0;n>i;i++)if(e=this.spawnModel.pool.cards[i],e.state===e.STATES.THOWN)for(s=0;o>s;s++)if(t=this.spawnModel.pool.survivors[s],t.state===t.STATES.WAVING){var r=t.hitRect,a=e.last.x<t.last.x&&e.spriteVO.x>t.spriteVO.x;(e.spriteVO.x<0||e.spriteVO.x>300)&&(a=!1),(t.spriteVO.x<0||t.spriteVO.x>300)&&(a=!1),Math.abs(t.spriteVO.x-e.spriteVO.x)>20&&(a=!1),Math.abs(t.spriteVO.x-e.spriteVO.x)<3&&(a=!0);var h=e.spriteVO.y>t.spriteVO.y+r.y&&e.spriteVO.y<t.spriteVO.y+(r.y+r.height);if(a===!0&&h){e.groundY=t.groundY,e.setState(e.STATES.CAUGHT),t.setState(t.STATES.CARDED);continue e}}for(i=0;n>i;i++)e=this.spawnModel.pool.cards[i],e.last.x=e.spriteVO.x,e.last.y=e.spriteVO.y;for(s=0;o>s;s++)t=this.spawnModel.pool.survivors[s],t.last.x=t.spriteVO.x,t.last.y=t.spriteVO.y},destroy:function(){this["super"].destroy.apply(this,arguments)}});return g}),define("game/games/train/view/train_game_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_view","pixi","console"],function(e,t,i,s,n,o,r,a){"use strict";var h=o.extend({colonelSprite:null,colonelAnimations:{},cartSprite:null,cartAnimations:{},bg:null,spritePool:{survivors_near:[],survivors_mid:[],survivors_far:[],cards:[],debris:[]},survivorAnimations:{},debrisAnimations:{},debrisContainer:null,survivorContainer_near:null,survivorContainer_mid:null,survivorContainer_far:null,parallaxLayers:[],endLabel:null,initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.manifest=this.gameModel.manifest,this.end_game_screen=new r.DisplayObjectContainer,this.bg=this.spriteFromID(this.manifest.BACKGROUND.id),this.bg.alpha=1,this.gameContainer.addChild(this.bg),this.makeSprites(),t.bindAll(this,"setGameState"),this.gameModel.on(this.gameModel.EVENTS.STATE_CHANGE,this.setGameState),this.updateSprites()},makeSprites:function(){this.makeParallaxLayers(),this.makeSurvivors(),this.makeDebris(),this.makeCards(),this.makeColonel(),this.updateSprites()},makeParallaxLayers:function(){this.parallaxLayers=[],this.addParallaxLayer(this.manifest.PARALLAX_HILLS,57,47),this.addParallaxLayer(this.manifest.PARALLAX_FENCE_FAR,59,55),this.addParallaxLayer(this.manifest.PARALLAX_BG_OBJ_12,61,61,512,0),this.addParallaxLayer(this.manifest.PARALLAX_BG_OBJ_9,61,61,512,40),this.addParallaxLayer(this.manifest.PARALLAX_BG_OBJ_8,61,61,512,80),this.addParallaxLayer(this.manifest.PARALLAX_BG_OBJ_11,61,61,512,120),this.addParallaxLayer(this.manifest.PARALLAX_BG_OBJ_3,61,61,512,280),this.addParallaxLayer(this.manifest.PARALLAX_BG_OBJ_6,61,61,512,290),this.addParallaxLayer(this.manifest.PARALLAX_BG_OBJ_10,61,61,512,300),this.addParallaxLayer(this.manifest.PARALLAX_BG_OBJ_13,61,61,512,315),this.addParallaxLayer(this.manifest.WRECK_1_MC,65,65,256,64,1),this.addParallaxLayer(this.manifest.WRECK_2_MC,65,65,384,128,2),this.addParallaxLayer(this.manifest.WRECK_3_MC,65,65,512,192,3),this.addParallaxLayer(this.manifest.WRECK_4_MC,65,65,768,0,0),this.survivorContainer_far=new r.DisplayObjectContainer,this.gameContainer.addChild(this.survivorContainer_far),this.addParallaxLayer(this.manifest.PARALLAX_CLODS_FAR,82,82),this.survivorContainer_mid=new r.DisplayObjectContainer,this.gameContainer.addChild(this.survivorContainer_mid),this.addParallaxLayer(this.manifest.PARALLAX_CLODS_NEAR,100,100),this.addParallaxLayer(this.manifest.PARALLAX_FENCE_NEAR,124,124),this.survivorContainer_near=new r.DisplayObjectContainer,this.gameContainer.addChild(this.survivorContainer_near),this.addParallaxLayer(this.manifest.PARALLAX_GRASS_EDGE,153,153),this.addParallaxLayer(this.manifest.PARALLAX_TRACK_BACK,189,189),this.debrisContainer=new r.DisplayObjectContainer,this.gameContainer.addChild(this.debrisContainer),this.addParallaxLayer(this.manifest.PARALLAX_TRACK_FRONT,186,186)},addParallaxLayer:function(e,t,i,s,n,o){var h,l,c=new r.DisplayObjectContainer;"MOVIECLIP"===e.type?(o=o||0,a.log("movieclip"),h=this.movieClipFromID(e.id),h.loop=!0,h.gotoAndPlay(o),l=this.movieClipFromID(e.id),l.loop=!0,l.gotoAndPlay(o)):(a.log("sprite"),h=this.spriteFromID(e.id),l=this.spriteFromID(e.id));var d=h.texture.trim.height;s=s||h.width,n=n||0,h.y=t-d,h.x=n,c.addChild(h),l.position.y=t-d,l.position.x=n+s,c.addChild(l),c.groundY=i,c.groundX=0,c.groundLoopWidth=s,this.gameContainer.addChild(c),this.parallaxLayers.push(c)},makeDebris:function(){this.spritePool.debris=[],this.debrisAnimations={};for(var e=[this.manifest.DEBRIS_WOOD_FIRE_MC.id,this.manifest.DEBRIS_BAG_FIRE_MC.id,this.manifest.DEBRIS_CHICKEN_FIRE_MC.id],t=0,i=e.length;i>t;t++){var s=e[t];this.debrisAnimations[s]=this.movieClipFramesFromID(s)}var n,o,r;for(o=this.gameModel.spawnModel.total.debris,n=0;o>n;n++)r=this.movieClipFromID(this.manifest.DEBRIS_WOOD_FIRE_MC.id),r.loop=!0,r.play(),this.spritePool.debris.push(r),this.debrisContainer.addChild(r)},makeColonel:function(){var e,t,i,s,n;for(this.wheelsBackContainer=new r.DisplayObjectContainer,this.wheelsFrontContainer=new r.DisplayObjectContainer,this.spritePool.wheels=[],n=this.movieClipFromID(this.manifest.WHEEL_MC.id),this.spritePool.wheels.push(n),this.wheelsFrontContainer.addChild(n),n.loop=!0,n.play(),n=this.movieClipFromID(this.manifest.WHEEL_MC.id),this.spritePool.wheels.push(n),this.wheelsFrontContainer.addChild(n),n.loop=!0,n.play(),n=this.movieClipFromID(this.manifest.WHEEL_MC.id),this.spritePool.wheels.push(n),this.wheelsBackContainer.addChild(n),n.loop=!0,n.play(),n=this.movieClipFromID(this.manifest.WHEEL_MC.id),this.spritePool.wheels.push(n),this.wheelsBackContainer.addChild(n),n.loop=!0,n.play(),this.colonelSprite=this.movieClipFromID(this.manifest.PUMP_MC.id),this.colonelSprite.loop=!1,s=[this.manifest.PUMP_MC.id,this.manifest.JUMP_MC.id,this.manifest.PUMP_MC_THROW.id,this.manifest.JUMP_MC_THROW.id,this.manifest.CART_FIRE_MC.id,this.manifest.CART_CHICKEN_MC.id,this.manifest.CART_WIN_MC.id,this.manifest.CART_LOSE_MC.id],e=0,i=s.length;i>e;e++)t=s[e],this.colonelAnimations[t]=this.movieClipFramesFromID(t);this.gameContainer.addChild(this.wheelsBackContainer),this.gameContainer.addChild(this.colonelSprite),this.gameContainer.addChild(this.wheelsFrontContainer)},makeCards:function(){this.spritePool.cards=[],this.cardAnimations={};for(var e=[this.manifest.CARD.id],t=0,i=e.length;i>t;t++){var s=e[t];this.cardAnimations[s]=this.textureFromID(s)}var n,o,r;for(o=this.gameModel.spawnModel.total.cards,n=0;o>n;n++)r=this.spriteFromID(this.manifest.CARD.id),this.spritePool.cards.push(r),this.gameContainer.addChild(r)},makeSurvivors:function(){this.spritePool.survivors=[],this.survivorAnimations={};for(var e=[],t=0,i=8;i>t;t++)e.push(this.manifest["SURVIVOR_FAR_"+t+"_WAVE_MC"].id),e.push(this.manifest["SURVIVOR_FAR_"+t+"_CARDED_MC"].id),e.push(this.manifest["SURVIVOR_MID_"+t+"_WAVE_MC"].id),e.push(this.manifest["SURVIVOR_MID_"+t+"_CARDED_MC"].id),e.push(this.manifest["SURVIVOR_NEAR_"+t+"_WAVE_MC"].id),e.push(this.manifest["SURVIVOR_NEAR_"+t+"_CARDED_MC"].id);for(var s=0,n=e.length;n>s;s++){var o=e[s];this.survivorAnimations[o]=this.movieClipFramesFromID(o)}a.log("this.survivorAnimations",this.survivorAnimations);var r,h,l;for(h=this.gameModel.spawnModel.total.survivors_near,r=0;h>r;r++)l=this.movieClipFromID(this.gameModel.manifest.SURVIVOR_NEAR_0_WAVE_MC.id),l.loop=!0,l.gotoAndPlay(Math.floor(1.999*Math.random())),this.spritePool.survivors_near.push(l),this.survivorContainer_near.addChild(l);for(h=this.gameModel.spawnModel.total.survivors_mid,r=0;h>r;r++)l=this.movieClipFromID(this.gameModel.manifest.SURVIVOR_MID_0_WAVE_MC.id),l.loop=!0,l.gotoAndPlay(Math.floor(1.999*Math.random())),this.spritePool.survivors_mid.push(l),this.survivorContainer_mid.addChild(l);for(h=this.gameModel.spawnModel.total.survivors_far,r=0;h>r;r++)l=this.movieClipFromID(this.gameModel.manifest.SURVIVOR_FAR_0_WAVE_MC.id),l.loop=!0,l.gotoAndPlay(Math.floor(1.999*Math.random())),this.spritePool.survivors_far.push(l),this.survivorContainer_far.addChild(l)},show:function(){this["super"].show.apply(this,arguments)},render:function(){this.gameModel.isAnimating()&&this.updateSprites()},updateParallaxLayers:function(){var e,t,i=this.parallaxLayers.length;for(e=0;i>e;e++)t=this.parallaxLayers[e],t.groundX+=this.gameModel.groundModel.getXIncrementViaGroundY(t.groundY),t.position.x=Math.round(t.groundX%t.groundLoopWidth)},updateWheels:function(){this.wheelsBackContainer.position.x=this.colonelSprite.x,this.wheelsBackContainer.position.y=this.colonelSprite.y,this.wheelsFrontContainer.position.x=this.colonelSprite.x,this.wheelsFrontContainer.position.y=this.colonelSprite.y},updateSprites:function(){var e=this.gameModel.spawnModel;this.updateParallaxLayers(),this.updateSpritesFromModels(this.spritePool.survivors_near,e.pool.survivors_near),this.updateSpritesFromModels(this.spritePool.survivors_mid,e.pool.survivors_mid),this.updateSpritesFromModels(this.spritePool.survivors_far,e.pool.survivors_far),this.updateSpritesFromModels(this.spritePool.wheels,this.gameModel.colonelModel.wheelModels),this.updateMovieClipsFromModels(this.spritePool.survivors_near,this.survivorAnimations,e.pool.survivors_near,!1),this.updateMovieClipsFromModels(this.spritePool.survivors_mid,this.survivorAnimations,e.pool.survivors_mid,!1),this.updateMovieClipsFromModels(this.spritePool.survivors_far,this.survivorAnimations,e.pool.survivors_far,!1),this.updateSpritesFromModels(this.spritePool.debris,e.pool.debris),this.updateMovieClipsFromModels(this.spritePool.debris,this.debrisAnimations,e.pool.debris,!1),this.updateSpritesFromModels(this.spritePool.cards,e.pool.cards),this.updateSpriteFromModel(this.colonelSprite,this.gameModel.colonelModel),this.updateMovieClipFromModel(this.colonelSprite,this.colonelAnimations,this.gameModel.colonelModel,!0),this.updateWheels()},destroy:function(){this.stopListening(),this.off(),this["super"].destroy.apply(this,arguments)},setGameState:function(){}});return h}),define("game/game_base/view/progress_bar",["jquery","underscore","backbone","config","pixi","console"],function(e,t,i,s,n){"use strict";function o(e,i,s,o,r,a){this.progress=0,this.mc=new n.DisplayObjectContainer,this.bgGraphics=new n.Graphics,this.bgGraphics.beginFill(r),this.bgGraphics.drawRect(0,0,e,i),this.mc.addChild(this.bgGraphics),this.barFillBgGraphics=new n.Graphics,this.barFillBgGraphics.beginFill(a),this.barFillBgGraphics.drawRect(s,s,e-2*s,i-2*s),this.mc.addChild(this.barFillBgGraphics),this.barFill=new n.DisplayObjectContainer,this.barFill.x=s,this.barFill.y=s,this.barFill.scale.x=1,this.mc.addChild(this.barFill),this.barFillGraphics=new n.Graphics,this.barFillGraphics.beginFill(o),this.barFillGraphics.drawRect(0,0,e-2*s,i-2*s),this.barFill.addChild(this.barFillGraphics),this.setProgress=function(e){this.progress=e,this.barFill.scale.x=e},t.bindAll(this,"setProgress")}return o}),define("game/games/train/view/train_game_ui_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_ui_view","pixi","console","game/game_base/view/progress_bar","game/games/ui/health/game_health_ui_view"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=o.extend({scoreLabel:null,livesLabel:null,uiFont:{font:"16px frucade"},uiFontDrop:{font:"16px frucade"},initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.makeUI(),t.bindAll(this,"updateReadOuts"),this.gameModel.on(this.gameModel.EVENTS.UI_UPDATE,this.updateReadOuts)},show:function(){this["super"].show.apply(this,arguments)},updateReadOuts:function(){this.scoreLabel.setText(this.gameModel.score+"/"+this.gameModel.survivorsReleased),this.scoreLabelDrop.setText(this.gameModel.score+"/"+this.gameModel.survivorsReleased),this.gameUIHeartView.updateCount(this.gameModel.lives)},makeUI:function(){this.icon=this.gameModel.pixiAssetLibrary.newSprite(this.manifest.UI_SURVIVOR_ICON),this.icon.x=51,this.icon.y=5,this.viewContainer.addChild(this.icon),this.scoreLabelDrop=new r.BitmapText("0/0",this.uiFontDrop),this.scoreLabelDrop.x=78,this.scoreLabelDrop.y=10,this.scoreLabelDrop.tint=14942251,this.viewContainer.addChild(this.scoreLabelDrop),this.scoreLabel=new r.BitmapText("0/0",this.uiFont),this.scoreLabel.x=78,this.scoreLabel.y=9,this.viewContainer.addChild(this.scoreLabel),this.gameUIHeartView=new l({viewContainer:this.viewContainer,gameModel:this.gameModel,x:0,y:7})},render:function(){},destroy:function(){this.stopListening(),this.off()}});return c}),define("game/games/train/view/train_game_screens_view",["jquery","underscore","backbone","model/loader_collection","config","pixi","game/game_base/view/screens/game_screen_instructions","game/game_base/view/screens/game_screen_intro","game/game_base/view/screens/game_screen_lose","game/game_base/view/screens/game_screen_win","game/game_base/view/screens/game_screen_pause","game/game_base/view/screens/game_screen_cutscene","game/game_base/view/screens/game_screen_countdown","game/game_base/view/game_screens_view","shims/shim_resn_utils","game/game_base/view/screens/game_screen_pause_btn"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m){"use strict";
var _=g.extend({initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.createScreens(),this.addEvents()},addEvents:function(){this.listenTo(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE,this.onGameStateChange)},removeEvents:function(){this.stopListening(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE)},onGameStateChange:function(){t.each(this.screens,function(e){e.onGameStateChange()})},createScreens:function(){var e={gameModel:this.gameModel,viewContainer:this.viewContainer,cutsceneMC:{id:"TRAIN_CUTSCENE_MC"}},t=["TRAIN_CUTSCENE_1","TRAIN_CUTSCENE_2"];this.screens=[new r(e),new a(e),new u(e),new h(e),new l(e),new c(e),new m(e),new d(e,t)]},show:function(){this["super"].show.apply(this,arguments)},render:function(){},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}});return _}),define("game/games/train/sprites/train_sheet_1",[],function(){"use strict";return{ns:"train-sheet1",manifest:[{src:"/img/games/train/train-sheet1_0_sheet.png",spritesheet:{ns:"train-sheet1",sprites:[{x:775,y:578,width:10,height:12,id:"card.png",trim:{origWidth:12,origHeight:14,width:10,height:12,offsetX:1,offsetY:1}},{x:0,y:334,width:84,height:64,id:"cart_celebration_1.png",trim:{origWidth:132,origHeight:103,width:84,height:64,offsetX:22,offsetY:36}},{x:170,y:334,width:85,height:61,id:"cart_celebration_2.png",trim:{origWidth:132,origHeight:103,width:85,height:61,offsetX:20,offsetY:39}},{x:86,y:334,width:82,height:64,id:"cart_celebration_3.png",trim:{origWidth:132,origHeight:103,width:82,height:64,offsetX:22,offsetY:36}},{x:257,y:334,width:84,height:61,id:"cart_celebration_4.png",trim:{origWidth:132,origHeight:103,width:84,height:61,offsetX:21,offsetY:39}},{x:0,y:420,width:73,height:58,id:"cart_chicken_1.png",trim:{origWidth:132,origHeight:103,width:73,height:58,offsetX:58,offsetY:38}},{x:481,y:285,width:61,height:64,id:"cart_chicken_2.png",trim:{origWidth:132,origHeight:103,width:61,height:64,offsetX:58,offsetY:32}},{x:481,y:351,width:61,height:61,id:"cart_chicken_3.png",trim:{origWidth:132,origHeight:103,width:61,height:61,offsetX:58,offsetY:35}},{x:444,y:480,width:61,height:58,id:"cart_chicken_4.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:418,y:0,width:61,height:95,id:"cart_chicken_5.png",trim:{origWidth:132,origHeight:103,width:61,height:95,offsetX:58,offsetY:1}},{x:258,y:98,width:90,height:78,id:"cart_chicken_6.png",trim:{origWidth:132,origHeight:103,width:90,height:78,offsetX:29,offsetY:18}},{x:90,y:230,width:118,height:58,id:"cart_chicken_7.png",trim:{origWidth:132,origHeight:103,width:118,height:58,offsetX:1,offsetY:38}},{x:0,y:480,width:64,height:58,id:"cart_cry_1.png",trim:{origWidth:132,origHeight:103,width:64,height:58,offsetX:55,offsetY:38}},{x:549,y:182,width:61,height:56,id:"cart_cry_2.png",trim:{origWidth:132,origHeight:103,width:61,height:56,offsetX:58,offsetY:40}},{x:120,y:554,width:61,height:51,id:"cart_cry_3.png",trim:{origWidth:132,origHeight:103,width:61,height:51,offsetX:58,offsetY:45}},{x:381,y:480,width:61,height:58,id:"cart_fire_1.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:318,y:480,width:61,height:58,id:"cart_fire_2.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:418,y:232,width:61,height:58,id:"cart_fire_3.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:549,y:0,width:61,height:58,id:"cart_fire_4.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:418,y:172,width:61,height:58,id:"cart_fire_5.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:418,y:334,width:61,height:58,id:"cart_fire_6.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:255,y:480,width:61,height:58,id:"cart_fire_7.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:192,y:480,width:61,height:58,id:"cart_fire_8.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:374,y:420,width:72,height:51,id:"cart_jump_1.png",trim:{origWidth:132,origHeight:103,width:72,height:51,offsetX:45,offsetY:52}},{x:300,y:420,width:72,height:53,id:"cart_jump_1_throw.png",trim:{origWidth:132,origHeight:103,width:72,height:53,offsetX:45,offsetY:50}},{x:75,y:420,width:73,height:58,id:"cart_jump_2.png",trim:{origWidth:132,origHeight:103,width:73,height:58,offsetX:44,offsetY:45}},{x:343,y:334,width:73,height:58,id:"cart_jump_2_throw.png",trim:{origWidth:132,origHeight:103,width:73,height:58,offsetX:44,offsetY:45}},{x:448,y:420,width:72,height:50,id:"cart_jump_3.png",trim:{origWidth:132,origHeight:103,width:72,height:50,offsetX:44,offsetY:53}},{x:321,y:230,width:72,height:52,id:"cart_jump_3_throw.png",trim:{origWidth:132,origHeight:103,width:72,height:52,offsetX:44,offsetY:51}},{x:150,y:420,width:73,height:54,id:"cart_jump_4.png",trim:{origWidth:132,origHeight:103,width:73,height:54,offsetX:46,offsetY:42}},{x:225,y:420,width:73,height:54,id:"cart_jump_4_throw.png",trim:{origWidth:132,origHeight:103,width:73,height:54,offsetX:46,offsetY:42}},{x:481,y:140,width:66,height:68,id:"cart_jump_5.png",trim:{origWidth:132,origHeight:103,width:66,height:68,offsetX:47,offsetY:28}},{x:481,y:70,width:66,height:68,id:"cart_jump_5_throw.png",trim:{origWidth:132,origHeight:103,width:66,height:68,offsetX:47,offsetY:28}},{x:418,y:97,width:52,height:73,id:"cart_jump_6.png",trim:{origWidth:132,origHeight:103,width:52,height:73,offsetX:55,offsetY:30}},{x:481,y:210,width:54,height:73,id:"cart_jump_6_throw.png",trim:{origWidth:132,origHeight:103,width:54,height:73,offsetX:55,offsetY:30}},{x:481,y:0,width:66,height:68,id:"cart_jump_7.png",trim:{origWidth:132,origHeight:103,width:66,height:68,offsetX:47,offsetY:30}},{x:350,y:98,width:66,height:68,id:"cart_jump_7_throw.png",trim:{origWidth:132,origHeight:103,width:66,height:68,offsetX:47,offsetY:30}},{x:549,y:60,width:61,height:57,id:"cart_pump_down.png",trim:{origWidth:132,origHeight:103,width:61,height:57,offsetX:58,offsetY:39}},{x:66,y:480,width:61,height:58,id:"cart_pump_mid.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:129,y:480,width:61,height:58,id:"cart_pump_mid_throw.png",trim:{origWidth:132,origHeight:103,width:61,height:58,offsetX:58,offsetY:38}},{x:549,y:119,width:57,height:61,id:"cart_pump_up.png",trim:{origWidth:132,origHeight:103,width:57,height:61,offsetX:62,offsetY:35}},{x:0,y:540,width:248,height:12,id:"clods_far.png",trim:{origWidth:256,origHeight:14,width:248,height:13,offsetX:0,offsetY:0}},{x:250,y:540,width:243,height:12,id:"clods_near.png",trim:{origWidth:256,origHeight:14,width:246,height:13,offsetX:0,offsetY:0}},{x:549,y:501,width:55,height:37,id:"debris_0.png",trim:{origWidth:57,origHeight:46,width:55,height:37,offsetX:1,offsetY:8}},{x:240,y:554,width:55,height:42,id:"debris_1.png",trim:{origWidth:57,origHeight:46,width:55,height:42,offsetX:1,offsetY:3}},{x:183,y:554,width:55,height:45,id:"debris_2.png",trim:{origWidth:57,origHeight:46,width:55,height:45,offsetX:1,offsetY:0}},{x:418,y:292,width:55,height:37,id:"debris_3.png",trim:{origWidth:57,origHeight:46,width:55,height:37,offsetX:1,offsetY:8}},{x:354,y:554,width:55,height:41,id:"debris_4.png",trim:{origWidth:57,origHeight:46,width:55,height:41,offsetX:1,offsetY:4}},{x:612,y:568,width:56,height:37,id:"debris_5.png",trim:{origWidth:57,origHeight:46,width:56,height:37,offsetX:0,offsetY:8}},{x:297,y:554,width:55,height:41,id:"debris_6.png",trim:{origWidth:57,origHeight:46,width:55,height:41,offsetX:1,offsetY:4}},{x:528,y:554,width:37,height:37,id:"debris_bag_0.png",trim:{origWidth:57,origHeight:47,width:37,height:37,offsetX:7,offsetY:9}},{x:244,y:626,width:37,height:36,id:"debris_bag_1.png",trim:{origWidth:57,origHeight:47,width:37,height:36,offsetX:7,offsetY:9}},{x:411,y:554,width:37,height:41,id:"debris_bag_2.png",trim:{origWidth:57,origHeight:47,width:37,height:41,offsetX:7,offsetY:5}},{x:489,y:554,width:37,height:37,id:"debris_bag_3.png",trim:{origWidth:57,origHeight:47,width:37,height:37,offsetX:7,offsetY:9}},{x:450,y:554,width:37,height:41,id:"debris_bag_4.png",trim:{origWidth:57,origHeight:47,width:37,height:41,offsetX:7,offsetY:5}},{x:567,y:554,width:37,height:37,id:"debris_bag_5.png",trim:{origWidth:57,origHeight:47,width:37,height:37,offsetX:7,offsetY:9}},{x:78,y:667,width:37,height:45,id:"debris_bag_6.png",trim:{origWidth:57,origHeight:47,width:37,height:45,offsetX:7,offsetY:1}},{x:117,y:667,width:37,height:42,id:"debris_bag_7.png",trim:{origWidth:57,origHeight:47,width:37,height:42,offsetX:7,offsetY:4}},{x:707,y:636,width:33,height:28,id:"debris_chicken_0.png",trim:{origWidth:57,origHeight:47,width:33,height:28,offsetX:12,offsetY:17}},{x:394,y:626,width:38,height:21,id:"debris_chicken_1.png",trim:{origWidth:57,origHeight:47,width:38,height:21,offsetX:7,offsetY:24}},{x:434,y:626,width:37,height:21,id:"debris_chicken_2.png",trim:{origWidth:57,origHeight:47,width:37,height:21,offsetX:8,offsetY:24}},{x:0,y:230,width:88,height:102,id:"debris_smash_0.png",trim:{origWidth:256,origHeight:192,width:88,height:102,offsetX:37,offsetY:41}},{x:258,y:0,width:158,height:96,id:"debris_smash_1.png",trim:{origWidth:256,origHeight:192,width:158,height:96,offsetX:82,offsetY:13}},{x:210,y:230,width:109,height:52,id:"debris_smash_2.png",trim:{origWidth:256,origHeight:192,width:109,height:52,offsetX:139,offsetY:13}},{x:258,y:178,width:37,height:9,id:"debris_smash_3.png",trim:{origWidth:256,origHeight:192,width:37,height:9,offsetX:208,offsetY:14}},{x:244,y:619,width:254,height:5,id:"fence_far.png",trim:{origWidth:256,origHeight:5,width:254,height:5,offsetX:0,offsetY:0}},{x:90,y:290,width:256,height:19,id:"fence_near.png",trim:{origWidth:256,origHeight:19,width:256,height:19,offsetX:0,offsetY:0}},{x:0,y:400,width:256,height:18,id:"grass_edge.png",trim:{origWidth:256,origHeight:18,width:256,height:18,offsetX:0,offsetY:0}},{x:0,y:194,width:300,height:34,id:"hills.png",trim:{origWidth:300,origHeight:34,width:300,height:34,offsetX:0,offsetY:0}},{x:775,y:243,width:14,height:24,id:"passenger1_far_carded.png",trim:{origWidth:25,origHeight:32,width:14,height:24,offsetX:2,offsetY:7}},{x:44,y:749,width:20,height:25,id:"passenger1_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:20,height:25,offsetX:2,offsetY:6}},{x:129,y:723,width:23,height:24,id:"passenger1_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:23,height:24,offsetX:1,offsetY:7}},{x:743,y:434,width:22,height:34,id:"passenger1_mid_carded.png",trim:{origWidth:34,origHeight:39,width:22,height:34,offsetX:2,offsetY:4}},{x:743,y:35,width:28,height:35,id:"passenger1_mid_wave_0.png",trim:{origWidth:34,origHeight:39,width:28,height:35,offsetX:3,offsetY:3}},{x:672,y:588,width:32,height:34,id:"passenger1_mid_wave_1.png",trim:{origWidth:34,origHeight:39,width:32,height:34,offsetX:1,offsetY:4}},{x:0,y:667,width:37,height:54,id:"passenger1_near_carded.png",trim:{origWidth:60,origHeight:60,width:37,height:54,offsetX:0,offsetY:5}},{x:612,y:454,width:50,height:55,id:"passenger1_near_wave_0.png",trim:{origWidth:60,origHeight:60,width:50,height:55,offsetX:2,offsetY:4}},{x:549,y:445,width:58,height:54,id:"passenger1_near_wave_1.png",trim:{origWidth:60,origHeight:60,width:58,height:54,offsetX:0,offsetY:5}},{x:775,y:217,width:14,height:24,id:"passenger2_far_carded.png",trim:{origWidth:25,origHeight:32,width:14,height:24,offsetX:2,offsetY:7}},{x:110,y:749,width:20,height:25,id:"passenger2_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:20,height:25,offsetX:2,offsetY:6}},{x:0,y:723,width:24,height:24,id:"passenger2_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:24,height:24,offsetX:1,offsetY:7}},{x:743,y:682,width:21,height:33,id:"passenger2_mid_carded.png",trim:{origWidth:34,origHeight:39,width:21,height:33,offsetX:1,offsetY:5}},{x:743,y:255,width:28,height:34,id:"passenger2_mid_wave_0.png",trim:{origWidth:34,origHeight:39,width:28,height:34,offsetX:3,offsetY:4}},{x:743,y:0,width:30,height:33,id:"passenger2_mid_wave_1.png",trim:{origWidth:34,origHeight:39,width:30,height:33,offsetX:1,offsetY:5}},{x:672,y:71,width:32,height:52,id:"passenger2_near_carded.png",trim:{origWidth:60,origHeight:60,width:32,height:52,offsetX:6,offsetY:7}},{x:48,y:610,width:47,height:53,id:"passenger2_near_wave_0.png",trim:{origWidth:60,origHeight:60,width:47,height:53,offsetX:6,offsetY:6}},{x:612,y:54,width:58,height:52,id:"passenger2_near_wave_1.png",trim:{origWidth:60,origHeight:60,width:58,height:52,offsetX:0,offsetY:7}},{x:775,y:61,width:16,height:24,id:"passenger3_far_carded.png",trim:{origWidth:25,origHeight:32,width:16,height:24,offsetX:2,offsetY:7}},{x:88,y:749,width:20,height:25,id:"passenger3_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:20,height:25,offsetX:2,offsetY:6}},{x:26,y:723,width:24,height:24,id:"passenger3_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:24,height:24,offsetX:0,offsetY:7}},{x:743,y:506,width:21,height:34,id:"passenger3_mid_carded.png",trim:{origWidth:34,origHeight:39,width:21,height:34,offsetX:2,offsetY:4}},{x:743,y:72,width:28,height:35,id:"passenger3_mid_wave_0.png",trim:{origWidth:34,origHeight:39,width:28,height:35,offsetX:3,offsetY:3}},{x:672,y:624,width:31,height:34,id:"passenger3_mid_wave_1.png",trim:{origWidth:34,origHeight:39,width:31,height:34,offsetX:1,offsetY:4}},{x:707,y:458,width:33,height:54,id:"passenger3_near_carded.png",trim:{origWidth:60,origHeight:60,width:33,height:54,offsetX:5,offsetY:5}},{x:612,y:511,width:46,height:55,id:"passenger3_near_wave_0.png",trim:{origWidth:60,origHeight:60,width:46,height:55,offsetX:6,offsetY:4}},{x:549,y:389,width:58,height:54,id:"passenger3_near_wave_1.png",trim:{origWidth:60,origHeight:60,width:58,height:54,offsetX:1,offsetY:5}},{x:775,y:139,width:15,height:24,id:"passenger4_far_carded.png",trim:{origWidth:25,origHeight:32,width:15,height:24,offsetX:1,offsetY:7}},{x:154,y:749,width:20,height:25,id:"passenger4_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:20,height:25,offsetX:2,offsetY:6}},{x:178,y:723,width:22,height:24,id:"passenger4_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:22,height:24,offsetX:1,offsetY:7}},{x:743,y:577,width:21,height:33,id:"passenger4_mid_carded.png",trim:{origWidth:34,origHeight:39,width:21,height:33,offsetX:2,offsetY:5}},{x:743,y:183,width:28,height:34,id:"passenger4_mid_wave_0.png",trim:{origWidth:34,origHeight:39,width:28,height:34,offsetX:3,offsetY:4}},{x:338,y:194,width:31,height:33,id:"passenger4_mid_wave_1.png",trim:{origWidth:34,origHeight:39,width:31,height:33,offsetX:1,offsetY:5}},{x:672,y:241,width:30,height:52,id:"passenger4_near_carded.png",trim:{origWidth:60,origHeight:60,width:30,height:52,offsetX:6,offsetY:7}},{x:195,y:610,width:47,height:53,id:"passenger4_near_wave_0.png",trim:{origWidth:60,origHeight:60,width:47,height:53,offsetX:6,offsetY:6}},{x:612,y:108,width:58,height:52,id:"passenger4_near_wave_1.png",trim:{origWidth:60,origHeight:60,width:58,height:52,offsetX:0,offsetY:7}},{x:775,y:113,width:15,height:24,id:"passenger5_far_carded.png",trim:{origWidth:25,origHeight:32,width:15,height:24,offsetX:1,offsetY:7}},{x:0,y:749,width:20,height:25,id:"passenger5_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:20,height:25,offsetX:2,offsetY:6}},{x:154,y:723,width:22,height:24,id:"passenger5_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:22,height:24,offsetX:1,offsetY:7}},{x:743,y:612,width:21,height:33,id:"passenger5_mid_carded.png",trim:{origWidth:34,origHeight:39,width:21,height:33,offsetX:2,offsetY:5}},{x:743,y:291,width:28,height:34,id:"passenger5_mid_wave_0.png",trim:{origWidth:34,origHeight:39,width:28,height:34,offsetX:3,offsetY:4}},{x:283,y:626,width:31,height:33,id:"passenger5_mid_wave_1.png",trim:{origWidth:34,origHeight:39,width:31,height:33,offsetX:1,offsetY:5}},{x:707,y:402,width:33,height:54,id:"passenger5_near_carded.png",trim:{origWidth:60,origHeight:60,width:33,height:54,offsetX:5,offsetY:5}},{x:0,y:610,width:46,height:55,id:"passenger5_near_wave_0.png",trim:{origWidth:60,origHeight:60,width:46,height:55,offsetX:6,offsetY:4}},{x:60,y:554,width:58,height:54,id:"passenger5_near_wave_1.png",trim:{origWidth:60,origHeight:60,width:58,height:54,offsetX:1,offsetY:5}},{x:775,y:87,width:16,height:24,id:"passenger6_far_carded.png",trim:{origWidth:25,origHeight:32,width:16,height:24,offsetX:2,offsetY:7}},{x:132,y:749,width:20,height:25,id:"passenger6_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:20,height:25,offsetX:2,offsetY:6}},{x:78,y:723,width:24,height:24,id:"passenger6_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:24,height:24,offsetX:0,offsetY:7}},{x:743,y:647,width:21,height:33,id:"passenger6_mid_carded.png",trim:{origWidth:34,origHeight:39,width:21,height:33,offsetX:1,offsetY:5}},{x:743,y:219,width:28,height:34,id:"passenger6_mid_wave_0.png",trim:{origWidth:34,origHeight:39,width:28,height:34,offsetX:3,offsetY:4}},{x:371,y:194,width:31,height:33,id:"passenger6_mid_wave_1.png",trim:{origWidth:34,origHeight:39,width:31,height:33,offsetX:0,offsetY:5}},{x:672,y:187,width:30,height:52,id:"passenger6_near_carded.png",trim:{origWidth:60,origHeight:60,width:30,height:52,offsetX:6,offsetY:7}},{x:146,y:610,width:47,height:53,id:"passenger6_near_wave_0.png",trim:{origWidth:60,origHeight:60,width:47,height:53,offsetX:6,offsetY:6}},{x:612,y:0,width:58,height:52,id:"passenger6_near_wave_1.png",trim:{origWidth:60,origHeight:60,width:58,height:52,offsetX:0,offsetY:7}},{x:775,y:165,width:14,height:24,id:"passenger7_far_carded.png",trim:{origWidth:25,origHeight:32,width:14,height:24,offsetX:2,offsetY:7}},{x:66,y:749,width:20,height:25,id:"passenger7_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:20,height:25,offsetX:2,offsetY:6}},{x:52,y:723,width:24,height:24,id:"passenger7_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:24,height:24,offsetX:1,offsetY:7}},{x:743,y:398,width:22,height:34,id:"passenger7_mid_carded.png",trim:{origWidth:34,origHeight:39,width:22,height:34,offsetX:2,offsetY:4}},{x:743,y:109,width:28,height:35,id:"passenger7_mid_wave_0.png",trim:{origWidth:34,origHeight:39,width:28,height:35,offsetX:3,offsetY:3}},{x:302,y:194,width:34,height:34,id:"passenger7_mid_wave_1.png",trim:{origWidth:34,origHeight:39,width:34,height:34,offsetX:0,offsetY:4}},{x:707,y:582,width:32,height:52,id:"passenger7_near_carded.png",trim:{origWidth:60,origHeight:60,width:32,height:52,offsetX:6,offsetY:7}},{x:97,y:610,width:47,height:53,id:"passenger7_near_wave_0.png",trim:{origWidth:60,origHeight:60,width:47,height:53,offsetX:6,offsetY:6}},{x:612,y:162,width:58,height:52,id:"passenger7_near_wave_1.png",trim:{origWidth:60,origHeight:60,width:58,height:52,offsetX:0,offsetY:7}},{x:775,y:191,width:14,height:24,id:"passenger8_far_carded.png",trim:{origWidth:25,origHeight:32,width:14,height:24,offsetX:2,offsetY:7}},{x:22,y:749,width:20,height:25,id:"passenger8_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:20,height:25,offsetX:2,offsetY:6}},{x:104,y:723,width:23,height:24,id:"passenger8_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:23,height:24,offsetX:1,offsetY:7}},{x:743,y:470,width:21,height:34,id:"passenger8_mid_carded.png",trim:{origWidth:34,origHeight:39,width:21,height:34,offsetX:2,offsetY:4}},{x:743,y:146,width:28,height:35,id:"passenger8_mid_wave_0.png",trim:{origWidth:34,origHeight:39,width:28,height:35,offsetX:3,offsetY:3}},{x:672,y:552,width:32,height:34,id:"passenger8_mid_wave_1.png",trim:{origWidth:34,origHeight:39,width:32,height:34,offsetX:0,offsetY:4}},{x:39,y:667,width:37,height:54,id:"passenger8_near_carded.png",trim:{origWidth:60,origHeight:60,width:37,height:54,offsetX:0,offsetY:5}},{x:612,y:283,width:52,height:55,id:"passenger8_near_wave_0.png",trim:{origWidth:60,origHeight:60,width:52,height:55,offsetX:0,offsetY:4}},{x:0,y:554,width:58,height:54,id:"passenger8_near_wave_1.png",trim:{origWidth:60,origHeight:60,width:58,height:54,offsetX:0,offsetY:5}},{x:792,y:113,width:1,height:1,id:"pause_topright.png",trim:{origWidth:26,origHeight:25,width:13,height:11,offsetX:0,offsetY:0}},{x:395,y:230,width:21,height:28,id:"survivor_far_carded.png",trim:{origWidth:24,origHeight:31,width:22,height:29,offsetX:0,offsetY:0}},{x:522,y:420,width:22,height:27,id:"survivor_far_wave_0.png",trim:{origWidth:25,origHeight:32,width:23,height:29,offsetX:0,offsetY:0}},{x:775,y:0,width:18,height:29,id:"survivor_far_wave_1.png",trim:{origWidth:25,origHeight:32,width:20,height:30,offsetX:0,offsetY:0}},{x:775,y:31,width:17,height:28,id:"survivor_far_waving.png",trim:{origWidth:24,origHeight:31,width:20,height:29,offsetX:0,offsetY:0}},{x:743,y:363,width:25,height:33,id:"survivor_mid_carded.png",trim:{origWidth:27,origHeight:36,width:26,height:34,offsetX:0,offsetY:0}},{x:156,y:667,width:31,height:32,id:"survivor_mid_wave_0.png",trim:{origWidth:34,origHeight:37,width:32,height:34,offsetX:0,offsetY:0}},{x:743,y:327,width:25,height:34,id:"survivor_mid_wave_1.png",trim:{origWidth:34,origHeight:37,width:28,height:35,offsetX:0,offsetY:0}},{x:743,y:542,width:21,height:33,id:"survivor_mid_waving.png",trim:{origWidth:27,origHeight:36,width:24,height:34,offsetX:0,offsetY:0}},{x:672,y:295,width:28,height:55,id:"survivor_near_carded.png",trim:{origWidth:34,origHeight:58,width:29,height:56,offsetX:0,offsetY:0}},{x:612,y:340,width:57,height:50,id:"survivor_near_wave_0.png",trim:{origWidth:60,origHeight:56,width:58,height:53,offsetX:0,offsetY:0}},{x:507,y:480,width:39,height:54,id:"survivor_near_wave_1.png",trim:{origWidth:60,origHeight:57,width:46,height:55,offsetX:0,offsetY:0}},{x:672,y:398,width:28,height:49,id:"survivor_near_waving.png",trim:{origWidth:34,origHeight:58,width:29,height:53,offsetX:0,offsetY:0}},{x:90,y:311,width:256,height:18,id:"track_back.png",trim:{origWidth:256,origHeight:20,width:256,height:18,offsetX:0,offsetY:1}},{x:244,y:610,width:256,height:7,id:"track_front.png",trim:{origWidth:256,origHeight:9,width:256,height:7,offsetX:0,offsetY:1}},{x:0,y:0,width:256,height:192,id:"train_bg.png",trim:{origWidth:256,origHeight:192,width:256,height:192,offsetX:0,offsetY:0}},{x:775,y:592,width:7,height:10,id:"train_bg_obj_0.png",trim:{origWidth:39,origHeight:29,width:7,height:10,offsetX:1,offsetY:18}},{x:775,y:566,width:14,height:10,id:"train_bg_obj_1.png",trim:{origWidth:39,origHeight:29,width:14,height:10,offsetX:1,offsetY:18}},{x:775,y:395,width:12,height:25,id:"train_bg_obj_10.png",trim:{origWidth:39,origHeight:29,width:12,height:25,offsetX:1,offsetY:3}},{x:355,y:626,width:37,height:22,id:"train_bg_obj_11.png",trim:{origWidth:39,origHeight:29,width:37,height:22,offsetX:1,offsetY:6}},{x:316,y:626,width:37,height:27,id:"train_bg_obj_12.png",trim:{origWidth:39,origHeight:29,width:37,height:27,offsetX:1,offsetY:1}},{x:189,y:667,width:29,height:22,id:"train_bg_obj_13.png",trim:{origWidth:39,origHeight:29,width:29,height:22,offsetX:1,offsetY:6}},{x:775,y:422,width:10,height:25,id:"train_bg_obj_2.png",trim:{origWidth:39,origHeight:29,width:10,height:25,offsetX:1,offsetY:3}},{x:775,y:503,width:10,height:25,id:"train_bg_obj_3.png",trim:{origWidth:39,origHeight:29,width:10,height:25,offsetX:1,offsetY:3}},{x:775,y:476,width:10,height:25,id:"train_bg_obj_4.png",trim:{origWidth:39,origHeight:29,width:10,height:25,offsetX:1,offsetY:3}},{x:775,y:449,width:10,height:25,id:"train_bg_obj_5.png",trim:{origWidth:39,origHeight:29,width:10,height:25,offsetX:1,offsetY:3}},{x:775,y:316,width:13,height:24,id:"train_bg_obj_6.png",trim:{origWidth:39,origHeight:29,width:13,height:24,offsetX:1,offsetY:4}},{x:775,y:342,width:13,height:24,id:"train_bg_obj_7.png",trim:{origWidth:39,origHeight:29,width:13,height:24,offsetX:1,offsetY:4}},{x:775,y:290,width:13,height:24,id:"train_bg_obj_8.png",trim:{origWidth:39,origHeight:29,width:13,height:24,offsetX:1,offsetY:4}},{x:775,y:368,width:12,height:25,id:"train_bg_obj_9.png",trim:{origWidth:39,origHeight:29,width:12,height:25,offsetX:1,offsetY:3}},{x:775,y:269,width:17,height:19,id:"train_survivor_icon.png",trim:{origWidth:26,origHeight:25,width:17,height:19,offsetX:5,offsetY:3}},{x:775,y:530,width:14,height:16,id:"wheel_0.png",trim:{origWidth:17,origHeight:19,width:15,height:17,offsetX:0,offsetY:0}},{x:775,y:548,width:14,height:16,id:"wheel_1.png",trim:{origWidth:17,origHeight:19,width:15,height:17,offsetX:0,offsetY:0}},{x:672,y:506,width:30,height:44,id:"wreck1_1.png",trim:{origWidth:34,origHeight:69,width:30,height:44,offsetX:0,offsetY:25}},{x:707,y:68,width:34,height:66,id:"wreck1_2.png",trim:{origWidth:34,origHeight:69,width:34,height:66,offsetX:0,offsetY:3}},{x:707,y:207,width:33,height:60,id:"wreck1_3.png",trim:{origWidth:34,origHeight:69,width:33,height:60,offsetX:0,offsetY:9}},{x:672,y:0,width:33,height:69,id:"wreck1_4.png",trim:{origWidth:34,origHeight:69,width:33,height:69,offsetX:0,offsetY:0}},{x:672,y:352,width:32,height:44,id:"wreck2_1.png",trim:{origWidth:34,origHeight:69,width:32,height:44,offsetX:2,offsetY:25}},{x:707,y:0,width:34,height:66,id:"wreck2_2.png",trim:{origWidth:34,origHeight:69,width:34,height:66,offsetX:0,offsetY:3}},{x:707,y:269,width:32,height:60,id:"wreck2_3.png",trim:{origWidth:34,origHeight:69,width:32,height:60,offsetX:2,offsetY:9}},{x:707,y:136,width:32,height:69,id:"wreck2_4.png",trim:{origWidth:34,origHeight:69,width:32,height:69,offsetX:2,offsetY:0}},{x:672,y:449,width:24,height:55,id:"wreck3_1.png",trim:{origWidth:28,origHeight:69,width:24,height:55,offsetX:2,offsetY:14}},{x:707,y:514,width:26,height:66,id:"wreck3_2.png",trim:{origWidth:28,origHeight:69,width:26,height:66,offsetX:2,offsetY:3}},{x:672,y:125,width:26,height:60,id:"wreck3_3.png",trim:{origWidth:28,origHeight:69,width:26,height:60,offsetX:0,offsetY:9}},{x:707,y:331,width:26,height:69,id:"wreck3_4.png",trim:{origWidth:28,origHeight:69,width:26,height:69,offsetX:1,offsetY:0}},{x:549,y:316,width:46,height:71,id:"wreck4_1.png",trim:{origWidth:46,origHeight:74,width:46,height:71,offsetX:0,offsetY:3}},{x:612,y:392,width:46,height:60,id:"wreck4_2.png",trim:{origWidth:46,origHeight:74,width:46,height:60,offsetX:0,offsetY:14}},{x:612,y:216,width:45,height:65,id:"wreck4_3.png",trim:{origWidth:46,origHeight:74,width:45,height:65,offsetX:1,offsetY:9}},{x:549,y:240,width:45,height:74,id:"wreck4_4.png",trim:{origWidth:46,origHeight:74,width:45,height:74,offsetX:1,offsetY:0}}]},width:793,height:774}]}}),define("game/games/train/model/train_asset_manifest",["underscore","game/games/train/sprites/train_sheet_1","game/sprites/game_screen_assets"],function(e,t,i){var s=e.flatten([t.manifest],!0);e.each(s,function(e){e.spritesheet&&(e.pixijs=e.spritesheet)});var n=[{src:"/font/frucade.xml",id:"font/frucade.xml",type:"xml",pixijs:{font:{name:"frucade",bitmap:"font/frucade.png"}}},{id:"AUDIO_MUSIC",priority:1,type:"sound",volume:1,src:"/audio/games/train/biz_cards_music.mp3"},{id:"AUDIO_JIGGER",type:"sound",volume:1,src:"/audio/games/train/biz_cards_jigger_loop.mp3"},{id:"AUDIO_JUMP",type:"sound",volume:1,src:"/audio/games/train/biz_cards_jump.mp3"},{id:"AUDIO_MISS",type:"sound",volume:1,src:"/audio/games/train/biz_cards_miss.mp3"},{id:"AUDIO_THROW",type:"sound",volume:1,src:"/audio/games/train/biz_cards_throw.mp3"},{id:"AUDIO_CATCH",type:"sound",volume:1,src:"/audio/games/train/biz_cards_catch.mp3"},{id:"AUDIO_CRASH",type:"sound",volume:1,src:"/audio/games/train/biz_cards_playerhit.mp3"}];n=n.concat(s);var o={slkscrb:{id:"slkscrb",type:"FONT",url:"font/slkscrb.fnt"},frucade:{id:"frucade",type:"FONT",url:"font/frucade.xml"},UI_HEART_X:{id:"UI_HEART_X",type:"SPRITE",url:"ui_health_X.png",ns:i.ns},UI_HEART_0:{id:"UI_HEART_0",type:"SPRITE",url:"ui_health_0.png",ns:i.ns},UI_HEART_1:{id:"UI_HEART_1",type:"SPRITE",url:"ui_health_1.png",ns:i.ns},UI_HEART_2:{id:"UI_HEART_2",type:"SPRITE",url:"ui_health_2.png",ns:i.ns},UI_HEART_3:{id:"UI_HEART_3",type:"SPRITE",url:"ui_health_3.png",ns:i.ns},UI_HEART_ICON_BG:{id:"UI_HEART_ICON_BG",type:"SPRITE",url:"ui_health_heart_bg.png",ns:i.ns},UI_HEART_ICON:{id:"UI_HEART_ICON",type:"SPRITE",url:"ui_health_heart.png",ns:i.ns},UI_HEART_POLE:{id:"UI_HEART_POLE",type:"SPRITE",url:"ui_health_pole.png",ns:i.ns},UI_HEART_BG:{id:"UI_HEART_BG",type:"SPRITE",url:"ui_health_bg.png",ns:i.ns},UI_SURVIVOR_ICON:{id:"UI_SURVIVOR_ICON",type:"SPRITE",url:"train_survivor_icon.png"},CARD:{id:"CARD",type:"SPRITE",url:"card.png"},PARALLAX_TRACK_FRONT:{id:"PARALLAX_TRACK_FRONT",type:"SPRITE",url:"track_front.png"},PARALLAX_TRACK_BACK:{id:"PARALLAX_TRACK_BACK",type:"SPRITE",url:"track_back.png"},PARALLAX_GRASS_EDGE:{id:"PARALLAX_GRASS_EDGE",type:"SPRITE",url:"grass_edge.png"},PARALLAX_CLODS_NEAR:{id:"PARALLAX_CLODS_NEAR",type:"SPRITE",url:"clods_near.png"},PARALLAX_CLODS_FAR:{id:"PARALLAX_CLODS_FAR",type:"SPRITE",url:"clods_far.png"},PARALLAX_HILLS:{id:"PARALLAX_HILLS",type:"SPRITE",url:"hills.png"},PARALLAX_BG_OBJ_0:{id:"PARALLAX_BG_OBJ_0",type:"SPRITE",url:"train_bg_obj_0.png"},PARALLAX_BG_OBJ_1:{id:"PARALLAX_BG_OBJ_1",type:"SPRITE",url:"train_bg_obj_1.png"},PARALLAX_BG_OBJ_2:{id:"PARALLAX_BG_OBJ_2",type:"SPRITE",url:"train_bg_obj_2.png"},PARALLAX_BG_OBJ_3:{id:"PARALLAX_BG_OBJ_3",type:"SPRITE",url:"train_bg_obj_3.png"},PARALLAX_BG_OBJ_4:{id:"PARALLAX_BG_OBJ_4",type:"SPRITE",url:"train_bg_obj_4.png"},PARALLAX_BG_OBJ_5:{id:"PARALLAX_BG_OBJ_5",type:"SPRITE",url:"train_bg_obj_5.png"},PARALLAX_BG_OBJ_6:{id:"PARALLAX_BG_OBJ_6",type:"SPRITE",url:"train_bg_obj_6.png"},PARALLAX_BG_OBJ_7:{id:"PARALLAX_BG_OBJ_7",type:"SPRITE",url:"train_bg_obj_7.png"},PARALLAX_BG_OBJ_8:{id:"PARALLAX_BG_OBJ_8",type:"SPRITE",url:"train_bg_obj_8.png"},PARALLAX_BG_OBJ_9:{id:"PARALLAX_BG_OBJ_9",type:"SPRITE",url:"train_bg_obj_9.png"},PARALLAX_BG_OBJ_10:{id:"PARALLAX_BG_OBJ_10",type:"SPRITE",url:"train_bg_obj_10.png"},PARALLAX_BG_OBJ_11:{id:"PARALLAX_BG_OBJ_11",type:"SPRITE",url:"train_bg_obj_11.png"},PARALLAX_BG_OBJ_12:{id:"PARALLAX_BG_OBJ_12",type:"SPRITE",url:"train_bg_obj_12.png"},PARALLAX_BG_OBJ_13:{id:"PARALLAX_BG_OBJ_13",type:"SPRITE",url:"train_bg_obj_13.png"},PARALLAX_WRECK_1:{id:"PARALLAX_WRECK_1",type:"SPRITE",url:"wreck1_1.png"},PARALLAX_FENCE_NEAR:{id:"PARALLAX_FENCE_NEAR",type:"SPRITE",url:"fence_near.png"},PARALLAX_FENCE_FAR:{id:"PARALLAX_FENCE_FAR",type:"SPRITE",url:"fence_far.png"},BACKGROUND:{id:"BACKGROUND",type:"SPRITE",url:"train_bg.png"},DEBRIS_WOOD_FIRE_MC:{id:"DEBRIS_WOOD_FIRE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["debris_0.png","debris_1.png","debris_2.png","debris_3.png","debris_4.png","debris_5.png"]},DEBRIS_BAG_FIRE_MC:{id:"DEBRIS_BAG_FIRE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["debris_bag_0.png","debris_bag_1.png","debris_bag_2.png","debris_bag_3.png","debris_bag_4.png","debris_bag_5.png"]},DEBRIS_CHICKEN_FIRE_MC:{id:"DEBRIS_CHICKEN_FIRE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["debris_chicken_0.png","debris_chicken_0.png","debris_chicken_1.png","debris_chicken_2.png","debris_chicken_1.png","debris_chicken_0.png","debris_chicken_0.png","debris_chicken_0.png","debris_chicken_0.png","debris_chicken_1.png","debris_chicken_2.png","debris_chicken_1.png"]},WRECK_1_MC:{id:"WRECK_1_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["wreck1_1.png","wreck1_2.png","wreck1_3.png","wreck1_4.png"]},WRECK_2_MC:{id:"WRECK_2_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["wreck2_1.png","wreck2_2.png","wreck2_3.png","wreck2_4.png"]},WRECK_3_MC:{id:"WRECK_3_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["wreck3_1.png","wreck3_2.png","wreck3_3.png","wreck3_4.png"]},WRECK_4_MC:{id:"WRECK_4_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["wreck4_1.png","wreck4_2.png","wreck4_3.png","wreck4_4.png"]},WHEEL_MC:{id:"WHEEL_MC",type:"MOVIECLIP",speedRatio:.25,frameNames:["wheel_0.png","wheel_1.png"]},JUMP_MC:{id:"JUMP_MC",type:"MOVIECLIP",speedRatio:.25,frameNames:["cart_pump_mid.png","cart_jump_1.png","cart_jump_2.png","cart_jump_3.png","cart_jump_4.png","cart_jump_5.png","cart_jump_6.png","cart_jump_7.png"]},JUMP_MC_THROW:{id:"JUMP_MC_THROW",type:"MOVIECLIP",speedRatio:.25,frameNames:["cart_pump_mid_throw.png","cart_jump_1_throw.png","cart_jump_2_throw.png","cart_jump_3_throw.png","cart_jump_4_throw.png","cart_jump_5_throw.png","cart_jump_6_throw.png","cart_jump_7_throw.png"]},PUMP_MC:{id:"PUMP_MC",type:"MOVIECLIP",speedRatio:.2,frameNames:["cart_pump_down.png","cart_pump_mid.png","cart_pump_up.png","cart_pump_mid.png"]},PUMP_MC_THROW:{id:"PUMP_MC_THROW",type:"MOVIECLIP",speedRatio:.25,frameNames:["cart_pump_mid_throw.png","cart_pump_mid_throw.png","cart_pump_mid_throw.png","cart_pump_mid_throw.png"]},CART_FIRE_MC:{id:"CART_FIRE_MC",type:"MOVIECLIP",speedRatio:.25,frameNames:["cart_fire_1.png","cart_fire_2.png","cart_fire_3.png","cart_fire_4.png","cart_fire_5.png","cart_fire_6.png","cart_fire_7.png","cart_fire_8.png"]},CART_CHICKEN_MC:{id:"CART_CHICKEN_MC",type:"MOVIECLIP",speedRatio:.25,frameNames:["cart_chicken_1.png","cart_chicken_2.png","cart_chicken_3.png","cart_chicken_4.png","cart_chicken_5.png","cart_chicken_6.png","cart_chicken_7.png"]},CART_WIN_MC:{id:"CART_WIN_MC",type:"MOVIECLIP",speedRatio:.25,frameNames:["cart_celebration_1.png","cart_celebration_2.png","cart_celebration_3.png","cart_celebration_4.png"]},CART_LOSE_MC:{id:"CART_LOSE_MC",type:"MOVIECLIP",speedRatio:.25,frameNames:["cart_cry_1.png","cart_cry_2.png","cart_cry_3.png"]},SURVIVOR_FAR_0_WAVE_MC:{id:"SURVIVOR_FAR_0_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger8_far_wave_0.png","passenger8_far_wave_1.png"]},SURVIVOR_FAR_0_CARDED_MC:{id:"SURVIVOR_FAR_0_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger8_far_carded.png"]},SURVIVOR_MID_0_WAVE_MC:{id:"SURVIVOR_MID_0_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger8_mid_wave_0.png","passenger8_mid_wave_1.png"]},SURVIVOR_MID_0_CARDED_MC:{id:"SURVIVOR_MID_0_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger8_mid_carded.png"]},SURVIVOR_NEAR_0_WAVE_MC:{id:"SURVIVOR_NEAR_0_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger8_near_wave_0.png","passenger8_near_wave_1.png"]},SURVIVOR_NEAR_0_CARDED_MC:{id:"SURVIVOR_NEAR_0_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger8_near_carded.png"]},SURVIVOR_FAR_1_WAVE_MC:{id:"SURVIVOR_FAR_1_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger1_far_wave_0.png","passenger1_far_wave_1.png"]},SURVIVOR_FAR_1_CARDED_MC:{id:"SURVIVOR_FAR_1_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger1_far_carded.png"]},SURVIVOR_MID_1_WAVE_MC:{id:"SURVIVOR_MID_1_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger1_mid_wave_0.png","passenger1_mid_wave_1.png"]},SURVIVOR_MID_1_CARDED_MC:{id:"SURVIVOR_MID_1_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger1_mid_carded.png"]},SURVIVOR_NEAR_1_WAVE_MC:{id:"SURVIVOR_NEAR_1_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger1_near_wave_0.png","passenger1_near_wave_1.png"]},SURVIVOR_NEAR_1_CARDED_MC:{id:"SURVIVOR_NEAR_1_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger1_near_carded.png"]},SURVIVOR_FAR_2_WAVE_MC:{id:"SURVIVOR_FAR_2_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger2_far_wave_0.png","passenger2_far_wave_1.png"]},SURVIVOR_FAR_2_CARDED_MC:{id:"SURVIVOR_FAR_2_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger2_far_carded.png"]},SURVIVOR_MID_2_WAVE_MC:{id:"SURVIVOR_MID_2_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger2_mid_wave_0.png","passenger2_mid_wave_1.png"]},SURVIVOR_MID_2_CARDED_MC:{id:"SURVIVOR_MID_2_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger2_mid_carded.png"]},SURVIVOR_NEAR_2_WAVE_MC:{id:"SURVIVOR_NEAR_2_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger2_near_wave_0.png","passenger2_near_wave_1.png"]},SURVIVOR_NEAR_2_CARDED_MC:{id:"SURVIVOR_NEAR_2_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger2_near_carded.png"]},SURVIVOR_FAR_3_WAVE_MC:{id:"SURVIVOR_FAR_3_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger3_far_wave_0.png","passenger3_far_wave_1.png"]},SURVIVOR_FAR_3_CARDED_MC:{id:"SURVIVOR_FAR_3_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger3_far_carded.png"]},SURVIVOR_MID_3_WAVE_MC:{id:"SURVIVOR_MID_3_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger3_mid_wave_0.png","passenger3_mid_wave_1.png"]},SURVIVOR_MID_3_CARDED_MC:{id:"SURVIVOR_MID_3_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger3_mid_carded.png"]},SURVIVOR_NEAR_3_WAVE_MC:{id:"SURVIVOR_NEAR_3_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger3_near_wave_0.png","passenger3_near_wave_1.png"]},SURVIVOR_NEAR_3_CARDED_MC:{id:"SURVIVOR_NEAR_3_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger3_near_carded.png"]},SURVIVOR_FAR_4_WAVE_MC:{id:"SURVIVOR_FAR_4_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger4_far_wave_0.png","passenger4_far_wave_1.png"]},SURVIVOR_FAR_4_CARDED_MC:{id:"SURVIVOR_FAR_4_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger4_far_carded.png"]},SURVIVOR_MID_4_WAVE_MC:{id:"SURVIVOR_MID_4_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger4_mid_wave_0.png","passenger4_mid_wave_1.png"]},SURVIVOR_MID_4_CARDED_MC:{id:"SURVIVOR_MID_4_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger4_mid_carded.png"]},SURVIVOR_NEAR_4_WAVE_MC:{id:"SURVIVOR_NEAR_4_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger4_near_wave_0.png","passenger4_near_wave_1.png"]},SURVIVOR_NEAR_4_CARDED_MC:{id:"SURVIVOR_NEAR_4_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger4_near_carded.png"]},SURVIVOR_FAR_5_WAVE_MC:{id:"SURVIVOR_FAR_5_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger5_far_wave_0.png","passenger5_far_wave_1.png"]},SURVIVOR_FAR_5_CARDED_MC:{id:"SURVIVOR_FAR_5_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger5_far_carded.png"]},SURVIVOR_MID_5_WAVE_MC:{id:"SURVIVOR_MID_5_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger5_mid_wave_0.png","passenger5_mid_wave_1.png"]},SURVIVOR_MID_5_CARDED_MC:{id:"SURVIVOR_MID_5_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger5_mid_carded.png"]},SURVIVOR_NEAR_5_WAVE_MC:{id:"SURVIVOR_NEAR_5_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger5_near_wave_0.png","passenger5_near_wave_1.png"]},SURVIVOR_NEAR_5_CARDED_MC:{id:"SURVIVOR_NEAR_5_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger5_near_carded.png"]},SURVIVOR_FAR_6_WAVE_MC:{id:"SURVIVOR_FAR_6_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger6_far_wave_0.png","passenger6_far_wave_1.png"]},SURVIVOR_FAR_6_CARDED_MC:{id:"SURVIVOR_FAR_6_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger6_far_carded.png"]},SURVIVOR_MID_6_WAVE_MC:{id:"SURVIVOR_MID_6_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger6_mid_wave_0.png","passenger6_mid_wave_1.png"]},SURVIVOR_MID_6_CARDED_MC:{id:"SURVIVOR_MID_6_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger6_mid_carded.png"]},SURVIVOR_NEAR_6_WAVE_MC:{id:"SURVIVOR_NEAR_6_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger6_near_wave_0.png","passenger6_near_wave_1.png"]},SURVIVOR_NEAR_6_CARDED_MC:{id:"SURVIVOR_NEAR_6_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger6_near_carded.png"]},SURVIVOR_FAR_7_WAVE_MC:{id:"SURVIVOR_FAR_7_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger7_far_wave_0.png","passenger7_far_wave_1.png"]},SURVIVOR_FAR_7_CARDED_MC:{id:"SURVIVOR_FAR_7_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger7_far_carded.png"]},SURVIVOR_MID_7_WAVE_MC:{id:"SURVIVOR_MID_7_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger7_mid_wave_0.png","passenger7_mid_wave_1.png"]},SURVIVOR_MID_7_CARDED_MC:{id:"SURVIVOR_MID_7_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger7_mid_carded.png"]},SURVIVOR_NEAR_7_WAVE_MC:{id:"SURVIVOR_NEAR_7_WAVE_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger7_near_wave_0.png","passenger7_near_wave_1.png"]},SURVIVOR_NEAR_7_CARDED_MC:{id:"SURVIVOR_NEAR_7_CARDED_MC",type:"MOVIECLIP",speedRatio:.05,frameNames:["passenger7_near_carded.png"]}};
for(var r in o)void 0===o[r].ns&&(o[r].ns=t.ns);for(var a in o){var h=o[a];if(h.url&&(h.ns_url=h.ns+h.url),h.frameNames){h.ns_frameNames=[];for(var l=0,c=h.frameNames.length;c>l;l++)h.ns_frameNames.push(h.ns+h.frameNames[l])}}return o.assetManifest=n,o}),define("game/games/train/train_game_main",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/game_main","game/games/train/model/train_game_model","game/games/train/view/train_game_view","game/games/train/view/train_game_ui_view","game/games/train/view/train_game_screens_view","game/game_config","game/games/train/model/train_asset_manifest"],function(e,t,i,s,n,o,r,a,h,l,c,d){"use strict";var u=o.extend({initialize:function(e){this["super"]=this.constructor.__super__;var i=t.extend({},e),s=new r({gameShellModel:e.gameShellModel,gameInputModel:e.gameInputModel,gameId:e.gameId,gameIndex:e.gameIndex,manifest:d});i.gameModel=s,i.gameView=new a({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameUIView=new h({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameScreensView=new l({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),this["super"].initialize.apply(this,[i])}});return u}),define("game/games/school/model/colonel_entity_model",["underscore","game/game_base/model/vo/sprite_vo","TweenMax","console"],function(e,t,i,s){function n(i){this.spriteVO=new t,this.spriteVO.pivotX=33,this.spriteVO.pivotY=87,this.gameTweenMax=i.gameModel.gameTweenMax,this.gameRect=i.gameModel.gameRect,this.gameModel=i.gameModel,this.id="colonel",this.onSurface=!1,this.gridPoint={x:2,y:4},this.initGridPos={x:1.5,y:3.8},this.jumpVector={x:0,y:1.2},this.vector={x:0,y:-1},this.gravity={x:0,y:.23},this.initPos={x:0,y:0};var n=this.gameModel.manifest;this.ANIMATION_STATES={JUMPING:n.COLONEL_JUMP_MC.id,SLIDING:n.COLONEL_SLIDE_MC.id,RUNNING:n.COLONEL_RUN_MC.id,CRASHED:n.COLONEL_RUN_MC.id,WIN:n.COLONEL_WIN_MC.id,LOSE:n.COLONEL_LOSE_MC.id,INACTIVE:n.COLONEL_RUN_MC.id},this.animationState=this.ANIMATION_STATES.RUNNING,this.STATES={JUMPING:"STATE_JUMPING",SLIDING:"STATE_SLIDING",RUNNING:"STATE_RUNNING",CRASHED:"STATE_CRASHED",WIN_MID_LEVEL:"WIN_MID_LEVEL",WIN:"WIN",LOSE:"LOSE",INACTIVE:"STATE_INACTIVE"},this.state=this.STATES.RUNNING,this.reset=function(){this.crashedCooldown=!1;var e=this.initGridPos;this.spriteVO.x=e.x*this.gameModel.tileMap.cellPixelRect.width,this.spriteVO.y=e.y*this.gameModel.tileMap.cellPixelRect.height,this.initPos.x=this.spriteVO.x,this.initPos.y=this.spriteVO.y,this.setState(this.STATES.RUNNING);this.initPos;this.spriteVO.alpha=1,this.spriteVO.rotation=0,this.vector.y=-2.7},this.removeLife=function(){this.gameModel.removeLife()},this.setAnimationState=function(e){this.animationState=e,this.spriteVO.active=e!==this.STATES.INACTIVE,this.spriteVO.currentAnimationId=e},this.isLevelResolved=function(){return this.state===this.STATES.WIN||this.state===this.STATES.LOSE||this.state===this.STATES.WIN_MID_LEVEL},this.setState=function(e){var t=this.initPos,i=this.state===this.STATES.RUNNING,n=this.state===this.STATES.SLIDING,o=this.onSurface;switch(e){case this.STATES.SLIDING:if(!i)return;this.gameModel.sounds.duck(),this.gameTweenMax.killDelayedCallsTo(this.setState),this.setAnimationState(this.ANIMATION_STATES.SLIDING);break;case this.STATES.JUMPING:if(!o)return;if(!i&&!n)return;this.gameModel.sounds.jump(),this.setAnimationState(this.ANIMATION_STATES.JUMPING);var r=this;r.vector.y=-4.7;break;case this.STATES.RUNNING:if(i)return;this.gameTweenMax.killDelayedCallsTo(this.setState),this.gameTweenMax.to(this.spriteVO,.15,{x:t.x,alpha:1,rotation:0,ease:window.Power2.easeInOut,overwrite:"auto"}),this.setAnimationState(this.ANIMATION_STATES.RUNNING);break;case this.STATES.CRASHED:if(this.crashedCooldown===!0)return;if(this.state===this.STATES.CRASHED)return;this.crash(),this.gameTweenMax.killDelayedCallsTo(this.setState),this.gameTweenMax.delayedCall(.1,this.setState,[this.STATES.RUNNING]),this.setAnimationState(this.ANIMATION_STATES.RUNNING);break;case this.STATES.WIN_MID_LEVEL:s.log("win mid"),this.gameTweenMax.killDelayedCallsTo(this.setState),this.gameTweenMax.set(this.spriteVO,{x:t.x+80,alpha:1,rotation:0,overwrite:"auto"}),this.setAnimationState(this.ANIMATION_STATES.WIN),this.setState(this.STATES.WIN);break;case this.STATES.WIN:this.gameTweenMax.killDelayedCallsTo(this.setState),this.setAnimationState(this.ANIMATION_STATES.WIN);break;case this.STATES.LOSE:this.gameTweenMax.killDelayedCallsTo(this.setState),this.setAnimationState(this.ANIMATION_STATES.LOSE)}this.state=e},this.crashedCooldownOff=function(){this.crashedCooldown=!1,this.gameTweenMax.to(this.spriteVO,.25,{alpha:1})},this.crash=function(){this.gameModel.sounds.crash(),this.removeLife(),this.crashedCooldown=!0,this.gameTweenMax.delayedCall(1,this.crashedCooldownOff),this.gameTweenMax.set(this.spriteVO,{alpha:.5});for(var e=0;7>e;e++){var t=.14*e,i=t+.07;this.gameTweenMax.to(this.spriteVO,.07,{delay:t,alpha:.25}),this.gameTweenMax.to(this.spriteVO,.07,{delay:i,alpha:.5})}},this.destroy=function(){this.gameTweenMax.killTweensOf(this.spriteVO),this.gameRect=null},this.reset(),e.bindAll(this,"setState","crashedCooldownOff")}return n}),define("game/games/school/sprites/school_sheet_1",[],function(){"use strict";return{ns:"school-sheet1",manifest:[{src:"/img/games/school/school-sheet1_0_sheet.png",spritesheet:{ns:"school-sheet1",sprites:[{x:658,y:628,width:300,height:312,id:"bg_hills.png",trim:{origWidth:300,origHeight:312,width:300,height:312,offsetX:0,offsetY:0}},{x:1169,y:785,width:44,height:61,id:"colonel_celebration_1.png",trim:{origWidth:62,origHeight:87,width:44,height:61,offsetX:11,offsetY:14}},{x:1169,y:722,width:44,height:61,id:"colonel_celebration_2.png",trim:{origWidth:62,origHeight:87,width:44,height:61,offsetX:11,offsetY:1}},{x:601,y:1110,width:44,height:57,id:"colonel_celebration_3.png",trim:{origWidth:62,origHeight:87,width:44,height:57,offsetX:11,offsetY:21}},{x:694,y:1110,width:44,height:55,id:"colonel_celebration_4.png",trim:{origWidth:62,origHeight:87,width:44,height:55,offsetX:11,offsetY:30}},{x:555,y:1110,width:44,height:57,id:"colonel_celebration_5.png",trim:{origWidth:62,origHeight:87,width:44,height:57,offsetX:11,offsetY:21}},{x:1169,y:848,width:46,height:57,id:"colonel_cry_1.png",trim:{origWidth:62,origHeight:87,width:46,height:57,offsetX:7,offsetY:25}},{x:647,y:1110,width:45,height:55,id:"colonel_cry_2.png",trim:{origWidth:62,origHeight:87,width:45,height:55,offsetX:11,offsetY:27}},{x:557,y:1055,width:47,height:50,id:"colonel_jump.png",trim:{origWidth:62,origHeight:87,width:47,height:50,offsetX:8,offsetY:27}},{x:606,y:1055,width:47,height:50,id:"colonel_run_1.png",trim:{origWidth:62,origHeight:87,width:47,height:50,offsetX:8,offsetY:25}},{x:0,y:1256,width:28,height:58,id:"colonel_run_2.png",trim:{origWidth:62,origHeight:87,width:28,height:58,offsetX:19,offsetY:27}},{x:740,y:1110,width:34,height:54,id:"colonel_run_3.png",trim:{origWidth:62,origHeight:87,width:34,height:54,offsetX:15,offsetY:25}},{x:30,y:1256,width:28,height:58,id:"colonel_run_4.png",trim:{origWidth:62,origHeight:87,width:28,height:58,offsetX:19,offsetY:27}},{x:1169,y:596,width:57,height:29,id:"colonel_slide_1.png",trim:{origWidth:62,origHeight:87,width:57,height:29,offsetX:3,offsetY:57}},{x:694,y:1015,width:60,height:29,id:"colonel_slide_2.png",trim:{origWidth:62,origHeight:87,width:60,height:29,offsetX:1,offsetY:57}},{x:329,y:0,width:327,height:312,id:"door_0.png",trim:{origWidth:327,origHeight:312,width:327,height:312,offsetX:0,offsetY:0}},{x:0,y:314,width:327,height:312,id:"door_1.png",trim:{origWidth:327,origHeight:312,width:327,height:312,offsetX:0,offsetY:0}},{x:329,y:314,width:327,height:312,id:"door_2.png",trim:{origWidth:327,origHeight:312,width:327,height:312,offsetX:0,offsetY:0}},{x:658,y:0,width:327,height:312,id:"door_3.png",trim:{origWidth:327,origHeight:312,width:327,height:312,offsetX:0,offsetY:0}},{x:0,y:628,width:327,height:312,id:"door_4.png",trim:{origWidth:327,origHeight:312,width:327,height:312,offsetX:0,offsetY:0}},{x:329,y:628,width:327,height:312,id:"door_5.png",trim:{origWidth:327,origHeight:312,width:327,height:312,offsetX:0,offsetY:0}},{x:0,y:0,width:327,height:312,id:"door_6.png",trim:{origWidth:327,origHeight:312,width:327,height:312,offsetX:0,offsetY:0}},{x:658,y:314,width:327,height:312,id:"door_7.png",trim:{origWidth:327,origHeight:312,width:327,height:312,offsetX:0,offsetY:0}},{x:123,y:942,width:120,height:312,id:"door_back.png",trim:{origWidth:120,origHeight:312,width:120,height:312,offsetX:0,offsetY:0}},{x:1387,y:628,width:23,height:87,id:"end_fence.png",trim:{origWidth:26,origHeight:88,width:23,height:87,offsetX:1,offsetY:1}},{x:589,y:942,width:62,height:68,id:"obstacle_clock.png",trim:{origWidth:64,origHeight:70,width:62,height:68,offsetX:1,offsetY:1}},{x:653,y:942,width:62,height:50,id:"obstacle_desk.png",trim:{origWidth:69,origHeight:52,width:62,height:50,offsetX:1,offsetY:1}},{x:1353,y:628,width:32,height:214,id:"obstacle_lamp.png",trim:{origWidth:35,origHeight:215,width:32,height:214,offsetX:2,offsetY:0}},{x:717,y:942,width:63,height:46,id:"obstacle_monkey_bars.png",trim:{origWidth:65,origHeight:48,width:63,height:46,offsetX:1,offsetY:1}},{x:626,y:1015,width:66,height:38,id:"obstacle_picnic_table.png",trim:{origWidth:68,origHeight:40,width:66,height:38,offsetX:1,offsetY:1}},{x:1353,y:618,width:27,height:5,id:"obstacle_ruler.png",trim:{origWidth:29,origHeight:7,width:27,height:5,offsetX:1,offsetY:1}},{x:497,y:942,width:90,height:71,id:"obstacle_slide.png",trim:{origWidth:92,origHeight:73,width:90,height:71,offsetX:1,offsetY:1}},{x:960,y:628,width:25,height:38,id:"obstacle_stool.png",trim:{origWidth:27,origHeight:40,width:25,height:38,offsetX:1,offsetY:1}},{x:1353,y:314,width:38,height:207,id:"obstacle_swing.png",trim:{origWidth:40,origHeight:208,width:38,height:207,offsetX:1,offsetY:0}},{x:557,y:1015,width:67,height:38,id:"obstacle_table.png",trim:{origWidth:69,origHeight:40,width:67,height:38,offsetX:1,offsetY:1}},{x:497,y:1110,width:27,height:93,id:"obstacle_teacher_0.png"},{x:497,y:1015,width:28,height:93,id:"obstacle_teacher_1.png"},{x:1353,y:844,width:52,height:93,id:"obstacle_teacher_2.png"},{x:1393,y:314,width:13,height:11,id:"pause_topright.png",trim:{origWidth:26,origHeight:25,width:13,height:11,offsetX:2,offsetY:13}},{x:737,y:1055,width:39,height:41,id:"pupil_0_jump_0.png",trim:{origWidth:41,origHeight:49,width:39,height:41,offsetX:1,offsetY:7}},{x:936,y:1055,width:33,height:39,id:"pupil_0_jump_1.png",trim:{origWidth:41,origHeight:49,width:33,height:39,offsetX:4,offsetY:0}},{x:805,y:1110,width:27,height:39,id:"pupil_0_wave_0.png",trim:{origWidth:41,origHeight:49,width:27,height:39,offsetX:1,offsetY:9}},{x:960,y:668,width:24,height:39,id:"pupil_0_wave_1.png",trim:{origWidth:41,origHeight:49,width:24,height:39,offsetX:4,offsetY:9}},{x:778,y:1055,width:39,height:39,id:"pupil_1_jump_0.png",trim:{origWidth:41,origHeight:49,width:39,height:39,offsetX:1,offsetY:9}},{x:1076,y:1055,width:33,height:38,id:"pupil_1_jump_1.png",trim:{origWidth:41,origHeight:49,width:33,height:38,offsetX:4,offsetY:1}},{x:834,y:1110,width:27,height:39,id:"pupil_1_wave_0.png",trim:{origWidth:41,origHeight:49,width:27,height:39,offsetX:1,offsetY:9}},{x:960,y:832,width:24,height:39,id:"pupil_1_wave_1.png",trim:{origWidth:41,origHeight:49,width:24,height:39,offsetX:4,offsetY:9}},{x:819,y:1055,width:39,height:39,id:"pupil_2_jump_0.png",trim:{origWidth:41,origHeight:49,width:39,height:39,offsetX:1,offsetY:9}},{x:1041,y:1055,width:33,height:38,id:"pupil_2_jump_1.png",trim:{origWidth:41,origHeight:49,width:33,height:38,offsetX:4,offsetY:1}},{x:863,y:1110,width:27,height:39,id:"pupil_2_wave_0.png",trim:{origWidth:41,origHeight:49,width:27,height:39,offsetX:1,offsetY:9}},{x:960,y:873,width:24,height:39,id:"pupil_2_wave_1.png",trim:{origWidth:41,origHeight:49,width:24,height:39,offsetX:4,offsetY:9}},{x:860,y:1055,width:39,height:39,id:"pupil_3_jump_0.png",trim:{origWidth:41,origHeight:49,width:39,height:39,offsetX:1,offsetY:9}},{x:1006,y:1055,width:33,height:38,id:"pupil_3_jump_1.png",trim:{origWidth:41,origHeight:49,width:33,height:38,offsetX:4,offsetY:1}},{x:776,y:1110,width:27,height:39,id:"pupil_3_wave_0.png",trim:{origWidth:41,origHeight:49,width:27,height:39,offsetX:1,offsetY:9}},{x:960,y:709,width:24,height:39,id:"pupil_3_wave_1.png",trim:{origWidth:41,origHeight:49,width:24,height:39,offsetX:4,offsetY:9}},{x:655,y:1055,width:39,height:41,id:"pupil_4_jump_0.png",trim:{origWidth:41,origHeight:49,width:39,height:41,offsetX:1,offsetY:7}},{x:901,y:1055,width:33,height:39,id:"pupil_4_jump_1.png",trim:{origWidth:41,origHeight:49,width:33,height:39,offsetX:4,offsetY:0}},{x:892,y:1110,width:27,height:39,id:"pupil_4_wave_0.png",trim:{origWidth:41,origHeight:49,width:27,height:39,offsetX:1,offsetY:9}},{x:960,y:791,width:24,height:39,id:"pupil_4_wave_1.png",trim:{origWidth:41,origHeight:49,width:24,height:39,offsetX:4,offsetY:9}},{x:696,y:1055,width:39,height:41,id:"pupil_5_jump_0.png",trim:{origWidth:41,origHeight:49,width:39,height:41,offsetX:1,offsetY:7}},{x:971,y:1055,width:33,height:39,id:"pupil_5_jump_1.png",trim:{origWidth:41,origHeight:49,width:33,height:39,offsetX:4,offsetY:0}},{x:921,y:1110,width:27,height:39,id:"pupil_5_wave_0.png",trim:{origWidth:41,origHeight:49,width:27,height:39,offsetX:1,offsetY:9}},{x:960,y:750,width:24,height:39,id:"pupil_5_wave_1.png",trim:{origWidth:41,origHeight:49,width:24,height:39,offsetX:4,offsetY:9}},{x:782,y:942,width:116,height:24,id:"school_outside_message.png",trim:{origWidth:256,origHeight:192,width:116,height:24,offsetX:70,offsetY:84}},{x:978,y:942,width:60,height:5,id:"school_ui_bar.png",trim:{origWidth:60,origHeight:5,width:60,height:5,offsetX:0,offsetY:0}},{x:900,y:942,width:76,height:22,id:"school_ui_bar_bg.png",trim:{origWidth:76,origHeight:22,width:76,height:22,offsetX:0,offsetY:0}},{x:1169,y:628,width:39,height:92,id:"teacher_idle_1.png",trim:{origWidth:57,origHeight:95,width:39,height:92,offsetX:15,offsetY:2}},{x:1169,y:502,width:39,height:92,id:"teacher_idle_2.png",trim:{origWidth:57,origHeight:95,width:39,height:92,offsetX:15,offsetY:2}},{x:1169,y:314,width:39,height:92,id:"teacher_idle_3.png",trim:{origWidth:57,origHeight:95,width:39,height:92,offsetX:15,offsetY:2}},{x:1169,y:408,width:39,height:92,id:"teacher_idle_4.png",trim:{origWidth:57,origHeight:95,width:39,height:92,offsetX:15,offsetY:2}},{x:526,y:1110,width:27,height:93,id:"teacher_throw_1.png",trim:{origWidth:57,origHeight:95,width:27,height:93,offsetX:27,offsetY:1}},{x:1353,y:523,width:52,height:93,id:"teacher_throw_2.png",trim:{origWidth:57,origHeight:95,width:52,height:93,offsetX:2,offsetY:1}},{x:527,y:1015,width:28,height:93,id:"teacher_throw_3.png",trim:{origWidth:57,origHeight:95,width:28,height:93,offsetX:26,offsetY:1}},{x:987,y:0,width:241,height:312,id:"wall_blackboard.png",trim:{origWidth:241,origHeight:312,width:241,height:312,offsetX:0,offsetY:0}},{x:371,y:942,width:61,height:312,id:"wall_blank.png",trim:{origWidth:61,origHeight:312,width:61,height:312,offsetX:0,offsetY:0}},{x:0,y:942,width:121,height:312,id:"wall_bookcase.png",trim:{origWidth:121,origHeight:312,width:121,height:312,offsetX:0,offsetY:0}},{x:987,y:628,width:180,height:312,id:"wall_fence.png",trim:{origWidth:180,origHeight:312,width:180,height:312,offsetX:0,offsetY:0}},{x:1230,y:0,width:180,height:312,id:"wall_fence_end.png",trim:{origWidth:180,origHeight:312,width:180,height:312,offsetX:0,offsetY:0}},{x:308,y:942,width:61,height:312,id:"wall_globe.png",trim:{origWidth:61,origHeight:312,width:61,height:312,offsetX:0,offsetY:0}},{x:987,y:314,width:180,height:312,id:"wall_grass.png",trim:{origWidth:180,origHeight:312,width:180,height:312,offsetX:0,offsetY:0}},{x:1230,y:314,width:121,height:312,id:"wall_piano.png",trim:{origWidth:121,origHeight:312,width:121,height:312,offsetX:0,offsetY:0}},{x:245,y:942,width:61,height:312,id:"wall_shelf_1.png",trim:{origWidth:61,origHeight:312,width:61,height:312,offsetX:0,offsetY:0}},{x:434,y:942,width:61,height:312,id:"wall_shelf_2.png",trim:{origWidth:61,origHeight:312,width:61,height:312,offsetX:0,offsetY:0}},{x:1230,y:628,width:121,height:312,id:"wall_window.png",trim:{origWidth:121,origHeight:312,width:121,height:312,offsetX:0,offsetY:0}}]},width:1410,height:1314}]}}),define("game/games/school/model/school_asset_manifest",["underscore","game/games/school/sprites/school_sheet_1","game/sprites/game_screen_assets"],function(e,t,i){var s=e.flatten([t.manifest],!0);e.each(s,function(e){e.spritesheet&&(e.pixijs=e.spritesheet)});var n=[{src:"/font/frucade.xml",id:"font/frucade.xml",type:"xml",pixijs:{font:{name:"frucade",bitmap:"font/frucade.png"}}},{id:"AUDIO_DOOR_SMASH",priority:1,type:"sound",volume:1,src:"/audio/games/school/6th_grade_door.mp3"},{id:"AUDIO_MUSIC",priority:1,type:"sound",volume:1,src:"/audio/games/school/6th_grade_music.mp3"},{id:"AUDIO_PLAYER_DUCK_0",type:"sound",volume:1,src:"/audio/games/school/6th_grade_duck_01.mp3"},{id:"AUDIO_PLAYER_DUCK_1",type:"sound",volume:1,src:"/audio/games/school/6th_grade_duck_02.mp3"},{id:"AUDIO_PLAYER_HIT_0",type:"sound",volume:1,src:"/audio/games/school/6th_grade_hit_01.mp3"},{id:"AUDIO_PLAYER_HIT_1",type:"sound",volume:1,src:"/audio/games/school/6th_grade_hit_02.mp3"},{id:"AUDIO_PLAYER_HIT_2",type:"sound",volume:1,src:"/audio/games/school/6th_grade_hit_03.mp3"},{id:"AUDIO_PLAYER_HIT_3",type:"sound",volume:1,src:"/audio/games/school/6th_grade_hit_04.mp3"},{id:"AUDIO_PLAYER_JUMP",type:"sound",volume:1,src:"/audio/games/school/6th_grade_jump.mp3"}];n=n.concat(s);var o={slkscrb:{id:"slkscrb",type:"FONT",url:"font/slkscrb.fnt"},frucade:{id:"frucade",type:"FONT",url:"font/frucade.xml"},UI_HEART_X:{id:"UI_HEART_X",type:"SPRITE",url:"ui_health_X.png",ns:i.ns},UI_HEART_0:{id:"UI_HEART_0",type:"SPRITE",url:"ui_health_0.png",ns:i.ns},UI_HEART_1:{id:"UI_HEART_1",type:"SPRITE",url:"ui_health_1.png",ns:i.ns},UI_HEART_2:{id:"UI_HEART_2",type:"SPRITE",url:"ui_health_2.png",ns:i.ns},UI_HEART_3:{id:"UI_HEART_3",type:"SPRITE",url:"ui_health_3.png",ns:i.ns},UI_HEART_ICON_BG:{id:"UI_HEART_ICON_BG",type:"SPRITE",url:"ui_health_heart_bg.png",ns:i.ns},UI_HEART_ICON:{id:"UI_HEART_ICON",type:"SPRITE",url:"ui_health_heart.png",ns:i.ns},UI_HEART_POLE:{id:"UI_HEART_POLE",type:"SPRITE",url:"ui_health_pole.png",ns:i.ns},UI_HEART_BG:{id:"UI_HEART_BG",type:"SPRITE",url:"ui_health_bg.png",ns:i.ns},UI_BAR_BG:{id:"UI_BAR_BG",type:"SPRITE",url:"school_ui_bar_bg.png"},UI_BAR:{id:"UI_BAR",type:"SPRITE",url:"school_ui_bar.png"},UI_PAUSE:{id:"UI_PAUSE",type:"SPRITE",url:"pause_topright.png"},UI_OUTSIDE_CALLOUT:{id:"UI_OUTSIDE_CALLOUT",type:"SPRITE",url:"school_outside_message.png"},BACKGROUND:{id:"BACKGROUND",type:"SPRITE",url:"bg_hills.png"},DOOR_BACK:{id:"DOOR_BACK",type:"SPRITE",url:"door_back.png"},DOOR_FRONT:{id:"DOOR_FRONT",type:"SPRITE",url:"door_0.png"},DOOR_FRONT_MC:{id:"DOOR_FRONT_MC",type:"MOVIECLIP",speedRatio:.25,frameNames:["door_0.png"]},DOOR_FRONT_SMASH_MC:{id:"DOOR_FRONT_SMASH_MC",type:"MOVIECLIP",speedRatio:.25,frameNames:["door_0.png","door_1.png","door_2.png","door_3.png","door_4.png","door_5.png","door_6.png","door_7.png"]},WALL_BLACKBOARD:{id:"WALL_BLACKBOARD",type:"SPRITE",url:"wall_blackboard.png"},WALL_BLANK:{id:"WALL_BLANK",type:"SPRITE",url:"wall_blank.png"},WALL_BOOKCASE:{id:"WALL_BOOKCASE",type:"SPRITE",url:"wall_bookcase.png"},WALL_FENCE:{id:"WALL_FENCE",type:"SPRITE",url:"wall_fence.png"},WALL_FENCE_END:{id:"WALL_FENCE_END",type:"SPRITE",url:"wall_fence_end.png"},WALL_GRASS:{id:"WALL_GRASS",type:"SPRITE",url:"wall_grass.png"},WALL_GLOBE:{id:"WALL_GLOBE",type:"SPRITE",url:"wall_globe.png"},WALL_PIANO:{id:"WALL_PIANO",type:"SPRITE",url:"wall_piano.png"},WALL_SHELF_1:{id:"WALL_SHELF_1",type:"SPRITE",url:"wall_shelf_1.png"},WALL_SHELF_2:{id:"WALL_SHELF_2",type:"SPRITE",url:"wall_shelf_2.png"},WALL_WINDOW:{id:"WALL_WINDOW",type:"SPRITE",url:"wall_window.png"},OBSTACLE_CLOCK:{id:"OBSTACLE_CLOCK",type:"SPRITE",url:"obstacle_clock.png"},OBSTACLE_DESK:{id:"OBSTACLE_DESK",type:"SPRITE",url:"obstacle_desk.png"},OBSTACLE_LAMP:{id:"OBSTACLE_LAMP",type:"SPRITE",url:"obstacle_lamp.png"},OBSTACLE_RULER:{id:"OBSTACLE_RULER",type:"SPRITE",url:"obstacle_ruler.png"},OBSTACLE_STOOL:{id:"OBSTACLE_STOOL",type:"SPRITE",url:"obstacle_stool.png"},OBSTACLE_TABLE:{id:"OBSTACLE_TABLE",type:"SPRITE",url:"obstacle_table.png"},OBSTACLE_FENCE:{id:"OBSTACLE_FENCE",type:"SPRITE",url:"end_fence.png"},OBSTACLE_PICNIC_TABLE:{id:"OBSTACLE_PICNIC_TABLE",type:"SPRITE",url:"obstacle_picnic_table.png"},OBSTACLE_MONKEY_BARS:{id:"OBSTACLE_MONKEY_BARS",type:"SPRITE",url:"obstacle_monkey_bars.png"},OBSTACLE_SLIDE:{id:"OBSTACLE_SLIDE",type:"SPRITE",url:"obstacle_slide.png"},OBSTACLE_SWING:{id:"OBSTACLE_SWING",type:"SPRITE",url:"obstacle_swing.png"},PUPIL_0_MC:{id:"PUPIL_0_MC",type:"MOVIECLIP",speedRatio:.075,frameNames:["pupil_0_wave_0.png","pupil_0_wave_1.png","pupil_0_wave_0.png","pupil_0_wave_1.png","pupil_0_wave_0.png","pupil_0_wave_1.png","pupil_0_jump_0.png","pupil_0_jump_0.png","pupil_0_jump_1.png","pupil_0_jump_0.png","pupil_0_jump_1.png","pupil_0_jump_0.png","pupil_0_jump_1.png","pupil_0_wave_0.png","pupil_0_wave_1.png","pupil_0_wave_0.png","pupil_0_wave_1.png","pupil_0_jump_0.png","pupil_0_jump_0.png","pupil_0_jump_1.png"]},PUPIL_1_MC:{id:"PUPIL_1_MC",type:"MOVIECLIP",speedRatio:.075,frameNames:["pupil_1_wave_0.png","pupil_1_wave_1.png","pupil_1_wave_0.png","pupil_1_wave_1.png","pupil_1_wave_0.png","pupil_1_wave_1.png","pupil_1_jump_0.png","pupil_1_jump_0.png","pupil_1_jump_1.png","pupil_1_jump_0.png","pupil_1_jump_1.png","pupil_1_jump_0.png","pupil_1_jump_1.png","pupil_1_wave_0.png","pupil_1_wave_1.png","pupil_1_wave_0.png","pupil_1_wave_1.png","pupil_1_jump_0.png","pupil_1_jump_0.png","pupil_1_jump_1.png"]},PUPIL_2_MC:{id:"PUPIL_2_MC",type:"MOVIECLIP",speedRatio:.075,frameNames:["pupil_2_wave_0.png","pupil_2_wave_1.png","pupil_2_wave_0.png","pupil_2_wave_1.png","pupil_2_wave_0.png","pupil_2_wave_1.png","pupil_2_jump_0.png","pupil_2_jump_0.png","pupil_2_jump_1.png","pupil_2_jump_0.png","pupil_2_jump_1.png","pupil_2_jump_0.png","pupil_2_jump_1.png","pupil_2_wave_0.png","pupil_2_wave_1.png","pupil_2_wave_0.png","pupil_2_wave_1.png","pupil_2_jump_0.png","pupil_2_jump_0.png","pupil_2_jump_1.png"]},PUPIL_3_MC:{id:"PUPIL_3_MC",type:"MOVIECLIP",speedRatio:.075,frameNames:["pupil_3_wave_0.png","pupil_3_wave_1.png","pupil_3_wave_0.png","pupil_3_wave_1.png","pupil_3_wave_0.png","pupil_3_wave_1.png","pupil_3_jump_0.png","pupil_3_jump_0.png","pupil_3_jump_1.png","pupil_3_jump_0.png","pupil_3_jump_1.png","pupil_3_jump_0.png","pupil_3_jump_1.png","pupil_3_wave_0.png","pupil_3_wave_1.png","pupil_3_wave_0.png","pupil_3_wave_1.png","pupil_3_jump_0.png","pupil_3_jump_0.png","pupil_3_jump_1.png"]},PUPIL_4_MC:{id:"PUPIL_4_MC",type:"MOVIECLIP",speedRatio:.075,frameNames:["pupil_4_wave_0.png","pupil_4_wave_1.png","pupil_4_wave_0.png","pupil_4_wave_1.png","pupil_4_wave_0.png","pupil_4_wave_1.png","pupil_4_jump_0.png","pupil_4_jump_0.png","pupil_4_jump_1.png","pupil_4_jump_0.png","pupil_4_jump_1.png","pupil_4_jump_0.png","pupil_4_jump_1.png","pupil_4_wave_0.png","pupil_4_wave_1.png","pupil_4_wave_0.png","pupil_4_wave_1.png","pupil_4_jump_0.png","pupil_4_jump_0.png","pupil_4_jump_1.png"]},PUPIL_5_MC:{id:"PUPIL_5_MC",type:"MOVIECLIP",speedRatio:.075,frameNames:["pupil_5_wave_0.png","pupil_5_wave_1.png","pupil_5_wave_0.png","pupil_5_wave_1.png","pupil_5_wave_0.png","pupil_5_wave_1.png","pupil_5_jump_0.png","pupil_5_jump_0.png","pupil_5_jump_1.png","pupil_5_jump_0.png","pupil_5_jump_1.png","pupil_5_jump_0.png","pupil_5_jump_1.png","pupil_5_wave_0.png","pupil_5_wave_1.png","pupil_5_wave_0.png","pupil_5_wave_1.png","pupil_5_jump_0.png","pupil_5_jump_0.png","pupil_5_jump_1.png"]},COLONEL_RUN_MC:{id:"COLONEL_RUN_MC",type:"MOVIECLIP",speedRatio:.15,frameNames:["colonel_run_1.png","colonel_run_2.png","colonel_run_3.png","colonel_run_4.png"]},COLONEL_SLIDE_MC:{id:"COLONEL_SLIDE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_slide_1.png","colonel_slide_2.png"]},COLONEL_JUMP_MC:{id:"COLONEL_JUMP_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_jump.png"]},COLONEL_WIN_MC:{id:"COLONEL_WIN_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_celebration_1.png","colonel_celebration_2.png","colonel_celebration_3.png","colonel_celebration_4.png"]},COLONEL_LOSE_MC:{id:"COLONEL_LOSE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["colonel_cry_1.png","colonel_cry_2.png"]},TEACHER_THROW_MC:{id:"TEACHER_THROW_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["teacher_throw_1.png","teacher_throw_1.png","teacher_throw_1.png","teacher_throw_2.png","teacher_throw_2.png","teacher_throw_3.png","teacher_throw_3.png","teacher_throw_3.png","teacher_throw_3.png","teacher_throw_3.png","teacher_throw_3.png","teacher_throw_3.png","teacher_throw_3.png","teacher_throw_3.png"]},TEACHER_IDLE_MC:{id:"TEACHER_IDLE_MC",type:"MOVIECLIP",speedRatio:.125,frameNames:["teacher_idle_1.png","teacher_idle_2.png","teacher_idle_3.png","teacher_idle_4.png"]}};for(var r in o)void 0===o[r].id&&(o[r].id=r),void 0===o[r].ns&&(o[r].ns=t.ns);for(var a in o){var h=o[a];if(h.url&&(h.ns_url=h.ns+h.url),h.frameNames){h.ns_frameNames=[];for(var l=0,c=h.frameNames.length;c>l;l++)h.ns_frameNames.push(h.ns+h.frameNames[l])}}return o.assetManifest=n,o}),define("game/games/school/model/obstacle_models",["underscore","TweenMax","console","shims/shim_resn_utils","game/game_base/model/vo/sprite_vo","game/games/school/model/school_asset_manifest"],function(e,t,i,s,n,o){var r=o,a={},h={LINE:"line"},l={WALK:"walk",CRASH:"crash",ANIMATE:"animate"};return a.COLLISON=h,a.OUTCOME=l,a.BaseObstacle={id:null,index:-1,inGame:!1,STATE_CRASHED:"STATE_CRASHED",STATE_COLLIDABLE:"STATE_COLLIDABLE",STATE_UNCOLLIDABLE:"STATE_UNCOLLIDABLE",STATE_INACTIVE:"STATE_INACTIVE",state:"STATE_INACTIVE",spriteId:null,spriteVO:new n,gridPos:{x:0,y:0},gridPixelPos:{x:0,y:0},gameGrid:{gridOffset:{x:100,y:0},gridBounds:{x:0,y:0,width:1,height:1},spriteOffset:{x:0,y:40,width:100,height:100},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.1},gridP2:{x:0,y:1}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:1,y:0}}}}},a.Floor=e.extend({},a.BaseObstacle,{spriteId:null,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:1,height:1},spriteOffset:{x:0,y:0},collisions:{WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:1,y:0}}}}}),a.Chalk=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_RULER.id,gameGrid:{gridOffsetIncr:{x:-.07,y:0},gridOffset:{x:0,y:.6},gridBounds:{x:0,y:0,width:.5,height:.1},spriteOffset:{x:0,y:0},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:-.3,y:.02},gridP2:{x:0,y:.02}}}}}),a.Teacher=e.extend({},a.BaseObstacle,{spriteId:r.TEACHER_IDLE_MC.id,spriteIds:[r.TEACHER_IDLE_MC.id,r.TEACHER_THROW_MC.id],childModels:[{type:"chalk",model:null}],idle:function(){this.spriteVO.currentAnimationId=r.TEACHER_IDLE_MC.id},gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:.7,height:2},spriteOffset:{x:-22,y:-38},collisions:{}}}),a.Teacher["throw"]=function(){this.spriteVO.currentAnimationId=r.TEACHER_THROW_MC.id},a.Teacher.idle=function(){this.spriteVO.currentAnimationId=r.TEACHER_IDLE_MC.id},e.bindAll(a.Teacher,"throw","idle"),a.Table=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_TABLE.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:.1},spriteOffset:{x:-2,y:-3},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.1},gridP2:{x:1.5,y:.1}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:2,y:0}}}}}),a.Chair=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_STOOL.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:.7,height:1},spriteOffset:{x:-2,y:-3},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.05},gridP2:{x:0,y:1}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:.7,y:0}}}}}),a.Desk=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_DESK.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:1},spriteOffset:{x:-2,y:-15},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.05},gridP2:{x:0,y:1}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:2,y:0}}}}}),a.Cupboard=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_CLOCK.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:1},spriteOffset:{x:-2,y:-2},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.05},gridP2:{x:0,y:1}},CRASH2:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:1},gridP2:{x:2,y:1}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:2,y:0}}}}}),a.Lamp=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_LAMP.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:1,height:2},spriteOffset:{x:0,y:-155},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:.35,y:.05},gridP2:{x:.35,y:2}}}}}),a.PicnicTable=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_PICNIC_TABLE.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:1},spriteOffset:{x:-5,y:-3},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.05},gridP2:{x:0,y:1}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:2,y:0}}}}}),a.MonkeyBars=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_MONKEY_BARS.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:1},spriteOffset:{x:-5,y:-12},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.05},gridP2:{x:0,y:1}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:2,y:0}}}}}),a.Slide=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_SLIDE.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:2},spriteOffset:{x:-2,y:-4},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.05},gridP2:{x:0,y:2}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:2,y:0}}}}}),a.Swing=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_SWING.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:1,height:1},spriteOffset:{x:0,y:-203},collisions:{CRASH:{active:!0,outcome:l.CRASH,type:h.LINE,gridP1:{x:0,y:.1},gridP2:{x:.4,y:.1}},WALK:{active:!0,outcome:l.WALK,type:h.LINE,gridP1:{x:0,y:0},gridP2:{x:1,y:0}}}}}),a.DoorFront=e.extend({},a.BaseObstacle,{spriteId:r.DOOR_FRONT_MC.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:4,height:1},spriteOffset:{x:0,y:-120},collisions:{EVENT:{active:!0,event:"door_anim",type:h.LINE,gridP1:{x:0,y:-5},gridP2:{x:0,y:4}}}}}),a.EndFence=e.extend({},a.BaseObstacle,{spriteId:r.OBSTACLE_FENCE.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:1,height:1},spriteOffset:{x:0,y:-30},collisions:{EVENT:{active:!0,event:"end_anim",type:h.LINE,gridP1:{x:-3,y:-5},gridP2:{x:-3,y:4}}}}}),a.Wall=e.extend({},a.BaseObstacle,{spriteId:r.WALL_BLANK.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.Globe=e.extend({},a.BaseObstacle,{spriteId:r.WALL_GLOBE.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.BookCase=e.extend({},a.BaseObstacle,{spriteId:r.WALL_BOOKCASE.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:4,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.Shelf1=e.extend({},a.BaseObstacle,{spriteId:r.WALL_SHELF_1.id,spriteIds:[r.WALL_SHELF_1.id,r.WALL_SHELF_2.id],gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:2,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.Piano=e.extend({},a.BaseObstacle,{spriteId:r.WALL_PIANO.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:4,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.DoorBack=e.extend({},a.BaseObstacle,{spriteId:r.DOOR_BACK.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:4,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.Window=e.extend({},a.BaseObstacle,{spriteId:r.WALL_WINDOW.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:4,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.BlackBoard=e.extend({},a.BaseObstacle,{spriteId:r.WALL_BLACKBOARD.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:8,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.Fence=e.extend({},a.BaseObstacle,{spriteId:r.WALL_FENCE.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:6,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.FenceEnd=e.extend({},a.BaseObstacle,{spriteId:r.WALL_FENCE_END.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:6,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.Grass=e.extend({},a.BaseObstacle,{spriteId:r.WALL_GRASS.id,gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:6,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a.Pupil=e.extend({},a.BaseObstacle,{spriteId:r.PUPIL_0_MC.id,spriteIds:[r.PUPIL_0_MC.id,r.PUPIL_1_MC.id,r.PUPIL_2_MC.id,r.PUPIL_3_MC.id,r.PUPIL_4_MC.id,r.PUPIL_5_MC.id],gameGrid:{gridOffset:{x:0,y:0},gridBounds:{x:0,y:0,width:1,height:1},spriteOffset:{x:0,y:0},collisions:{}}}),a
}),define("game/games/school/model/school_spawn_model",["underscore","TweenMax","console","shims/shim_resn_utils","game/games/school/model/obstacle_models"],function(e,t,i,s,n){function o(t){this.gameModel=t.gameModel,this.gameTweenMax=this.gameModel.gameTweenMax,this.OBSTACLE=this.gameModel.OBSTACLE,this.WALLTILE=this.gameModel.WALLTILE,this.total={},this.total[this.OBSTACLE.TEACHER]=2,this.total[this.OBSTACLE.CHALK]=2,this.total[this.OBSTACLE.TABLE]=5,this.total[this.OBSTACLE.CHAIR]=3,this.total[this.OBSTACLE.DESK]=5,this.total[this.OBSTACLE.CUPBOARD]=4,this.total[this.OBSTACLE.LAMP]=5,this.total[this.OBSTACLE.DOOR]=1,this.total[this.OBSTACLE.FLOOR]=20,this.total[this.OBSTACLE.PICNIC_TABLE]=4,this.total[this.OBSTACLE.MONKEY_BARS]=4,this.total[this.OBSTACLE.SLIDE]=3,this.total[this.OBSTACLE.SWING]=5,this.total[this.OBSTACLE.END_FENCE]=1,this.total[this.WALLTILE.PUPIL]=8,this.total[this.WALLTILE.DOOR]=1,this.total[this.WALLTILE.WINDOW]=4,this.total[this.WALLTILE.WALL]=12,this.total[this.WALLTILE.BOOKCASE]=4,this.total[this.WALLTILE.FENCE]=4,this.total[this.WALLTILE.GLOBE]=6,this.total[this.WALLTILE.PIANO]=4,this.total[this.WALLTILE.SHELF]=4,this.total[this.WALLTILE.BLACKBOARD]=2,this.total[this.WALLTILE.FENCE]=4,this.total[this.WALLTILE.END_FENCE]=1,this.total[this.WALLTILE.GRASS]=2,this.obstacleTypeMap={},this.obstacleTypeMap[this.OBSTACLE.EMPTY]=null,this.obstacleTypeMap[this.OBSTACLE.TEACHER]=n.Teacher,this.obstacleTypeMap[this.OBSTACLE.CHALK]=n.Chalk,this.obstacleTypeMap[this.OBSTACLE.TABLE]=n.Table,this.obstacleTypeMap[this.OBSTACLE.CHAIR]=n.Chair,this.obstacleTypeMap[this.OBSTACLE.DESK]=n.Desk,this.obstacleTypeMap[this.OBSTACLE.CUPBOARD]=n.Cupboard,this.obstacleTypeMap[this.OBSTACLE.LAMP]=n.Lamp,this.obstacleTypeMap[this.OBSTACLE.DOOR]=n.DoorFront,this.obstacleTypeMap[this.OBSTACLE.FLOOR]=n.Floor,this.obstacleTypeMap[this.OBSTACLE.PICNIC_TABLE]=n.PicnicTable,this.obstacleTypeMap[this.OBSTACLE.MONKEY_BARS]=n.MonkeyBars,this.obstacleTypeMap[this.OBSTACLE.SLIDE]=n.Slide,this.obstacleTypeMap[this.OBSTACLE.SWING]=n.Swing,this.obstacleTypeMap[this.OBSTACLE.END_FENCE]=n.EndFence,this.obstacleTypeMap[this.WALLTILE.PUPIL]=n.Pupil,this.obstacleTypeMap[this.WALLTILE.WALL]=n.Wall,this.obstacleTypeMap[this.WALLTILE.GLOBE]=n.Globe,this.obstacleTypeMap[this.WALLTILE.BOOKCASE]=n.BookCase,this.obstacleTypeMap[this.WALLTILE.SHELF]=n.Shelf1,this.obstacleTypeMap[this.WALLTILE.PIANO]=n.Piano,this.obstacleTypeMap[this.WALLTILE.WINDOW]=n.Window,this.obstacleTypeMap[this.WALLTILE.BLACKBOARD]=n.BlackBoard,this.obstacleTypeMap[this.WALLTILE.FENCE]=n.Fence,this.obstacleTypeMap[this.WALLTILE.DOOR]=n.DoorBack,this.obstacleTypeMap[this.WALLTILE.END_FENCE]=n.FenceEnd,this.obstacleTypeMap[this.WALLTILE.GRASS]=n.Grass,this.pool={},this.getNextObstacleModel=function(e){return s.array.getNextInPool(this.pool[e])},this.reset=function(){this._resetModels();var e=this.pool[this.gameModel.OBSTACLE.DOOR][0].spriteVO;e.currentAnimationId=this.gameModel.manifest.DOOR_FRONT_MC.id},this._resetModels=function(){for(var e in this.pool){var t=this.pool[e];if(void 0!==t)for(var i=t.length-1;i>-1;i--)t[i].spriteVO.x=-256}},this.makePools=function(){this.makeAllObstacles()},this.makeAllObstacles=function(){var e,t,i;for(e in this.OBSTACLE)t=this.OBSTACLE[e],i=this.obstacleTypeMap[t],null!==t&&null!==i&&(i.type=t,this.pool[t]=[],this.makeObstacles(i,this.pool[t],this.total[t]));for(e in this.WALLTILE)t=this.WALLTILE[e],i=this.obstacleTypeMap[t],null!==t&&null!==i&&(i.type=t,this.pool[t]=[],this.makeObstacles(i,this.pool[t],this.total[t]))},this.makeObstacles=function(t,i,n){for(var o=0,r=n;r>o;o++){var a=s.parse.deepClone(t);a=e.extend({},a,{id:""+t.type+"_"+o,index:o}),i.push(a)}}}return o}),define("game/games/school/model/tilemap_modules",["underscore","TweenMax","console","shims/shim_resn_utils"],function(){function e(){this.moduleList=[0,1,3,7,1,5,3,0,1,6,4,5,6,0,4,3,1,4,2,7,0,10,8,12,9,13,9,13,11],this.modules=[{id:"0",index:0,difficulty:0,wall:[["a","a","a","a","w","w","w","w","g","g","a","a"]],pupils:[[".","p",".",".",".","p","p","p",".",".","p","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"1",index:1,difficulty:0,wall:[["w","w","w","w","B","B","B","B","B","B","B","B"]],pupils:[[".","p",".","p",".",".","p","p",".","p","p","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],["T","T",".",".",".",".","X","X",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"2",index:2,difficulty:0,wall:[["a","a","a","a","a","a","a","a","g","g","b","b","b","b","s","s","g","g","a","a","i","i","i","i"]],pupils:[["p",".",".",".",".",".",".",".",".",".",".",".","p","p","p",".",".",".",".","p","p","p",".","."]],obstacles:[[".",".",".","l",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".","l",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".","V","V",".",".",".",".",".",".",".",".","V","V",".",".",".","."],["X","X","X","X","X","X","X","X",".",".",".",".",".",".","X","X",".",".",".",".",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"3",index:3,difficulty:0,wall:[["a","a","a","a","w","w","w","w","g","g","a","a"]],pupils:[[".","p",".",".",".",".","p","p",".",".",".","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".","V","V",".",".",".","."],[".",".","X","X","X","X",".",".",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"4",index:4,difficulty:0,wall:[["a","a","a","a","a","a","a","a","b","b","b","b","s","s","a","a"]],pupils:[[".","p",".",".",".",".",".",".",".",".",".",".",".","p","p","."]],obstacles:[[".",".",".",".",".","l",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".","l",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","V","V",".",".","."],[".",".",".","X","X","X","X","X","X",".",".",".",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"5",index:5,difficulty:0,wall:[["w","w","w","w","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","g","g"]],pupils:[[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","p","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".","Z",".",".",".",".",".",".",".",".","Z",".",".",".",".",".","."],[".",".",".",".",".",".",".",".","Z",".","X","X",".",".",".",".",".","Z",".","h",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"6",index:6,difficulty:0,wall:[["w","w","w","w","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"]],pupils:[[".","p",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","l",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","l",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".","Z",".",".",".",".",".",".",".",".","Z",".",".",".","."],[".",".",".","X","X",".",".",".",".",".","Z",".","h",".",".",".",".",".",".","Z",".","h",".","."],["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"7",index:7,difficulty:0,wall:[["w","w","w","w","a","a","a","a","a","a","a","a","a","a","a","a"]],pupils:[["p",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".","Z",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".","Z",".","X","X",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"outdoors_empty",index:8,difficulty:0,wall:[["f","f","f","f","f","f","f","f","f","f","f","f"]],pupils:[[".","p",".",".",".",".","p","p",".",".",".","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"outdoors_1",index:9,difficulty:0,wall:[["f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f"]],pupils:[[".","p",".",".",".",".","p","p",".",".",".",".","p","p",".",".",".",".","p","p",".",".",".",".",".","p",".",".",".","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","=","=",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".","=","=",".",".",".",".",".",".",".","Q","Q",".",".",".",".",".","."],[".",".",".",".",".",".",".","F","F","M","M",".",".",".",".",".",".",".",".",".","F","F","Q","Q",".",".",".",".","=","."],["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"DOOR",index:10,difficulty:0,wall:[["K","K","K","K"]],pupils:[[".",".",".","."]],obstacles:[["D","D","D","D"],[".",".",".","."],[".",".",".","."],[".",".",".","."],["_","_","_","_"]]},{id:"outdoors_end",index:11,difficulty:0,wall:[["f","f","f","f","f","f","e","e","e","e","e","e","v","v","v","v","v","v","v","v","v","v","v","v"]],pupils:[["p","p","p","p",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".","E",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"outdoors_teacher",index:12,difficulty:0,wall:[["f","f","f","f","f","f","f","f","f","f","f","f"]],pupils:[["p",".",".",".",".",".",".",".",".",".",".","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".","Z",".",".","."],["M","M",".",".",".",".",".",".","Z",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_"]]},{id:"outdoors_2",index:13,difficulty:0,wall:[["f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f"]],pupils:[[".","p",".",".",".",".","p","p",".",".",".",".","p","p",".",".",".",".","p","p",".",".",".",".",".","p",".",".",".","."]],obstacles:[[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","."],[".",".",".",".",".",".",".",".",".",".",".",".",".",".","=","=",".",".",".",".",".",".",".",".","Q","Q",".",".",".","."],[".",".",".",".","M","M",".",".",".","M","M",".",".",".",".",".",".",".",".",".","F","F","F","F","Q","Q",".",".",".","."],["_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_","_"]]}]}return new e}),define("game/games/school/model/tilemap_model",["underscore","TweenMax","console","shims/shim_resn_utils","game/games/school/model/tilemap_modules","game/games/school/model/obstacle_models"],function(e,t,i,s,n,o){function r(t){this.gameModel=t.gameModel,this.spawnModel=this.gameModel.spawnModel,this.gameTweenMax=this.gameModel.gameTweenMax,this.obstacles=o,this.WALLTILE=this.gameModel.WALLTILE,this.OBSTACLE=this.gameModel.OBSTACLE,this.tileMapModules=n.modules,this.moduleList=n.moduleList,this.cellTypeMap={},this.cellTypeMap[this.OBSTACLE.EMPTY]=".",this.cellTypeMap[this.OBSTACLE.TEACHER]="Z",this.cellTypeMap[this.OBSTACLE.TABLE]="T",this.cellTypeMap[this.OBSTACLE.CHAIR]="h",this.cellTypeMap[this.OBSTACLE.DESK]="X",this.cellTypeMap[this.OBSTACLE.CUPBOARD]="V",this.cellTypeMap[this.OBSTACLE.LAMP]="l",this.cellTypeMap[this.OBSTACLE.DOOR]="D",this.cellTypeMap[this.OBSTACLE.FLOOR]="_",this.cellTypeMap[this.OBSTACLE.PICNIC_TABLE]="F",this.cellTypeMap[this.OBSTACLE.MONKEY_BARS]="M",this.cellTypeMap[this.OBSTACLE.SLIDE]="Q",this.cellTypeMap[this.OBSTACLE.SWING]="=",this.cellTypeMap[this.OBSTACLE.END_FENCE]="E",this.cellTypeMap["."]=this.OBSTACLE.EMPTY,this.cellTypeMap.Z=this.OBSTACLE.TEACHER,this.cellTypeMap.T=this.OBSTACLE.TABLE,this.cellTypeMap.h=this.OBSTACLE.CHAIR,this.cellTypeMap.X=this.OBSTACLE.DESK,this.cellTypeMap.V=this.OBSTACLE.CUPBOARD,this.cellTypeMap.l=this.OBSTACLE.LAMP,this.cellTypeMap.D=this.OBSTACLE.DOOR,this.cellTypeMap._=this.OBSTACLE.FLOOR,this.cellTypeMap.F=this.OBSTACLE.PICNIC_TABLE,this.cellTypeMap.M=this.OBSTACLE.MONKEY_BARS,this.cellTypeMap.Q=this.OBSTACLE.SLIDE,this.cellTypeMap["="]=this.OBSTACLE.SWING,this.cellTypeMap.E=this.OBSTACLE.END_FENCE,this.cellTypeMap[this.WALLTILE.PUPIL]="p",this.cellTypeMap[this.WALLTILE.WINDOW]="w",this.cellTypeMap[this.WALLTILE.WALL]="a",this.cellTypeMap[this.WALLTILE.BOOKCASE]="b",this.cellTypeMap[this.WALLTILE.FENCE]="f",this.cellTypeMap[this.WALLTILE.GLOBE]="g",this.cellTypeMap[this.WALLTILE.PIANO]="i",this.cellTypeMap[this.WALLTILE.SHELF]="s",this.cellTypeMap[this.WALLTILE.BLACKBOARD]="B",this.cellTypeMap[this.WALLTILE.DOOR]="K",this.cellTypeMap[this.WALLTILE.END_FENCE]="e",this.cellTypeMap[this.WALLTILE.GRASS]="v",this.cellTypeMap.p=this.WALLTILE.PUPIL,this.cellTypeMap.w=this.WALLTILE.WINDOW,this.cellTypeMap.a=this.WALLTILE.WALL,this.cellTypeMap.b=this.WALLTILE.BOOKCASE,this.cellTypeMap.f=this.WALLTILE.FENCE,this.cellTypeMap.g=this.WALLTILE.GLOBE,this.cellTypeMap.i=this.WALLTILE.PIANO,this.cellTypeMap.s=this.WALLTILE.SHELF,this.cellTypeMap.B=this.WALLTILE.BLACKBOARD,this.cellTypeMap.K=this.WALLTILE.DOOR,this.cellTypeMap.e=this.WALLTILE.END_FENCE,this.cellTypeMap.v=this.WALLTILE.GRASS,this.TileMapCell={type:this.OBSTACLE.EMPTY,obstacleModel:null},this.cellPixelRect={x:0,y:0,width:30,height:30},this.camera={cellFloatPosition:{x:0,y:0},cellBounds:{visible:{x:0,y:0,width:4,height:5},attach:{x:-1,y:0,width:14,height:5},attach_wall:{x:-1,y:0,width:14,height:5},ballistics:{x:-2,y:0,width:13,height:5},detach:{x:-7,y:0,width:5,height:5},detach_wall:{x:-18,y:0,width:9,height:5},hitTest:{x:-2,y:0,width:15,height:5},scored:{x:-1,y:0,width:1,height:5}}},this.wallGrid=[[]],this.pupilGrid=[[]],this.cellGrid=[[],[],[],[],[]],this.cellsFilledIndex={x:0,y:0},this.reset=function(){this.camera.cellFloatPosition.x=0,this._resetModels()},this._resetModels=function(){},this.makeTileMap=function(){this.tidyTileMapModules();for(var e=this.moduleList.length-1;e>-1;e--)this.addNextTileMapModule()},this.addNextTileMapModule=function(){var e=s.array.getNextInPool(this.moduleList);this.addTileMapModule(this.tileMapModules[e].obstacles,this.cellGrid),this.addTileMapModule(this.tileMapModules[e].wall,this.wallGrid),this.addTileMapModule(this.tileMapModules[e].pupils,this.pupilGrid)},this.addTileMapModule=function(e,t){for(var i,n,o={x:0,y:0},r=t[0].length,a=t.length,h=e[0].length,l=0,c=a;c>l;l++){o.y=l;for(var d=0,u=h;u>d;d++)o.x=d+r,i=e[o.y][d],n=s.parse.deepClone(this.TileMapCell),n.type=this.cellTypeMap[i],n.type===this.OBSTACLE.DOOR&&(this.doorCellX=o.x),t[o.y][o.x]=n}},this.attachObstacleModelsToTileMap=function(e,t,i){var s,n={x:0,y:0},o=e,r=i.length;e:for(var a=0,h=r;h>a;a++){n.y=a;for(var l=0,c=t;c>l;l++)if(n.x=l+o,!(n.x<0)){if(n.x>=i[0].length-1)continue e;if(s=i[n.y][n.x],null===s.obstacleModel&&s.type!==this.OBSTACLE.EMPTY){var d=this.spawnModel.getNextObstacleModel(s.type);d.gridPos.x=n.x,d.gridPos.y=n.y,d.gridPixelPos.x=n.x*this.cellPixelRect.width,d.gridPixelPos.y=n.y*this.cellPixelRect.height,d.spriteVO.x=d.gridPixelPos.x+d.gameGrid.spriteOffset.x,d.spriteVO.y=d.gridPixelPos.y+d.gameGrid.spriteOffset.y,d.scored=!1,s.obstacleModel=d}}}},this.setTeacherToldle=function(e){e.spriteVO.currentAnimationId=this.gameModel.manifest.TEACHER_IDLE_MC.id},this.attachBallisticModelsToTileMap=function(e,t){var i,s=this.cellGrid,n={x:0,y:0},o=e,r=s.length;e:for(var a=0,h=r;h>a;a++){n.y=a;t:for(var l=0,c=t;c>l;l++)if(n.x=l+o,!(n.x<0)){if(n.x>=s[0].length-1)continue e;if(i=s[n.y][n.x],null!==i.obstacleModel&&i.type!==this.OBSTACLE.EMPTY&&void 0!==i.obstacleModel.childModels){var d=i.obstacleModel.childModels[0];if(null!=d.model)continue t;i.obstacleModel.spriteVO.currentAnimationId=this.gameModel.manifest.TEACHER_THROW_MC.id,this.gameTweenMax.delayedCall(.85,this.setTeacherToldle,[i.obstacleModel]);var u=this.spawnModel.getNextObstacleModel(d.type);u.gridPos.x=n.x+u.gameGrid.gridOffset.x,u.gridPos.y=n.y+u.gameGrid.gridOffset.y,u.gridPixelPos.x=u.gridPos.x*this.cellPixelRect.width,u.gridPixelPos.y=u.gridPos.y*this.cellPixelRect.height,u.spriteVO.x=u.gridPixelPos.x+u.gameGrid.spriteOffset.x,u.spriteVO.y=u.gridPixelPos.y+u.gameGrid.spriteOffset.y,u.scored=!1,d.model=u}}}},this.detachObstacleModelsFromTileMap=function(e,t,i){var s,n={x:0,y:0},o=e,r=i.length;e:for(var a=0,h=r;h>a;a++){n.y=a;for(var l=0,c=t;c>l;l++)if(n.x=l+o,!(n.x<0)){if(n.x>=i[0].length-1)continue e;if(s=i[n.y][n.x],null!==s.obstacleModel&&s.type!==this.OBSTACLE.EMPTY){var d=s.obstacleModel;if(d.gridPos.x=-10,d.gridPos.y=-10,d.gridPixelPos.x=d.gridPos.x*this.cellPixelRect.width,d.gridPixelPos.y=d.gridPos.x*this.cellPixelRect.height,d.spriteVO.x=d.gridPixelPos.x,d.spriteVO.y=d.gridPixelPos.y,void 0!==d.childModels)for(var u=0,g=d.childModels.length;g>u;u++){var p=d.childModels[u].model;null!=p&&(p.gridPos.x=-10,p.gridPos.y=-10,p.gridPixelPos.x=p.gridPos.x*this.cellPixelRect.width,p.gridPixelPos.y=p.gridPos.x*this.cellPixelRect.height,p.spriteVO.x=p.gridPixelPos.x,p.spriteVO.y=p.gridPixelPos.y,d.childModels[u].model=null)}s.obstacleModel=null}}}},this.updateBallisticsPositions=function(e,t){var i,s=this,n=s.cellGrid,o={x:0,y:0},r=e,a=n.length;e:for(var h=0,l=a;l>h;h++){o.y=h;t:for(var c=0,d=t;d>c;c++)if(o.x=c+r,!(o.x<0)){if(o.x>=n[0].length-1)continue e;if(i=n[o.y][o.x],null!==i.obstacleModel&&i.type!==this.OBSTACLE.EMPTY&&void 0!==i.obstacleModel.childModels){var u=i.obstacleModel.childModels[0];if(null===u.model)continue t;var g=u.model;g.gridPos.x+=g.gameGrid.gridOffsetIncr.x,g.gridPos.y+=g.gameGrid.gridOffsetIncr.y,g.gridPixelPos.x=g.gridPos.x*s.cellPixelRect.width,g.gridPixelPos.y=g.gridPos.y*s.cellPixelRect.height,g.spriteVO.x=g.gridPixelPos.x,g.spriteVO.y=g.gridPixelPos.y}}}},this.tidyTileMapModules=function(){for(var e=0,t=this.tileMapModules.length;t>e;e++)this.tidyTileMapModule(this.tileMapModules[e].obstacles),this.tidyTileMapModule(this.tileMapModules[e].pupils),this.tidyTileMapModule(this.tileMapModules[e].wall)},this.tidyTileMapModule=function(e){for(var t,i,s,n,o=this.cellTypeMap[this.OBSTACLE.EMPTY],r=this.cellTypeMap[this.OBSTACLE.EMPTY],a=!1,h={width:0,height:0},l=0,c=e.length;c>l;l++){t=e[l];for(var d=0,u=t.length;u>d;d++)i=t[d],a=i!==r,a&&(s=this.cellTypeMap[i],n=this.gameModel.spawnModel.obstacleTypeMap[s],h.width=n.gameGrid.gridBounds.width,h.height=n.gameGrid.gridBounds.height,this.fillCells(e,o,d,l,h.width,h.height,!0))}},this.fillCells=function(e,t,i,s,n,o,r){for(var a,h={x:0,y:0},l=0,c=o;c>l;l++){h.y=s+l;for(var d=0,u=n;u>d;d++)h.x=i+d,a=0===d&&0===l,a&&r||(e[h.y][h.x]=t)}},e.bindAll(this,"setTeacherToldle")}return r}),define("game/games/school/model/collision_model",["underscore","TweenMax","console","shims/shim_resn_utils"],function(e,t,i,s){function n(e){this.gameModel=e.gameModel,this.gameTweenMax=this.gameModel.gameTweenMax,this.tileMap=this.gameModel.tileMap,this.colonelModel=this.gameModel.colonelModel,this.OBSTACLE=this.gameModel.OBSTACLE,this.aabbContainsSegment=s.collision.boxToLineSegmentCollision,this.getColonelGridRect=function(){var e,t=this.getColonelGridPoint();return e=this.colonelModel.state===this.colonelModel.STATES.SLIDING?{x:t.x-.7,y:t.y-.7,width:.7,height:.7}:this.colonelModel.state===this.colonelModel.STATES.JUMPING?{x:t.x-.7,y:t.y-1.5,width:.7,height:1.3}:{x:t.x-.7,y:t.y-1.5,width:.7,height:1.5}},this.getColonelGridPoint=function(){var e={x:0,y:0},t=this.tileMap;return e.x=t.camera.cellFloatPosition.x+this.colonelModel.spriteVO.x/t.cellPixelRect.width,e.y=this.colonelModel.spriteVO.y/t.cellPixelRect.height,e},this.checkObstacleWalkCollisions=function(e,t){var i,s,n=this.tileMap.cellGrid,o={x:0,y:0},r=e,a=n.length,h=this.gameModel,l=this.colonelModel,c=l.spriteVO;l.vector.y+=l.gravity.y*this.gameModel.frameRateRatio,c.y+=l.vector.y*this.gameModel.frameRateRatio,l.lastGridPoint=l.gridPoint,l.gridPoint=this.getColonelGridPoint();var d=1,u=.5;l.onSurface=!1;var g=l.gridPoint,p=l.lastGridPoint,m={x:0,y:0},_={x:0,y:0},f=!1,v=!1;e:for(var E=0,y=a;y>E;E++){o.y=E;for(var T=0,S=t;S>T;T++)if(o.x=T+r,!(o.x<0)){if(o.x>=n[0].length-1)continue e;if(i=n[o.y][o.x],null!==i.obstacleModel){s=i.obstacleModel;var C=s.gameGrid.collisions.WALK;if(C&&(m.x=C.gridP1.x+s.gridPos.x-d,m.y=C.gridP1.y+s.gridPos.y,_.x=C.gridP2.x+s.gridPos.x+u,_.y=C.gridP2.y+s.gridPos.y,f=m.x<g.x&&g.x<_.x,f===!0&&(v=g.y>m.y&&p.y<=m.y,v===!0))){l.onSurface=!0,l.vector.y=0,c.y=m.y*this.tileMap.cellPixelRect.height,g.y=m.y,l.isLevelResolved()===!1&&l.state!==l.STATES.CRASHED&&(h.slidePressed===!0?l.state!==l.STATES.SLIDING&&(l.setState(l.STATES.RUNNING),l.setState(l.STATES.SLIDING)):h.jumpPressed===!0?(l.setState(l.STATES.RUNNING),l.setState(l.STATES.JUMPING)):l.setState(l.STATES.RUNNING));break e}}}}},this.checkObstacleCrashCollisions=function(e,t){{var i,s,n=this.tileMap.cellGrid,o={x:0,y:0},r=e,a=n.length,h=this.colonelModel;h.spriteVO}h.gridRect=this.getColonelGridRect();var l,c=h.gridRect;e:for(var d=0,u=a;u>d;d++){o.y=d;for(var g=0,p=t;p>g;g++)if(o.x=g+r,!(o.x<0)){if(o.x>=n[0].length-1)continue e;if(i=n[o.y][o.x],s=i.obstacleModel,null!==s&&void 0!==s){if(l=this.checkCrash(c,s),l===!0){h.setState(h.STATES.CRASHED);break e}if(s.childModels)for(var m=0,_=s.childModels.length;_>m;m++){var f=s.childModels[m].model;if(null!==f&&(l=this.checkCrash(c,f),l===!0)){h.setState(h.STATES.CRASHED);break e}}}}}},this.checkCrash=function(e,t){var i,s,n,o,r=!1,a=!1;return o=t.gameGrid.collisions.CRASH,o&&(i={x:0,y:0},s={x:0,y:0},n=e,i.x=o.gridP1.x+t.gridPos.x,i.y=o.gridP1.y+t.gridPos.y,s.x=o.gridP2.x+t.gridPos.x,s.y=o.gridP2.y+t.gridPos.y,r=this.aabbContainsSegment(i.x,i.y,s.x,s.y,n.x,n.y,n.x+n.width,n.y+n.height)),r?r:(o=t.gameGrid.collisions.CRASH2,o&&(i={x:0,y:0},s={x:0,y:0},n=e,i.x=o.gridP1.x+t.gridPos.x,i.y=o.gridP1.y+t.gridPos.y,s.x=o.gridP2.x+t.gridPos.x,s.y=o.gridP2.y+t.gridPos.y,a=this.aabbContainsSegment(i.x,i.y,s.x,s.y,n.x,n.y,n.x+n.width,n.y+n.height)),r||a)},this.addScore=function(){this.gameModel.addScore()},this.scorePassedCells=function(e,t){var i,s=this.tileMap.cellGrid,n={x:0,y:0},o=e,r=s.length;e:for(var a=0,h=r;h>a;a++){n.y=a;for(var l=0,c=t;c>l;l++)if(n.x=l+o,!(n.x<0)){if(n.x>=s[0].length-1)continue e;if(i=s[n.y][n.x],null!==i.obstacleModel&&i.type!==this.OBSTACLE.EMPTY&&i.type!==this.OBSTACLE.FLOOR){var d=i.obstacleModel;d.scored===!1&&(d.scored=!0,this.addScore())}}}}}return n}),define("game/games/school/model/school_sounds",["underscore","TweenMax","console","shims/shim_resn_utils"],function(){function e(e){this.gameModel=e.gameModel,this.gameTweenMax=this.gameModel.gameTweenMax,this.soundModel=this.gameModel.gameSoundModel,this.manifest=this.gameModel.manifest,this.count={duck:0,jump:0,crash:0},this.duck=function(){var e=++this.count.duck%2,t=[this.manifest.AUDIO_PLAYER_DUCK_0.id,this.manifest.AUDIO_PLAYER_DUCK_1.id],i=t[e];this.soundModel.play(i,{loop:0})},this.jump=function(){this.soundModel.play(this.manifest.AUDIO_PLAYER_JUMP.id,{loop:0})},this.crash=function(){var e=++this.count.crash%3,t=[this.manifest.AUDIO_PLAYER_HIT_0.id,this.manifest.AUDIO_PLAYER_HIT_1.id,this.manifest.AUDIO_PLAYER_HIT_2.id],i=t[e];this.soundModel.play(i,{loop:0})}}return e}),define("game/games/school/model/callout_model",["underscore","game/game_base/model/vo/sprite_vo"],function(e,t){function i(i){this.gameModel=i.gameModel,this.gameTweenMax=i.gameModel.gameTweenMax;var s=this.gameModel.manifest;this.spriteVO=new t,this.ANIMATION_STATES={OUTSIDE:s.UI_OUTSIDE_CALLOUT,INACTIVE:s.UI_OUTSIDE_CALLOUT},this.STATES={OUTSIDE:"OUTSIDE",INACTIVE:"INACTIVE"},this.state=this.STATES.INACTIVE,this.animationState=this.ANIMATION_STATES.INACTIVE,this.reset=function(){this.setState(this.STATES.INACTIVE)},this.setAnimationState=function(e){this.animationState=e,this.spriteVO.active=e!==this.STATES.INACTIVE,this.spriteVO.currentAnimationId=this.animationState},this.setState=function(e){switch(this.gameTweenMax.killDelayedCallsTo(this.setState),e){case this.STATES.OUTSIDE:this.setAnimationState(this.ANIMATION_STATES.OUTSIDE),this.spriteVO.y=0,this.spriteVO.alpha=0,this.spriteVO.visible=!0,this.gameTweenMax.to(this.spriteVO,.3,{y:0,alpha:1}),this.gameTweenMax.to(this.spriteVO,.3,{delay:1.5,y:-20,alpha:0,ease:window.Power2.easeInOut}),this.gameTweenMax.delayedCall(1.8,this.setState,[this.STATES.INACTIVE]);break;case this.STATES.INACTIVE:this.spriteVO.alpha=0,this.spriteVO.visible=!1,this.setAnimationState(this.ANIMATION_STATES.INACTIVE)}this.state=e},e.bindAll(this,"setState")}return i}),define("game/games/school/model/school_game_model",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/model/game_model","console","game/games/school/model/colonel_entity_model","game/games/school/model/school_spawn_model","TweenMax","game/games/school/model/tilemap_model","shims/shim_resn_utils","game/games/school/model/collision_model","game/games/school/model/school_sounds","game/games/school/model/callout_model"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p){"use strict";var m=o.extend({OBSTACLE:{EMPTY:"empty",TEACHER:"teacher",CHALK:"chalk",TABLE:"table",CHAIR:"chair",DESK:"desk",CUPBOARD:"cupboard",LAMP:"lamp",DOOR:"door",FLOOR:"floor",PICNIC_TABLE:"picnic_table",MONKEY_BARS:"monkey_bars",SLIDE:"slide",SWING:"swing",END_FENCE:"end_fence"},WALLTILE:{PUPIL:"pupil",DOOR:"doorback",WINDOW:"window",WALL:"wall",BOOKCASE:"bookcase",FENCE:"fence",GLOBE:"global",PIANO:"piano",SHELF:"shelf",BLACKBOARD:"blackboard",END_FENCE:"wall_end_fence",GRASS:"grass"},frameRateData:{frameRateRatioLast:1,lastTickMils:(new Date).getTime(),frameMils:1/60*1e3},frameRateRatio:1,gameSpeed:.9,scrollSpeed:1,obstaclesVisible:!0,obstaclesPassed:0,maxTimeRemaining:55,timeRemaining:55,score:0,scoreMultiplier:1,livesMax:3,lives:3,spawnModel:null,colonelModel:null,calloutModel:null,tileMap:null,initialize:function(e){this.EVENTS.UI_UPDATE="UI_UPDATE",this.EVENTS.CRASH="CRASH",this.EVENTS.OBSTACLES_VISIBLE_CHANGE="OBSTACLES_VISIBLE_CHANGE",this["super"]=this.constructor.__super__,this.gameInputModel=e.gameInputModel,this["super"].initialize.apply(this,arguments),this.sounds=new g({gameModel:this}),this.spawnModel=new h({gameModel:this}),this.tileMap=new c({gameModel:this}),this.colonelModel=new a({gameModel:this}),this.calloutModel=new p({gameModel:this}),this.collisionModel=new u({gameModel:this}),this.defineUtils()},defineUtils:function(){this.clamp=d.math.clamp},setMobileGameSpeed:function(){(n.flow===n.MOBILE||n.flow===n.TABLET)&&(this.scrollSpeed=1.03)},setup:function(){this["super"].setup.apply(this,arguments),this.spawnModel.makePools(),this.tileMap.makeTileMap(),this.setMobileGameSpeed(),t.bindAll(this,"start","releaseJump","showOutroWin","showOutroLose","showOutroMidLevelWin")},reset:function(){this["super"].reset.apply(this,arguments),this.jumpPressed=!1,this.slidePressed=!1,this.spawnModel.reset(),this.colonelModel.reset(),this.calloutModel.reset(),this.tileMap.reset(),this.score=0,this.lives=this.livesMax,this.timeRemaining=this.maxTimeRemaining,this.lockGameScore=!1,this.detachAllScreenCells(),this.updateModel(),this.updateReadOuts(),this.updateReadOuts(),this.setObstaclesVisible(!0),this.doorTrigger=!1},doorTrigger:!1,checkDoor:function(){var e=this.collisionModel.getColonelGridPoint();if(this.tileMap.doorCellX-.5<e.x&&this.doorTrigger===!1){this.doorTrigger=!0;var t=this.spawnModel.pool[this.OBSTACLE.DOOR][0].spriteVO;t.currentAnimationId=this.manifest.DOOR_FRONT_SMASH_MC.id,this.gameSoundModel.play(this.manifest.AUDIO_DOOR_SMASH.id,{}),this.calloutModel.setState(this.calloutModel.STATES.OUTSIDE)}},setObstaclesVisible:function(e){this.obstaclesVisible=e,this.trigger(this.EVENTS.OBSTACLES_VISIBLE_CHANGE)},start:function(){this["super"].start.apply(this,arguments)},startGame:function(){this["super"].startGame.apply(this,arguments),this.gameTweenMax.timeline.timeScale(this.gameSpeed),this.playGameMusic()},playGameMusic:function(){this.gameSoundModel.play(this.manifest.AUDIO_MUSIC.id,{})},endGame:function(){this["super"].endGame.apply(this,arguments),this.gameTweenMax.pause()},checkGameProgress:function(){var e=this.getGameProgress();e>.999&&this.showOutro()},removeLife:function(){this.lives>0&&this.lives--,this.lives<1&&this.showOutro(),this.updateReadOuts(),this.trigger(this.EVENTS.CRASH)},getDoorUnitary:function(){var e=20,t=0,i=this.tileMap.cellGrid[0].length-(e+t),s=this.tileMap.doorCellX,n=d.math.clamp(s/i,0,1);return n},getGameProgress:function(){var e=20,t=0,i=this.collisionModel.getColonelGridPoint().x-t;1>i&&(i=1);var s=this.tileMap.cellGrid[0].length-(e+t),n=d.math.clamp(i/s,0,1);return n},calculateMedalIndex:function(e){if(this.lockGameScore!==!0){e&&(this.lockGameScore=!0);var t=this.getGameProgress(),i=this.getDoorUnitary(),s=i+.5*(1-i);this.medalIndex=0,t>=.999?this.medalIndex=3:t>=s?this.medalIndex=2:t>=i&&(this.medalIndex=1),r.log("progress: ",t)}},addScore:function(){this.score+=this.scoreMultiplier,this.updateReadOuts()},updateReadOuts:function(){this.trigger(this.EVENTS.UI_UPDATE)},jumpPressed:!1,slidePressed:!1,buttonLeftPress:function(){this.slide()},buttonRightPress:function(){this.gameTweenMax.killDelayedCallsTo(this.releaseJump),this.jump()},buttonLeftRelease:function(){this.releaseSlide()},buttonRightRelease:function(){this.gameTweenMax.killDelayedCallsTo(this.releaseJump),this.gameTweenMax.delayedCall(.06,this.releaseJump)},jump:function(){this.jumpPressed=!0,this.colonelModel.setState(this.colonelModel.STATES.JUMPING)},slide:function(){this.slidePressed=!0,this.colonelModel.setState(this.colonelModel.STATES.SLIDING)},releaseJump:function(){this.jumpPressed=!1},releaseSlide:function(){this.slidePressed=!1,this.colonelModel.state===this.colonelModel.STATES.SLIDING&&this.colonelModel.setState(this.colonelModel.STATES.RUNNING)},showOutro:function(){this.gameTweenMax.killDelayedCallsTo(this.colonelModel.setState),this.buttonLeftRelease(),this.buttonRightRelease(),this.calculateMedalIndex(!0),this.setGameState(this.GAMESTATE_GAME_OUTRO);var e=.999<this.getGameProgress();this.medalIndex>0?e?(this.jump(),this.colonelModel.vector.y=-5.7,l.delayedCall(2,this.showOutroWin)):l.delayedCall(1,this.showOutroMidLevelWin):l.delayedCall(1,this.showOutroLose),l.killDelayedCallsTo(this.resolveWinOrLose),l.delayedCall(4,this.resolveWinOrLose)},showOutroWin:function(){this.colonelModel.setState(this.colonelModel.STATES.WIN)},showOutroMidLevelWin:function(){this.colonelModel.setState(this.colonelModel.STATES.WIN_MID_LEVEL),this.setObstaclesVisible(!1)},showOutroLose:function(){this.colonelModel.setState(this.colonelModel.STATES.LOSE),this.setObstaclesVisible(!1),this.playFailSound()
},frameTick:function(){if(this["super"].frameTick.apply(this,arguments),this.state===this.GAMESTATE_GAME_PLAYING&&this.updateModel(),this.state===this.GAMESTATE_GAME_OUTRO){var e=this.colonelModel.state===this.colonelModel.STATES.WIN,t=this.colonelModel.state===this.colonelModel.STATES.LOSE;e||t||(this.calculateFrameRate(),this.updateCamera(),this.attachScreenCells(),this.detachOffScreenCells(),this.checkObstacleWalkCollisions())}},updateModel:function(){this.calculateFrameRate(),this.updateCamera(),this.attachScreenCells(),this.detachOffScreenCells(),this.launchBallistics(),this.updateBallistics(),this.checkObstacleCellCollisions(),this.scorePassedObstacleCells(),this.checkGameProgress(),this.checkDoor()},updateCamera:function(){this.tileMap.camera.cellFloatPosition.x=this.tileMap.camera.cellFloatPosition.x+.095*this.frameRateRatio*this.scrollSpeed},calculateFrameRate:function(){var e=(new Date).getTime(),t=this.frameRateData,i=e-t.lastTickMils;t.lastTickMils=e,this.frameRateRatio=i/t.frameMils,this.frameRateRatio=d.math.clamp(this.frameRateRatio,.001,3)},updateBallistics:function(){var e=this.tileMap.camera.cellBounds.ballistics,t=Math.floor(this.tileMap.camera.cellFloatPosition.x),i=e.x+t,s=e.width;this.tileMap.updateBallisticsPositions(i,s)},launchBallistics:function(){var e=this.tileMap.camera.cellBounds.ballistics,t=Math.floor(this.tileMap.camera.cellFloatPosition.x),i=e.x+t,s=e.width;this.tileMap.attachBallisticModelsToTileMap(i,s)},attachScreenCells:function(){var e=Math.floor(this.tileMap.camera.cellFloatPosition.x),t=this.tileMap.camera.cellBounds.attach;this.tileMap.attachObstacleModelsToTileMap(t.x+e,t.width,this.tileMap.cellGrid),this.tileMap.attachObstacleModelsToTileMap(t.x+e,t.width,this.tileMap.pupilGrid),t=this.tileMap.camera.cellBounds.attach_wall,this.tileMap.attachObstacleModelsToTileMap(t.x+e,t.width,this.tileMap.wallGrid)},detachAllScreenCells:function(){this.tileMap.detachObstacleModelsFromTileMap(0,this.tileMap.cellGrid[0].length,this.tileMap.cellGrid),this.tileMap.detachObstacleModelsFromTileMap(0,this.tileMap.cellGrid[0].length,this.tileMap.pupilGrid),this.tileMap.detachObstacleModelsFromTileMap(0,this.tileMap.cellGrid[0].length,this.tileMap.wallGrid)},detachOffScreenCells:function(){var e=Math.floor(this.tileMap.camera.cellFloatPosition.x),t=this.tileMap.camera.cellBounds.detach;this.tileMap.detachObstacleModelsFromTileMap(t.x+e,t.width,this.tileMap.cellGrid),this.tileMap.detachObstacleModelsFromTileMap(t.x+e,t.width,this.tileMap.pupilGrid),t=this.tileMap.camera.cellBounds.detach_wall,this.tileMap.detachObstacleModelsFromTileMap(t.x+e,t.width,this.tileMap.wallGrid)},scorePassedObstacleCells:function(){var e=this.tileMap.camera.cellBounds.scored,t=Math.floor(this.tileMap.camera.cellFloatPosition.x),i=e.x+t,s=e.width;this.collisionModel.scorePassedCells(i,s)},checkObstacleWalkCollisions:function(){var e=this.tileMap.camera.cellBounds.hitTest,t=Math.floor(this.tileMap.camera.cellFloatPosition.x);this.collisionModel.checkObstacleWalkCollisions(e.x+t,e.width)},checkObstacleCellCollisions:function(){var e=this.tileMap.camera.cellBounds.hitTest,t=Math.floor(this.tileMap.camera.cellFloatPosition.x),i=e.x+t,s=e.width;this.collisionModel.checkObstacleWalkCollisions(i,s),n.schoolGodMode!==!0&&this.collisionModel.checkObstacleCrashCollisions(i,s)},destroy:function(){this["super"].destroy.apply(this,arguments)}});return m}),define("game/games/school/view/school_game_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_view","pixi","console","shims/shim_resn_utils"],function(e,t,i,s,n,o,r,a,h){"use strict";var l=o.extend({colonelSprite:null,colonelAnimations:{},calloutSprite:null,calloutAnimations:{},bg:null,spritePool:{},teacherLose:null,teacherAnimations:{},pupilAnimations:{},backgroundContainer:null,teacherContainer:null,obstacleContainer:null,gameLayers:{},initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.manifest=this.gameModel.manifest,this.OBSTACLE=this.gameModel.OBSTACLE,this.WALLTILE=this.gameModel.WALLTILE,this.gameTweenMax=this.gameModel.gameTweenMax,this.end_game_screen=new r.DisplayObjectContainer,this.bg=this.spriteFromID(this.manifest.BACKGROUND.id),this.bg.alpha=1,this.gameContainer.addChild(this.bg),this.makeSprites(),this.resetSprites(),t.bindAll(this,"setGameState","crash","onChangeObstaclesVisible"),this.gameModel.on(this.gameModel.EVENTS.STATE_CHANGE,this.setGameState),this.gameModel.on(this.gameModel.EVENTS.CRASH,this.crash),this.gameModel.on(this.gameModel.EVENTS.OBSTACLES_VISIBLE_CHANGE,this.onChangeObstaclesVisible),this.updateSprites()},makeSprites:function(){this.makeLayers(),this.makeAllWallTiles(),this.makeAllObstacles(),this.makeTeachers(),this.makeDoor(),this.makeColonel(),this.makeCallout(),this.updateSprites()},resetSprites:function(){for(var e in this.spritePool){var t=this.spritePool[e];if(void 0!==t)for(var i=t.length-1;i>-1;i--)t[i]&&(t[i].position.x=-256)}},makeLayers:function(){this.gameLayers={},this.background=this.spriteFromID(this.manifest.BACKGROUND.id);var e=-25;this.background.y=-120,this.background.x=-20,this.gameLayers.background=new r.DisplayObjectContainer,this.gameContainer.addChild(this.gameLayers.background),this.gameLayers.background.y=e,this.gameLayers.background.addChild(this.background),this.gameLayers.wall=new r.DisplayObjectContainer,this.gameLayers.background.addChild(this.gameLayers.wall),this.gameLayers[this.WALLTILE.PUPIL]=new r.DisplayObjectContainer,this.gameLayers.background.addChild(this.gameLayers[this.WALLTILE.PUPIL]),this.gameLayers[this.OBSTACLE.TEACHER]=new r.DisplayObjectContainer,this.gameContainer.addChild(this.gameLayers[this.OBSTACLE.TEACHER]),this.gameLayers.colonel=new r.DisplayObjectContainer,this.gameContainer.addChild(this.gameLayers.colonel),this.obstacleContainer=new r.DisplayObjectContainer,this.gameContainer.addChild(this.obstacleContainer),this.gameLayers.obstacle=new r.DisplayObjectContainer,this.obstacleContainer.addChild(this.gameLayers.obstacle)},makeCallout:function(){this.calloutSprite=this.spriteFromID(this.manifest.UI_OUTSIDE_CALLOUT.id),this.gameContainer.addChild(this.calloutSprite)},makeColonel:function(){this.colonelSprite=this.movieClipFromID(this.manifest.COLONEL_RUN_MC.id),this.colonelSprite.loop=!0,this.colonelSprite.play();for(var e,t=[this.manifest.COLONEL_RUN_MC.id,this.manifest.COLONEL_JUMP_MC.id,this.manifest.COLONEL_SLIDE_MC.id,this.manifest.COLONEL_WIN_MC.id,this.manifest.COLONEL_LOSE_MC.id],i=0,s=t.length;s>i;i++)e=t[i],this.colonelAnimations[e]=this.movieClipFramesFromID(e);this.gameLayers.colonel.addChild(this.colonelSprite)},getContainerFromKey:function(e){return void 0!==this.gameLayers[e]?this.gameLayers[e]:null},makeAllWallTiles:function(){for(var e in this.WALLTILE){var t=this.WALLTILE[e],i=this.gameModel.spawnModel.obstacleTypeMap[t],s=this.getContainerFromKey(t);null===s&&(s=this.gameLayers.wall),this.spritePool[t]=[],this.makeObstacles(t,i,this.spritePool[t],this.gameModel.spawnModel.total[t],s)}a.log("wall sprite pools:",this.spritePool)},makeAllObstacles:function(){for(var e in this.OBSTACLE){var t=this.OBSTACLE[e];if(t!==this.OBSTACLE.EMPTY){var i=this.gameModel.spawnModel.obstacleTypeMap[t],s=this.getContainerFromKey(t);null===s&&(s=this.gameLayers.obstacle),this.spritePool[t]=[],this.makeObstacles(t,i,this.spritePool[t],this.gameModel.spawnModel.total[t],s)}}a.log("sprites pools:",this.spritePool)},updateObstacles:function(){var e,t;for(var i in this.spritePool)e=this.gameModel.spawnModel.pool[i],t=this.spritePool[i],void 0!==e&&void 0!==t&&this.updateSpritesFromModels(t,e),i===this.gameModel.OBSTACLE.TEACHER&&this.updateMovieClipsFromModels(t,this.teacherAnimations,e,!1,!0),i===this.gameModel.OBSTACLE.DOOR&&this.updateMovieClipsFromModels(t,this.doorAnimations,e,!1,!0)},makeDoor:function(){this.doorAnimations={};for(var e=this.gameModel.manifest,t=[e.DOOR_FRONT_MC.id,e.DOOR_FRONT_SMASH_MC.id],i=0,s=t.length;s>i;i++){var n=t[i];this.doorAnimations[n]=this.movieClipFramesFromID(n)}this.spritePool[this.gameModel.OBSTACLE.DOOR][0].loop=!1},makeTeachers:function(){this.teacherAnimations={};for(var e=this.gameModel.manifest,t=[e.TEACHER_IDLE_MC.id,e.TEACHER_THROW_MC.id],i=0,s=t.length;s>i;i++){var n=t[i];this.teacherAnimations[n]=this.movieClipFramesFromID(n)}this.teacherLose=this.movieClipFromID(e.TEACHER_IDLE_MC.id),this.teacherLose.x=150,this.teacherLose.y=25,this.teacherLose.loop=!0,this.teacherLose.play()},makeObstacles:function(e,t,i,s,n){for(var o=0,r=s;r>o;o++){var a=t.spriteId;if(t.spriteIds&&(a=t.spriteIds[o%(t.spriteIds.length-1)]),null!==a){var h;if("MOVIECLIP"===this.gameModel.manifest[a].type){var l=this.gameModel.manifest[a].frameNames.length-1;h=this.movieClipFromID(a),h.loop=!0,h.gotoAndPlay(3*o%l)}else h=this.spriteFromID(a);i.push(h),n.addChild(h)}}},show:function(){this["super"].show.apply(this,arguments)},render:function(){this.gameModel.isAnimating()&&this.updateSprites()},updateMovieClipFromModel:function(e,t,i){if(void 0!==i){var s=i.spriteVO.currentAnimationId;void 0!==t[s]&&e.textures!==t[s]&&(e.textures=t[s])}},updateAnimationFromModel:function(e,t,i){if(void 0!==i){var s=i.spriteVO.currentAnimationId;void 0!==t[s]&&e.texture!==t[s]&&(e.texture=t[s])}},updateAnimationsFromModels:function(e,t,i){if(void 0!==i)for(var s,n,o,r=0,a=e.length;a>r;r++)s=e[r],n=i[r],o=n.spriteVO.currentAnimationId,void 0!==t[o]&&s.texture!==t[o]&&(s.texture=t[o])},crash:function(){this.gameTweenMax.killTweensOf(this.gameContainer);for(var e=6,t=15,i=e;i>-1;i--){var s=i/e*t,n=h.math.isOdd(i)?-1:1,o=(t-2*i)*(1/30);this.gameTweenMax.to(this.gameContainer,.05,{delay:o,x:s*n,overwrite:"auto"})}},onChangeObstaclesVisible:function(){var e=this.gameModel.obstaclesVisible;this.obstacleContainer.visible=e,this.gameLayers[this.OBSTACLE.TEACHER].visible=e,this.gameLayers[this.WALLTILE.PUPIL].visible=e,this.background.tint=e?16777215:0,this.gameLayers.wall.visible=e;var t=this.gameModel.colonelModel,i=e===!1&&t.state===t.STATES.LOSE;i?(this.teacherLose.alpha=0,this.gameContainer.addChild(this.teacherLose),this.gameTweenMax.to(this.teacherLose,.8,{alpha:1,ease:window.Power2.easeInOut})):(this.teacherLose.alpha=0,this.teacherLose.parent&&this.teacherLose.parent.removeChild(this.teacherLose))},updateSprites:function(){{var e=this.gameModel.tileMap,t=this.gameModel.collisionModel;this.gameModel.spawnModel}this.obstacleContainer.x=0-e.cellPixelRect.width*e.camera.cellFloatPosition.x,this.gameLayers[this.OBSTACLE.TEACHER].x=this.obstacleContainer.x,this.gameLayers.wall.x=this.obstacleContainer.x,this.gameLayers.wall.y=-120,this.gameLayers[this.WALLTILE.PUPIL].x=this.obstacleContainer.x,this.gameLayers[this.WALLTILE.PUPIL].y=78;var i=t.getColonelGridPoint();this.gameContainer.y=e.cellPixelRect.height+(i.y-4)*-e.cellPixelRect.height*.6,this.updateObstacles(),this.updateSpriteFromModel(this.calloutSprite,this.gameModel.calloutModel),this.updateSpriteFromModel(this.colonelSprite,this.gameModel.colonelModel),this.updateMovieClipFromModel(this.colonelSprite,this.colonelAnimations,this.gameModel.colonelModel)},destroy:function(){this.stopListening(),this.off(),this["super"].destroy.apply(this,arguments)},setGameState:function(){}});return l}),define("game/games/school/view/school_game_ui_view",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/view/game_ui_view","pixi","console","game/games/school/view/school_progress_bar","game/games/ui/health/game_health_ui_view","shims/shim_resn_utils"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";var d=o.extend({barLabel:null,livesLabel:null,uiFont:{font:"16px frucade",fill:"white"},uiFontDrop:{font:"16px frucade",fill:"0xE4002B"},initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.makeUI(),t.bindAll(this,"updateReadOuts"),this.gameModel.on(this.gameModel.EVENTS.UI_UPDATE,this.updateReadOuts)},show:function(){this["super"].show.apply(this,arguments)},updateReadOuts:function(){this.gameUIHeartView.updateCount(this.gameModel.lives);var e=this.gameModel.getGameProgress();e*=1.03,e=c.math.clamp(e,0,1),this.progressBar.setProgress(e)},makeUI:function(){this.gameUIHeartView=new l({viewContainer:this.viewContainer,gameModel:this.gameModel,x:0,y:7}),this.progressBar=new h({gameModel:this.gameModel}),this.viewContainer.addChild(this.progressBar.mc),this.progressBar.mc.x=49,this.progressBar.mc.y=7},render:function(){},destroy:function(){this.stopListening(),this.off()}});return d}),define("game/games/school/view/school_game_screens_view",["jquery","underscore","backbone","model/loader_collection","config","pixi","game/game_base/view/screens/game_screen_instructions","game/game_base/view/screens/game_screen_intro","game/game_base/view/screens/game_screen_lose","game/game_base/view/screens/game_screen_win","game/game_base/view/screens/game_screen_pause","game/game_base/view/screens/game_screen_cutscene","game/game_base/view/screens/game_screen_countdown","game/game_base/view/game_screens_view","shims/shim_resn_utils","game/game_base/view/screens/game_screen_pause_btn"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m){"use strict";var _=g.extend({initialize:function(){this["super"]=this.constructor.__super__,this["super"].initialize.apply(this,arguments)},setup:function(){this["super"].setup.apply(this,arguments),this.createScreens(),this.addEvents()},addEvents:function(){this.listenTo(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE,this.onGameStateChange)},removeEvents:function(){this.stopListening(this.gameModel,this.gameModel.EVENTS.STATE_CHANGE)},onGameStateChange:function(){t.each(this.screens,function(e){e.onGameStateChange()})},createScreens:function(){var e={gameModel:this.gameModel,viewContainer:this.viewContainer,cutsceneMC:{id:"SCHOOL_CUTSCENE_MC"}},t=["SCHOOL_CUTSCENE_1","SCHOOL_CUTSCENE_2"];this.screens=[new r(e),new a(e),new u(e),new h(e),new l(e),new c(e),new m(e),new d(e,t)]},show:function(){this["super"].show.apply(this,arguments)},render:function(){},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}});return _}),define("game/games/school/school_game_main",["jquery","underscore","backbone","model/loader_collection","config","game/game_base/game_main","game/game_config","game/games/school/model/school_game_model","game/games/school/model/school_asset_manifest","game/games/school/view/school_game_view","game/games/school/view/school_game_ui_view","game/games/school/view/school_game_screens_view"],function(e,t,i,s,n,o,r,a,h,l,c,d){"use strict";var u=o.extend({initialize:function(e){this["super"]=this.constructor.__super__;var i=t.extend({},e),s=new a({gameShellModel:e.gameShellModel,gameInputModel:e.gameInputModel,gameId:e.gameId,gameIndex:e.gameIndex,manifest:h});i.gameModel=s,i.gameView=new l({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameUIView=new c({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),i.gameScreensView=new d({gameModel:s,pixiStageModel:e.gameShellModel.pixiStageModel}),this["super"].initialize.apply(this,[i])}});return u}),define("game/game_config",["game/games/courtroom/courtroom_game_main","game/games/baby/baby_game_main","game/games/hangry/hangry_game_main","game/games/gun_fight/gun_fight_game_main","game/games/train/train_game_main","game/games/school/school_game_main"],function(e,t,i,s,n,o){var r={LEVELS:[{GameMain:o,gameId:"school"},{GameMain:t,gameId:"baby"},{GameMain:n,gameId:"train"},{GameMain:e,gameId:"courtroom"},{GameMain:s,gameId:"gun_fight"},{GameMain:i,gameId:"hangry"}]};return r}),define("game/model/vo/game_score_vo",[],function(){var e=function(){this.gameId=null,this.highScore=0,this.completed=!1,this.attempted=!1,this.scoreRating=0,this.medalIndex=-1,this.firstTry=!0,this.preWinPlays=0,this.postWinPlays=0};return e}),define("game/model/game_score_model",["backbone","underscore","game/game_config","game/model/vo/game_score_vo","config"],function(e,t,i,s,n){var o=e.Model.extend({defaults:{started:!1,totalScore:0,gameScores:null,allLevelsCompleteFlag:!1},initialize:function(){},start:function(){if(!this.get("started")){this.set("started",!0),this.createScores(),t.bindAll(this,"onAllLevelsCompleteFlagChanged");try{var e=localStorage.getItem("games_allLevelsComplete");null!==e&&this.set("allLevelsCompleteFlag","true"===e?!0:!1)}catch(i){}this.on("change:allLevelsCompleteFlag",this.onAllLevelsCompleteFlagChanged)}},onAllLevelsCompleteFlagChanged:function(){try{localStorage.setItem("games_allLevelsComplete",this.get("allLevelsCompleteFlag")?"true":"false")}catch(e){}},createScores:function(){var e=t.map(i.LEVELS,function(e){var i,n="gamescore_"+e.gameId,o=null;try{o=localStorage.getItem(n)}catch(r){}return i=null!=o&&t.isString(o)?JSON.parse(o):new s,i.gameId=e.gameId,i});this.set("gameScores",e)},getGameVOById:function(e){return this.getGameById(e)},setScoreById:function(e,t){var i=this.getGameById(t);e>i.medalIndex&&(i.medalIndex=e),i.completed=!0,this.saveGameScore(i)},setGameAttempted:function(e){var t=this.getGameById(e);t.attempted=!0},saveGameScore:function(e){var t="gamescore_"+e.gameId;try{var i=JSON.stringify(e);localStorage.setItem(t,i)}catch(s){}},getResultById:function(e){return this.getGameById(e).completed},getGameById:function(e){return t.findWhere(this.get("gameScores"),{gameId:e})},getGamesCompleted:function(){var e=t.filter(this.get("gameScores"),function(e){return e.completed}),i=this.get("gameScores").length;return n.SHOW_TRAIN||(i-=1),e.length===i},getShareMedals:function(){var e=this.getMedalTotals(),t={gold:e[2].total,silver:e[1].total,bronze:e[0].total};return t},getMedalTotals:function(){return[{total:this.getMedalCount(1),title:"bronze"},{total:this.getMedalCount(2),title:"silver"},{total:this.getMedalCount(3),title:"gold"}]},getMedalCount:function(e){var i=t.filter(this.get("gameScores"),function(t){return t.medalIndex===e});return i.length},getAllGamesHaveMedals:function(){for(var e,t=this.get("gameScores"),i=0;i<t.length;i++)if((n.SHOW_TRAIN||i!==n.TRAIN_GAME_INDEX)&&(e=t[i],e.medalIndex<=0))return!1;return!0},getAnyGamesHaveMedals:function(){for(var e,t=this.get("gameScores"),i=0;i<t.length;i++)if((n.SHOW_TRAIN||i!==n.TRAIN_GAME_INDEX)&&(e=t[i],e.medalIndex>0))return!0;return!1},getNextIncompleteGameIndex:function(){for(var e,t=this.get("gameScores"),i=0;i<t.length;i++)if((n.SHOW_TRAIN||i!==n.TRAIN_GAME_INDEX)&&(e=t[i],!e.completed))return i;return 0},getAccumulatedScore:function(){},destroy:function(){}});return new o}),define("game/model/fps_model",["backbone","underscore","game/game_config","shims/shim_resn_utils","console"],function(e){var t=e.Model.extend({QUALITY_HIGH:"QUALITY_HIGH",QUALITY_LOW:"QUALITY_LOW",defaults:{quality:"QUALITY_HIGH"},fps:60,testMetrics:{seconds:8,targetFPS:60,targetHighQualityUnitary:.6},lastTime:0,fpsHistory:[],frames:0,initialize:function(){this.fpsHistory=[]},start:function(){this.lastTime=(new Date).getTime()},stop:function(){},calculateQuality:function(){var e=this._testQuality();e!==this.QUALITY_HIGH&&this.set("quality",e)},_testQuality:function(){var e=this.QUALITY_HIGH,t=this.testMetrics.seconds;if(t>this.fpsHistory.length)return this.QUALITY_HIGH;for(var i=0,s=this.fpsHistory,n=0;t>n;n++)i+=s[n];var o=i/(this.testMetrics.targetFPS*t);return o<this.testMetrics.targetHighQualityUnitary&&(e=this.QUALITY_LOW),e},tick:function(){this.frames++;var e=(new Date).getTime(),t=.001*(e-this.lastTime);t>1&&(this.lastTime=e,this.fps=this.frames/t,this.frames=0,this.fps>1&&(this.fpsHistory.unshift(this.fps),this.fpsHistory.length>1e3&&this.fpsHistory.pop()),this.calculateQuality())}});return t}),define("game/model/pixi_stage_model",["underscore","backbone","config","pixi","game/model/fps_model","console"],function(e,t,i,s,n,o){var r=t.Model.extend({renderer:null,stage:null,gameViewContainer:null,gameUIViewContainer:null,gameScreensViewContainer:null,rgbSplitterFilter:null,pixelGrid:null,fpsModel:null,defaults:{started:!1,stageWidth:1024,stageHeight:768,pixelScale:4,bgColour:6710886},initialize:function(){this.createScreens()},createScreens:function(){this.gameViewContainer=new s.DisplayObjectContainer,this.gameViewContainer.scale.x=this.gameViewContainer.scale.y=this.get("pixelScale"),this.gameUIViewContainer=new s.DisplayObjectContainer,this.gameUIViewContainer.scale.x=this.gameUIViewContainer.scale.y=this.get("pixelScale"),this.gameScreensViewContainer=new s.DisplayObjectContainer,this.gameScreensViewContainer.scale.x=this.gameScreensViewContainer.scale.y=this.get("pixelScale"),this.gameShellScreensViewContainer=new s.DisplayObjectContainer,this.gameShellScreensViewContainer.scale.x=this.gameShellScreensViewContainer.scale.y=this.get("pixelScale")},start:function(){this.attributes.started||(this.set("started",!0),this.renderer=s.autoDetectRenderer(this.get("stageWidth"),this.get("stageHeight"),{resolution:1}),s.scaleModes.DEFAULT=s.scaleModes.NEAREST,this.stage=new s.Stage(this.get("bgColour"),!0),this.stage.filterArea={x:0,y:0,width:this.get("stageWidth"),height:this.get("stageHeight")},this.stage.addChild(this.gameViewContainer),this.stage.addChild(this.gameUIViewContainer),this.stage.addChild(this.gameScreensViewContainer),this.stage.addChild(this.gameShellScreensViewContainer),this.fpsModel=new n,this.fpsModel.on("change:quality",this.onQualityChange,this),this.addRGBSplitter(),this.addPixelGrid())},onQualityChange:function(e,t){t===this.fpsModel.QUALITY_LOW&&(o.log("SETTING PIXI TO LOW QUALITY"),this.stage.filterArea=null,this.stage.filters=null)},addRGBSplitter:function(){this.rgbSplitterFilter=new s.RGBSplitFilter,this.rgbSplitterFilter.red={x:3,y:-1},this.rgbSplitterFilter.green={x:0,y:0},this.rgbSplitterFilter.blue={x:-4,y:2},this.stage.filters=[this.rgbSplitterFilter]},addPixelGrid:function(){this.pixelGrid=s.Sprite.fromImage(i.CDN+"/img/games/common/screen_overlay.png",!1),this.stage.addChild(this.pixelGrid),this.pixelGrid.alpha=.22,this.pixelGrid.scale.x=1,this.pixelGrid.scale.y=1},show:function(){},render:function(){this.fpsModel.tick(),this.renderer.render(this.stage)},hide:function(){},resize:function(){},destroy:function(){}}),a=new r;return a}),define("game/pixi_loader_controller",[],function(){var e={started:!1,initialize:function(){},start:function(){this.started||(this.started=!0)}};return e.initialize(),e}),define("game/shell/model/game_shell_model",["underscore","backbone","TweenMax","config","game/model/game_input_model","game/model/game_score_model","game/model/pixi_stage_model","game/pixi_loader_controller","view/common/communicator","game/model/game_sound_model","game/screens/game_screen_asset_manifest"],function(e,t,i,s,n,o,r,a,h,l,c){var d=t.Model.extend({gameInputModel:null,gameScoreModel:null,pixiStageModel:null,pixiLoaderController:null,pixiGameScreenAssets:null,STATE_TITLE_SCREEN:"STATE_TITLE_SCREEN",STATE_PROGRESS_SCREEN:"STATE_PROGRESS_SCREEN",STATE_RESULTS_SCREEN:"STATE_RESULTS_SCREEN",STATE_CAREER_SCREEN:"STATE_CAREER_SCREEN",STATE_IN_GAME:"STATE_IN_GAME",initialized:!1,defaults:{state:null,currentGameId:null,currentGameIndex:0,numOfGames:0,gameShellEmbed:!1},EVENTS:{FRAME_TICK:"FRAME_TICK"},initialize:function(){e.bindAll(this,"playIntro"),this.createModels(),this.addEvents()},addEvents:function(){this.listenTo(h,h.EVENTS.GAME.AUDIO.REWARD,this.onAudioReward),this.listenTo(h,h.EVENTS.GAME.AUDIO.LOSE,this.onAudioLose),this.listenTo(h,h.EVENTS.GAME.AUDIO.CLICK,this.onAudioClick),this.listenTo(h,h.EVENTS.GAME.AUDIO.MOUSEOVER,this.onAudioMouseover),this.listenTo(h,h.EVENTS.GAME.AUDIO.CUTSCREEN_MUSIC,this.onAudioCutscreenChange),this.listenTo(h,h.EVENTS.GAME.AUDIO.COUNTDOWN.THREE,this.onThree),this.listenTo(h,h.EVENTS.GAME.AUDIO.COUNTDOWN.TWO,this.onTwo),this.listenTo(h,h.EVENTS.GAME.AUDIO.COUNTDOWN.ONE,this.onOne),this.listenTo(h,h.EVENTS.GAME.AUDIO.COUNTDOWN.GO,this.onGo),this.listenTo(this,"change:state",this.onStateChange)},onAudioReward:function(){this.gameSoundModel.play(this.manifest.AUDIO_REWARD.id,{loop:0})},onAudioLose:function(e){e?(this.gameSoundModel.stop(this.manifest.AUDIO_LOSE.id,{}),this.gameSoundModel.play(this.manifest.AUDIO_LOSE.id,{loop:0})):this.gameSoundModel.stop(this.manifest.AUDIO_LOSE.id,{})},onThree:function(){this.gameSoundModel.play(this.manifest.AUDIO_COUNTDOWN_3.id,{loop:0})},onTwo:function(){this.gameSoundModel.play(this.manifest.AUDIO_COUNTDOWN_2.id,{loop:0})},onOne:function(){this.gameSoundModel.play(this.manifest.AUDIO_COUNTDOWN_1.id,{loop:0})},onGo:function(){this.gameSoundModel.play(this.manifest.AUDIO_COUNTDOWN_GO.id,{loop:0})},playIntro:function(){if(s.FLOW===s.FLOWS.EXTENDED){var t=this;e.delay(function(){t.gameSoundModel.play(t.manifest.AUDIO_WHINE.id,{loop:0})},3e3)}},setup:function(){this.initialized||(this.initialized=!0,this.manifest=c,this.reset())},onArcadeAniComplete:function(){this.gameSoundModel.play(this.manifest.CUTSCREEN_MUSIC.id,{loop:-1})},reset:function(){this.set("state",this.STATE_TITLE_SCREEN)},createModels:function(){this.gameInputModel=new n,this.gameScoreModel=o,this.pixiStageModel=r,this.pixiLoaderController=a,this.gameSoundModel=new l,this.gameInputModel.start(),this.gameScoreModel.start(),this.pixiStageModel.start(),this.pixiLoaderController.start()},onStateChange:function(){var e=this.get("state");switch(e){case this.STATE_TITLE_SCREEN:this.onTitleScreen();break;case this.STATE_PROGRESS_SCREEN:this.onProgressScreen();break;case this.STATE_RESULTS_SCREEN:this.gameScoreModel.get("allLevelsCompleteFlag")!==!0&&(h.trigger(h.EVENTS.GAME_TRACKING,h.GAME_TRACK_IDS.GAME_COMPLETE),this.gameScoreModel.set("allLevelsCompleteFlag",!0)),h.trigger(h.EVENTS.GAME_TRACKING,h.GAME_TRACK_IDS.GAME_RESULTS_SCREEN),this.onResultsScreen();break;case this.STATE_CAREER_SCREEN:break;case this.STATE_IN_GAME:}},onTitleScreen:function(){},onProgressScreen:function(){this.setCutScreenVolume(1)},onResultsScreen:function(){this.setCutScreenVolume(1)},onAudioCutscreenChange:function(e){var t=e?1:0;this.setCutScreenVolume(t)},onAudioClick:function(){this.gameSoundModel.play(this.manifest.AUDIO_CLICK.id,{loop:0})},onAudioMouseover:function(){this.gameSoundModel.play(this.manifest.AUDIO_MOUSEOVER.id,{loop:0})},setCutScreenVolume:function(e){this.gameSoundModel.setVolume(this.manifest.CUTSCREEN_MUSIC.id,e)},frameTick:function(){this.trigger(this.EVENTS.FRAME_TICK)},getCurrentGameId:function(){return this.get("currentGameId")},setScoreById:function(e,t){this.gameScoreModel.setScoreById(e,t)},getResultById:function(e){return this.gameScoreModel.getResultById(e)},getGamesCompleted:function(){return this.gameScoreModel.getGamesCompleted()},setGameAttempted:function(e){this.gameScoreModel.setGameAttempted(e)},getAllGamesHaveMedals:function(){return this.gameScoreModel.getAllGamesHaveMedals()},getAnyGamesHaveMedals:function(){return this.gameScoreModel.getAnyGamesHaveMedals()},getMedalTotals:function(){return this.gameScoreModel.getMedalTotals()},removeEvents:function(){},hide:function(){this.gameSoundModel.stopAllSounds()},destroy:function(){this.gameSoundModel.stopAllSounds(),this.removeEvents()}});return d}),define("game/shell/view/game_buttons_view",["jquery","underscore","backbone","model/loader_collection","config","shims/shim_resn_utils"],function(e,t,i,s,n,o){"use strict";var r=i.View.extend({gameInputModel:null,friction:0,dist:{left:10,right:9},yRatio:{left:0,right:0},tgYRatio:{left:0,right:0},$leftBtn:null,$rightBtn:null,initialize:function(t){this.gameInputModel=t.gameInputModel,n.EMBEDDED||(this.addEvents(),this.$leftBtn=e(".js-left-btn"),this.$rightBtn=e(".js-right-btn"),(n.FLOW===n.FLOWS.MOBILE||n.FLOW===n.FLOWS.TABLET)&&(this.applyCss(this.$leftBtn[0],1e3),this.applyCss(this.$rightBtn[0],1e3)))},addEvents:function(){this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_RELEASE,this.onButtonRelease)},onButtonPress:function(e){switch(this.friction=.8,e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:this.onButtonLeftPress();break;case this.gameInputModel.BUTTONS.BUTTON_RIGHT:this.onButtonRightPress()}},onButtonRelease:function(e){switch(this.friction=.6,e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:this.onButtonLeftRelease();break;case this.gameInputModel.BUTTONS.BUTTON_RIGHT:this.onButtonRightRelease()}},onButtonLeftPress:function(){n.FLOW===n.FLOWS.EXTENDED?this.tgYRatio.left=1:this.applyCss(this.$leftBtn[0],0)},onButtonRightPress:function(){n.FLOW===n.FLOWS.EXTENDED?this.tgYRatio.right=1:this.applyCss(this.$rightBtn[0],0)},onButtonLeftRelease:function(){n.FLOW===n.FLOWS.EXTENDED?this.tgYRatio.left=0:this.applyCss(this.$leftBtn[0],1e3)},onButtonRightRelease:function(){n.FLOW===n.FLOWS.EXTENDED?this.tgYRatio.right=0:this.applyCss(this.$rightBtn[0],1e3)},show:function(){},render:function(){n.FLOW!==n.FLOWS.EXTENDED||n.EMBEDDED||(this.yRatio.left+=o.math.simpleEasing(this.tgYRatio.left,this.yRatio.left,this.friction),this.yRatio.right+=o.math.simpleEasing(this.tgYRatio.right,this.yRatio.right,this.friction),this.setPositions())},setPositions:function(){if(this.$leftBtn){var e=this.dist.left*this.yRatio.left;this.applyCss(this.$leftBtn[0],e)}if(this.$rightBtn){var t=this.dist.right*this.yRatio.right;this.applyCss(this.$rightBtn[0],t)}},applyCss:function(e,t){var i="translate3d(0px, "+t+"%, 0px)";e.style.msTransform=e.style.MsTransform=i,e.style.transform=i,e.style.WebkitTransform=i},hide:function(){this.onHideComplete()},onResize:function(){10===n.getIEVersion()&&this.$el.css({position:"absolute",top:e(".js-arcade-container").height()+"px",width:"100%"})},removeEvents:function(){this.stopListening(this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.stopListening(this.gameInputModel.EVENTS.BUTTON_RELEASE,this.onButtonRelease)},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}});return r}),define("game/screens/progress_game_screen",["jquery","underscore","backbone","model/loader_collection","config","pixi","view/common/communicator","console","model/app_model","TweenMax"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=i.View.extend({ICON_SPACING:31,activeIcons:null,inactiveIcons:null,initialize:function(e){t.bindAll(this,"beginGame","onButtonPress"),this.gameShellModel=e.gameShellModel,this.gameScoreModel=this.gameShellModel.gameScoreModel,this.pixiStageModel=this.gameShellModel.pixiStageModel,this.gameInputModel=this.gameShellModel.gameInputModel,this.createScreen()},screenIsActive:function(){return this.gameShellModel.get("state"),this.gameShellModel.get("state")===this.gameShellModel.STATE_PROGRESS_SCREEN&&this.shown&&h.get("page")===h.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:this.beginGame()}},setup:function(){},createScreen:function(){this.screenContainer=new o.DisplayObjectContainer,this.pixiGameScreenAssets=this.gameShellModel.pixiGameScreenAssets,this.activeIcons=[],this.inactiveIcons=[],this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_SCHOOL")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_BABY")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_TRAIN")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_COURTROOM")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_GUNFIGHT")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_HANGRY")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_SCHOOL_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_BABY_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_TRAIN_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_COURTROOM_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_GUNFIGHT_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_HANGRY_OFF"));
var e=this.pixiGameScreenAssets.spriteFromID("BG_GRAY");this.screenContainer.addChild(e);var t=this.pixiGameScreenAssets.spriteFromID("TITLE_LEVEL");this.screenContainer.addChild(t),this.indicatorContainer=new o.DisplayObjectContainer,this.screenContainer.addChild(this.indicatorContainer)},updateIndicator:function(){this.indicatorContainer.removeChildren();for(var e,t,i,s=this.gameScoreModel.get("gameScores"),r=this.gameShellModel.get("currentGameIndex"),a=s.length-1;a>=0;a--)if(n.SHOW_TRAIN||a!==n.TRAIN_GAME_INDEX){var h=new o.DisplayObjectContainer,l=s[a];e=l.attempted||a===r?this.activeIcons[a]:this.inactiveIcons[a],h.addChild(e),t=34+a*this.ICON_SPACING,i=118,n.SHOW_TRAIN||(a>n.TRAIN_GAME_INDEX?(e.texture.moved||(e.texture.moved=!0,e.texture.trim.x-=this.ICON_SPACING/2),t-=this.ICON_SPACING/2):(e.texture.moved||(e.texture.moved=!0,e.texture.trim.x+=this.ICON_SPACING/2),t+=this.ICON_SPACING/2)),a===r&&this.addRedOutlineBox(t,i),this.indicatorContainer.addChild(h)}},addRedOutlineBox:function(e,t){var i=this.pixiGameScreenAssets.spriteFromID("TITLE_LEVEL_SELECT_BOX");return i.texture.trim.x=0,i.texture.trim.y=0,i.x=e,i.y=t,i.hitArea=new o.Rectangle(i.x,i.y,i.width,i.height),this.indicatorContainer.addChild(i),i},onShellStateChange:function(){var e=this.gameShellModel.get("state");e===this.gameShellModel.STATE_PROGRESS_SCREEN?this.show():this.hide()},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.updateIndicator(),this.pixiStageModel.gameShellScreensViewContainer.addChild(this.screenContainer),l.killDelayedCallsTo(this.beginGame),l.delayedCall(2,this.beginGame)},hide:function(){this.shown=!1,n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),l.killDelayedCallsTo(this.beginGame),this.pixiStageModel.gameShellScreensViewContainer.removeChild(this.screenContainer)},beginGame:function(){l.killDelayedCallsTo(this.beginGame),r.trigger(r.EVENTS.GAME.LOAD)},render:function(){},destroy:function(){l.killDelayedCallsTo(this.beginGame),this.stopListening(),this.off()}});return c}),define("game/screens/title_game_screen",["jquery","underscore","backbone","model/loader_collection","config","pixi","view/common/communicator","game/game_base/view/arcade_button_view","model/app_model"],function(e,t,i,s,n,o,r,a,h){"use strict";var l=i.View.extend({initialize:function(e){t.bindAll(this,"onClick","onButtonPress"),this.gameShellModel=e.gameShellModel,this.pixiStageModel=this.gameShellModel.pixiStageModel,this.gameInputModel=this.gameShellModel.gameInputModel,this.buttons=[],this.createScreen()},screenIsActive:function(){return this.gameShellModel.get("state"),this.gameShellModel.get("state")===this.gameShellModel.STATE_TITLE_SCREEN&&this.shown&&h.get("page")===h.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:this.onClick()}},setup:function(){},createScreen:function(){this.screenContainer=new o.DisplayObjectContainer,this.pixiGameScreenAssets=this.gameShellModel.pixiGameScreenAssets;var e=this.pixiGameScreenAssets.spriteFromID("BG_GRAY");this.screenContainer.addChild(e),this.addTitleScreen(),this.addPlayButton()},addTitleScreen:function(){var e=this.pixiGameScreenAssets.spriteFromID("COLONEL_QUEST_TITLE");this.screenContainer.addChild(e);var t=this.pixiGameScreenAssets.spriteFromID("COLONEL_8BIT");this.screenContainer.addChild(t)},addPlayButton:function(){var e=this.pixiGameScreenAssets.spriteFromID("PLAY"),i=this.pixiGameScreenAssets.spriteFromID("PLAY_CLICK"),s=new a({graphic:e,rollover:i});s.addMouseDownEvent(t.bind(this.onClick,this)),this.screenContainer.addChild(s.graphic),this.screenContainer.addChild(s.graphicRollover)},onClick:function(){this.gameShellModel.getGamesCompleted();r.trigger(n.EMBEDDED?r.EVENTS.GAME.LOAD:r.EVENTS.GAME.SCREENS.SHELL.CAREER)},onShellStateChange:function(){var e=this.gameShellModel.get("state");e===this.gameShellModel.STATE_TITLE_SCREEN?this.show():this.hide()},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.pixiStageModel.gameShellScreensViewContainer.addChild(this.screenContainer)},hide:function(){this.shown=!1,n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.pixiStageModel.gameShellScreensViewContainer.removeChild(this.screenContainer)},render:function(){},destroy:function(){this.stopListening(),this.off()}});return l}),define("game/screens/results_game_screen",["jquery","underscore","backbone","model/loader_collection","model/coupon_model","config","pixi","view/common/communicator","game/game_base/view/arcade_button_view","shims/shim_resn_utils","model/app_model","TweenMax","console"],function(e,t,i,s,n,o,r,a,h,l,c,d){"use strict";var u=i.View.extend({firstTimeShown:!0,uiFont:{font:"16px frucade"},initialize:function(e){t.bindAll(this,"onShareClick","onCollectPrizeClick","onReplayClick","onButtonPress"),this.gameShellModel=e.gameShellModel,this.pixiStageModel=this.gameShellModel.pixiStageModel,this.gameInputModel=this.gameShellModel.gameInputModel,this.createScreen()},screenIsActive:function(){return this.gameShellModel.get("state"),this.gameShellModel.get("state")===this.gameShellModel.STATE_RESULTS_SCREEN&&this.shown&&c.get("page")===c.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!o.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:case this.gameInputModel.BUTTONS.BUTTON_RIGHT:case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:this.onReplayClick()}},setup:function(){},createScreen:function(){this.screenContainer=new r.DisplayObjectContainer,this.pixiGameScreenAssets=this.gameShellModel.pixiGameScreenAssets,this.createBackground();var e=this.pixiGameScreenAssets.spriteFromID("RESULTS");this.screenContainer.addChild(e),this.medalTextContainer=new r.DisplayObjectContainer,this.screenContainer.addChild(this.medalTextContainer),this.addMedals(),this.makeShareToolTip(),this.createShareBtn(),n.isCouponAvailable()&&this.createCollectPrizeBtn(),this.createReplayBtn(),this.manuallyAdjustButtonLayout()},createBackground:function(){var e=this.pixiGameScreenAssets.spriteFromID("BG_GRAY");this.screenContainer.addChild(e)},addMedals:function(){var e=this.pixiGameScreenAssets.spriteFromID("RESULTS_MEDAL_BRONZE"),t=this.pixiGameScreenAssets.spriteFromID("RESULTS_MEDAL_SILVER"),i=this.pixiGameScreenAssets.spriteFromID("RESULTS_MEDAL_GOLD");this.screenContainer.addChild(e),this.screenContainer.addChild(t),this.screenContainer.addChild(i)},updateMedalText:function(){this.medalTextContainer.removeChildren();var e=this.pixiGameScreenAssets.spriteFromID("BRONZE"),t=this.pixiGameScreenAssets.spriteFromID("SILVER"),i=this.pixiGameScreenAssets.spriteFromID("GOLD");this.medalTextContainer.addChild(e),this.medalTextContainer.addChild(t),this.medalTextContainer.addChild(i);var s=this.gameShellModel.getMedalTotals();this.addMedalCount(e,s[0]),this.addMedalCount(t,s[1]),this.addMedalCount(i,s[2])},addMedalCount:function(e,t){var i="X"+t.total,s=new r.BitmapText(i,this.uiFont);s.x=e.texture.trim.x+e.width/2-s.width/2,10===o.getIEVersion()&&(s.x-=112),s.y=e.texture.trim.y+8,this.medalTextContainer.addChild(s)},createShareBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("SHARE"),i=this.pixiGameScreenAssets.spriteFromID("SHARE_CLICK");this.shareButtonView=new h({graphic:e,rollover:i}),this.shareButtonView.addMouseDownEvent(t.bind(this.onShareClick,this)),this.screenContainer.addChild(this.shareButtonView.graphic),this.screenContainer.addChild(this.shareButtonView.graphicRollover)},createReplayBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("LEVEL_SELECT"),i=this.pixiGameScreenAssets.spriteFromID("LEVEL_SELECT_HOVER");this.levelSelectButtonView=new h({graphic:e,rollover:i}),this.levelSelectButtonView.addMouseDownEvent(t.bind(this.onReplayClick,this)),this.screenContainer.addChild(this.levelSelectButtonView.graphic),this.screenContainer.addChild(this.levelSelectButtonView.graphicRollover)},manuallyAdjustButtonLayout:function(){this.levelSelectButtonView.graphic.x=this.levelSelectButtonView.graphicRollover.x=this.shareButtonView.graphic.x+this.shareButtonView.graphic.texture.trim.x+50,this.levelSelectButtonView.graphic.y=this.levelSelectButtonView.graphicRollover.y=this.shareButtonView.graphic.y+this.shareButtonView.graphic.texture.trim.y,n.isCouponAvailable()?(this.shareButtonView.graphic.x=this.shareButtonView.graphicRollover.x=this.shareButtonView.graphic.x-2,this.prizeButtonView.graphic.x=this.prizeButtonView.graphicRollover.x=this.prizeButtonView.graphic.x+1):(this.shareButtonView.graphic.x=this.shareButtonView.graphicRollover.x=this.shareButtonView.graphic.x+19,this.levelSelectButtonView.graphic.x=this.levelSelectButtonView.graphicRollover.x=this.levelSelectButtonView.graphic.x+30)},createCollectPrizeBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("PRIZE"),i=this.pixiGameScreenAssets.spriteFromID("PRIZE_CLICK"),s=new h({graphic:e,rollover:i});this.prizeButtonView=s,s.addMouseDownEvent(t.bind(this.onCollectPrizeClick,this)),this.screenContainer.addChild(s.graphic),this.screenContainer.addChild(s.graphicRollover),n.once("coupon_created",function(){s.setVisible(!1)},this)},makeShareToolTip:function(){var e,i,s,n;this.shareToolTip=new r.DisplayObjectContainer,this.screenContainer.addChild(this.shareToolTip),this.shareToolTip.x=33,this.shareToolTip.y=115,e=this.pixiGameScreenAssets.spriteFromID("TOOLTIP_SHARE_BG"),this.shareToolTip.addChild(e),i=this.pixiGameScreenAssets.spriteFromID("TOOLTIP_SHARE_FB"),s=this.pixiGameScreenAssets.spriteFromID("TOOLTIP_SHARE_FB_CLICK"),n=new h({graphic:i,rollover:s}),n.addMouseDownEvent(t.bind(this.onFacebookClick,this)),this.shareToolTip.addChild(n.graphic),this.shareToolTip.addChild(n.graphicRollover),i.x=s.x=3,i.y=s.y=1,i=this.pixiGameScreenAssets.spriteFromID("TOOLTIP_SHARE_TWITTER"),s=this.pixiGameScreenAssets.spriteFromID("TOOLTIP_SHARE_TWITTER_CLICK"),n=new h({graphic:i,rollover:s}),n.addMouseDownEvent(t.bind(this.onTwitterClick,this)),this.shareToolTip.addChild(n.graphic),this.shareToolTip.addChild(n.graphicRollover),i.x=s.x=30,i.y=s.y=1},showShareToolTip:function(e){this.shareToolTip&&(e?(this.shareToolTip.visible=!0,this.shareToolTip.alpha=0,d.to(this.shareToolTip,.2,{alpha:1})):(this.shareToolTip.visible=!1,this.shareToolTip.alpha=0))},onShareClick:function(){this.showShareToolTip(!this.shareToolTip.visible)},onTwitterClick:function(){var e=this.gameShellModel.gameScoreModel.getShareMedals();a.trigger(a.EVENTS.SITE.SHARE.TWITTER.SHARE_GAME_RESULTS,e)},onFacebookClick:function(){var e=this.gameShellModel.gameScoreModel.getShareMedals();a.trigger(a.EVENTS.SITE.SHARE.FACEBOOK.SHARE_GAME_RESULTS,e)},onCollectPrizeClick:function(){a.trigger(a.EVENTS.GAME.CLAIM_PRIZE),a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.GAME_COUPON_COLLECTED)},onReplayClick:function(){a.trigger(a.EVENTS.GAME.SCREENS.SHELL.CAREER)},onShellStateChange:function(){var e=this.gameShellModel.get("state");e===this.gameShellModel.STATE_RESULTS_SCREEN?this.show():this.hide()},show:function(){this.shown=!0,o.ENABLE_GAME_KEY_NAVIGATION&&this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.updateMedalText(),this.pixiStageModel.gameShellScreensViewContainer.addChild(this.screenContainer),this.showShareToolTip(!1),n.isCouponAvailable()&&a.trigger(a.EVENTS.GAME_TRACKING,a.GAME_TRACK_IDS.GAME_COUPON_OFFERED)},hide:function(){this.shown=!1,this.showShareToolTip(!1),o.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.pixiStageModel.gameShellScreensViewContainer.removeChild(this.screenContainer)},render:function(){},destroy:function(){this.stopListening(),this.off(),n.off(null,null,this)}});return u}),define("game/screens/career_game_screen",["jquery","underscore","backbone","model/loader_collection","config","pixi","view/common/communicator","console","game/game_base/view/arcade_button_view","model/app_model","shims/shim_resn_utils"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";var d=i.View.extend({ICON_SPACING:31,activeIcons:null,inactiveIcons:null,buttonHitAreaScale:1,resultsButton:null,progressHeader:null,resultsButtonActive:!1,indicatorContainerBaseY:0,indicatorContainerOffsetY:0,headerBaseY:0,headerOffsetY:0,NO_RESULTS_HEADER_OFFSET_Y:15,NO_RESULTS_INDICTAORS_OFFSET_Y:25,MEDALS_ONLY_HEADER_OFFSET_Y:5,MEDALS_ONLY_INDICTAORS_OFFSET_Y:15,progressItems:[],initialize:function(e){t.bindAll(this,"onGameClick","onResultsClick","onButtonMouseOver","onButtonMouseOut","onButtonPress"),10===n.getIEVersion()&&(this.buttonHitAreaScale=.15),this.gameShellModel=e.gameShellModel,this.gameScoreModel=this.gameShellModel.gameScoreModel,this.pixiStageModel=this.gameShellModel.pixiStageModel,this.pixiGameScreenAssets=this.gameShellModel.pixiGameScreenAssets,this.gameInputModel=this.gameShellModel.gameInputModel,this.createScreen(),this.headerBaseY=this.progressHeader.y,this.indicatorContainerBaseY=this.indicatorContainer.y,this.headerOffsetY=this.headerBaseY+this.NO_RESULTS_HEADER_OFFSET_Y,this.indicatorContainerOffsetY=this.indicatorContainerBaseY+this.NO_RESULTS_INDICTAORS_OFFSET_Y},screenIsActive:function(){return this.gameShellModel.get("state"),this.gameShellModel.get("state")===this.gameShellModel.STATE_CAREER_SCREEN&&this.shown&&l.get("page")===l.PAGES.GAME},onButtonPress:function(e){if(this.screenIsActive()&&!n.isMobileFlow())switch(e){case this.gameInputModel.BUTTONS.BUTTON_LEFT:this.selectRightItem();break;case this.gameInputModel.BUTTONS.BUTTON_RIGHT:this.selectCurrentItem();break;case this.gameInputModel.BUTTONS.BUTTON_ENTER:case this.gameInputModel.BUTTONS.BUTTON_SPACE:this.selectCurrentItem()}},setup:function(){},createScreen:function(){this.screenContainer=new o.DisplayObjectContainer,this.activeIcons=[],this.inactiveIcons=[],this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_SCHOOL")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_BABY")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_TRAIN")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_COURTROOM")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_GUNFIGHT")),this.activeIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_HANGRY")),this.createMedals(),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_SCHOOL_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_BABY_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_TRAIN_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_COURTROOM_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_GUNFIGHT_OFF")),this.inactiveIcons.push(this.pixiGameScreenAssets.spriteFromID("LEVEL_ICON_HANGRY_OFF"));var e=this.pixiGameScreenAssets.spriteFromID("BG_GRAY");this.screenContainer.addChild(e),this.progressHeader=this.pixiGameScreenAssets.spriteFromID("TITLE_LEVEL_SELECT"),this.progressHeader.y=-15,this.screenContainer.addChild(this.progressHeader),this.indicatorContainer=new o.DisplayObjectContainer,this.screenContainer.addChild(this.indicatorContainer),this.createResultsBtn()},createMedals:function(){var e=this.gameShellModel.manifest;this.medalStates=[{alpha:0,texture:this.pixiGameScreenAssets.textureFromID(e.LEVEL_SELECT_BRONZE.id)},{alpha:1,texture:this.pixiGameScreenAssets.textureFromID(e.LEVEL_SELECT_BRONZE.id)},{alpha:1,texture:this.pixiGameScreenAssets.textureFromID(e.LEVEL_SELECT_SILVER.id)},{alpha:1,texture:this.pixiGameScreenAssets.textureFromID(e.LEVEL_SELECT_GOLD.id)}];for(var t=0,i=6;i>t;t++)this.activeIcons[t].medalSprite=this.pixiGameScreenAssets.spriteFromID(e.LEVEL_SELECT_BRONZE.id)},updateIndicator:function(){this.indicatorContainer.removeChildren();var e,t=this.gameScoreModel.get("gameScores"),i=this.gameShellModel.get("currentGameIndex");this.curSelectedItem=null;for(var s,r,a=t.length-1;a>=0;a--)if(n.SHOW_TRAIN||a!==n.TRAIN_GAME_INDEX){var h=new o.DisplayObjectContainer,l=t[a],d=!1;if(l.attempted?e=this.activeIcons[a]:(e=this.inactiveIcons[a],d=!0),e.y=-25,h.addChild(e),h.iconClip=e,h.iconClip.visible=!0,h.interactive=!0,h.buttonMode=!0,h.gameIndex=a,h.mouseover=this.onButtonMouseOver,h.mouseout=this.onButtonMouseOut,h.mousedown=this.onGameClick,h.touchstart=this.onGameClick,s=34+a*this.ICON_SPACING,r=93,n.SHOW_TRAIN||(a>n.TRAIN_GAME_INDEX?(e.texture.moved||(e.texture.moved=!0,e.texture.trim.x-=this.ICON_SPACING/2),s-=this.ICON_SPACING/2):(e.texture.moved||(e.texture.moved=!0,e.texture.trim.x+=this.ICON_SPACING/2),s+=this.ICON_SPACING/2)),e.medalSprite&&this.gameShellModel.getAnyGamesHaveMedals()){var u=c.math.clamp(t[a].medalIndex,0,3);h.addChild(e.medalSprite),e.medalSprite.x=s+11,e.medalSprite.y=r+32,e.medalSprite.texture=this.medalStates[u].texture,e.medalSprite.alpha=this.medalStates[u].alpha}var g=this.addRedOutlineBox(s,r);if(h.hitArea=g.hitArea,h.outlineBox=g,h.outlineBox.visible=!1,h.isInactiveIcon=d,d){var p=this.activeIcons[a];p.y=e.y,h.addChild(p),h.hoverIconClip=p,h.hoverIconClip.visible=!1}this.indicatorContainer.addChild(h),this.progressItems[a]=h,h.index=a,n.isMobileFlow()||a!==i||this.selectItem(h)}},onButtonMouseOver:function(e){var t=e.target;this.selectItem(t)},onButtonMouseOut:function(e){var t=e.target;this.deselectItem(t)},selectItem:function(e){this.deselectCurrentItem(),this.curSelectedItem=e,this.curSelectItemIndex=e.index,e&&e.outlineBox&&(r.trigger(r.EVENTS.GAME.AUDIO.MOUSEOVER),e.outlineBox.visible=!0,e.isInactiveIcon?(e.hoverIconClip.visible=!0,e.iconClip.visible=!1):e.iconClip.visible=!0)},deselectCurrentItem:function(){this.curSelectedItem&&(this.deselectItem(this.curSelectedItem),this.curSelectedItem=null)},deselectItem:function(e){e&&e.outlineBox&&(e.outlineBox.visible=!1,e.isInactiveIcon?(e.hoverIconClip.visible=!1,e.iconClip.visible=!0):e.iconClip.visible=!0)},selectCurrentItem:function(){this.curSelectedItem&&this.selectGame(this.curSelectedItem)},selectLeftItem:function(){var e=this.curSelectItemIndex-1;0>e&&(e=this.progressItems.length-1);var t=this.progressItems[e];this.selectItem(t)},selectRightItem:function(){var e=this.curSelectItemIndex+1;e>=this.progressItems.length&&(e=0);var t=this.progressItems[e];this.selectItem(t)},addRedOutlineBox:function(e,t){var i=this.pixiGameScreenAssets.spriteFromID("TITLE_LEVEL_SELECT_BOX");return i.texture.trim.x=0,i.texture.trim.y=0,i.x=e,i.y=t,i.hitArea=new o.Rectangle(i.x,i.y,i.width*this.buttonHitAreaScale,i.height*this.buttonHitAreaScale),this.indicatorContainer.addChild(i),i},createReplayBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("REPLAY");e.interactive=!0,e.buttonMode=!0,e.mousedown=this.onReplayClick,e.touchstart=this.onReplayClick;var t=e.texture.trim.x,i=e.texture.trim.y;e.hitArea=new o.Rectangle(t,i,e.width*this.buttonHitAreaScale,e.height),this.screenContainer.addChild(e)},createResultsBtn:function(){var e=this.pixiGameScreenAssets.spriteFromID("RESULTS_BTN"),i=this.pixiGameScreenAssets.spriteFromID("RESULTS_CLICK");this.resultsButton=new h({graphic:e,rollover:i}),this.resultsButton.addMouseDownEvent(t.bind(this.onResultsClick,this)),this.screenContainer.addChild(this.resultsButton.graphic),this.screenContainer.addChild(this.resultsButton.graphicRollover)},onGameClick:function(e){this.selectGame(e.target)},selectGame:function(e){r.trigger(r.EVENTS.GAME.AUDIO.CLICK),r.trigger(r.EVENTS.GAME.GOTO,e.gameIndex);var t=e.gameIndex+1;r.trigger(r.EVENTS.GAME_TRACKING,r.GAME_TRACK_IDS.LEVEL_SELECT,{eventlabel:"Level "+t})},onResultsClick:function(){r.trigger(r.EVENTS.GAME.SCREENS.SHELL.RESULTS)},onShellStateChange:function(){var e=this.gameShellModel.get("state");e===this.gameShellModel.STATE_CAREER_SCREEN?this.show():this.hide()},show:function(){this.shown=!0,n.ENABLE_GAME_KEY_NAVIGATION&&(this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.listenTo(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress)),this.updateIndicator();var e=this.gameShellModel.getAllGamesHaveMedals();this.resultsButtonActive=e,this.resultsButton&&(this.resultsButton.graphic.visible=e,this.resultsButton.graphicRollover.visible=e),e?(this.indicatorContainer.y=this.indicatorContainerBaseY,this.progressHeader.y=this.indicatorContainerBaseY):this.gameShellModel.getAnyGamesHaveMedals()?(this.indicatorContainer.y=this.indicatorContainerBaseY+this.MEDALS_ONLY_INDICTAORS_OFFSET_Y,this.progressHeader.y=this.headerBaseY+this.MEDALS_ONLY_HEADER_OFFSET_Y):(this.indicatorContainer.y=this.indicatorContainerBaseY+this.NO_RESULTS_INDICTAORS_OFFSET_Y,this.progressHeader.y=this.headerBaseY+this.NO_RESULTS_HEADER_OFFSET_Y),this.pixiStageModel.gameShellScreensViewContainer.addChild(this.screenContainer)},hide:function(){this.shown=!1,n.ENABLE_GAME_KEY_NAVIGATION&&this.stopListening(this.gameInputModel,this.gameInputModel.EVENTS.BUTTON_PRESS,this.onButtonPress),this.pixiStageModel.gameShellScreensViewContainer.removeChild(this.screenContainer)},render:function(){},destroy:function(){this.stopListening(),this.off()}});return d}),define("game/shell/view/game_screens_view",["jquery","underscore","backbone","model/loader_collection","config","game/shell/model/game_shell_model","game/screens/progress_game_screen","game/screens/title_game_screen","game/screens/results_game_screen","game/screens/career_game_screen"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=i.View.extend({gameShellModel:null,gameInputModel:null,pixiStageModel:null,initialize:function(e){this.gameShellModel=e.gameShellModel,this.createScreens(),this.addEvents(),this.onShellStateChange()},addEvents:function(){this.listenTo(this.gameShellModel,"change:state",this.onShellStateChange)},onShellStateChange:function(){t.each(this.screens,function(e){e.onShellStateChange()},this)},removeEvents:function(){this.stopListening(this.gameShellModel,"change:state")},setup:function(){},createScreens:function(){this.screens=[new a({gameShellModel:this.gameShellModel}),new r({gameShellModel:this.gameShellModel}),new h({gameShellModel:this.gameShellModel}),new l({gameShellModel:this.gameShellModel})]},show:function(){},render:function(){},hide:function(){this.onHideComplete()},onHideComplete:function(){this.trigger("hideComplete")},onResize:function(){},destroy:function(){this.removeEvents(),this.stopListening(),this.off()}});return c}),define("game/shell/view/game_shell_view",["jquery","underscore","backbone","config","game/shell/view/game_buttons_view","game/shell/view/game_screens_view"],function(e,t,i,s,n,o){"use strict";var r=i.View.extend({gameInputModel:null,pixiStageModel:null,flickerIndex:0,flickerValues:null,initialize:function(){t.bindAll(this,"onResize"),this.gameInputModel=this.model.gameInputModel,this.pixiStageModel=this.model.pixiStageModel},setup:function(){this.createScreensView(),this.createButtonsView(),this.flickerValues=[.85,.9,.87,.88,.8,.86,.95,.9,.9,.9,.89,.85,.88,.85,.97,.86,.86,.8,.83,.85,.85,.85,.85,.8,.88,.83,.85,.85,.84,.87,.87,.84],this.$arcadeShadow=e(".js-arcade-shadow")},createButtonsView:function(){this.gameButtonView=new n({el:e(".js-arcade-btn-container"),gameInputModel:this.gameInputModel})},createScreensView:function(){this.gameScreensView=new o({gameShellModel:this.model})},render:function(){this.gameScreensView.render(),this.gameButtonView.render(),this.pixiStageModel.render(),10!==s.getIEVersion()&&this.updateFlicker()},updateFlicker:function(){this.$arcadeShadow&&this.$arcadeShadow[0]&&(this.$arcadeShadow[0].style.opacity=this.flickerValues[this.flickerIndex],this.flickerIndex++,this.flickerIndex>this.flickerValues.length&&(this.flickerIndex=0))},show:function(){this.resize(),e(window).on("resize",this.onResize)},hide:function(){this.pixiStageModel&&this.pixiStageModel.hide(),this.onHideComplete()},onHideComplete:function(){this.trigger("hideComplete")},onResize:function(){this.gameButtonView&&this.gameButtonView.onResize()},resize:function(){var e=window.innerWidth,t=window.innerHeight;this.pixiStageModel.resize(e,t)},destroy:function(){this.gameScreensView.destroy(),e(window).off("resize",this.onResize),this.stopListening(),this.off()}});return r}),define("game/shell/game_shell_main",["jquery","underscore","backbone","model/loader_collection","config","model/app_model","game/model/render_model","game/shell/model/game_shell_model","game/shell/view/game_shell_view","game/game_config","game/game_base/model/pixi_asset_library","game/screens/game_screen_asset_manifest","view/common/communicator","model/stage_model","TweenMax"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g){"use strict";var p=i.View.extend({arcadeContainer:null,gameShellModel:null,gameShellView:null,games:null,initialized:!1,initialize:function(e){this.arcadeContainer=e.arcadeContainer,this.initGameShell(),this.initGames(),this.loadGameProgress(),this.addEvents()},loadGameProgress:function(){var e=this.gameShellModel.gameScoreModel.getNextIncompleteGameIndex();this.gameShellModel.set("currentGameIndex",e)},initGameShell:function(){this.gameShellModel=new a,this.gameShellView=new h({model:this.gameShellModel})},initGames:function(){this.games=t.map(l.LEVELS,function(e,t){if("train"!==e.gameId||n.SHOW_TRAIN){var i={gameIndex:t,gameId:e.gameId,gameShellModel:this.gameShellModel,gameInputModel:this.gameShellModel.gameInputModel,gameScoreModel:this.gameShellModel.gameScoreModel,pixiStageModel:this.gameShellModel.pixiStageModel,pixiLoaderController:this.gameShellModel.pixiLoaderController};return new e.GameMain(i)}return null},this),this.gameShellModel.set("numOfGames",l.LEVELS.length)},addEvents:function(){this.listenTo(r,r.EVENTS.FRAME_TICK,this.onFrameTick),this.listenTo(u,u.EVENTS.GAME.DEBUG_WIN,this.onDebugWinGame),this.listenTo(u,u.EVENTS.GAME.NEXT,this.onNextGame),this.listenTo(u,u.EVENTS.GAME.GOTO,this.onGotoGame),this.listenTo(u,u.EVENTS.GAME.LOAD,this.onLoadGame),this.listenTo(u,u.EVENTS.GAME.PAUSE,this.onPauseGame),this.listenTo(u,u.EVENTS.GAME.SCREENS.SHELL.PROGRESS,this.onProgressSelect),this.listenTo(u,u.EVENTS.GAME.SCREENS.SHELL.CAREER,this.onCareerSelect),this.listenTo(u,u.EVENTS.GAME.SCREENS.SHELL.RESULTS,this.onResultsSelect),o.on("change:menu_visibility",this.onMenuVisibleChanged,this),g.on("show_embed",this.onEmbedTriggered,this),this.listenTo(u,u.EVENTS.SITE.SHARE.FACEBOOK.SHARE_CURRENT_PAGE,this.onFooterItemTriggered),this.listenTo(u,u.EVENTS.SITE.SHARE.TWITTER.SHARE_CURRENT_PAGE,this.onFooterItemTriggered),this.listenTo(u,u.EVENTS.SITE.EMBEDS.SHOW_EMBED,this.onFooterItemTriggered),this.listenTo(u,u.EVENTS.SITE.DESKTOP.LEGAL,this.onFooterItemTriggered)},onEmbedTriggered:function(){this.pauseAllGames()},onFooterItemTriggered:function(){this.pauseAllGames()},onMenuVisibleChanged:function(e,t){t&&this.pauseAllGames()},onProgressSelect:function(){this.gameShellModel.set("state",this.gameShellModel.STATE_PROGRESS_SCREEN)},onCareerSelect:function(){this.gameShellModel.set("state",this.gameShellModel.STATE_CAREER_SCREEN)},onResultsSelect:function(){this.gameShellModel.set("state",this.gameShellModel.STATE_RESULTS_SCREEN)},onLoadGame:function(){this.gameShellModel.set("state",this.gameShellModel.STATE_IN_GAME),this.loadCurrentGame()},onDebugWinGame:function(){var e=this.gameShellModel.get("currentGameId"),t=this.getGameMainById(e);t&&t.gameModel.isPlaying()&&(t.gameModel.endGame(),this.gameShellModel.setScoreById(3,e),this.endGameProceed())},onNextGame:function(){this.endGameProceed()},saveScore:function(){},endGameProceed:function(){this.currentGame&&this.currentGame.setInactive();var e=this.gameShellModel.get("currentGameIndex");if(e===this.games.length-1)if(this.gameShellModel.gameScoreModel.getAllGamesHaveMedals()){var t=this.gameShellModel.getMedalTotals();t&&t.length>=3&&this.gameShellModel.gameScoreModel.getAllGamesHaveMedals()&&u.trigger(u.EVENTS.GAME.AUDIO.REWARD),this.onResultsSelect()}else this.onCareerSelect();else this.nextGame(),this.onProgressSelect()},onPauseGame:function(){this.currentGame&&this.currentGame.gameModel.loaded&&this.currentGame.gameModel.pause()},onGotoGame:function(e){this.gameShellModel.set("state",this.gameShellModel.STATE_IN_GAME),this.updateCurrentGameByIndex(e),this.loadCurrentGame()},loadCurrentGame:function(){var e=this.gameShellModel.get("currentGameId");this.loadGame(e)},updateCurrentGameByIndex:function(e){void 0!==e?this.gameShellModel.set("currentGameIndex",e):e=this.gameShellModel.get("currentGameIndex");var t=l.LEVELS[e].gameId;this.gameShellModel.set("currentGameId",t)},updateCurrentGameById:function(e){void 0!==e?this.gameShellModel.set("currentGameId",e):e=this.gameShellModel.get("currentGameId");var t=l.LEVELS.indexOf(e);this.gameShellModel.set("currentGameIndex",t)},prevGame:function(){var e=this.gameShellModel.get("currentGameIndex");if(e>0){e--,this.gameShellModel.set("currentGameIndex",e),this.updateCurrentGameByIndex(),this.loadCurrentGame();var t=this.getGameMainById(l.LEVELS[e].gameId);t||this.prevGame()}},nextGame:function(){var e=this.gameShellModel.get("currentGameIndex");e<this.games.length-1?(e++,this.gameShellModel.set("currentGameIndex",e),this.updateCurrentGameByIndex()):n.DEBUG&&(e=0,this.gameShellModel.set("currentGameIndex",e),this.updateCurrentGameByIndex());var t=this.getGameMainById(l.LEVELS[e].gameId);t||this.nextGame()},onFrameTick:function(){this.gameShellModel.frameTick(),this.gameShellView.render()},setup:function(){if(!this.initialized){if(this.initialized=!0,this.gameShellModel.pixiGameScreenAssets=new c(null,d),this.gameShellModel.pixiGameScreenAssets.makeMovieClips(),this.gameShellModel.setup(),this.gameShellView.setup(),n.DEBUG&&n.isMobileFlow()){var i=e("<div>");i.css({top:"20%",left:"50%",marginLeft:"35%",width:"17%",height:"20%",position:"absolute",backgroundColor:"rgba(255, 0, 0, 0)"}),e(".js-arcade-mobile").append(i),i.on("touchend",t.bind(this.onDebugProceedGameButton,this))}t.each(this.games,function(e){e&&e.setupScreens()},this);var s=this.getQueryParams(),o=s.game;if(o)this.updateCurrentGameById(o);else{var r=this.gameShellModel.get("currentGameIndex");this.updateCurrentGameByIndex(r)}}},onDebugProceedGameButton:function(){this.onDebugWinGame(),this.gameShellModel.gameInputModel.trigger(this.gameShellModel.gameInputModel.EVENTS.BUTTON_PRESS,this.gameShellModel.gameInputModel.BUTTONS.BUTTON_ENTER)},start:function(){},loadGame:function(e){if(this.unloadCurrentGame(),this.gameShellModel.set("currentGameId",e),this.currentGame=this.getGameMainById(e),!this.currentGame)throw new Error('Game not initialized for "'+e+'" in initGames() function of game_shell_main.js');this.currentGame.showScreens(),this.currentGame.gameModel.loaded?this.startCurrentGame():(this.listenToOnce(this.currentGame.gameModel,u.EVENTS.GAME.LOAD_COMPLETE,this.onGameLoaded),this.currentGame.load())},getGameMainById:function(e){return t.find(this.games,function(t){return t?t.gameModel.gameId===e:void 0})},onGameLoaded:function(){this.startCurrentGame()},startCurrentGame:function(){this.currentGame.setup(),this.currentGame.start(),this.currentGame.show()},unloadCurrentGame:function(){this.currentGame&&this.currentGame.hide()},getQueryParams:function(e){var i=(e||window.location.search).substring(1);return i?t.chain(i.split("&")).map(function(e){var t=e.split("=");return[t[0],decodeURIComponent(t[1])]}).object().value():!1},show:function(){this.gameShellModel.reset(),r.start(),this.start(),this.gameShellView.show(),this.arcadeContainer.prepend(this.gameShellView.pixiStageModel.renderer.view),this.gameShellModel.playIntro(),n.DEBUG&&-1!==window.location.search.indexOf("allgames")&&this.onCareerSelect()
},onArcadeAniComplete:function(){this.gameShellModel.onArcadeAniComplete()},pauseAllGames:function(){t.each(this.games,function(e){e&&e.gameModel.pause()},this)},hide:function(){this.gameShellModel.hide(),this.gameShellView.hide(),this.currentGame&&u.trigger(u.EVENTS.GAME_TRACKING,u.GAME_TRACK_IDS.GAME_QUIT_LEVEL,this.currentGame.gameModel.getTrackData()),r.stop(),t.each(this.games,function(e){e&&e.hide()},this),this.onHideComplete()},onHideComplete:function(){this.trigger("hideComplete")},onResize:function(){this.gameShellView.onResize()},removeEvents:function(){o.off("change:menu_visibility",this.onMenuVisibleChanged),g.off("show_embed",this.onEmbedTriggered),this.stopListening(r,r.EVENTS.FRAME_TICK),this.stopListening(u,u.EVENTS.GAME.NEXT),this.stopListening(),this.off()},destroy:function(){this.removeEvents()}});return p}),define("view/pages/mobile/arcade",["jquery","underscore","view/pages/mobile/mobile_base_view","game/screens/game_screen_asset_manifest","view/common/communicator","backbone","game/shell/game_shell_main","model/app_model","model/loader_collection","config","pixi"],function(e,t,i,s,n,o,r,a,h,l,c){"use strict";return c.scaleModes.DEFAULT=c.scaleModes.NEAREST,t.each(s.assetManifest,function(e){e.src=l.CDN+e.src,h.add(e)}),i.extend({imageView:null,canvasView:null,imageWidth:1136,imageHeight:640,canvasWidth:1024,canvasHeight:768,events:{"touchstart .js-backToHall":"onBackBtnTouchStart","touchend .js-backToHall":"onBackBtnClick"},initialize:function(){t.bindAll(this,"onTouchStart","onBackBtnTouchStart"),i.prototype.initialize.apply(this,arguments),this.gameShellMain=new r({arcadeContainer:this.$el}),e(document).on("touchstart",this.onTouchStart),this.$backBtn=this.$(".js-backToHall")},onTouchStart:function(e){a.get("page")===a.PAGES.GAME&&a.get("menu_visibility")!==!0&&e.preventDefault()},onBackBtnTouchStart:function(e){this.$backBtn.addClass("tap");var i=this;t.delay(function(){i.$backBtn.removeClass("tap")},300),e.stopPropagation()},onBackBtnClick:function(){n.trigger(n.EVENTS.SITE.MOBILE.RETURN_TO_CAROUSEL)},show:function(){this.gameShellMain.setup(),this.gameShellMain.show(),this.addEvents(),this.gameShellMain.onArcadeAniComplete(),this.initialiseSubviews(),this.resize(),e(window).on("resize",t.bind(this.resize,this))},hide:function(){this.gameShellMain&&this.gameShellMain.hide(),this.onHideComplete()},initialiseSubviews:function(){this.imageView=this.$el.find("img"),this.canvasView=this.$el.find("canvas")},addEvents:function(){},resize:function(){this.resizeShell()},resizeShell:function(){var e=a.get("viewport_height"),t=a.get("viewport_width");if(!(e>t)){var i,s=t/this.imageWidth,n=e/this.imageHeight;n>s?(i=s,this.setDimensions(i)):(i=n,this.setDimensions(i))}},setDimensions:function(e){var t=this.imageWidth*e,i=this.imageHeight*e;this.$el.css({width:t,height:i})}})}),define("util/google_maps",["jquery","config","underscore","backbone"],function(e,t,i,s){function n(t,i){var s={v:"3.12",sensor:"false",libraries:"places",callback:h};i&&(s.client=a.defaults.client=i),o=t,o&&(s.key=a.defaults.key=o),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://maps.google.com/maps/api/js?"+e.param(s),document.body.appendChild(t)}()}var o,r,a={maps:null,ready:!1,apiKey:null,defaults:{sensor:!1,format:"jpg"},init:function(){this.apiKey=t.getMapKey(),n(this.apiKey,null)},onLoadCallback:function(){i.extend(this,window.google.maps),this.ready=!0,this.trigger("ready")},renderAllInContainer:function(e){this.gapi.plusone.go(e)},getStaticMapURL:function(t){return i.defaults(t,this.defaults),"https://maps.googleapis.com/maps/api/staticmap?"+e.param(t,!0)},getStreetViewImageURL:function(t){return i.defaults(t,this.defaults),"https://maps.googleapis.com/maps/api/streetview?"+e.param(t,!0)},getReverseGeocodingURL:function(t){var s={};i.defaults(s,this.defaults);var n=[t.lat(),t.lng()].join(",");return i.extend(s,{latlng:n,key:this.apiKey}),"https://maps.googleapis.com/maps/api/geocode/json?"+e.param(s,!0)},isBiz:function(){return null!==r}},h=i.uniqueId("googleMapsOnComplete");return window[h]=i.bind(a.onLoadCallback,a),window.___gcfg={lang:"en-US",parsetags:"explicit"},i.extend(a,s.Events),a}),define("model/maps/map_model",["backbone","util/google_maps","underscore","jquery"],function(e,t,i){var s=e.Model.extend({defaults:{center:{lat:37.5,lng:-85},address:"",styles:[],zoom:12,minZoom:3,disableDefaultUI:!0},setStyles:function(e){this.set("styles",e)},setCenter:function(e){this.set("center",e)},getUserLocation:function(e){var i=e.success||function(){},s=e.error||function(){},n=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var s;t.ready?(s=new t.LatLng(e.coords.latitude,e.coords.longitude),n.set("center",s),i()):t.once("ready",function(){s=new t.LatLng(e.coords.latitude,e.coords.longitude),n.set("center",s),i()})},s):s()},getUserAddress:function(e){var i=e.success||function(){},s=e.error||function(){};if(!e.pos)return void s("No pos info");var n=new t.Geocoder;n.geocode({location:e.pos},function(e,n){if(n===t.GeocoderStatus.OK)if(e[0]){var o=e[0].formatted_address;i(o)}else s("No such address");else s(n)})},formatStylesForStaticMaps:function(){if(0===this.get("styles").length)return"";var e=[];return i.each(this.get("styles"),function(t){var s="",n="feature:"+t.featureType,o="element:"+(t.elementType||"all"),r=i.map(t.stylers,function(e){e.color&&(e.color=e.color.replace("#","0x"));var t=JSON.stringify(e),i=/[\s"{}]/g;return t.replace(i,"")});s+=[n,o].join("|"),s+="|"+r.join("|"),e.push(s)}),e}});return new s}),define("model/maps/store_location_collection",["console","underscore","jquery","backbone","config"],function(e,t,i,s,n){"use strict";var o=s.Collection.extend({url:n.getStoreLocatorAPI(),defaults:{},initialize:function(){},fetchData:function(e,i){var s=i.success||t.bind(this.onLoadSuccess,this),n=i.error||t.bind(this.onLoadError,this),o=e||{};this.fetch({method:"POST",data:o,success:s,error:n})},onLoadSuccess:function(){},onLoadError:function(t,i){e.error(i)},parse:function(e){return e.results}}),r=new o;return r}),define("controller/map_controller",["console","underscore","model/app_model","view/common/communicator","util/google_maps","model/maps/map_model","model/loader_collection","model/maps/store_location_collection","data/tracking_data"],function(e,t,i,s,n,o,r,a,h){var l={numSearches:0,init:function(){t.bindAll(this,"onDataLoaded","onError","onUserLocationSuccess","searchStoreLocationsByAddress"),s.on(s.EVENTS.SITE.DESKTOP.DEPARTED.FETCH_STORE_LOCATIONS,this.searchStoreLocationsByUserLocation,this),s.on(s.EVENTS.SITE.DESKTOP.DEPARTED.SEARCH,this.searchStoreLocationsByAddress,this)},searchStoreLocationsByUserLocation:function(){o.getUserLocation({success:this.onUserLocationSuccess,error:this.onError})},onUserLocationSuccess:function(){var e=o.get("center");o.getUserAddress({pos:e,success:this.searchStoreLocationsByAddress,error:this.onError})},searchStoreLocationsByAddress:function(e){if(e){this.numSearches++,s.trigger(s.EVENTS.TRACKING,h.TRACK_IDS.LEGACY_EVENTOF_KFC_STORE_SEARCHES,this.numSearches),s.trigger(s.EVENTS.TRACKING,h.TRACK_IDS.LEGACY_EVENT_MAP_SEARCH);var t={address:e,distance:"50"},i={success:this.onDataLoaded,error:this.onError};a.fetchData(t,i)}},onError:function(t){e.error(t)},onDataLoaded:function(){s.trigger(s.EVENTS.SITE.DESKTOP.DEPARTED.STORES_UPDATE)},onMapReady:function(){}};return l.init(),l}),define("view/modules/mobile/departed/search_view_mobile",["jquery","underscore","backbone","model/loader_collection","view/common/base_view","config","TweenMax","view/common/communicator","createjs","model/app_model"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=n.extend({loaderCanvas:null,loaderStage:null,active:!0,searchBox:null,searchInput:null,events:{"keyup .dp-search-input":"onKeyUp","click .dp-search-submit":"onSearch"},initialize:function(e){this.searchLoaderMC=e.searchLoaderMC,t.bindAll(this,"onStageUpdate","onResize"),this.initSearchBox(),this.createLoader(),this.onResize()},onResize:function(){var e=l.get("viewport_width")/900;e=Math.min(e,1),this.searchBox.css({"font-size":e+"rem"})},initSearchBox:function(){this.searchBox=this.$el,this.searchInput=this.searchBox.find("input"),this.noResultsBox=this.searchBox.find(".dp-no-results")},createLoader:function(){this.loaderCanvas=e(".dp-search-loader"),this.loaderCanvas.attr("width",this.searchLoaderMC.getBounds().width),this.loaderCanvas.attr("height",this.searchLoaderMC.getBounds().height),this.loaderStage=new h.Stage(this.loaderCanvas[0]),this.loaderStage.addChild(this.searchLoaderMC),h.Ticker.addEventListener("tick",this.onStageUpdate)},onKeyUp:function(e){13===e.keyCode&&this.onSearch()},onSearch:function(){if(this.active){var e=this.searchInput[0].value;e&&(this.deactivate(),this.searchInput.blur(),a.trigger(a.EVENTS.SITE.DESKTOP.DEPARTED.SEARCH,e),this.addLoader())}},addLoader:function(){this.removeNoResults(),r.to(this.loaderCanvas,.5,{y:"0%",ease:"Expo.easeOut"})},removeLoader:function(){r.killTweensOf(this.loaderCanvas),r.to(this.loaderCanvas,.5,{y:"-80%",ease:"Back.easeIn"})},addNoResults:function(){r.killTweensOf(this.noResultsBox),r.to(this.noResultsBox,.5,{y:"0%",ease:"Expo.easeOut",delay:.5})},removeNoResults:function(){r.killTweensOf(this.noResultsBox),r.to(this.noResultsBox,.5,{y:"-100%",ease:"Expo.easeOut"})},onStageUpdate:function(){this.loaderStage.update()},setup:function(){},activate:function(){this.active=!0},deactivate:function(){this.active=!1},enter:function(){var e=-(.07*this.$el.innerHeight());r.to(this.$el,1,{top:e,ease:"Expo.easeOut"})},leave:function(){var e=this.$el.innerHeight();r.to(this.$el,.5,{top:-e,ease:"Back.easeIn"})},destroy:function(){n.prototype.destroy.apply(this,arguments)}});return c}),define("view/modules/mobile/departed/col_life_mobile",["jquery","underscore","backbone","model/loader_collection","view/common/base_view","config","TweenMax","model/app_model","data/tracking_data","view/common/communicator"],function(e,t,i,s,n,o,r,a,h,l){"use strict";var c=n.extend({currentModel:null,dummyModelArray:[],paginationCircleArray:[],currentIndex:0,numChapters:6,closeButton:null,lifeContent:null,lifeContentInner:null,lifeScrollbarInner:null,lifeScrollbarCircle:null,scrollPos:0,active:!1,initY:0,scrollActive:!0,initialize:function(i){t.bindAll(this,"leave","onLeaveComplete","onScroll","onTouchStart","onResize"),this.closeButton=i.closeButton,this.lifeContent=this.$el.find(".life-content"),this.lifeContentInner=this.$el.find(".life-content-inner"),this.lifeScrollbarInner=this.$el.find(".life-scrollbar-inner"),this.lifeScrollbarCircle=this.$el.find(".life-scrollbar-circle"),this.arrowTop=this.$el.find("#arrow-top"),this.arrowBottom=this.$el.find("#arrow-bottom"),this.addEvents();var s=e("#rootNodeDesktop").innerWidth();this.onResize({width:s}),this.addScrollEvents(),this.removeScrollEvents()},isScrollActive:function(){this.lifeContentInner.innerHeight()<=this.lifeContent.innerHeight()?(this.scrollActive=!1,e(".life-scrollbar").css({display:"none"})):(this.scrollActive=!0,e(".life-scrollbar").css({display:"inline-block"}))},addEvents:function(){this.closeButton.on("click",this.leave),this.lifeScrollbarCircle.on("mousedown",this.onCircleMouseDown),e(window).on("mouseup",this.onCircleMouseUp),e(window).on("mousemove",this.onCircleMouseMove),a.on("resize_app",this.onResize)},removeEvents:function(){this.closeButton.off("click",this.leave),a.off("resize_app",this.onResize),this.lifeScrollbarCircle.off("mousedown",this.onCircleMouseDown),e(window).off("mouseup",this.onCircleMouseUp),e(window).off("mousemove",this.onCircleMouseMove)},enter:function(){this.active=!0,r.killTweensOf(this.$el,this.closeButton),this.$el.css({display:"block"}),r.to(this.$el,.5,{opacity:1,ease:"Expo.easeOut"}),r.to(this.closeButton,1,{y:"0%",ease:"Expo.easeOut",delay:.5}),this.addScrollEvents(),this.onScroll({deltaY:-999,duration:0}),this.isScrollActive()},leave:function(){l.trigger(l.EVENTS.SITE.DESKTOP.DEPARTED.TRIGGER_SOUND,l.EVENTS.SITE.SOUNDS.CAROUSEL.HALL_CLICK_LIGHT_05),this.active&&(this.active=!1,r.killTweensOf(this.$el,this.closeButton),r.to(this.$el,.5,{opacity:0,ease:"Expo.easeOut",onComplete:this.onLeaveComplete}),r.to(this.closeButton,.5,{y:"-100%",ease:"Back.easeIn"}),this.removeScrollEvents())},addScrollEvents:function(){this.arrowTop.on("mousedown",t.bind(this.onScroll,this,{deltaY:-60})),this.arrowBottom.on("mousedown",t.bind(this.onScroll,this,{deltaY:60})),this.lifeContent.on("touchmove",this.onScroll),this.lifeContent.on("touchstart",this.onTouchStart)},removeScrollEvents:function(){this.arrowBottom.off("mousedown"),this.arrowTop.off("mousedown"),this.lifeContent.off("touchmove",this.onScroll),this.lifeContent.off("touchstart",this.onTouchStart)},onTouchStart:function(e){e.preventDefault(),this.initY=e.originalEvent.touches[0].clientY},onScroll:function(e){if(this.scrollActive){r.killTweensOf(this.lifeContentInner);var t,i=void 0!==e.duration?0:1;e.originalEvent?(e.preventDefault(),t=-(e.originalEvent.touches[0].clientY-this.initY),this.initY=e.originalEvent.touches[0].clientY):t=e.deltaY,this.scrollPos+=t,this.scrollPos=Math.max(0,this.scrollPos),this.maxHeight=this.lifeContentInner.innerHeight()-this.lifeContent.innerHeight(),this.scrollPos=Math.min(this.maxHeight,this.scrollPos),r.to(this.lifeContentInner,i,{y:-this.scrollPos,ease:"Expo.easeOut"}),this.setCirclePosition(this.scrollPos)}},setCirclePosition:function(){r.killTweensOf(this.lifeScrollbarCircle);var e=this.scrollPos/this.maxHeight,t=this.lifeScrollbarInner.innerHeight(),i=e*(t-this.lifeScrollbarCircle.innerHeight());r.to(this.lifeScrollbarCircle,1,{y:i,ease:"Expo.easeOut"})},onResize:function(){this.isScrollActive(),this.scrollActive&&(this.scrollPos=Math.max(0,this.scrollPos),this.maxHeight=this.lifeContentInner.innerHeight()-this.lifeContent.innerHeight(),this.scrollPos=Math.min(this.maxHeight,this.scrollPos),r.killTweensOf(this.lifeContentInner),r.to(this.lifeContentInner,1,{y:-this.scrollPos,ease:"Expo.easeOut",force3D:!0}),this.setCirclePosition())},onLeaveComplete:function(){this.$el.css({display:"none"}),this.trigger("close")},destroy:function(){this.removeEvents(),this.removeScrollEvents(),n.prototype.destroy.apply(this,arguments)}});return c.extend(i.Events),c}),define("view/modules/mobile/departed/hover_view_mobile",["jquery","underscore","backbone","model/loader_collection","view/common/base_view","config","TweenMax","model/app_model"],function(e,t,i,s,n,o,r){"use strict";var a=n.extend({location:null,position:null,line:null,fontSize:1,hoverSvg:null,initialize:function(e){this.location=e.location,this.position=e.position,this.initSubviews()},initSubviews:function(){var t=e(s.getResult("hover_connector")).clone();this.hoverBackground=e(s.getResult("hover_background")).clone(),this.hoverShadow=e(s.getResult("hover_shadow")).clone(),this.container=e("<div></div>"),this.container.addClass("dp-hover-container"),this.line=e("<div></div>"),this.line.addClass("dp-hover-line");var i=this.location+" Store";this.paragraph=e("<p></p>"),this.paragraph.text(i),this.innerContainer=e("<div></div>"),this.innerContainer.css({position:"relative"}),this.hoverSvg=e("<svg><use xlink:href='#icon-directions_mobile'></svg>"),this.innerContainer.append(this.hoverSvg[0]),this.innerContainer.append(this.hoverBackground[0]),this.innerContainer.append(this.paragraph[0]),this.innerContainer.addClass("dp-hover-inner"),this.container.append(this.line[0]),this.container.append(t[0]),this.container.append(this.innerContainer[0]),this.container.append(this.hoverShadow[0]);var n=this.getFontSize(),o=e(".dp-map-container").innerWidth(),r=o/2-50;this.container.css({top:"-80px",left:r+"px","font-size":n+"rem"}),this.addEvents()},addEvents:function(){this.hoverSvg.on("touchend",t.bind(this.onSvgTouch,this))},removeEvents:function(){this.hoverSvg.off("touchend",this.onSvgTouch)},onSvgTouch:function(){this.trigger("click")},enter:function(){r.killTweensOf(this.container);var e=this.container.parent().innerHeight(),t=e/2-40;this.container.css({"transform-origin":"50px "+-t+"px"}),r.to(this.container,.5,{top:t,ease:"Back.easeOut",delay:.2})},getFontSize:function(){var t=e("#rootNodeMobile").innerWidth();return Math.min(t/400,1.25)},leave:function(e){var t=e||function(){};r.killTweensOf(this.container),r.to(this.container,.5,{top:"-80px",ease:"Expo.easeIn",onComplete:t})},setup:function(){},show:function(){},destroy:function(){this.removeEvents(),this.container.remove(),n.prototype.destroy.apply(this,arguments)}});return a.extend(i.Events),a}),define("view/modules/mobile/departed/marker_view_mobile",["jquery","underscore","backbone","model/loader_collection","view/common/base_view","config","util/google_maps","view/modules/mobile/departed/hover_view_mobile"],function(e,t,i,s,n,o,r,a){"use strict";var h=n.extend({hoverView:null,marker:null,latLng:null,locationModel:null,mapContainer:null,mapOverlay:null,initialize:function(e){var t=new r.Size(40,40),i={url:o.CDN+"/img/maps/kfc_store_icon.png",scaledSize:t};this.marker=new r.Marker({position:e.latLng,map:e.map,icon:i}),this.latLng=e.latLng,this.locationModel=e.locationModel,this.mapContainer=e.mapContainer,this.mapOverlay=e.mapOverlay,this.addEvents()},addEvents:function(){r.event.addListener(this.marker,"click",t.bind(this.onMarkerClick,this)),r.event.addListener(this.marker,"mouseout",t.bind(this.onMarkerMouseOut,this))},onMarkerClick:function(){this.onMarkerMouseOver(),this.trigger("click",this)},onMarkerMouseOver:function(){if(!this.hoverView){var e=this.mapContainer.innerHeight();this.hoverView=new a({position:e,location:this.locationModel.get("addressLine")}),this.hoverView.on("click",t.bind(this.onDirButtonClick,this)),this.mapContainer.append(this.hoverView.container)}this.hoverView.enter()},onMarkerMouseOut:function(){this.hoverView&&this.hoverView.leave(t.bind(this.onHoverLeaveComplete,this))},onHoverLeaveComplete:function(){this.hoverView.destroy(),this.hoverView.off("click"),this.hoverView=null},onDirButtonClick:function(){if(this.locationModel){var e=this.locationModel.get("latitude"),t=this.locationModel.get("longitude"),i=[e,t].join(","),s="https://www.google.com/maps?saddr=My+Location&daddr="+i;window.open(s,"_blank")}},setup:function(){},show:function(){},destroy:function(){this.onMarkerMouseOut(),r.event.clearInstanceListeners(this.marker),this.marker.setMap(null),n.prototype.destroy.apply(this,arguments)}});return h.extend(i.Events),h}),define("view/modules/mobile/departed/map_view_mobile",["jquery","underscore","backbone","model/loader_collection","config","view/common/base_view","util/google_maps","model/maps/map_model","model/maps/store_location_collection","createjs","view/modules/mobile/departed/search_view_mobile","view/modules/mobile/departed/col_life_mobile","TweenMax","model/app_model","view/modules/mobile/departed/marker_view_mobile"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p){"use strict";var m=o.extend({map:null,mapContainer:null,mapOverlay:null,mapCanvas:null,mapConfig:{},markersArray:[],lib:null,colonelsLifeView:null,initialize:function(e){this.lib=e.lib,this.setup()},setup:function(){if(0===a.get("styles").length){var e=s.getResult("map_styles");a.setStyles(e)}this.initialiseSubviews(),this.addEvents()},initialiseSubviews:function(){this.mapContainer=this.$el.find(".dp-map-container"),this.mapCanvas=this.$el.find(".dp-map-canvas"),this.hoverContainer=this.$el.find("#hover-container"),this.addSearchView(),this.colonelsLifeView=new d({el:".dp-col-life",closeButton:e(".dp-life-close-btn")}),this.learnMoreButton=this.$el.find(".dp-col-life-btn"),this.learnMorePane=this.learnMoreButton.find("#dp-learn-more-btn")},addMapOverlay:function(){var t=s.getResult("map_overlay");this.mapOverlay=e(t),this.mapOverlay.addClass("dp-map-overlay"),this.mapContainer.append(this.mapOverlay[0])},addEvents:function(){a.on("change:center",this.setCenter,this),g.on("resize_app",this.onResizeApp,this),e(".dp-col-life-btn").on("click",t.bind(this.onViewColonelsLife,this)),this.colonelsLifeView.on("close",this.onCloseColonelsLife,this)},removeEvents:function(){e(".dp-col-life-btn").off("click")},initialiseMap:function(){var e=a.toJSON();this.map=new r.Map(this.mapCanvas[0],e),this.googleMapOverlay=new r.OverlayView,this.googleMapOverlay.draw=function(){},this.googleMapOverlay.setMap(this.map)},addSearchView:function(){this.searchView=new c({el:".dp-search-box-container",searchLoaderMC:new this.lib.ASearch_loader})},addLocations:function(){var e=this;if(this.searchView.activate(),!(h.models.length>0))return this.searchView.removeLoader(),void this.searchView.addNoResults();var i=h.models[0],s=new r.LatLng(i.get("latitude"),i.get("longitude"));this.setCenter(null,s),this.searchView.removeLoader(),this.removeAllMarkers(),h.each(function(i){var s=new r.LatLng(i.get("latitude"),i.get("longitude")),n=new p({map:e.map,latLng:s,locationModel:i,mapContainer:e.mapContainer,mapOverlay:e.googleMapOverlay});n.on("click",t.bind(e.markerOnClick,e)),e.markersArray.push(n)})},removeAllMarkers:function(){t.each(this.markersArray,function(e){e.destroy()}),this.markersArray=[]},markerOnClick:function(e){this.map.panTo(e.latLng);var t=this.map.getDiv();this.map.panBy(0,-t.offsetHeight/4)},setCenter:function(e,t){this.map.panTo(t)},onViewColonelsLife:function(){this.hideLearnMoreButton(),this.colonelsLifeView.enter(),this.searchView.leave(),t.each(this.markersArray,function(e){e.onMarkerMouseOut()})},onCloseColonelsLife:function(){this.showLearnMoreButton(),this.searchView.enter()},hideLearnMoreButton:function(){u.killTweensOf(this.learnMorePane),this.learnMoreButton.css({"pointer-events":"none"}),u.to(this.learnMorePane,1,{force3D:!0,y:"100%",ease:"Expo.easeOut"})},showLearnMoreButton:function(){u.killTweensOf(this.learnMorePane),this.learnMoreButton.css({"pointer-events":"auto"}),u.to(this.learnMorePane,1,{force3D:!0,y:"0%",ease:"Expo.easeOut"})},show:function(){},destroy:function(){this.removeEvents(),a.off(),this.stopListening(),this.off()}});return m}),define("view/animations/createjs_animations/mobile/departed_mobile",[],function(){"use strict";return{manifest:[{src:"/js/view/animations/createjs_animations/mobile/departed_mobile.lib.js",id:"departed_mobile.lib.js"},{src:"/img/easel/mobile/departed_mobile/departed_mobile_0_sheet.png",createjs:{ns:"departed_mobile",spritesheet:[{x:0,y:0,width:245,height:62,id:"open_searching_loader",src:"images/open_searching_loader.png"},{x:0,y:64,width:191,height:21,id:"open_searching_loaderbar",src:"images/open_searching_loaderbar.png"}],width:245,height:85}}],root:"departed_mobile",ns:"departed_mobile",width:"250",height:"65",fps:"30",js:"departed_mobile.lib.js"}}),define("view/pages/mobile/departed",["jquery","underscore","config","view/pages/mobile/mobile_base_view","view/common/communicator","backbone","model/app_model","model/loader_collection","controller/map_controller","model/maps/map_model","util/google_maps","model/maps/store_location_collection","TweenMax","view/modules/mobile/departed/map_view_mobile","view/animations/createjs_animations/mobile/departed_mobile","view/common/createjs_animation"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m){"use strict";n.trigger(n.EVENTS.LOADER.ADD_TO_QUEUE,{id:"map_styles",src:i.CDN+"/data/map_styles.json"}),n.trigger(n.EVENTS.LOADER.ADD_TO_QUEUE,{id:"map_overlay",src:i.CDN+"/img/maps/map_overlay.png"});var _=[{id:"hover_connector",src:i.CDN+"/img/maps/hover_connector.png"},{id:"hover_background",src:i.CDN+"/img/maps/hover_background.png"},{id:"hover_shadow",src:i.CDN+"/img/maps/hover_shadow.png"}],f=[{id:"intro_backing",src:i.CDN+"/audio/departed/requiem_music.mp3"},{id:"intro_vo",src:i.CDN+"/audio/departed/07_dearly_departed.mp3"}];return n.trigger(n.EVENTS.LOADER.ADD_TO_QUEUE,_),n.trigger(n.EVENTS.LOADER.ADD_TO_QUEUE,f),n.trigger(n.EVENTS.LOADER.ADD_TO_QUEUE,p.manifest),s.extend({map:null,mapCanvas:null,mapContainer:null,departedAnimation:null,mobilePillars:null,mobileOverlay:null,initialize:function(){s.prototype.initialize.apply(this,arguments),this.departedAnimation=new m(p),this.mapContainer=this.$el.find("#dp-map-container"),this.mobilePillars=this.$el.find("#dp-mobile-pillars"),this.mobileOverlay=this.$el.find("#dp-overlay-shading"),c.init()},onViewReady:function(){this.backingIntroRequest=this.createSoundRequest({id:"intro_backing"}),this.introVoiceRequest=this.createSoundRequest({id:"intro_vo"})},addEvents:function(){n.on(n.EVENTS.SITE.DESKTOP.DEPARTED.STORES_UPDATE,this.onStoreCollectionUpdate,this)},show:function(){this.addEvents(),c.ready?this.onGoogleMapsReady():c.once("ready",this.onGoogleMapsReady,this),this.playSound(this.backingIntroRequest),this.playSound(this.introVoiceRequest)},onGoogleMapsReady:function(){this.mapView=new g({el:".dp-map-inner",lib:this.departedAnimation.lib}),this.mapView.initialiseMap(),n.trigger(n.EVENTS.SITE.DESKTOP.DEPARTED.FETCH_STORE_LOCATIONS)},onStoreCollectionUpdate:function(){this.mapView.addLocations()},onResize:function(){var e,t,i=r.get("viewport_height"),s=r.get("viewport_width"),n=1200/628,o=897/1061,a=519/555;s>i?(e=i*n,t=i,e>s&&(e=s,t=s/n)):(e=i*n,t=i);var h=.02*t,l=t*a*.99-h,c=e*o*.99;this.mobilePillars.css({height:t+"px",width:e+"px"}),this.mobileOverlay.css({height:l+"px",width:c+"px",bottom:0,position:"absolute"}),this.mapContainer.css({height:l+"px",width:c+"px",bottom:h})},destroy:function(){s.prototype.destroy.apply(this,arguments),this.stopSound(this.backingIntroRequest,{time:1}),this.stopSound(this.introVoiceRequest,{time:1}),this.mapView.destroy()}})}),function e(t,i,s){function n(r,a){if(!i[r]){if(!t[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=i[r]={exports:{}};t[r][0].call(l.exports,function(e){var i=t[r][1][e];return n(i?i:e)},l,l.exports,e,t,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(e,t){(function(e){function i(){var e={},t={};return e.on=function(e,i){var s={name:e,handler:i};return t[e]=t[e]||[],t[e].unshift(s),s},e.off=function(e){var i=t[e.name].indexOf(e);-1!=i&&t[e.name].splice(i,1)},e.trigger=function(e,i){var s,n=t[e];if(n)for(s=n.length;s--;)n[s].handler(i)},e}e.gajus=e.gajus||{},e.gajus.Sister=i,t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t){(function(i){var s,n=e("sister");s=function o(e){var t,s,r,a={};if(!(this instanceof o))return new o(e);if(t=this,!(e.viewport&&e.viewport instanceof gajus.Scream))throw new Error('Configuration property "viewport" must be an instance of Scream.');s=e.viewport,t._setupDOMEventListeners=function(){s.on("orientationchangeend",function(){t._treadmill(),t._main(),t._mask()}),s.on("viewchange",function(e){t._main(),t._mask(),r.trigger("viewchange",e)}),t._main(),t._mask(),function(){var e;i.document.addEventListener("touchstart",function(){e=!0}),i.document.addEventListener("touchmove",function(){s.isMinimalView()&&e,e=!1})}()},t._treadmill=function(){i.scrollTo(0,1e3)},t._mask=function(){s.isMinimalView()?a.mask.style.display="none":(a.mask.style.display="block",a.mask.style.width=i.innerWidth+"px",a.mask.style.height=2*i.innerHeight+"px",t._repaintElement(a.mask))},t._main=function(){a.main.style.width=i.innerWidth+"px",a.main.style.height=i.innerHeight+"px",t._repaintElement(a.main)},t._makeTreadmill=function(){var e=document.querySelector("#brim-treadmill");if(e)throw new Error("There is an existing treadmill element.");return e=document.createElement("div"),e.id="brim-treadmill",document.body.appendChild(e),e.style.visibility="hidden",e.style.position="relative",e.style.zIndex=10,e.style.left=0,e.style.width="1px",e.style.height="9999999999999999px",e},t._makeMask=function(){var e=document.querySelector("#brim-mask");if(!e)throw new Error("Mask element does not exist.");return e.style.position="fixed",e.style.zIndex=30,e.style.top=0,e.style.left=0,e},t._makeMain=function(){var e=document.querySelector("#brim-main");if(!e)throw new Error("Main element does not exist.");return e.style.position="fixed",e.style.zIndex=20,e.style.top=0,e.style.left=0,e.style.overflowY="scroll",e.style.webkitOverflowScrolling="touch",e},t._makeDOM=function(){a.treadmill=t._makeTreadmill(),a.mask=t._makeMask(),a.main=t._makeMain()},t._repaintElement=function(e){e.style.webkitTransform="translateZ(0)",e.style.display="none",e.offsetHeight,e.style.display="block"},r=n(),t.on=r.on,t._makeDOM(),t._setupDOMEventListeners()},i.gajus=i.gajus||{},i.gajus.Brim=s,t.exports=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{sister:1}]},{},[2]),define("libs/brim",function(e){return function(){var t;return t||e.Brim}}(this)),function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return n(i?i:t)},l,l.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(e,t){(function(i){var s,n=e("sister");s=function o(e){var t,s,r;return this instanceof o?(r=n(),t=this,t.on=r.on,e=e||{},e.noChangeCountToEnd=e.noChangeCountToEnd||100,e.noEndTimeout=1e3,e.debug=e.debug||!1,void i.addEventListener("orientationchange",function(){var t,n,o,a,h,l;o=function(e){clearInterval(t),clearTimeout(n),t=null,n=null,e&&r.trigger("orientationchangeend")},s&&s(!1),s=o,t=setInterval(function(){i.innerWidth===a&&i.innerHeight===h?(l++,l===e.noChangeCountToEnd&&(e.debug&&console.debug("setInterval"),o(!0))):(a=i.innerWidth,h=i.innerHeight,l=0)}),n=setTimeout(function(){e.debug&&console.debug("setTimeout"),o(!0)},e.noEndTimeout)})):new o(e)},i.gajus=i.gajus||{},i.gajus.orientationchangeend=s,t.exports=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{sister:2}],2:[function(e,t){(function(e){function i(){var e={},t={};return e.on=function(e,i){var s={name:e,handler:i};return t[e]=t[e]||[],t[e].unshift(s),s},e.off=function(e){var i=t[e.name].indexOf(e);-1!=i&&t[e.name].splice(i,1)},e.trigger=function(e,i){var s,n=t[e];if(n)for(s=n.length;s--;)n[s].handler(i)},e}e.gajus=e.gajus||{},e.gajus.Sister=i,t.exports=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t){(function(i){"use strict";var s,n=e("sister"),o=e("orientationchangeend")();s=function r(e){var t,s;return this instanceof r?(t=this,s=n(),e=e||{},e.width=e.width||{},e.width.portrait||(e.width.portrait=i.screen.width),e.width.landscape||(e.width.landscape=i.screen.width),t.getViewportWidth=function(){return e.width[t.getOrientation()]},t.getViewportHeight=function(){return Math.round(t.getScreenHeight()/t.getScale())},t.getScale=function(){return t.getScreenWidth()/t.getViewportWidth()},t.getOrientation=function(){return 0===i.orientation||180===i.orientation?"portrait":"landscape"},t.getScreenWidth=function(){return i.screen["portrait"===t.getOrientation()?"width":"height"]},t.getScreenHeight=function(){return i.screen["portrait"===t.getOrientation()?"height":"width"]},t._updateViewport=function(){var e,s,n,o,r;n=t.getViewportWidth(),o=t.getScale(),r="width="+n+", initial-scale="+o+", minimum-scale="+o+", maximum-scale="+o+", user-scalable=0",s=document.createElement("meta"),s.name="viewport",s.content=r,e=i.document.head.querySelector('meta[name="viewport"]'),e&&e.parentNode.removeChild(e),i.document.head.appendChild(s)},t._deviceSpec=function(){var e,t,s;for(e=[[1280,1762,1920,1280,320,480,2,"iPhone 4"],[1280,2114,2272,1280,320,568,2,"iPhone 5 or 5s"],[1500,2510,2668,1500,375,667,2,"iPhone 6"],[1656,2785,2944,1656,414,736,3,"iPhone 6 plus"],[3072,3936,4096,2912,768,1024,1,"iPad 2"],[3072,3938,4096,2914,768,1024,2,"iPad Air or Retina"]],s=e.length;s--;)if(i.screen.width===e[s][4]&&i.screen.height===e[s][5]&&i.devicePixelRatio===e[s][6]){t=e[s];
break}return t},t._getMinimalViewHeight=function(){var e,i,s=t.getOrientation();if(e=t._deviceSpec(),!e)throw new Error("Not a known iOS device. If you are using an iOS device, report it to https://github.com/gajus/scream/issues/1.");return i=Math.round("portrait"===s?t.getViewportWidth()*e[1]/e[0]:t.getViewportWidth()*e[3]/e[2])},t.getMinimalViewSize=function(){var e=t.getViewportWidth(),i=t._getMinimalViewHeight();return{width:e,height:i}},t.isMinimalView=function(){return i.innerHeight===t.getMinimalViewSize().height},t._detectViewChange=function(){var e;return t._deviceSpec()?function(){var i=t.isMinimalView()?"minimal":"full";e!==i&&(s.trigger("viewchange",{viewName:i}),e=i)}:(console.log("View change detection has been disabled. Unrecognized device. If you are using an iOS device, report it to https://github.com/gajus/scream/issues/1."),function(){})},t._detectViewChange=t._detectViewChange(),t._setupDOMEventListeners=function(){var e;i.matchMedia("(orientation: portrait)").addListener(function(){e=!0}),o.on("orientationchangeend",function(){e=!1,t._updateViewport(),t._detectViewChange(),s.trigger("orientationchangeend")}),i.addEventListener("orientationchange",function(){t._updateViewport()}),i.addEventListener("resize",function(){e||t._detectViewChange()}),i.addEventListener("scroll",function(){e||t._detectViewChange()}),setTimeout(function(){t._detectViewChange()})},t._updateViewport(),t._setupDOMEventListeners(),void(t.on=s.on)):new r(e)},i.gajus=i.gajus||{},i.gajus.Scream=s,t.exports=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{orientationchangeend:1,sister:2}]},{},[3]),define("libs/scream",function(e){return function(){var t;return t||e.Scream}}(this)),define("shims/shim_animation_function",["createjs","view/common/communicator"],function(e,t){"use strict";return window.project_colonel_archive_canvas={defineStageObject:function(e,i){t.trigger(t.EVENTS.SITE.EASEL.STAGE_OBJECT_DEFINED,{clip:e,id:i})},darkenStageObject:function(e,i){t.trigger(t.EVENTS.SITE.EASEL.STAGE_OBJECT_DARKEN,i)},changeLightOnColonel:function(t,i,s){var n=new e.Event("lighten_colonel",!0);n.clipName=i,n.darken=s,t.dispatchEvent(n)},openCurtains:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.OPEN_CURTAINS)},showBackButton:function(){t.trigger(t.EVENTS.SITE.EASEL.SHOW_BACK_BUTTON)},welcome:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.WELCOME)},closedCurtain:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.CLOSED_CURTAINS)},lightenStageObject:function(e,i){t.trigger(t.EVENTS.SITE.EASEL.STAGE_OBJECT_LIGHTEN,i)},defineDarkenClip:function(t){var i=new e.Event("darken_clip_defined",!0);t.dispatchEvent(i)},wobbleOffScreen:function(i,s){var n=new e.Event("wobble_offScreen",!0);n.clipName=s,i.dispatchEvent(n),t.trigger(t.EVENTS.SITE.EASEL.WOBBLE_COLONEL_OFF_SCREEN,{origin:i,clipName:s})},stoppedOffScreen:function(t,i){var s=new e.Event("wobble_offScreen_done",!0);s.clipName=i,t.dispatchEvent(s)},slideBucket:function(e,i){t.trigger(t.EVENTS.SITE.EASEL.HALL.SLIDE_BUCKET,i)},isLifting:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.SMALL_LIFT)},moveClose:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.MOVE_CLOSE)},colonelOutOforder:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.COLONEL_OUT_OF_ORDER)},consoleForward:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.CONSOLE_FORWARD)},ropeStretch:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.ROPE_STRETCH)},rachet:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.RACHET)},bucketHitsFloor:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.BUCKET_HITS_FLOOR)},movingColonelToFront:function(e){t.trigger(t.EVENTS.SITE.EASEL.HALL.COLONEL_MOVES_TO_FRONT,e)},movingColonelToBack:function(i,s){var n=new e.Event("moving_colonel_to_back",!0);i.dispatchEvent(n),t.trigger(t.EVENTS.SITE.EASEL.HALL.COLONEL_MOVES_TO_START_POS,s)},allColonelsStopped:function(){t.trigger(t.EVENTS.SITE.EASEL.HALL.COLONELS_STOPPED_MOVING)},wobbleOnScreen:function(i,s){var n=new e.Event("wobble_onScreen",!0);n.clipName=s,i.dispatchEvent(n),t.trigger(t.EVENTS.SITE.EASEL.WOBBLE_COLONEL_ON_SCREEN,{origin:i,clipName:s})},bounceToHalt:function(i,s){var n=new e.Event("bounce_to_halt",!0);n.clipName=s,i.dispatchEvent(n),t.trigger(t.EVENTS.SITE.EASEL.COLONEL_BOUNCE_TO_HALT,{origin:i,clipName:s})}},window.project_colonel_archive_canvas}),define("main_mobile",["jquery","underscore","config","route/router","route/route_object","controller/mobile/app_controller","controller/mobile/loader_controller","controller/sound_controller","controller/share_controller","controller/prize_controller","controller/tracking_controller","model/app_model","view/common/transitioner/transitioner","view/pages/mobile/loader","view/pages/mobile/carousel","view/common/transitioner/types/hide_show_transition_mobile","view/pages/mobile/early_years","view/pages/mobile/gun_fight","view/pages/mobile/about","view/pages/mobile/mandolin","view/modules/mobile/shell","view/pages/mobile/loose_lipped","view/pages/mobile/arcade","view/pages/mobile/departed","view/common/communicator","libs/brim","libs/scream","shims/shim_animation_function","TweenMax"],function(e,t,i,s,n,o,r,a,h,l,c,d,u,g,p,m,_,f,v,E,y,T,S,C,w,b,A,L,x){"use strict";s.setRoutes([new n([""],d.PAGES.CAROUSEL),new n(["early-years"],d.PAGES.EARLY_YEARS),new n(["gasoline-gun-fight"],d.PAGES.GUN_FIGHT),new n(["plays-mandolin"],d.PAGES.MANDOLIN),new n(["kfc-secret-recipe-revealed"],d.PAGES.LOOSE_LIPS),new n(["colonelquest"],d.PAGES.GAME),new n(["legacy"],d.PAGES.DEPARTED_COLONEL)]);var M={};return M[d.PAGES.LOADER]={className:g,nodeSelector:".js-loader-mobile"},M[d.PAGES.CAROUSEL]={className:p,nodeSelector:".js-carousel-mobile"},M[d.PAGES.EARLY_YEARS]={className:_,nodeSelector:".js-early-years-mobile"},M[d.PAGES.GUN_FIGHT]={className:f,nodeSelector:".js-gunfight-mobile"},M[d.PAGES.MANDOLIN]={className:E,nodeSelector:".js-mandolin-mobile"},M[d.PAGES.LOOSE_LIPS]={className:T,nodeSelector:".js-loose-lipped-mobile"},M[d.PAGES.GAME]={className:S,nodeSelector:".js-arcade-mobile"},M[d.PAGES.DEPARTED_COLONEL]={className:C,nodeSelector:".js-departed-mobile"},M[d.PAGES.ABOUT]={className:C,nodeSelector:".js-about-mobile"},{rootNode:e("#rootNodeMobile"),transitioner:null,start:function(){e("#rootNodeDesktop, #rootNodeOld").remove(),i.IOS&&i.IOS7&&e("html").addClass("ios7"),this.transitioner=new u({el:this.rootNode,viewMap:M,transition:new m}),t.bindAll(this,"delayedResize"),this.shell=new y({el:this.rootNode.find(".js-shell")}),d.on("resize",this.onAppModelResize,this),window.onresize=t.bind(this.onResize,this),this.onResize(),this.addClasses(),r.start(),s.start()},addClasses:function(){e("html").addClass(i.isMac()?"mac":"not-mac"),i.isChrome()?e("html").addClass("chrome"):i.isSafari()?e("html").addClass("safari"):i.isFirefox()&&e("html").addClass("firefox")},delayedResize:function(){w.trigger(w.EVENTS.APP.RESIZE,window.innerWidth,window.innerHeight)},onResize:function(){window.scrollTo(0,0),x.delayedCall(.5,this.delayedResize),x.delayedCall(1.5,this.delayedResize),x.delayedCall(3.5,this.delayedResize),w.trigger(w.EVENTS.APP.RESIZE,window.innerWidth,window.innerHeight)},onAppModelResize:function(e,t){this.rootNode.innerHeight(t),this.transitioner.onResize()}}});