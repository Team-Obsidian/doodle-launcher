define(["jquery","config","libs/mocha","libs/expect","tests/testing-main","tests/project-tests","tests/map-tests"],function(t,e,s,n,i,o,a){var r=s;window.mochaPhantomJS?r=window.mochaPhantomJS:(t("body").append(t("<div/>",{id:"mocha",style:"position: fixed; top: 10px; left: 10px; z-index: 99999; opacity: 0.8; padding: 20px; min-width: 500px; max-height: 80%; overflow-y: scroll; background-color: grey;"})).append(t('<link rel="stylesheet" href="'+e.CDN+'/js/tests/mocha.css">')),r.reporter("html"));var c={defineTests:function(){_.each([i,o,a],function(t){t()},this)},run:function(){function t(t,e){var n=function(t){for(var e=[];t.parent.title;)e.push(t.parent.title),t=t.parent;return e.reverse()};s.push({name:t.title,result:!1,message:e.message,stack:e.stack,titles:n(t)})}this.defineTests();var e=r.run(),s=[];e.on("end",function(){window.mochaResults=e.stats,window.mochaResults.reports=s}),e.on("fail",t)}};return c});