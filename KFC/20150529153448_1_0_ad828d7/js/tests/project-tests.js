define(["jquery","config","libs/mocha","libs/expect","model/loader_collection","model/app_model","route/router","view/common/communicator"],function(o,t,e,n,i,a,s,c){return function(){e.ui("bdd"),describe("Project default user flow",function(){afterEach(function(){a.off(null,null,self),i.off(null,null,self),c.off(null,null,self)});var o=_.bind(function(o,t){t.timeout(4e4),c.on(c.EVENTS.SITE.PAGE_TRANSITIONS.SHOW_COMPLETE,function(){n(a.get("page")).to.be(a.PAGES.CAROUSEL),o()},self),s.navigate(a.PAGES.CAROUSEL)},this),t=_.bind(function(o,t,e,c){c.timeout(3e5),a.on("change:page",function(){n(a.get("page")).to.be(t),i.hasLoaded(e)?o():i.on("complete",function(t){t.group===e&&o()},self)},self),s.navigate(t)},this);it("starts preloading",function(o){i.hasLoaded()?o():a.get("page")===a.PAGES.LOADER?o():a.on("change:page",function(){n(a.get("page")).to.be(a.PAGES.LOADER),o()},self)}),it("ends preloading",function(o){i.hasLoaded()?(n(a.get("page")).not.to.be(a.PAGES.LOADER),o()):a.on("change:page",function(){n(a.get("page")).not.to.be(a.PAGES.LOADER),o()},self)}),it('goes to "early years"',function(o){t(o,a.PAGES.EARLY_YEARS,"early_years",this)}),it("goes back to carousel",function(t){o(t,this)}),it("goes  to gun fight",function(o){t(o,a.PAGES.GUN_FIGHT,"gun_fight",this)}),it("goes back to carousel",function(t){o(t,this)}),it("goes  to mandolin",function(o){t(o,a.PAGES.MANDOLIN,"mandolin",this)}),it("goes back to carousel",function(t){o(t,this)}),it("goes  to loose lips",function(o){t(o,a.PAGES.LOOSE_LIPS,"loose_lips",this)}),it("goes back to carousel",function(t){o(t,this)}),it("goes  to departed",function(o){t(o,a.PAGES.DEPARTED_COLONEL,"maps",this)})})}});